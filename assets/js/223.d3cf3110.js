(window.webpackJsonp=window.webpackJsonp||[]).push([[223],{715:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("img",{attrs:{src:"https://img.starfish.ink/common/faq-banner.png",alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("å¤§æ•°æ®æŠ€æœ¯æ ˆæ˜¯ç°ä»£äº’è”ç½‘ä¼ä¸šçš„æŠ€æœ¯åŸºçŸ³ï¼Œä»"),a("strong",[t._v("åˆ†å¸ƒå¼å­˜å‚¨")]),t._v("åˆ°"),a("strong",[t._v("å®æ—¶è®¡ç®—")]),t._v("ï¼Œä»"),a("strong",[t._v("ç¦»çº¿åˆ†æ")]),t._v("åˆ°"),a("strong",[t._v("æµå¼å¤„ç†")]),t._v("ï¼Œæ¯ä¸€é¡¹æŠ€æœ¯éƒ½æ‰¿è½½ç€æµ·é‡æ•°æ®çš„å¤„ç†æŒ‘æˆ˜ã€‚æœ¬æ–‡æ¡£å°†"),a("strong",[t._v("æœ€å¸¸è€ƒçš„å¤§æ•°æ®çŸ¥è¯†ç‚¹")]),t._v("æ•´ç†æˆ"),a("strong",[t._v("æ ‡å‡†è¯æœ¯")]),t._v("ï¼Œæ¶µç›–Hadoopã€Sparkã€Flinkã€Hiveã€Kafkaç­‰æ ¸å¿ƒç»„ä»¶ï¼ŒåŠ©ä½ åœ¨é¢è¯•ä¸­æ¸¸åˆƒæœ‰ä½™ï¼")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ—ºï¸-çŸ¥è¯†å¯¼èˆª"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ—ºï¸-çŸ¥è¯†å¯¼èˆª"}},[t._v("#")]),t._v(" ğŸ—ºï¸ çŸ¥è¯†å¯¼èˆª")]),t._v(" "),a("h3",{attrs:{id:"ğŸ·ï¸-æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ·ï¸-æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»"}},[t._v("#")]),t._v(" ğŸ·ï¸ æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ğŸ—ï¸ åˆ†å¸ƒå¼å­˜å‚¨ç±»")]),t._v("ï¼šHDFSæ¶æ„ã€å‰¯æœ¬æœºåˆ¶ã€NameNodeã€DataNodeã€å—å­˜å‚¨")]),t._v(" "),a("li",[a("strong",[t._v("âš¡ æ‰¹è®¡ç®—æ¡†æ¶")]),t._v("ï¼šMapReduceåŸç†ã€Sparkæ¶æ„ã€RDDæœºåˆ¶ã€å†…å­˜è®¡ç®—")]),t._v(" "),a("li",[a("strong",[t._v("ğŸŒŠ æµè®¡ç®—æ¡†æ¶")]),t._v("ï¼šFlinkæ¶æ„ã€Watermarkã€çª—å£å‡½æ•°ã€çŠ¶æ€ç®¡ç†")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ“Š æ•°æ®ä»“åº“æŠ€æœ¯")]),t._v("ï¼šHiveæ¶æ„ã€SQLè§£æã€åˆ†åŒºåˆ†æ¡¶ã€å­˜å‚¨æ ¼å¼")]),t._v(" "),a("li",[a("strong",[t._v("ğŸš€ æ¶ˆæ¯é˜Ÿåˆ—")]),t._v("ï¼šKafkaæ¶æ„ã€åˆ†åŒºå‰¯æœ¬ã€ç”Ÿäº§æ¶ˆè´¹ã€æ€§èƒ½ä¼˜åŒ–")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ”§ èµ„æºè°ƒåº¦")]),t._v("ï¼šYARNæ¶æ„ã€èµ„æºç®¡ç†ã€ä»»åŠ¡è°ƒåº¦ã€å®¹å™¨åŒ–")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ’¼ å®æˆ˜åœºæ™¯é¢˜")]),t._v("ï¼šæŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€æ€§èƒ½è°ƒä¼˜ã€æ•…éšœå¤„ç†")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ”‘-é¢è¯•è¯æœ¯æ¨¡æ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”‘-é¢è¯•è¯æœ¯æ¨¡æ¿"}},[t._v("#")]),t._v(" ğŸ”‘ é¢è¯•è¯æœ¯æ¨¡æ¿")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[t._v("é—®é¢˜ç±»å‹")])]),t._v(" "),a("th",[a("strong",[t._v("å›ç­”æ¡†æ¶")])]),t._v(" "),a("th",[a("strong",[t._v("å…³é”®è¦ç‚¹")])]),t._v(" "),a("th",[a("strong",[t._v("æ·±å…¥æ‰©å±•")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("æ¦‚å¿µè§£é‡Š")])]),t._v(" "),a("td",[t._v("å®šä¹‰â†’æ¶æ„â†’æ ¸å¿ƒæœºåˆ¶â†’åº”ç”¨åœºæ™¯")]),t._v(" "),a("td",[t._v("å‡†ç¡®å®šä¹‰ï¼Œçªå‡ºä¼˜åŠ¿")]),t._v(" "),a("td",[t._v("åº•å±‚åŸç†ï¼Œæºç åˆ†æ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å¯¹æ¯”åˆ†æ")])]),t._v(" "),a("td",[t._v("ç›¸åŒç‚¹â†’ä¸åŒç‚¹â†’ä½¿ç”¨åœºæ™¯â†’é€‰æ‹©å»ºè®®")]),t._v(" "),a("td",[t._v("å¤šç»´åº¦å¯¹æ¯”")]),t._v(" "),a("td",[t._v("æ€§èƒ½å·®å¼‚ï¼Œå®é™…åº”ç”¨")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("åŸç†è§£æ")])]),t._v(" "),a("td",[t._v("èƒŒæ™¯â†’æ¶æ„è®¾è®¡â†’æ‰§è¡Œæµç¨‹â†’å…³é”®æœºåˆ¶")]),t._v(" "),a("td",[t._v("å›¾è§£æµç¨‹")]),t._v(" "),a("td",[t._v("æ·±å±‚å®ç°ï¼Œè°ƒä¼˜è¦ç‚¹")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("ä¼˜åŒ–å®è·µ")])]),t._v(" "),a("td",[t._v("é—®é¢˜ç°è±¡â†’åˆ†ææ€è·¯â†’è§£å†³æ–¹æ¡ˆâ†’ç›‘æ§éªŒè¯")]),t._v(" "),a("td",[t._v("å®é™…æ¡ˆä¾‹")]),t._v(" "),a("td",[t._v("æœ€ä½³å®è·µï¼Œè¸©å‘ç»éªŒ")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ—ï¸-ä¸€ã€åˆ†å¸ƒå¼å­˜å‚¨ç±»-hdfsæ ¸å¿ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ—ï¸-ä¸€ã€åˆ†å¸ƒå¼å­˜å‚¨ç±»-hdfsæ ¸å¿ƒ"}},[t._v("#")]),t._v(" ğŸ—ï¸ ä¸€ã€åˆ†å¸ƒå¼å­˜å‚¨ç±»ï¼ˆHDFSæ ¸å¿ƒï¼‰")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("æ ¸å¿ƒæ€æƒ³")]),t._v("ï¼šHDFSæ˜¯Hadoopç”Ÿæ€çš„å­˜å‚¨åŸºçŸ³ï¼Œé€šè¿‡ä¸»ä»æ¶æ„ã€å‰¯æœ¬æœºåˆ¶ã€åˆ†å—å­˜å‚¨å®ç°æµ·é‡æ•°æ®çš„å¯é å­˜å‚¨å’Œé«˜å¹¶å‘è®¿é—®ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯hdfs-å®ƒçš„æ ¸å¿ƒæ¶æ„æ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯hdfs-å®ƒçš„æ ¸å¿ƒæ¶æ„æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯HDFSï¼Ÿå®ƒçš„æ ¸å¿ƒæ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("HDFSï¼ˆHadoop Distributed File Systemï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("HDFSæ˜¯Hadoopç”Ÿæ€ç³»ç»Ÿä¸­çš„"),a("strong",[t._v("åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ")]),t._v("ï¼Œä¸“ä¸ºå­˜å‚¨è¶…å¤§æ–‡ä»¶è€Œè®¾è®¡ã€‚å®ƒé€šè¿‡"),a("strong",[t._v("ä¸»ä»æ¶æ„")]),t._v("å®ç°æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ï¼Œå…·æœ‰"),a("strong",[t._v("é«˜å®¹é”™æ€§ã€é«˜ååé‡ã€æµå¼æ•°æ®è®¿é—®")]),t._v("çš„ç‰¹ç‚¹ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒæ¶æ„ç»„ä»¶")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("NameNodeï¼ˆä¸»èŠ‚ç‚¹ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å­˜å‚¨æ–‡ä»¶ç³»ç»Ÿçš„"),a("strong",[t._v("å…ƒæ•°æ®")]),t._v("ï¼ˆæ–‡ä»¶ç›®å½•ç»“æ„ã€æ–‡ä»¶å±æ€§ã€Blockä½ç½®ä¿¡æ¯ï¼‰")]),t._v(" "),a("li",[t._v("ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„"),a("strong",[t._v("å‘½åç©ºé—´")])]),t._v(" "),a("li",[t._v("åè°ƒå®¢æˆ·ç«¯å¯¹æ–‡ä»¶çš„è®¿é—®")]),t._v(" "),a("li",[t._v("ç»´æŠ¤"),a("strong",[t._v("FSImage")]),t._v("ï¼ˆæ–‡ä»¶ç³»ç»Ÿé•œåƒï¼‰å’Œ"),a("strong",[t._v("EditLog")]),t._v("ï¼ˆç¼–è¾‘æ—¥å¿—ï¼‰")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("DataNodeï¼ˆä»èŠ‚ç‚¹ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å­˜å‚¨å®é™…çš„"),a("strong",[t._v("æ•°æ®å—ï¼ˆBlockï¼‰")])]),t._v(" "),a("li",[t._v("å®šæœŸå‘NameNodeå‘é€"),a("strong",[t._v("å¿ƒè·³")]),t._v("å’Œ"),a("strong",[t._v("BlockæŠ¥å‘Š")])]),t._v(" "),a("li",[t._v("æ‰§è¡Œæ•°æ®å—çš„åˆ›å»ºã€åˆ é™¤ã€å¤åˆ¶æ“ä½œ")]),t._v(" "),a("li",[t._v("å“åº”å®¢æˆ·ç«¯çš„è¯»å†™è¯·æ±‚")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Secondary NameNode")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å®šæœŸåˆå¹¶FSImageå’ŒEditLogï¼Œå‡è½»NameNodeè´Ÿæ‹…")]),t._v(" "),a("li",[a("strong",[t._v("ä¸æ˜¯")]),t._v("NameNodeçš„çƒ­å¤‡ä»½ï¼Œè€Œæ˜¯è¾…åŠ©èŠ‚ç‚¹")])])])]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç‰¹æ€§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("åˆ†å—å­˜å‚¨")]),t._v("ï¼šæ–‡ä»¶è¢«åˆ‡åˆ†æˆå›ºå®šå¤§å°çš„Blockï¼ˆé»˜è®¤128MBï¼‰ï¼Œåˆ†å¸ƒå­˜å‚¨")]),t._v(" "),a("li",[a("strong",[t._v("å‰¯æœ¬æœºåˆ¶")]),t._v("ï¼šæ¯ä¸ªBlocké»˜è®¤æœ‰3ä¸ªå‰¯æœ¬ï¼Œä¿è¯æ•°æ®å¯é æ€§")]),t._v(" "),a("li",[a("strong",[t._v("ä¸€å†™å¤šè¯»")]),t._v("ï¼šé€‚åˆå¤§æ–‡ä»¶çš„ä¸€æ¬¡å†™å…¥ã€å¤šæ¬¡è¯»å–åœºæ™¯")]),t._v(" "),a("li",[a("strong",[t._v("æµå¼è®¿é—®")]),t._v("ï¼šä¼˜åŒ–é¡ºåºè¯»å–ï¼Œä¸é€‚åˆéšæœºè®¿é—®")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-hdfsçš„è¯»å†™æµç¨‹æ˜¯æ€æ ·çš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-hdfsçš„è¯»å†™æµç¨‹æ˜¯æ€æ ·çš„"}},[t._v("#")]),t._v(" ğŸ¯ HDFSçš„è¯»å†™æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("HDFSå†™å…¥æµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("å®¢æˆ·ç«¯è¯·æ±‚")]),t._v("ï¼šå®¢æˆ·ç«¯è°ƒç”¨FileSystem.create()åˆ›å»ºæ–‡ä»¶")]),t._v(" "),a("li",[a("strong",[t._v("NameNodeéªŒè¯")]),t._v("ï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€æƒé™æ˜¯å¦æ»¡è¶³")]),t._v(" "),a("li",[a("strong",[t._v("è¿”å›è¾“å‡ºæµ")]),t._v("ï¼šNameNodeè¿”å›FSDataOutputStreamç»™å®¢æˆ·ç«¯")]),t._v(" "),a("li",[a("strong",[t._v("ç”³è¯·Block")]),t._v("ï¼šå®¢æˆ·ç«¯å‘NameNodeç”³è¯·æ–°çš„Blockå’ŒDataNodeåˆ—è¡¨")]),t._v(" "),a("li",[a("strong",[t._v("å»ºç«‹ç®¡é“")]),t._v("ï¼šå®¢æˆ·ç«¯ä¸ç¬¬ä¸€ä¸ªDataNodeå»ºç«‹è¿æ¥ï¼Œå½¢æˆDataNodeç®¡é“")]),t._v(" "),a("li",[a("strong",[t._v("æ•°æ®ä¼ è¾“")]),t._v("ï¼šæ•°æ®ä»¥packetä¸ºå•ä½åœ¨ç®¡é“ä¸­ä¼ è¾“")]),t._v(" "),a("li",[a("strong",[t._v("ç¡®è®¤æœºåˆ¶")]),t._v("ï¼šæ¯ä¸ªDataNodeæ¥æ”¶æ•°æ®åå‘é€ç¡®è®¤ç»™å‰ä¸€ä¸ªèŠ‚ç‚¹")]),t._v(" "),a("li",[a("strong",[t._v("å…³é—­æµ")]),t._v("ï¼šå†™å®Œåå…³é—­è¾“å‡ºæµï¼Œé€šçŸ¥NameNodeå†™å…¥å®Œæˆ")])]),t._v(" "),a("p",[a("strong",[t._v("HDFSè¯»å–æµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("å®¢æˆ·ç«¯è¯·æ±‚")]),t._v("ï¼šè°ƒç”¨FileSystem.open()æ‰“å¼€æ–‡ä»¶")]),t._v(" "),a("li",[a("strong",[t._v("NameNodeæŸ¥è¯¢")]),t._v("ï¼šè·å–æ–‡ä»¶çš„Blockåˆ—è¡¨å’Œå¯¹åº”çš„DataNodeä½ç½®")]),t._v(" "),a("li",[a("strong",[t._v("è¿”å›è¾“å…¥æµ")]),t._v("ï¼šNameNodeè¿”å›FSDataInputStreamç»™å®¢æˆ·ç«¯")]),t._v(" "),a("li",[a("strong",[t._v("é€‰æ‹©DataNode")]),t._v("ï¼šå®¢æˆ·ç«¯é€‰æ‹©æœ€è¿‘çš„DataNodeè¯»å–Block")]),t._v(" "),a("li",[a("strong",[t._v("æ•°æ®ä¼ è¾“")]),t._v("ï¼šç›´æ¥ä»DataNodeè¯»å–æ•°æ®åˆ°å®¢æˆ·ç«¯")]),t._v(" "),a("li",[a("strong",[t._v("åˆ‡æ¢Block")]),t._v("ï¼šè¯»å®Œä¸€ä¸ªBlockåè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªBlock")]),t._v(" "),a("li",[a("strong",[t._v("å…³é—­æµ")]),t._v("ï¼šè¯»å–å®Œæˆåå…³é—­è¾“å…¥æµ")])]),t._v(" "),a("p",[a("strong",[t._v("å…³é”®ä¼˜åŒ–ç‚¹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æœºæ¶æ„ŸçŸ¥")]),t._v("ï¼šä¼˜å…ˆé€‰æ‹©åŒæœºæ¶çš„DataNodeï¼Œå‡å°‘ç½‘ç»œä¼ è¾“")]),t._v(" "),a("li",[a("strong",[t._v("æœ¬åœ°è¯»å–")]),t._v("ï¼šå¦‚æœå®¢æˆ·ç«¯å’ŒDataNodeåœ¨åŒä¸€èŠ‚ç‚¹ï¼Œç›´æ¥æœ¬åœ°è¯»å–")]),t._v(" "),a("li",[a("strong",[t._v("ç¼“å­˜æœºåˆ¶")]),t._v("ï¼šNameNodeçš„å…ƒæ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-hdfsçš„å‰¯æœ¬æ”¾ç½®ç­–ç•¥æ˜¯ä»€ä¹ˆ-ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-hdfsçš„å‰¯æœ¬æ”¾ç½®ç­–ç•¥æ˜¯ä»€ä¹ˆ-ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡"}},[t._v("#")]),t._v(" ğŸ¯ HDFSçš„å‰¯æœ¬æ”¾ç½®ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("é»˜è®¤å‰¯æœ¬æ”¾ç½®ç­–ç•¥ï¼ˆ3å‰¯æœ¬ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ç¬¬ä¸€ä¸ªå‰¯æœ¬")]),t._v("ï¼šæ”¾åœ¨å®¢æˆ·ç«¯æ‰€åœ¨èŠ‚ç‚¹ï¼ˆå¦‚æœå®¢æˆ·ç«¯åœ¨é›†ç¾¤å¤–ï¼Œéšæœºé€‰æ‹©ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("ç¬¬äºŒä¸ªå‰¯æœ¬")]),t._v("ï¼šæ”¾åœ¨ä¸åŒæœºæ¶çš„éšæœºèŠ‚ç‚¹")]),t._v(" "),a("li",[a("strong",[t._v("ç¬¬ä¸‰ä¸ªå‰¯æœ¬")]),t._v("ï¼šæ”¾åœ¨ç¬¬äºŒä¸ªå‰¯æœ¬åŒä¸€æœºæ¶çš„ä¸åŒèŠ‚ç‚¹")])]),t._v(" "),a("p",[a("strong",[t._v("è®¾è®¡åŸç†")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å¯é æ€§")]),t._v("ï¼šä¸åŒæœºæ¶ä¿è¯æœºæ¶æ•…éšœæ—¶æ•°æ®ä¸ä¸¢å¤±")]),t._v(" "),a("li",[a("strong",[t._v("æ€§èƒ½")]),t._v("ï¼šåŒæœºæ¶å†…æœ‰ä¸¤ä¸ªå‰¯æœ¬ï¼Œè¯»å–æ—¶å¯å°±è¿‘è®¿é—®")]),t._v(" "),a("li",[a("strong",[t._v("ç½‘ç»œå¸¦å®½")]),t._v("ï¼šè·¨æœºæ¶åªæœ‰ä¸€æ¬¡æ•°æ®ä¼ è¾“ï¼ŒèŠ‚çœç½‘ç»œå¸¦å®½")])]),t._v(" "),a("p",[a("strong",[t._v("æœºæ¶æ„ŸçŸ¥çš„é‡è¦æ€§")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("æœºæ¶A: DataNode1, DataNode2\næœºæ¶B: DataNode3, DataNode4\n\nå‰¯æœ¬æ”¾ç½®ï¼š\n- ç¬¬ä¸€å‰¯æœ¬ï¼šDataNode1ï¼ˆå®¢æˆ·ç«¯èŠ‚ç‚¹ï¼‰\n- ç¬¬äºŒå‰¯æœ¬ï¼šDataNode3ï¼ˆä¸åŒæœºæ¶ï¼‰  \n- ç¬¬ä¸‰å‰¯æœ¬ï¼šDataNode4ï¼ˆä¸ç¬¬äºŒå‰¯æœ¬åŒæœºæ¶ï¼‰\n")])])]),a("p",[a("strong",[t._v("å®¹é”™èƒ½åŠ›åˆ†æ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("èŠ‚ç‚¹æ•…éšœ")]),t._v("ï¼šä»»ä½•å•èŠ‚ç‚¹æ•…éšœï¼Œå‰©ä½™å‰¯æœ¬æ­£å¸¸æœåŠ¡")]),t._v(" "),a("li",[a("strong",[t._v("æœºæ¶æ•…éšœ")]),t._v("ï¼šä»»ä½•å•æœºæ¶æ•…éšœï¼Œå…¶ä»–æœºæ¶çš„å‰¯æœ¬ç»§ç»­æœåŠ¡")]),t._v(" "),a("li",[a("strong",[t._v("ç½‘ç»œåˆ†åŒº")]),t._v("ï¼šæœºæ¶é—´ç½‘ç»œæ•…éšœæ—¶ï¼Œä»èƒ½ä¿è¯æ•°æ®è®¿é—®")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-namenodeå•ç‚¹æ•…éšœå¦‚ä½•è§£å†³"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-namenodeå•ç‚¹æ•…éšœå¦‚ä½•è§£å†³"}},[t._v("#")]),t._v(" ğŸ¯ NameNodeå•ç‚¹æ•…éšœå¦‚ä½•è§£å†³ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("é—®é¢˜èƒŒæ™¯")]),t._v("ï¼š\nNameNodeå­˜å‚¨ç€æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„å…ƒæ•°æ®ï¼Œä¸€æ—¦å®•æœºï¼Œæ•´ä¸ªHDFSé›†ç¾¤ä¸å¯ç”¨ï¼Œæ˜¯å…¸å‹çš„å•ç‚¹æ•…éšœé—®é¢˜ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è§£å†³æ–¹æ¡ˆ")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. Secondary NameNodeï¼ˆè¾…åŠ©æ–¹æ¡ˆï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("å®šæœŸåˆå¹¶FSImageå’ŒEditLog")]),t._v(" "),a("li",[t._v("NameNodeæ•…éšœåå¯æ‰‹åŠ¨æ¢å¤ï¼Œä½†ä¼šæœ‰æ•°æ®ä¸¢å¤±")]),t._v(" "),a("li",[a("strong",[t._v("ä¸æ˜¯çœŸæ­£çš„é«˜å¯ç”¨æ–¹æ¡ˆ")])])]),t._v(" "),a("p",[a("strong",[t._v("2. NameNode HAï¼ˆæ¨èæ–¹æ¡ˆï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("æ¶æ„è®¾è®¡")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Active NameNode")]),t._v("ï¼šæä¾›æ­£å¸¸æœåŠ¡")]),t._v(" "),a("li",[a("strong",[t._v("Standby NameNode")]),t._v("ï¼šçƒ­å¤‡èŠ‚ç‚¹ï¼Œå®æ—¶åŒæ­¥å…ƒæ•°æ®")]),t._v(" "),a("li",[a("strong",[t._v("å…±äº«å­˜å‚¨")]),t._v("ï¼šJournalNodeé›†ç¾¤æˆ–NFSï¼Œå­˜å‚¨EditLog")]),t._v(" "),a("li",[a("strong",[t._v("ZooKeeper")]),t._v("ï¼šåè°ƒActive/StandbyçŠ¶æ€åˆ‡æ¢")]),t._v(" "),a("li",[a("strong",[t._v("ZKFC")]),t._v("ï¼šZooKeeper FailoverControllerï¼Œç›‘æ§NameNodeå¥åº·çŠ¶æ€")])]),t._v(" "),a("p",[a("strong",[t._v("æ•…éšœåˆ‡æ¢æµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("ZKFCç›‘æ§åˆ°Active NameNodeæ•…éšœ")]),t._v(" "),a("li",[t._v("é€šè¿‡ZooKeeperåè°ƒï¼Œé€‰ä¸¾æ–°çš„Active")]),t._v(" "),a("li",[t._v("Standby NameNodeå‡çº§ä¸ºActive")]),t._v(" "),a("li",[t._v("å®¢æˆ·ç«¯é‡æ–°è¿æ¥æ–°çš„Active NameNode")])]),t._v(" "),a("p",[a("strong",[t._v("æ•°æ®åŒæ­¥æœºåˆ¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("EditLogå†™å…¥å…±äº«å­˜å‚¨ï¼ˆJournalNodeï¼‰")]),t._v(" "),a("li",[t._v("Standby NameNodeå®æ—¶è¯»å–EditLogæ›´æ–°å†…å­˜ä¸­çš„å…ƒæ•°æ®")]),t._v(" "),a("li",[t._v("ä¿è¯Active/Standbyå…ƒæ•°æ®ä¸€è‡´æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("3. Federationï¼ˆè”é‚¦æ¶æ„ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("å¤šä¸ªNameNodeç®¡ç†ä¸åŒçš„å‘½åç©ºé—´")]),t._v(" "),a("li",[t._v("æ°´å¹³æ‰©å±•NameNodeçš„å¤„ç†èƒ½åŠ›")]),t._v(" "),a("li",[t._v("æ¯ä¸ªNameNodeç‹¬ç«‹ï¼Œå½¼æ­¤æ•…éšœä¸å½±å“")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"âš¡-äºŒã€æ‰¹è®¡ç®—æ¡†æ¶-mapreduce-spark"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#âš¡-äºŒã€æ‰¹è®¡ç®—æ¡†æ¶-mapreduce-spark"}},[t._v("#")]),t._v(" âš¡ äºŒã€æ‰¹è®¡ç®—æ¡†æ¶ï¼ˆMapReduce & Sparkï¼‰")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("æ ¸å¿ƒæ€æƒ³")]),t._v("ï¼šæ‰¹è®¡ç®—æ¡†æ¶æ˜¯å¤§æ•°æ®å¤„ç†çš„æ ¸å¿ƒï¼Œä»MapReduceçš„ç£ç›˜è®¡ç®—åˆ°Sparkçš„å†…å­˜è®¡ç®—ï¼Œä½“ç°äº†å¤§æ•°æ®æŠ€æœ¯çš„æ¼”è¿›å†ç¨‹ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-mapreduceçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-mapreduceçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ MapReduceçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("MapReduceæ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("MapReduceæ˜¯ä¸€ç§"),a("strong",[t._v("åˆ†å¸ƒå¼è®¡ç®—æ¨¡å‹")]),t._v("ï¼Œå°†å¤æ‚çš„æ•°æ®å¤„ç†ä»»åŠ¡åˆ†è§£ä¸º**Mapï¼ˆæ˜ å°„ï¼‰"),a("strong",[t._v("å’Œ")]),t._v("Reduceï¼ˆå½’çº¦ï¼‰**ä¸¤ä¸ªé˜¶æ®µï¼Œé€‚åˆå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†çš„æ‰¹å¤„ç†ä»»åŠ¡ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒå·¥ä½œæµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. Inputè¾“å…¥é˜¶æ®µ")])]),t._v(" "),a("ul",[a("li",[t._v("è¾“å…¥æ•°æ®è¢«åˆ‡åˆ†æˆå¤šä¸ªInputSplit")]),t._v(" "),a("li",[t._v("æ¯ä¸ªSplitç”±ä¸€ä¸ªMapä»»åŠ¡å¤„ç†")]),t._v(" "),a("li",[t._v("å…¸å‹Splitå¤§å°ç­‰äºHDFS Blockå¤§å°ï¼ˆ128MBï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("2. Mapé˜¶æ®µ")])]),t._v(" "),a("ul",[a("li",[t._v("Mapä»»åŠ¡è¯»å–InputSplitä¸­çš„æ•°æ®")]),t._v(" "),a("li",[t._v("æ‰§è¡Œç”¨æˆ·è‡ªå®šä¹‰çš„mapå‡½æ•°")]),t._v(" "),a("li",[t._v("è¾“å‡ºkey-valueå¯¹åˆ°æœ¬åœ°ç£ç›˜")]),t._v(" "),a("li",[t._v("è¿›è¡Œåˆ†åŒºï¼ˆPartitionï¼‰å’Œæ’åºï¼ˆSortï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("3. Shuffleé˜¶æ®µ")]),t._v("ï¼ˆæ ¸å¿ƒä¸”å¤æ‚ï¼‰")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Copyé˜¶æ®µ")]),t._v("ï¼šReduceä»»åŠ¡ä»å„ä¸ªMapä»»åŠ¡æ‹·è´æ•°æ®")]),t._v(" "),a("li",[a("strong",[t._v("Sorté˜¶æ®µ")]),t._v("ï¼šå¯¹æ‹·è´æ¥çš„æ•°æ®è¿›è¡Œåˆå¹¶æ’åº")]),t._v(" "),a("li",[a("strong",[t._v("Groupé˜¶æ®µ")]),t._v("ï¼šå°†ç›¸åŒkeyçš„valueç»„åˆåœ¨ä¸€èµ·")])]),t._v(" "),a("p",[a("strong",[t._v("4. Reduceé˜¶æ®µ")])]),t._v(" "),a("ul",[a("li",[t._v("Reduceä»»åŠ¡å¤„ç†åˆ†ç»„åçš„æ•°æ®")]),t._v(" "),a("li",[t._v("æ‰§è¡Œç”¨æˆ·è‡ªå®šä¹‰çš„reduceå‡½æ•°")]),t._v(" "),a("li",[t._v("è¾“å‡ºæœ€ç»ˆç»“æœåˆ°HDFS")])]),t._v(" "),a("p",[a("strong",[t._v("WordCountç¤ºä¾‹æµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("è¾“å…¥ï¼šhello world hello hadoop\nMapè¾“å‡ºï¼š(hello,1), (world,1), (hello,1), (hadoop,1)\nShuffleåï¼š(hello,[1,1]), (world,[1]), (hadoop,[1])\nReduceè¾“å‡ºï¼š(hello,2), (world,1), (hadoop,1)\n")])])]),a("p",[a("strong",[t._v("å…³é”®æœºåˆ¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å®¹é”™æ€§")]),t._v("ï¼šä»»åŠ¡å¤±è´¥è‡ªåŠ¨é‡è¯•ï¼Œæ•°æ®å‰¯æœ¬ä¿è¯å¯é æ€§")]),t._v(" "),a("li",[a("strong",[t._v("æœ¬åœ°æ€§")]),t._v("ï¼šä¼˜å…ˆåœ¨æ•°æ®æ‰€åœ¨èŠ‚ç‚¹æ‰§è¡Œä»»åŠ¡")]),t._v(" "),a("li",[a("strong",[t._v("æ¨æµ‹æ‰§è¡Œ")]),t._v("ï¼šæ…¢ä»»åŠ¡ä¼šå¯åŠ¨å¤‡ä»½ä»»åŠ¡ï¼Œæå‡æ•´ä½“æ€§èƒ½")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-sparkç›¸æ¯”mapreduceæœ‰ä»€ä¹ˆä¼˜åŠ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-sparkç›¸æ¯”mapreduceæœ‰ä»€ä¹ˆä¼˜åŠ¿"}},[t._v("#")]),t._v(" ğŸ¯ Sparkç›¸æ¯”MapReduceæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("Sparkæ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("Sparkæ˜¯åŸºäº"),a("strong",[t._v("å†…å­˜è®¡ç®—")]),t._v("çš„åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ï¼Œæä¾›äº†æ¯”MapReduceæ›´é«˜çš„æ€§èƒ½å’Œæ›´ä¸°å¯Œçš„APIï¼Œæ”¯æŒæ‰¹å¤„ç†ã€æµå¤„ç†ã€æœºå™¨å­¦ä¹ ã€å›¾è®¡ç®—ç­‰å¤šç§è®¡ç®—åœºæ™¯ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒä¼˜åŠ¿å¯¹æ¯”")]),t._v("ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("å¯¹æ¯”ç»´åº¦")]),t._v(" "),a("th",[t._v("MapReduce")]),t._v(" "),a("th",[t._v("Spark")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("è®¡ç®—æ¨¡å‹")])]),t._v(" "),a("td",[t._v("ç£ç›˜è®¡ç®—ï¼ŒMap-Reduceä¸¤é˜¶æ®µ")]),t._v(" "),a("td",[t._v("å†…å­˜è®¡ç®—ï¼ŒDAGå¤šé˜¶æ®µ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ€§èƒ½")])]),t._v(" "),a("td",[t._v("ä¸­é—´ç»“æœè½ç›˜ï¼ŒI/Oå¼€é”€å¤§")]),t._v(" "),a("td",[t._v("å†…å­˜ç¼“å­˜ï¼Œæ€§èƒ½æå‡10-100å€")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ˜“ç”¨æ€§")])]),t._v(" "),a("td",[t._v("åªæœ‰Map-Reduce API")]),t._v(" "),a("td",[t._v("æä¾›å¤šç§é«˜çº§APIï¼ˆSQLã€MLã€Graphï¼‰")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å®¹é”™æœºåˆ¶")])]),t._v(" "),a("td",[t._v("æ•°æ®å‰¯æœ¬ + ä»»åŠ¡é‡è¯•")]),t._v(" "),a("td",[t._v("RDDè¡€ç»Ÿ + Checkpoint")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å®æ—¶æ€§")])]),t._v(" "),a("td",[t._v("åªæ”¯æŒæ‰¹å¤„ç†")]),t._v(" "),a("td",[t._v("æ”¯æŒæµå¤„ç†ï¼ˆSpark Streamingï¼‰")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å†…å­˜ç®¡ç†")])]),t._v(" "),a("td",[t._v("ä¾èµ–OSå†…å­˜ç®¡ç†")]),t._v(" "),a("td",[t._v("è‡ªä¸»å†…å­˜ç®¡ç†ï¼Œç»Ÿä¸€å†…å­˜æ¨¡å‹")])])])]),t._v(" "),a("p",[a("strong",[t._v("Sparkæ¶æ„ä¼˜åŠ¿")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. RDDï¼ˆå¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›†ï¼‰")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("ä¸å¯å˜")]),t._v("ï¼šä¸€æ—¦åˆ›å»ºä¸å¯ä¿®æ”¹ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§")]),t._v(" "),a("li",[a("strong",[t._v("åˆ†åŒº")]),t._v("ï¼šæ•°æ®åˆ†å¸ƒåœ¨é›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹ä¸Š")]),t._v(" "),a("li",[a("strong",[t._v("å®¹é”™")]),t._v("ï¼šé€šè¿‡è¡€ç»Ÿï¼ˆLineageï¼‰å®ç°æ•…éšœæ¢å¤")]),t._v(" "),a("li",[a("strong",[t._v("å»¶è¿Ÿè®¡ç®—")]),t._v("ï¼šåªæœ‰Actionæ“ä½œæ‰è§¦å‘å®é™…è®¡ç®—")])]),t._v(" "),a("p",[a("strong",[t._v("2. DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("å°†å¤æ‚çš„è®¡ç®—æµç¨‹è¡¨ç¤ºä¸ºDAG")]),t._v(" "),a("li",[t._v("ä¼˜åŒ–å™¨è‡ªåŠ¨ä¼˜åŒ–æ‰§è¡Œè®¡åˆ’")]),t._v(" "),a("li",[t._v("é¿å…ä¸å¿…è¦çš„ç£ç›˜I/O")])]),t._v(" "),a("p",[a("strong",[t._v("3. å†…å­˜è®¡ç®—")])]),t._v(" "),a("ul",[a("li",[t._v("ä¸­é—´ç»“æœç¼“å­˜åœ¨å†…å­˜ä¸­")]),t._v(" "),a("li",[t._v("å¤§å¤§å‡å°‘ç£ç›˜I/Oå¼€é”€")]),t._v(" "),a("li",[t._v("ç‰¹åˆ«é€‚åˆè¿­ä»£è®¡ç®—ï¼ˆæœºå™¨å­¦ä¹ ï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("é€‚ç”¨åœºæ™¯é€‰æ‹©")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("MapReduce")]),t._v("ï¼šç®€å•çš„ETLã€å¤§æ–‡ä»¶å¤„ç†ã€å¯¹å†…å­˜è¦æ±‚ä¸é«˜çš„åœºæ™¯")]),t._v(" "),a("li",[a("strong",[t._v("Spark")]),t._v("ï¼šå¤æ‚åˆ†æã€æœºå™¨å­¦ä¹ ã€å®æ—¶å¤„ç†ã€äº¤äº’å¼æŸ¥è¯¢")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-sparkçš„æ ¸å¿ƒæ¦‚å¿µrddæ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-sparkçš„æ ¸å¿ƒæ¦‚å¿µrddæ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ Sparkçš„æ ¸å¿ƒæ¦‚å¿µRDDæ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("RDDï¼ˆResilient Distributed Datasetï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("RDDæ˜¯Sparkçš„"),a("strong",[t._v("æ ¸å¿ƒæ•°æ®æŠ½è±¡")]),t._v("ï¼Œä»£è¡¨ä¸€ä¸ªä¸å¯å˜çš„ã€å¯åˆ†åŒºçš„æ•°æ®é›†åˆï¼Œåˆ†å¸ƒåœ¨é›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹ä¸Šã€‚å®ƒæ˜¯Sparkæ‰€æœ‰æ“ä½œçš„åŸºç¡€ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("RDDçš„æ ¸å¿ƒç‰¹æ€§")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. ä¸å¯å˜æ€§ï¼ˆImmutableï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("RDDä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½ä¿®æ”¹")]),t._v(" "),a("li",[t._v("æ‰€æœ‰è½¬æ¢æ“ä½œéƒ½ä¼šäº§ç”Ÿæ–°çš„RDD")]),t._v(" "),a("li",[t._v("ä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§å’Œçº¿ç¨‹å®‰å…¨")])]),t._v(" "),a("p",[a("strong",[t._v("2. åˆ†åŒºæ€§ï¼ˆPartitionedï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("RDDçš„æ•°æ®åˆ†å¸ƒåœ¨å¤šä¸ªåˆ†åŒºä¸­")]),t._v(" "),a("li",[t._v("æ¯ä¸ªåˆ†åŒºå¯ä»¥åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šå¹¶è¡Œå¤„ç†")]),t._v(" "),a("li",[t._v("åˆ†åŒºæ•°å½±å“å¹¶è¡Œåº¦")])]),t._v(" "),a("p",[a("strong",[t._v("3. å®¹é”™æ€§ï¼ˆFault-tolerantï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("é€šè¿‡è¡€ç»Ÿï¼ˆLineageï¼‰è®°å½•RDDçš„ä¾èµ–å…³ç³»")]),t._v(" "),a("li",[t._v("ä»»ä½•åˆ†åŒºä¸¢å¤±éƒ½å¯ä»¥æ ¹æ®è¡€ç»Ÿé‡æ–°è®¡ç®—")]),t._v(" "),a("li",[t._v("æ— éœ€æ•°æ®å¤åˆ¶ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´")])]),t._v(" "),a("p",[a("strong",[t._v("4. æƒ°æ€§è®¡ç®—ï¼ˆLazy Evaluationï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("Transformationæ“ä½œä¸ä¼šç«‹å³æ‰§è¡Œ")]),t._v(" "),a("li",[t._v("åªæœ‰é‡åˆ°Actionæ“ä½œæ‰ä¼šè§¦å‘å®é™…è®¡ç®—")]),t._v(" "),a("li",[t._v("ä¾¿äºä¼˜åŒ–æ‰§è¡Œè®¡åˆ’")])]),t._v(" "),a("p",[a("strong",[t._v("RDDæ“ä½œç±»å‹")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("Transformationï¼ˆè½¬æ¢æ“ä½œï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("map()")]),t._v("ï¼šå¯¹æ¯ä¸ªå…ƒç´ åº”ç”¨å‡½æ•°")]),t._v(" "),a("li",[a("code",[t._v("filter()")]),t._v("ï¼šè¿‡æ»¤æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ")]),t._v(" "),a("li",[a("code",[t._v("flatMap()")]),t._v("ï¼šæ‰å¹³åŒ–æ˜ å°„")]),t._v(" "),a("li",[a("code",[t._v("union()")]),t._v("ï¼šåˆå¹¶ä¸¤ä¸ªRDD")]),t._v(" "),a("li",[a("code",[t._v("groupByKey()")]),t._v("ï¼šæŒ‰keyåˆ†ç»„")]),t._v(" "),a("li",[a("code",[t._v("reduceByKey()")]),t._v("ï¼šæŒ‰keyå½’çº¦")])]),t._v(" "),a("p",[a("strong",[t._v("Actionï¼ˆè¡ŒåŠ¨æ“ä½œï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("collect()")]),t._v("ï¼šæ”¶é›†æ‰€æœ‰å…ƒç´ åˆ°Driver")]),t._v(" "),a("li",[a("code",[t._v("count()")]),t._v("ï¼šç»Ÿè®¡å…ƒç´ ä¸ªæ•°")]),t._v(" "),a("li",[a("code",[t._v("first()")]),t._v("ï¼šè·å–ç¬¬ä¸€ä¸ªå…ƒç´ ")]),t._v(" "),a("li",[a("code",[t._v("save()")]),t._v("ï¼šä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿ")]),t._v(" "),a("li",[a("code",[t._v("foreach()")]),t._v("ï¼šå¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œæ“ä½œ")])]),t._v(" "),a("p",[a("strong",[t._v("RDDä¾èµ–å…³ç³»")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("çª„ä¾èµ–ï¼ˆNarrow Dependencyï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("çˆ¶RDDçš„æ¯ä¸ªåˆ†åŒºåªè¢«å­RDDçš„ä¸€ä¸ªåˆ†åŒºä¾èµ–")]),t._v(" "),a("li",[t._v("æ”¯æŒpipelineä¼˜åŒ–")]),t._v(" "),a("li",[t._v("æ•…éšœæ¢å¤æ•ˆç‡é«˜")]),t._v(" "),a("li",[t._v("ä¾‹å¦‚ï¼šmapã€filter")])]),t._v(" "),a("p",[a("strong",[t._v("å®½ä¾èµ–ï¼ˆWide Dependencyï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("çˆ¶RDDçš„æ¯ä¸ªåˆ†åŒºè¢«å­RDDçš„å¤šä¸ªåˆ†åŒºä¾èµ–")]),t._v(" "),a("li",[t._v("éœ€è¦Shuffleæ“ä½œ")]),t._v(" "),a("li",[t._v("æ•…éšœæ¢å¤æˆæœ¬é«˜")]),t._v(" "),a("li",[t._v("ä¾‹å¦‚ï¼šgroupByKeyã€join")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-sparkçš„å†…å­˜ç®¡ç†æœºåˆ¶æ˜¯æ€æ ·çš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-sparkçš„å†…å­˜ç®¡ç†æœºåˆ¶æ˜¯æ€æ ·çš„"}},[t._v("#")]),t._v(" ğŸ¯ Sparkçš„å†…å­˜ç®¡ç†æœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("Sparkç»Ÿä¸€å†…å­˜æ¨¡å‹")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("ä»Spark 1.6å¼€å§‹ï¼Œå¼•å…¥äº†"),a("strong",[t._v("ç»Ÿä¸€å†…å­˜ç®¡ç†")]),t._v("ï¼ˆUnified Memory Managementï¼‰ï¼Œå°†å†…å­˜åˆ†ä¸ºä¸¤å¤§åŒºåŸŸï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. å †å†…å†…å­˜ï¼ˆOn-Heap Memoryï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("Reserved Memoryï¼ˆä¿ç•™å†…å­˜ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å›ºå®š300MBï¼Œç”¨äºç³»ç»Ÿå†…éƒ¨å¯¹è±¡")]),t._v(" "),a("li",[t._v("ä¸å‚ä¸å†…å­˜åˆ†é…")])]),t._v(" "),a("p",[a("strong",[t._v("User Memoryï¼ˆç”¨æˆ·å†…å­˜ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å ç”¨ï¼ˆHeap - Reservedï¼‰* 0.25 = 25%")]),t._v(" "),a("li",[t._v("å­˜å‚¨ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®ç»“æ„")]),t._v(" "),a("li",[t._v("ä¸å—Sparkç®¡ç†")])]),t._v(" "),a("p",[a("strong",[t._v("Unified Memoryï¼ˆç»Ÿä¸€å†…å­˜ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å ç”¨ï¼ˆHeap - Reservedï¼‰* 0.75 = 75%")]),t._v(" "),a("li",[t._v("åˆ†ä¸ºStorage Memoryå’ŒExecution Memory")])]),t._v(" "),a("p",[a("strong",[t._v("Storage Memoryï¼ˆå­˜å‚¨å†…å­˜ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç”¨äºç¼“å­˜RDDã€å¹¿æ’­å˜é‡")]),t._v(" "),a("li",[t._v("é»˜è®¤å Unified Memoryçš„50%")]),t._v(" "),a("li",[t._v("å¯ä»¥å€Ÿç”¨Execution Memory")])]),t._v(" "),a("p",[a("strong",[t._v("Execution Memoryï¼ˆæ‰§è¡Œå†…å­˜ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç”¨äºShuffleã€Joinã€Sortç­‰è®¡ç®—")]),t._v(" "),a("li",[t._v("é»˜è®¤å Unified Memoryçš„50%")]),t._v(" "),a("li",[t._v("å¯ä»¥å€Ÿç”¨Storage Memoryï¼ˆä½†æœ‰é™åˆ¶ï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("2. å †å¤–å†…å­˜ï¼ˆOff-Heap Memoryï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("é€šè¿‡"),a("code",[t._v("spark.memory.offHeap.enabled=true")]),t._v("å¼€å¯")]),t._v(" "),a("li",[t._v("é¿å…GCå½±å“ï¼Œæå‡æ€§èƒ½")]),t._v(" "),a("li",[t._v("ä¸»è¦ç”¨äºå­˜å‚¨åºåˆ—åŒ–çš„æ•°æ®")])]),t._v(" "),a("p",[a("strong",[t._v("å†…å­˜å€Ÿç”¨æœºåˆ¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Executionå¯ä»¥å€Ÿç”¨Storageçš„ç©ºé—²å†…å­˜")]),t._v(" "),a("li",[t._v("Storageå¯ä»¥å€Ÿç”¨Executionçš„ç©ºé—²å†…å­˜")]),t._v(" "),a("li",[t._v("ä½†Storageå€Ÿç”¨çš„å†…å­˜åœ¨Executionéœ€è¦æ—¶å¿…é¡»é‡Šæ”¾")]),t._v(" "),a("li",[t._v("Executionå€Ÿç”¨çš„å†…å­˜ä¸ä¼šè¢«å¼ºåˆ¶é‡Šæ”¾")])]),t._v(" "),a("p",[a("strong",[t._v("å†…å­˜ç®¡ç†ä¼˜åŠ¿")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("åŠ¨æ€è°ƒæ•´")]),t._v("ï¼šæ ¹æ®å®é™…éœ€æ±‚åŠ¨æ€åˆ†é…å†…å­˜")]),t._v(" "),a("li",[a("strong",[t._v("å‡å°‘æº¢å‡º")]),t._v("ï¼šé¿å…å›ºå®šåˆ†é…å¯¼è‡´çš„å†…å­˜æµªè´¹")]),t._v(" "),a("li",[a("strong",[t._v("æå‡æ€§èƒ½")]),t._v("ï¼šç»Ÿä¸€ç®¡ç†å‡å°‘å†…å­˜ç¢ç‰‡")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒŠ-ä¸‰ã€æµè®¡ç®—æ¡†æ¶-flinkæ ¸å¿ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒŠ-ä¸‰ã€æµè®¡ç®—æ¡†æ¶-flinkæ ¸å¿ƒ"}},[t._v("#")]),t._v(" ğŸŒŠ ä¸‰ã€æµè®¡ç®—æ¡†æ¶ï¼ˆFlinkæ ¸å¿ƒï¼‰")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("æ ¸å¿ƒæ€æƒ³")]),t._v("ï¼šFlinkæ˜¯æ–°ä¸€ä»£æµè®¡ç®—å¼•æ“ï¼Œä»¥æµä¸ºæ ¸å¿ƒã€æ‰¹ä¸ºç‰¹æ®Šæµçš„ç†å¿µï¼Œæä¾›ä½å»¶è¿Ÿã€é«˜ååã€ç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰çš„æµå¤„ç†èƒ½åŠ›ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-flinkçš„æ ¸å¿ƒæ¶æ„æ˜¯ä»€ä¹ˆ-ä¸spark-streamingæœ‰ä»€ä¹ˆåŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-flinkçš„æ ¸å¿ƒæ¶æ„æ˜¯ä»€ä¹ˆ-ä¸spark-streamingæœ‰ä»€ä¹ˆåŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ Flinkçš„æ ¸å¿ƒæ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿä¸Spark Streamingæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("Flinkæ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("Apache Flinkæ˜¯ä¸€ä¸ª"),a("strong",[t._v("æµä¼˜å…ˆ")]),t._v("çš„åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ï¼Œæ”¯æŒæœ‰ç•Œå’Œæ— ç•Œæ•°æ®æµçš„å¤„ç†ã€‚å®ƒæä¾›"),a("strong",[t._v("ä½å»¶è¿Ÿã€é«˜ååé‡ã€Exactly-Once")]),t._v("è¯­ä¹‰çš„æµå¤„ç†èƒ½åŠ›ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("Flinkæ ¸å¿ƒæ¶æ„")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. JobManagerï¼ˆä½œä¸šç®¡ç†å™¨ï¼‰")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("JobMaster")]),t._v("ï¼šç®¡ç†å•ä¸ªä½œä¸šçš„ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),a("li",[a("strong",[t._v("ResourceManager")]),t._v("ï¼šç®¡ç†é›†ç¾¤èµ„æºåˆ†é…")]),t._v(" "),a("li",[a("strong",[t._v("Dispatcher")]),t._v("ï¼šæä¾›RESTæ¥å£æ¥æ”¶ä½œä¸šæäº¤")])]),t._v(" "),a("p",[a("strong",[t._v("2. TaskManagerï¼ˆä»»åŠ¡ç®¡ç†å™¨ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("å®é™…æ‰§è¡Œä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹")]),t._v(" "),a("li",[t._v("æ¯ä¸ªTaskManageråŒ…å«å¤šä¸ªTask Slot")]),t._v(" "),a("li",[t._v("Task Slotæ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½")])]),t._v(" "),a("p",[a("strong",[t._v("3. Clientï¼ˆå®¢æˆ·ç«¯ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("æäº¤ä½œä¸šåˆ°é›†ç¾¤")]),t._v(" "),a("li",[t._v("ç¼–è¯‘ç”¨æˆ·ç¨‹åºç”ŸæˆJobGraph")])]),t._v(" "),a("p",[a("strong",[t._v("Flink vs Spark Streaming æ ¸å¿ƒåŒºåˆ«")]),t._v("ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("å¯¹æ¯”ç»´åº¦")]),t._v(" "),a("th",[t._v("Flink")]),t._v(" "),a("th",[t._v("Spark Streaming")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("è®¡ç®—æ¨¡å‹")])]),t._v(" "),a("td",[t._v("çœŸæ­£çš„æµè®¡ç®—ï¼ˆæµä¸ºæ ¸å¿ƒï¼‰")]),t._v(" "),a("td",[t._v("å¾®æ‰¹å¤„ç†ï¼ˆæ‰¹ä¸ºæ ¸å¿ƒï¼‰")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å»¶è¿Ÿ")])]),t._v(" "),a("td",[t._v("æ¯«ç§’çº§ä½å»¶è¿Ÿ")]),t._v(" "),a("td",[t._v("ç§’çº§å»¶è¿Ÿ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("çŠ¶æ€ç®¡ç†")])]),t._v(" "),a("td",[t._v("åŸç”ŸæµçŠ¶æ€ç®¡ç†")]),t._v(" "),a("td",[t._v("åŸºäºRDDçš„çŠ¶æ€ç®¡ç†")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å®¹é”™æœºåˆ¶")])]),t._v(" "),a("td",[t._v("Checkpoint + çŠ¶æ€å¿«ç…§")]),t._v(" "),a("td",[t._v("RDDè¡€ç»Ÿæ¢å¤")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("çª—å£æ“ä½œ")])]),t._v(" "),a("td",[t._v("çµæ´»çš„çª—å£API")]),t._v(" "),a("td",[t._v("åŸºäºæ‰¹æ¬¡çš„çª—å£")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("èƒŒå‹å¤„ç†")])]),t._v(" "),a("td",[t._v("åŠ¨æ€èƒŒå‹æ§åˆ¶")]),t._v(" "),a("td",[t._v("é™æ€æ‰¹å¤„ç†è°ƒæ•´")])])])]),t._v(" "),a("p",[a("strong",[t._v("æŠ€æœ¯é€‰å‹å»ºè®®")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("ä½å»¶è¿Ÿè¦æ±‚")]),t._v("ï¼šé€‰æ‹©Flinkï¼ˆæ¯«ç§’çº§ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("é«˜ååæ‰¹å¤„ç†")]),t._v("ï¼šé€‰æ‹©Sparkï¼ˆç”Ÿæ€å®Œæ•´ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("å¤æ‚çŠ¶æ€ç®¡ç†")]),t._v("ï¼šé€‰æ‹©Flinkï¼ˆåŸç”Ÿæ”¯æŒï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("æœºå™¨å­¦ä¹ åœºæ™¯")]),t._v("ï¼šé€‰æ‹©Sparkï¼ˆMLlibå®Œå–„ï¼‰")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-flinkçš„watermarkæœºåˆ¶æ˜¯ä»€ä¹ˆ-å¦‚ä½•å¤„ç†ä¹±åºæ•°æ®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-flinkçš„watermarkæœºåˆ¶æ˜¯ä»€ä¹ˆ-å¦‚ä½•å¤„ç†ä¹±åºæ•°æ®"}},[t._v("#")]),t._v(" ğŸ¯ Flinkçš„Watermarkæœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å¤„ç†ä¹±åºæ•°æ®ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("Watermarkæ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("Watermarkæ˜¯Flinkä¸­ç”¨äºå¤„ç†"),a("strong",[t._v("ä¹±åºæ•°æ®")]),t._v("å’Œ"),a("strong",[t._v("äº‹ä»¶æ—¶é—´çª—å£")]),t._v("çš„æœºåˆ¶ã€‚å®ƒè¡¨ç¤º"),a("strong",[t._v("æŸä¸ªæ—¶é—´æˆ³ä¹‹å‰çš„æ‰€æœ‰äº‹ä»¶éƒ½å·²ç»åˆ°è¾¾")]),t._v("çš„æ ‡è®°ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("ä¹±åºæ•°æ®çš„æŒ‘æˆ˜")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ç†æƒ³æƒ…å†µï¼šäº‹ä»¶æŒ‰æ—¶é—´æˆ³é¡ºåºåˆ°è¾¾\nå®é™…æƒ…å†µï¼šç½‘ç»œå»¶è¿Ÿã€ç³»ç»Ÿæ•…éšœå¯¼è‡´ä¹±åº\næ—¶é—´æˆ³ï¼š 1, 2, 3, 4, 5\nåˆ°è¾¾é¡ºåºï¼š1, 3, 2, 5, 4\n")])])]),a("p",[a("strong",[t._v("Watermarkå·¥ä½œåŸç†")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. Watermarkç”Ÿæˆ")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Periodic Watermark")]),t._v("ï¼šå®šæœŸç”Ÿæˆï¼ˆé»˜è®¤200msï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("Punctuated Watermark")]),t._v("ï¼šæ ¹æ®ç‰¹å®šäº‹ä»¶ç”Ÿæˆ")])]),t._v(" "),a("p",[a("strong",[t._v("2. Watermarkä¼ æ’­")])]),t._v(" "),a("ul",[a("li",[t._v("ä»Sourceå‘ä¸‹æ¸¸ä¼ æ’­")]),t._v(" "),a("li",[t._v("å¤šè¾“å…¥æµå–æœ€å°Watermark")]),t._v(" "),a("li",[t._v("ä¿è¯å…¨å±€æ—¶é—´æ¨è¿›")])]),t._v(" "),a("p",[a("strong",[t._v("3. çª—å£è§¦å‘")])]),t._v(" "),a("ul",[a("li",[t._v("å½“Watermark >= çª—å£ç»“æŸæ—¶é—´æ—¶è§¦å‘çª—å£è®¡ç®—")]),t._v(" "),a("li",[t._v("å…è®¸ä¸€å®šç¨‹åº¦çš„å»¶è¿Ÿæ•°æ®")])]),t._v(" "),a("p",[a("strong",[t._v("ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”ŸæˆWatermark")]),t._v("\nstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("assignTimestampsAndWatermarks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WatermarkStrategy")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forBoundedOutOfOrderness")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofSeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withTimestampAssigner")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timestamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTimestamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ—¶é—´çª—å£")]),t._v("\nstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keyBy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TumblingEventTimeWindows")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("of")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("minutes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WindowProcessFunction")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// çª—å£å¤„ç†é€»è¾‘")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("å¤„ç†ç­–ç•¥")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. å…è®¸å»¶è¿Ÿï¼ˆAllowed Latenessï¼‰")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TumblingEventTimeWindows")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("of")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("minutes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowedLateness")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("minutes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…è®¸1åˆ†é’Ÿå»¶è¿Ÿ")]),t._v("\n")])])]),a("p",[a("strong",[t._v("2. ä¾§è¾“å‡ºæµï¼ˆSide Outputï¼‰")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OutputTag")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" lateDataTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OutputTag")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"late-data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SingleOutputStreamOperator")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stream\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowedLateness")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("minutes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sideOutputLateData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lateDataTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("process")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–å»¶è¿Ÿæ•°æ®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataStream")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" lateData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSideOutput")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lateDataTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("æœ€ä½³å®è·µ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾ç½®åˆç†çš„å»¶è¿Ÿå®¹å¿åº¦")]),t._v(" "),a("li",[t._v("ç›‘æ§å»¶è¿Ÿæ•°æ®æ¯”ä¾‹ï¼Œè°ƒæ•´Watermarkç­–ç•¥")]),t._v(" "),a("li",[t._v("å¯¹äºä¸¥æ ¼å®æ—¶åœºæ™¯ï¼Œä½¿ç”¨å¤„ç†æ—¶é—´çª—å£")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-flinkçš„çŠ¶æ€ç®¡ç†æ˜¯å¦‚ä½•å®ç°çš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-flinkçš„çŠ¶æ€ç®¡ç†æ˜¯å¦‚ä½•å®ç°çš„"}},[t._v("#")]),t._v(" ğŸ¯ Flinkçš„çŠ¶æ€ç®¡ç†æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("FlinkçŠ¶æ€ç®¡ç†æ¦‚è¿°")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("çŠ¶æ€æ˜¯Flinkæµå¤„ç†çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç”¨äºå­˜å‚¨"),a("strong",[t._v("ä¸­é—´è®¡ç®—ç»“æœ")]),t._v("å’Œ"),a("strong",[t._v("å†å²ä¿¡æ¯")]),t._v("ï¼Œæ”¯æŒæ•…éšœæ¢å¤å’Œç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("çŠ¶æ€åˆ†ç±»")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. æŒ‰ä½œç”¨åŸŸåˆ†ç±»")])]),t._v(" "),a("p",[a("strong",[t._v("Keyed Stateï¼ˆé”®æ§çŠ¶æ€ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä¸ç‰¹å®škeyç›¸å…³çš„çŠ¶æ€")]),t._v(" "),a("li",[t._v("åªèƒ½åœ¨KeyedStreamä¸Šä½¿ç”¨")]),t._v(" "),a("li",[t._v("çŠ¶æ€è‡ªåŠ¨åˆ†åŒºå’Œåˆ†å‘")])]),t._v(" "),a("p",[a("strong",[t._v("Operator Stateï¼ˆç®—å­çŠ¶æ€ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä¸ç®—å­å®ä¾‹ç»‘å®šçš„çŠ¶æ€")]),t._v(" "),a("li",[t._v("æ¯ä¸ªç®—å­å¹¶è¡Œå®ä¾‹ç»´æŠ¤è‡ªå·±çš„çŠ¶æ€")]),t._v(" "),a("li",[t._v("éœ€è¦æ‰‹åŠ¨å®ç°çŠ¶æ€åˆ†å‘é€»è¾‘")])]),t._v(" "),a("p",[a("strong",[t._v("2. æŒ‰å­˜å‚¨ç»“æ„åˆ†ç±»")])]),t._v(" "),a("p",[a("strong",[t._v("ValueState")]),t._v("ï¼šå­˜å‚¨å•ä¸ªå€¼")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ValueState")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" countState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Configuration")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ValueStateDescriptor")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" descriptor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ValueStateDescriptor")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    countState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRuntimeContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("descriptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("ListState")]),t._v("ï¼šå­˜å‚¨å…ƒç´ åˆ—è¡¨")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ListState")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" eventListState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("MapState")]),t._v("ï¼šå­˜å‚¨Key-Valueæ˜ å°„")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MapState")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" mapState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("ReducingState")]),t._v("ï¼šå­˜å‚¨å•ä¸ªå€¼ï¼Œæ–°å€¼é€šè¿‡ReduceFunctionåˆå¹¶")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReducingState")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" reducingState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("AggregatingState")]),t._v("ï¼šç±»ä¼¼ReducingStateï¼Œä½†å¯ä»¥ä¸åŒç±»å‹")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AggregatingState")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Double")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" aggState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("çŠ¶æ€å­˜å‚¨åç«¯ï¼ˆState Backendï¼‰")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. MemoryStateBackend")])]),t._v(" "),a("ul",[a("li",[t._v("çŠ¶æ€å­˜å‚¨åœ¨JVMå †å†…å­˜ä¸­")]),t._v(" "),a("li",[t._v("é€‚åˆçŠ¶æ€è¾ƒå°çš„åœºæ™¯")]),t._v(" "),a("li",[t._v("æ€§èƒ½æœ€å¥½ï¼Œä½†å®¹é‡æœ‰é™")])]),t._v(" "),a("p",[a("strong",[t._v("2. FsStateBackend")])]),t._v(" "),a("ul",[a("li",[t._v("çŠ¶æ€å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFS/S3ï¼‰")]),t._v(" "),a("li",[t._v("é€‚åˆä¸­ç­‰è§„æ¨¡çŠ¶æ€")]),t._v(" "),a("li",[t._v("å¹³è¡¡æ€§èƒ½å’Œå®¹é‡")])]),t._v(" "),a("p",[a("strong",[t._v("3. RocksDBStateBackend")])]),t._v(" "),a("ul",[a("li",[t._v("çŠ¶æ€å­˜å‚¨åœ¨æœ¬åœ°RocksDB + è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿ")]),t._v(" "),a("li",[t._v("é€‚åˆå¤§çŠ¶æ€åœºæ™¯")]),t._v(" "),a("li",[t._v("æ”¯æŒå¢é‡checkpoint")])]),t._v(" "),a("p",[a("strong",[t._v("Checkpointæœºåˆ¶")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. Checkpointè§¦å‘")])]),t._v(" "),a("ul",[a("li",[t._v("JobManagerå®šæœŸè§¦å‘Checkpoint")]),t._v(" "),a("li",[t._v("åŸºäºåˆ†å¸ƒå¼å¿«ç…§ç®—æ³•ï¼ˆChandy-Lamportï¼‰")]),t._v(" "),a("li",[t._v("ä¿è¯çŠ¶æ€ä¸€è‡´æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("2. Checkpointæµç¨‹")])]),t._v(" "),a("ul",[a("li",[t._v("JobManagerå‘Sourceå‘é€Checkpoint Barrier")]),t._v(" "),a("li",[t._v("Barrieråœ¨æ•°æ®æµä¸­ä¼ æ’­")]),t._v(" "),a("li",[t._v("ç®—å­æ”¶åˆ°Barrieræ—¶ä¿å­˜çŠ¶æ€å¿«ç…§")]),t._v(" "),a("li",[t._v("æ‰€æœ‰ç®—å­å®ŒæˆåCheckpointæˆåŠŸ")])]),t._v(" "),a("p",[a("strong",[t._v("3. æ•…éšœæ¢å¤")])]),t._v(" "),a("ul",[a("li",[t._v("ä»æœ€è¿‘çš„Checkpointæ¢å¤çŠ¶æ€")]),t._v(" "),a("li",[t._v("é‡æ’­Checkpointä¹‹åçš„æ•°æ®")]),t._v(" "),a("li",[t._v("ä¿è¯Exactly-Onceè¯­ä¹‰")])]),t._v(" "),a("p",[a("strong",[t._v("çŠ¶æ€ä¼˜åŒ–ç­–ç•¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åˆç†é€‰æ‹©State Backend")]),t._v(" "),a("li",[t._v("è®¾ç½®åˆé€‚çš„Checkpointé—´éš”")]),t._v(" "),a("li",[t._v("å¯ç”¨å¢é‡Checkpoint")]),t._v(" "),a("li",[t._v("æ¸…ç†è¿‡æœŸçŠ¶æ€ï¼ˆTTLï¼‰")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ“Š-å››ã€æ•°æ®ä»“åº“æŠ€æœ¯-hiveæ ¸å¿ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Š-å››ã€æ•°æ®ä»“åº“æŠ€æœ¯-hiveæ ¸å¿ƒ"}},[t._v("#")]),t._v(" ğŸ“Š å››ã€æ•°æ®ä»“åº“æŠ€æœ¯ï¼ˆHiveæ ¸å¿ƒï¼‰")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("æ ¸å¿ƒæ€æƒ³")]),t._v("ï¼šHiveæ˜¯Hadoopç”Ÿæ€ç³»ç»Ÿä¸­çš„æ•°æ®ä»“åº“è½¯ä»¶ï¼Œé€šè¿‡SQLæ¥å£ç®€åŒ–å¤§æ•°æ®åˆ†æï¼Œæ˜¯ç¦»çº¿æ•°æ®å¤„ç†çš„æ ¸å¿ƒç»„ä»¶ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-hiveçš„æ¶æ„åŸç†æ˜¯ä»€ä¹ˆ-sqlæ˜¯å¦‚ä½•è½¬æ¢ä¸ºmapreduceçš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-hiveçš„æ¶æ„åŸç†æ˜¯ä»€ä¹ˆ-sqlæ˜¯å¦‚ä½•è½¬æ¢ä¸ºmapreduceçš„"}},[t._v("#")]),t._v(" ğŸ¯ Hiveçš„æ¶æ„åŸç†æ˜¯ä»€ä¹ˆï¼ŸSQLæ˜¯å¦‚ä½•è½¬æ¢ä¸ºMapReduceçš„ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("Hiveæ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("Hiveæ˜¯åŸºäºHadoopçš„"),a("strong",[t._v("æ•°æ®ä»“åº“è½¯ä»¶")]),t._v("ï¼Œæä¾›"),a("strong",[t._v("SQLæ¥å£")]),t._v("æ¥æŸ¥è¯¢å­˜å‚¨åœ¨HDFSä¸Šçš„æ•°æ®ã€‚å®ƒå°†SQLæŸ¥è¯¢è½¬æ¢ä¸ºMapReduceã€Sparkæˆ–Tezä½œä¸šæ¥æ‰§è¡Œã€‚")]),t._v(" "),a("p",[a("strong",[t._v("Hiveæ ¸å¿ƒæ¶æ„")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. Hive Clientï¼ˆå®¢æˆ·ç«¯ï¼‰")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("CLI")]),t._v("ï¼šå‘½ä»¤è¡Œæ¥å£")]),t._v(" "),a("li",[a("strong",[t._v("HiveServer2")]),t._v("ï¼šæä¾›JDBC/ODBCæ¥å£")]),t._v(" "),a("li",[a("strong",[t._v("Web Interface")]),t._v("ï¼šWebç®¡ç†ç•Œé¢")])]),t._v(" "),a("p",[a("strong",[t._v("2. Hive Driverï¼ˆé©±åŠ¨å™¨ï¼‰")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Compiler")]),t._v("ï¼šSQLç¼–è¯‘å™¨")]),t._v(" "),a("li",[a("strong",[t._v("Optimizer")]),t._v("ï¼šæŸ¥è¯¢ä¼˜åŒ–å™¨")]),t._v(" "),a("li",[a("strong",[t._v("Executor")]),t._v("ï¼šæ‰§è¡Œå¼•æ“")])]),t._v(" "),a("p",[a("strong",[t._v("3. Hive MetaStoreï¼ˆå…ƒæ•°æ®å­˜å‚¨ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("å­˜å‚¨è¡¨ç»“æ„ã€åˆ†åŒºä¿¡æ¯ã€å­˜å‚¨ä½ç½®ç­‰å…ƒæ•°æ®")]),t._v(" "),a("li",[t._v("é€šå¸¸ä½¿ç”¨MySQLç­‰å…³ç³»æ•°æ®åº“å­˜å‚¨")]),t._v(" "),a("li",[t._v("æ”¯æŒå¤šä¸ªHiveå®ä¾‹å…±äº«å…ƒæ•°æ®")])]),t._v(" "),a("p",[a("strong",[t._v("SQLè½¬æ¢MapReduceæµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. è¯­æ³•åˆ†æï¼ˆParseï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("ä½¿ç”¨Antlrå°†SQLè§£æä¸ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰")]),t._v(" "),a("li",[t._v("æ£€æŸ¥è¯­æ³•é”™è¯¯")])]),t._v(" "),a("p",[a("strong",[t._v("2. è¯­ä¹‰åˆ†æï¼ˆSemantic Analysisï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("å°†ASTè½¬æ¢ä¸ºæŸ¥è¯¢å—ï¼ˆQuery Blockï¼‰")]),t._v(" "),a("li",[t._v("éªŒè¯è¡¨ã€åˆ—æ˜¯å¦å­˜åœ¨")]),t._v(" "),a("li",[t._v("ç±»å‹æ£€æŸ¥å’Œè½¬æ¢")])]),t._v(" "),a("p",[a("strong",[t._v("3. é€»è¾‘è®¡åˆ’ç”Ÿæˆ")])]),t._v(" "),a("ul",[a("li",[t._v("ç”Ÿæˆé€»è¾‘æ‰§è¡Œè®¡åˆ’")]),t._v(" "),a("li",[t._v("åŒ…æ‹¬æ“ä½œç¬¦æ ‘ç»“æ„")])]),t._v(" "),a("p",[a("strong",[t._v("4. é€»è¾‘ä¼˜åŒ–")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("è°“è¯ä¸‹æ¨")]),t._v("ï¼šå°†è¿‡æ»¤æ¡ä»¶å°½æ—©æ‰§è¡Œ")]),t._v(" "),a("li",[a("strong",[t._v("åˆ—è£å‰ª")]),t._v("ï¼šåªè¯»å–éœ€è¦çš„åˆ—")]),t._v(" "),a("li",[a("strong",[t._v("å¸¸é‡æŠ˜å ")]),t._v("ï¼šé¢„è®¡ç®—å¸¸é‡è¡¨è¾¾å¼")])]),t._v(" "),a("p",[a("strong",[t._v("5. ç‰©ç†è®¡åˆ’ç”Ÿæˆ")])]),t._v(" "),a("ul",[a("li",[t._v("å°†é€»è¾‘è®¡åˆ’è½¬æ¢ä¸ºç‰©ç†æ‰§è¡Œè®¡åˆ’")]),t._v(" "),a("li",[t._v("å†³å®šä½¿ç”¨MapReduce/Spark/Tez")])]),t._v(" "),a("p",[a("strong",[t._v("6. ç‰©ç†ä¼˜åŒ–")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("MapJoin")]),t._v("ï¼šå°è¡¨broadcaståˆ°å¤§è¡¨æ‰€åœ¨èŠ‚ç‚¹")]),t._v(" "),a("li",[a("strong",[t._v("åˆ†åŒºè£å‰ª")]),t._v("ï¼šåªæ‰«æç›¸å…³åˆ†åŒº")]),t._v(" "),a("li",[a("strong",[t._v("ç´¢å¼•ä½¿ç”¨")]),t._v("ï¼šåˆ©ç”¨ç´¢å¼•åŠ é€ŸæŸ¥è¯¢")])]),t._v(" "),a("p",[a("strong",[t._v("ç¤ºä¾‹SQLè½¬æ¢è¿‡ç¨‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" dept"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" employees \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" salary "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50000")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GROUP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" dept"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("è½¬æ¢ä¸ºMapReduce")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Mapé˜¶æ®µ")]),t._v("ï¼šè¿‡æ»¤salary > 50000ï¼Œè¾“å‡º(dept, 1)")]),t._v(" "),a("li",[a("strong",[t._v("Shuffleé˜¶æ®µ")]),t._v("ï¼šæŒ‰deptåˆ†ç»„")]),t._v(" "),a("li",[a("strong",[t._v("Reduceé˜¶æ®µ")]),t._v("ï¼šç»Ÿè®¡æ¯ä¸ªdeptçš„count")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-hiveçš„å­˜å‚¨æ ¼å¼æœ‰å“ªäº›-å„æœ‰ä»€ä¹ˆç‰¹ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-hiveçš„å­˜å‚¨æ ¼å¼æœ‰å“ªäº›-å„æœ‰ä»€ä¹ˆç‰¹ç‚¹"}},[t._v("#")]),t._v(" ğŸ¯ Hiveçš„å­˜å‚¨æ ¼å¼æœ‰å“ªäº›ï¼Ÿå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("Hiveæ”¯æŒå¤šç§å­˜å‚¨æ ¼å¼")]),t._v("ï¼Œä¸åŒæ ¼å¼é€‚ç”¨äºä¸åŒçš„åœºæ™¯å’Œæ€§èƒ½éœ€æ±‚ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("1. è¡Œå­˜å‚¨æ ¼å¼")])]),t._v(" "),a("p",[a("strong",[t._v("TextFile")])]),t._v(" "),a("ul",[a("li",[t._v("é»˜è®¤æ ¼å¼ï¼Œçº¯æ–‡æœ¬å­˜å‚¨")]),t._v(" "),a("li",[t._v("äººç±»å¯è¯»ï¼Œä¾¿äºè°ƒè¯•")]),t._v(" "),a("li",[t._v("å‹ç¼©ç‡ä½ï¼ŒæŸ¥è¯¢æ€§èƒ½ä¸€èˆ¬")]),t._v(" "),a("li",[t._v("é€‚åˆå°æ•°æ®é‡ã€ä¸´æ—¶è¡¨")])]),t._v(" "),a("p",[a("strong",[t._v("SequenceFile")])]),t._v(" "),a("ul",[a("li",[t._v("Hadoopçš„äºŒè¿›åˆ¶æ ¼å¼")]),t._v(" "),a("li",[t._v("æ”¯æŒå‹ç¼©å’Œåˆ†å‰²")]),t._v(" "),a("li",[t._v("æ¯”TextFileæ€§èƒ½å¥½")]),t._v(" "),a("li",[t._v("é€‚åˆä¸­é—´æ•°æ®å­˜å‚¨")])]),t._v(" "),a("p",[a("strong",[t._v("2. åˆ—å­˜å‚¨æ ¼å¼")])]),t._v(" "),a("p",[a("strong",[t._v("ORCï¼ˆOptimized Row Columnarï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("Hiveä¸“é—¨ä¼˜åŒ–çš„åˆ—å¼å­˜å‚¨")]),t._v(" "),a("li",[a("strong",[t._v("ä¼˜åŠ¿")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("é«˜å‹ç¼©ç‡ï¼ˆå¯è¾¾70%ï¼‰")]),t._v(" "),a("li",[t._v("å†…ç½®ç´¢å¼•ï¼ˆMin/Max/Bloom Filterï¼‰")]),t._v(" "),a("li",[t._v("æ”¯æŒå‘é‡åŒ–æŸ¥è¯¢")]),t._v(" "),a("li",[t._v("ACIDäº‹åŠ¡æ”¯æŒ")])])]),t._v(" "),a("li",[a("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šå¤§æ•°æ®åˆ†æã€æ•°ä»“æŸ¥è¯¢")])]),t._v(" "),a("p",[a("strong",[t._v("Parquet")])]),t._v(" "),a("ul",[a("li",[t._v("é€šç”¨çš„åˆ—å¼å­˜å‚¨æ ¼å¼")]),t._v(" "),a("li",[a("strong",[t._v("ä¼˜åŠ¿")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("è·¨å¹³å°å…¼å®¹æ€§å¥½")]),t._v(" "),a("li",[t._v("é«˜æ•ˆçš„ç¼–ç å’Œå‹ç¼©")]),t._v(" "),a("li",[t._v("åµŒå¥—æ•°æ®æ”¯æŒå¥½")]),t._v(" "),a("li",[t._v("ä¸Sparké›†æˆå®Œå–„")])])]),t._v(" "),a("li",[a("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šå¤šå¼•æ“æ•°æ®å…±äº«")])]),t._v(" "),a("p",[a("strong",[t._v("3. æ··åˆå­˜å‚¨æ ¼å¼")])]),t._v(" "),a("p",[a("strong",[t._v("Avro")])]),t._v(" "),a("ul",[a("li",[t._v("æ”¯æŒæ¨¡å¼æ¼”åŒ–")]),t._v(" "),a("li",[t._v("è‡ªæè¿°æ•°æ®æ ¼å¼")]),t._v(" "),a("li",[t._v("é€‚åˆæ•°æ®äº¤æ¢åœºæ™¯")])]),t._v(" "),a("p",[a("strong",[t._v("å­˜å‚¨æ ¼å¼æ€§èƒ½å¯¹æ¯”")]),t._v("ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("æ ¼å¼")]),t._v(" "),a("th",[t._v("å‹ç¼©ç‡")]),t._v(" "),a("th",[t._v("æŸ¥è¯¢æ€§èƒ½")]),t._v(" "),a("th",[t._v("å†™å…¥æ€§èƒ½")]),t._v(" "),a("th",[t._v("å…¼å®¹æ€§")]),t._v(" "),a("th",[t._v("é€‚ç”¨åœºæ™¯")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("TextFile")]),t._v(" "),a("td",[t._v("ä½")]),t._v(" "),a("td",[t._v("ä½")]),t._v(" "),a("td",[t._v("é«˜")]),t._v(" "),a("td",[t._v("æœ€å¥½")]),t._v(" "),a("td",[t._v("è°ƒè¯•ã€ä¸´æ—¶æ•°æ®")])]),t._v(" "),a("tr",[a("td",[t._v("ORC")]),t._v(" "),a("td",[t._v("é«˜")]),t._v(" "),a("td",[t._v("é«˜")]),t._v(" "),a("td",[t._v("ä¸­")]),t._v(" "),a("td",[t._v("Hiveç”Ÿæ€")]),t._v(" "),a("td",[t._v("æ•°ä»“åˆ†æ")])]),t._v(" "),a("tr",[a("td",[t._v("Parquet")]),t._v(" "),a("td",[t._v("é«˜")]),t._v(" "),a("td",[t._v("é«˜")]),t._v(" "),a("td",[t._v("ä¸­")]),t._v(" "),a("td",[t._v("è·¨å¼•æ“")]),t._v(" "),a("td",[t._v("å¤šå¼•æ“å…±äº«")])]),t._v(" "),a("tr",[a("td",[t._v("Avro")]),t._v(" "),a("td",[t._v("ä¸­")]),t._v(" "),a("td",[t._v("ä¸­")]),t._v(" "),a("td",[t._v("é«˜")]),t._v(" "),a("td",[t._v("å¥½")]),t._v(" "),a("td",[t._v("æ•°æ®äº¤æ¢")])])])]),t._v(" "),a("p",[a("strong",[t._v("é€‰æ‹©å»ºè®®")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æ•°ä»“åœºæ™¯")]),t._v("ï¼šä¼˜å…ˆé€‰æ‹©ORC")]),t._v(" "),a("li",[a("strong",[t._v("å¤šå¼•æ“åœºæ™¯")]),t._v("ï¼šä¼˜å…ˆé€‰æ‹©Parquet")]),t._v(" "),a("li",[a("strong",[t._v("å®æ—¶å†™å…¥")]),t._v("ï¼šè€ƒè™‘TextFileæˆ–Avro")]),t._v(" "),a("li",[a("strong",[t._v("å­˜å‚¨æˆæœ¬æ•æ„Ÿ")]),t._v("ï¼šé€‰æ‹©å‹ç¼©ç‡é«˜çš„åˆ—å¼å­˜å‚¨")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-hiveçš„åˆ†åŒºå’Œåˆ†æ¡¶æœºåˆ¶æ˜¯ä»€ä¹ˆ-å¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-hiveçš„åˆ†åŒºå’Œåˆ†æ¡¶æœºåˆ¶æ˜¯ä»€ä¹ˆ-å¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢"}},[t._v("#")]),t._v(" ğŸ¯ Hiveçš„åˆ†åŒºå’Œåˆ†æ¡¶æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("åˆ†åŒºï¼ˆPartitionï¼‰æœºåˆ¶")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("åˆ†åŒºæ˜¯Hiveä¸­çš„"),a("strong",[t._v("æ°´å¹³åˆ†å‰²")]),t._v("æŠ€æœ¯ï¼Œå°†è¡¨æ•°æ®æŒ‰ç…§æŸä¸ªæˆ–å¤šä¸ªåˆ—çš„å€¼åˆ†å‰²å­˜å‚¨åœ¨ä¸åŒçš„ç›®å½•ä¸­ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("åˆ†åŒºçš„ä¼˜åŠ¿")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æŸ¥è¯¢ä¼˜åŒ–")]),t._v("ï¼šåªæ‰«æç›¸å…³åˆ†åŒºï¼Œé¿å…å…¨è¡¨æ‰«æ")]),t._v(" "),a("li",[a("strong",[t._v("æ•°æ®ç®¡ç†")]),t._v("ï¼šä¾¿äºæ•°æ®çš„å¢åˆ æ”¹ç»´æŠ¤")]),t._v(" "),a("li",[a("strong",[t._v("å¹¶è¡Œåº¦æå‡")]),t._v("ï¼šä¸åŒåˆ†åŒºå¯ä»¥å¹¶è¡Œå¤„ç†")])]),t._v(" "),a("p",[a("strong",[t._v("åˆ†åŒºç±»å‹")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. é™æ€åˆ†åŒº")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- åˆ›å»ºåˆ†åŒºè¡¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" sales_data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    product STRING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    amount "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DOUBLE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" PARTITIONED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("year")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("month")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nSTORED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" ORC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- æ’å…¥æ•°æ®åˆ°æŒ‡å®šåˆ†åŒº")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" sales_data "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("year")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("month")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'phone'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("2. åŠ¨æ€åˆ†åŒº")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- å¼€å¯åŠ¨æ€åˆ†åŒº")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dynamic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("partition")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dynamic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("partition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nonstrict"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- åŠ¨æ€åˆ†åŒºæ’å…¥")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" sales_data "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PARTITION")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("year")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("month")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" product"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("year")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("month")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" source_table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("åˆ†æ¡¶ï¼ˆBucketï¼‰æœºåˆ¶")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("åˆ†æ¡¶æ˜¯å¯¹æ•°æ®è¿›è¡Œ"),a("strong",[t._v("hashåˆ†å‰²")]),t._v("ï¼Œå°†ç›¸åŒhashå€¼çš„æ•°æ®æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("åˆ†æ¡¶çš„ä¼˜åŠ¿")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Joinä¼˜åŒ–")]),t._v("ï¼šç›¸åŒkeyçš„æ•°æ®åœ¨åŒä¸€ä¸ªæ¡¶ä¸­ï¼Œé¿å…shuffle")]),t._v(" "),a("li",[a("strong",[t._v("æŠ½æ ·æŸ¥è¯¢")]),t._v("ï¼šå¯ä»¥é«˜æ•ˆåœ°è¿›è¡Œæ•°æ®æŠ½æ ·")]),t._v(" "),a("li",[a("strong",[t._v("è´Ÿè½½å‡è¡¡")]),t._v("ï¼šæ•°æ®å‡åŒ€åˆ†å¸ƒåœ¨å„ä¸ªæ–‡ä»¶ä¸­")])]),t._v(" "),a("p",[a("strong",[t._v("åˆ†æ¡¶ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- åˆ›å»ºåˆ†æ¡¶è¡¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" user_data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name STRING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    age "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CLUSTERED")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" BUCKETS\nSTORED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" ORC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- å¼€å¯åˆ†æ¡¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enforce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bucketing"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. åˆ†åŒºè£å‰ªï¼ˆPartition Pruningï¼‰")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- å¥½çš„æŸ¥è¯¢ï¼šåªæ‰«æç‰¹å®šåˆ†åŒº")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" sales_data \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("year")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("AND")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("month")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- å·®çš„æŸ¥è¯¢ï¼šå…¨è¡¨æ‰«æ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" sales_data \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" amount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("2. åˆ—è£å‰ªï¼ˆColumn Pruningï¼‰")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- åªæŸ¥è¯¢éœ€è¦çš„åˆ—")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" product "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" sales_data \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("year")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("3. è°“è¯ä¸‹æ¨ï¼ˆPredicate Pushdownï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("å°†è¿‡æ»¤æ¡ä»¶ä¸‹æ¨åˆ°å­˜å‚¨å±‚")]),t._v(" "),a("li",[t._v("å‡å°‘æ•°æ®ä¼ è¾“é‡")])]),t._v(" "),a("p",[a("strong",[t._v("4. MapJoinä¼˜åŒ–")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- å°è¡¨Joinå¤§è¡¨ä¼˜åŒ–")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("auto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("convert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mapjoin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("smalltable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filesize"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("5. å‘é‡åŒ–æ‰§è¡Œ")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- å¼€å¯å‘é‡åŒ–æŸ¥è¯¢")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vectorized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execution"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vectorized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execution"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reduce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("åˆ†åŒºè®¾è®¡æœ€ä½³å®è·µ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é€‰æ‹©"),a("strong",[t._v("æŸ¥è¯¢é¢‘ç¹")]),t._v("çš„åˆ—ä½œä¸ºåˆ†åŒºå­—æ®µ")]),t._v(" "),a("li",[t._v("é¿å…"),a("strong",[t._v("åˆ†åŒºè¿‡å¤š")]),t._v("ï¼ˆå»ºè®®<10000ä¸ªï¼‰")]),t._v(" "),a("li",[t._v("åˆ†åŒºå¤§å°æ§åˆ¶åœ¨"),a("strong",[t._v("256MB-1GB")]),t._v("ä¹‹é—´")]),t._v(" "),a("li",[t._v("ä½¿ç”¨"),a("strong",[t._v("å¤šçº§åˆ†åŒº")]),t._v("æé«˜æŸ¥è¯¢æ•ˆç‡")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸš€-äº”ã€æ¶ˆæ¯é˜Ÿåˆ—-kafkaæ ¸å¿ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš€-äº”ã€æ¶ˆæ¯é˜Ÿåˆ—-kafkaæ ¸å¿ƒ"}},[t._v("#")]),t._v(" ğŸš€ äº”ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆKafkaæ ¸å¿ƒï¼‰")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("æ ¸å¿ƒæ€æƒ³")]),t._v("ï¼šKafkaæ˜¯åˆ†å¸ƒå¼æµå¤„ç†å¹³å°çš„åŸºçŸ³ï¼Œé€šè¿‡åˆ†å¸ƒå¼ã€é«˜ååã€ä½å»¶è¿Ÿçš„æ¶ˆæ¯ä¼ é€’ï¼Œè¿æ¥æ•°æ®çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-kafkaçš„æ ¸å¿ƒæ¶æ„æ˜¯ä»€ä¹ˆ-å¦‚ä½•ä¿è¯é«˜æ€§èƒ½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-kafkaçš„æ ¸å¿ƒæ¶æ„æ˜¯ä»€ä¹ˆ-å¦‚ä½•ä¿è¯é«˜æ€§èƒ½"}},[t._v("#")]),t._v(" ğŸ¯ Kafkaçš„æ ¸å¿ƒæ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä¿è¯é«˜æ€§èƒ½ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("Kafkaæ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("Apache Kafkaæ˜¯ä¸€ä¸ª"),a("strong",[t._v("åˆ†å¸ƒå¼æµå¤„ç†å¹³å°")]),t._v("ï¼Œæä¾›é«˜ååé‡ã€ä½å»¶è¿Ÿçš„æ¶ˆæ¯å‘å¸ƒè®¢é˜…æœåŠ¡ï¼Œå¹¿æ³›ç”¨äºå®æ—¶æ•°æ®ç®¡é“å’Œæµå¼åº”ç”¨ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("Kafkaæ ¸å¿ƒæ¶æ„")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. Brokerï¼ˆæœåŠ¡èŠ‚ç‚¹ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("Kafkaé›†ç¾¤ä¸­çš„æœåŠ¡å™¨èŠ‚ç‚¹")]),t._v(" "),a("li",[t._v("è´Ÿè´£å­˜å‚¨å’Œè½¬å‘æ¶ˆæ¯")]),t._v(" "),a("li",[t._v("é€šè¿‡ZooKeeperåè°ƒé›†ç¾¤çŠ¶æ€")])]),t._v(" "),a("p",[a("strong",[t._v("2. Topicï¼ˆä¸»é¢˜ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("æ¶ˆæ¯çš„é€»è¾‘åˆ†ç±»")]),t._v(" "),a("li",[t._v("ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°Topic")]),t._v(" "),a("li",[t._v("æ¶ˆè´¹è€…ä»Topicè®¢é˜…æ¶ˆæ¯")])]),t._v(" "),a("p",[a("strong",[t._v("3. Partitionï¼ˆåˆ†åŒºï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("Topicçš„ç‰©ç†åˆ†å‰²å•ä½")]),t._v(" "),a("li",[t._v("æ¯ä¸ªåˆ†åŒºæ˜¯ä¸€ä¸ªæœ‰åºçš„æ¶ˆæ¯é˜Ÿåˆ—")]),t._v(" "),a("li",[t._v("åˆ†åŒºå†…æ¶ˆæ¯æœ‰åºï¼Œåˆ†åŒºé—´æ— åº")])]),t._v(" "),a("p",[a("strong",[t._v("4. Replicaï¼ˆå‰¯æœ¬ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("æ¯ä¸ªåˆ†åŒºå¯ä»¥æœ‰å¤šä¸ªå‰¯æœ¬")]),t._v(" "),a("li",[a("strong",[t._v("Leader Replica")]),t._v("ï¼šå¤„ç†è¯»å†™è¯·æ±‚")]),t._v(" "),a("li",[a("strong",[t._v("Follower Replica")]),t._v("ï¼šä»LeaderåŒæ­¥æ•°æ®")])]),t._v(" "),a("p",[a("strong",[t._v("5. Producerï¼ˆç”Ÿäº§è€…ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("å‘é€æ¶ˆæ¯åˆ°Kafka Topic")]),t._v(" "),a("li",[t._v("å¯ä»¥æŒ‡å®šåˆ†åŒºç­–ç•¥")])]),t._v(" "),a("p",[a("strong",[t._v("6. Consumerï¼ˆæ¶ˆè´¹è€…ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("ä»Kafka Topicæ¶ˆè´¹æ¶ˆæ¯")]),t._v(" "),a("li",[t._v("å¯ä»¥ç»„æˆConsumer Group")])]),t._v(" "),a("p",[a("strong",[t._v("é«˜æ€§èƒ½è®¾è®¡åŸç†")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. é¡ºåºå†™å…¥")])]),t._v(" "),a("ul",[a("li",[t._v("æ¶ˆæ¯è¿½åŠ åˆ°æ—¥å¿—æ–‡ä»¶æœ«å°¾")]),t._v(" "),a("li",[t._v("é¿å…éšæœºI/Oï¼Œå‘æŒ¥ç£ç›˜é¡ºåºè¯»å†™ä¼˜åŠ¿")]),t._v(" "),a("li",[t._v("é¡ºåºå†™æ€§èƒ½æ¥è¿‘å†…å­˜")])]),t._v(" "),a("p",[a("strong",[t._v("2. é›¶æ‹·è´ï¼ˆZero Copyï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("ä½¿ç”¨sendfile()ç³»ç»Ÿè°ƒç”¨")]),t._v(" "),a("li",[t._v("æ•°æ®ç›´æ¥ä»å†…æ ¸ç©ºé—´ä¼ è¾“åˆ°ç½‘ç»œ")]),t._v(" "),a("li",[t._v("é¿å…ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´çš„æ•°æ®æ‹·è´")])]),t._v(" "),a("p",[a("strong",[t._v("3. æ‰¹é‡å¤„ç†")])]),t._v(" "),a("ul",[a("li",[t._v("ç”Ÿäº§è€…æ‰¹é‡å‘é€æ¶ˆæ¯")]),t._v(" "),a("li",[t._v("å‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•°")]),t._v(" "),a("li",[t._v("æå‡æ•´ä½“ååé‡")])]),t._v(" "),a("p",[a("strong",[t._v("4. åˆ†åŒºå¹¶è¡Œ")])]),t._v(" "),a("ul",[a("li",[t._v("å¤šä¸ªåˆ†åŒºå¹¶è¡Œè¯»å†™")]),t._v(" "),a("li",[t._v("æé«˜å¹¶å‘å¤„ç†èƒ½åŠ›")]),t._v(" "),a("li",[t._v("æ”¯æŒæ°´å¹³æ‰©å±•")])]),t._v(" "),a("p",[a("strong",[t._v("5. é¡µç¼“å­˜åˆ©ç”¨")])]),t._v(" "),a("ul",[a("li",[t._v("ä¾èµ–æ“ä½œç³»ç»Ÿé¡µç¼“å­˜")]),t._v(" "),a("li",[t._v("ä¸åœ¨JVMå †ä¸­ç¼“å­˜æ•°æ®")]),t._v(" "),a("li",[t._v("é¿å…GCå½±å“æ€§èƒ½")])]),t._v(" "),a("p",[a("strong",[t._v("6. å‹ç¼©")])]),t._v(" "),a("ul",[a("li",[t._v("æ”¯æŒå¤šç§å‹ç¼©ç®—æ³•ï¼ˆGzipã€Snappyã€LZ4ã€ZSTDï¼‰")]),t._v(" "),a("li",[t._v("å‡å°‘ç½‘ç»œä¼ è¾“å’Œå­˜å‚¨å¼€é”€")])]),t._v(" "),a("p",[a("strong",[t._v("æ€§èƒ½è°ƒä¼˜å‚æ•°")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ‰¹é‡å¤§å°")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("batch.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("16384")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("linger.ms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("5")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å‹ç¼©")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("compression.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("lz4")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å‰¯æœ¬ç¡®è®¤")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("acks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç¼“å†²åŒºå¤§å°")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("send.buffer.bytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("131072")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("receive.buffer.bytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("131072")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯çš„å¯é æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯çš„å¯é æ€§"}},[t._v("#")]),t._v(" ğŸ¯ Kafkaå¦‚ä½•ä¿è¯æ¶ˆæ¯çš„å¯é æ€§ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("å¯é æ€§æŒ‘æˆ˜")]),t._v("ï¼š\nåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œç½‘ç»œæ•…éšœã€èŠ‚ç‚¹å®•æœºã€ç£ç›˜æŸåç­‰é—®é¢˜éƒ½å¯èƒ½å¯¼è‡´æ¶ˆæ¯ä¸¢å¤±æˆ–é‡å¤ï¼ŒKafkaéœ€è¦åœ¨æ€§èƒ½å’Œå¯é æ€§ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("å¯é æ€§ä¿è¯æœºåˆ¶")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. å‰¯æœ¬æœºåˆ¶ï¼ˆReplicationï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("ISRï¼ˆIn-Sync Replicaï¼‰é›†åˆ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŒ…å«Leaderå’ŒåŒæ­¥çš„Followerå‰¯æœ¬")]),t._v(" "),a("li",[t._v("åªæœ‰ISRä¸­çš„å‰¯æœ¬æ‰èƒ½æˆä¸ºLeader")]),t._v(" "),a("li",[t._v("ä¿è¯æ•°æ®ä¸ä¸¢å¤±")])]),t._v(" "),a("p",[a("strong",[t._v("å‰¯æœ¬åŒæ­¥æµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Producerå‘é€æ¶ˆæ¯åˆ°Leader")]),t._v(" "),a("li",[t._v("Leaderå†™å…¥æœ¬åœ°æ—¥å¿—")]),t._v(" "),a("li",[t._v("Followerä»Leaderæ‹‰å–æ¶ˆæ¯")]),t._v(" "),a("li",[t._v("Followerå†™å…¥æœ¬åœ°æ—¥å¿—å¹¶å‘é€ACKç»™Leader")])]),t._v(" "),a("p",[a("strong",[t._v("2. ACKç¡®è®¤æœºåˆ¶")])]),t._v(" "),a("p",[a("strong",[t._v("acks=0")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç”Ÿäº§è€…ä¸ç­‰å¾…ä»»ä½•ç¡®è®¤")]),t._v(" "),a("li",[t._v("æ€§èƒ½æœ€é«˜ï¼Œå¯é æ€§æœ€ä½")]),t._v(" "),a("li",[t._v("å¯èƒ½ä¸¢å¤±æ¶ˆæ¯")])]),t._v(" "),a("p",[a("strong",[t._v("acks=1")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç­‰å¾…Leaderç¡®è®¤")]),t._v(" "),a("li",[t._v("æ€§èƒ½å’Œå¯é æ€§çš„å¹³è¡¡")]),t._v(" "),a("li",[t._v("Leaderæ•…éšœå¯èƒ½ä¸¢å¤±æ¶ˆæ¯")])]),t._v(" "),a("p",[a("strong",[t._v("acks=-1/all")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç­‰å¾…ISRä¸­æ‰€æœ‰å‰¯æœ¬ç¡®è®¤")]),t._v(" "),a("li",[t._v("å¯é æ€§æœ€é«˜ï¼Œæ€§èƒ½æœ€ä½")]),t._v(" "),a("li",[t._v("é…åˆ"),a("code",[t._v("min.insync.replicas")]),t._v("ä½¿ç”¨")])]),t._v(" "),a("p",[a("strong",[t._v("3. æ¶ˆæ¯é‡è¯•æœºåˆ¶")])]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç”Ÿäº§è€…é‡è¯•é…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("retries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Integer.MAX_VALUE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("retry.backoff.ms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("request.timeout.ms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("30000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("delivery.timeout.ms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("120000")]),t._v("\n")])])]),a("p",[a("strong",[t._v("4. å¹‚ç­‰æ€§ä¿è¯")])]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¼€å¯å¹‚ç­‰æ€§")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("enable.idempotence")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n")])])]),a("ul",[a("li",[t._v("ç”Ÿäº§è€…ä¼šä¸ºæ¯ä¸ªæ¶ˆæ¯åˆ†é…å”¯ä¸€çš„Sequence ID")]),t._v(" "),a("li",[t._v("Brokeræ£€æµ‹é‡å¤æ¶ˆæ¯å¹¶ä¸¢å¼ƒ")]),t._v(" "),a("li",[t._v("ä¿è¯æ¶ˆæ¯ä¸é‡å¤")])]),t._v(" "),a("p",[a("strong",[t._v("5. äº‹åŠ¡æ”¯æŒ")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// äº‹åŠ¡ç”Ÿäº§è€…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),t._v(" props "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprops"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transactional.id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-transactional-id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprops"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"enable.idempotence"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KafkaProducer")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" producer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KafkaProducer")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nproducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initTransactions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    producer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    producer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerRecord")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"topic"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    producer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commitTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    producer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("abortTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("6. æ¶ˆè´¹è€…å¯é æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("æ‰‹åŠ¨æäº¤Offset")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰‹åŠ¨æäº¤ç¡®ä¿å¤„ç†å®Œæˆåå†æäº¤")]),t._v("\nconsumer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("poll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†æ¶ˆæ¯...")]),t._v("\nconsumer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commitSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("æ¶ˆè´¹è€…ç»„æ•…éšœè½¬ç§»")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ¶ˆè´¹è€…æ•…éšœæ—¶ï¼Œå…¶ä»–æ¶ˆè´¹è€…æ¥ç®¡åˆ†åŒº")]),t._v(" "),a("li",[t._v("é€šè¿‡å¿ƒè·³æœºåˆ¶æ£€æµ‹æ¶ˆè´¹è€…çŠ¶æ€")])]),t._v(" "),a("p",[a("strong",[t._v("å¯é æ€§é…ç½®æœ€ä½³å®è·µ")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("é«˜å¯é æ€§é…ç½®")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç”Ÿäº§è€…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("acks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("all")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("retries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Integer.MAX_VALUE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("enable.idempotence")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("min.insync.replicas")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("2")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ¶ˆè´¹è€…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("enable.auto.commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("isolation.level")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("read_committed")]),t._v("\n")])])]),a("p",[a("strong",[t._v("é«˜æ€§èƒ½é…ç½®")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç”Ÿäº§è€…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("acks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("batch.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("32768")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("linger.ms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ¶ˆè´¹è€…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("enable.auto.commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-kafkaæ¶ˆè´¹è€…ç»„çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-kafkaæ¶ˆè´¹è€…ç»„çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ Kafkaæ¶ˆè´¹è€…ç»„çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("Consumer Groupæ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("Consumer Groupæ˜¯Kafkaä¸­"),a("strong",[t._v("æ¶ˆè´¹è€…çš„é€»è¾‘åˆ†ç»„")]),t._v("ï¼ŒåŒä¸€ä¸ªConsumer Groupä¸­çš„æ¶ˆè´¹è€…åä½œæ¶ˆè´¹Topicçš„æ¶ˆæ¯ï¼Œæ¯ä¸ªåˆ†åŒºåªèƒ½è¢«ç»„å†…ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒå·¥ä½œåŸç†")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. åˆ†åŒºåˆ†é…ç­–ç•¥")])]),t._v(" "),a("p",[a("strong",[t._v("Rangeåˆ†é…ç­–ç•¥ï¼ˆé»˜è®¤ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æŒ‰åˆ†åŒºèŒƒå›´åˆ†é…ç»™æ¶ˆè´¹è€…")]),t._v(" "),a("li",[t._v("å¯èƒ½å¯¼è‡´åˆ†é…ä¸å‡è¡¡")]),t._v(" "),a("li",[t._v("é€‚åˆåˆ†åŒºæ•°æ˜¯æ¶ˆè´¹è€…æ•°å€æ•°çš„æƒ…å†µ")])]),t._v(" "),a("p",[a("strong",[t._v("RoundRobinåˆ†é…ç­–ç•¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("è½®è¯¢æ–¹å¼åˆ†é…åˆ†åŒºç»™æ¶ˆè´¹è€…")]),t._v(" "),a("li",[t._v("åˆ†é…æ›´å‡è¡¡")]),t._v(" "),a("li",[t._v("é€‚åˆæ¶ˆè´¹è€…è®¢é˜…ç›¸åŒTopicçš„æƒ…å†µ")])]),t._v(" "),a("p",[a("strong",[t._v("Stickyåˆ†é…ç­–ç•¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å°½é‡ä¿æŒåˆ†åŒºåˆ†é…çš„ç²˜æ€§")]),t._v(" "),a("li",[t._v("Rebalanceæ—¶å‡å°‘åˆ†åŒºé‡æ–°åˆ†é…")]),t._v(" "),a("li",[t._v("æé«˜æ¶ˆè´¹æ•ˆç‡")])]),t._v(" "),a("p",[a("strong",[t._v("2. Coordinatoråè°ƒæœºåˆ¶")])]),t._v(" "),a("p",[a("strong",[t._v("Group Coordinator")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ¯ä¸ªConsumer Groupå¯¹åº”ä¸€ä¸ªCoordinator")]),t._v(" "),a("li",[t._v("è´Ÿè´£ç®¡ç†ç»„æˆå‘˜å’Œåˆ†åŒºåˆ†é…")]),t._v(" "),a("li",[t._v("å¤„ç†å¿ƒè·³å’Œæäº¤Offset")])]),t._v(" "),a("p",[a("strong",[t._v("å·¥ä½œæµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ¶ˆè´¹è€…åŠ å…¥Consumer Group")]),t._v(" "),a("li",[t._v("Coordinatoré€‰ä¸¾Group Leader")]),t._v(" "),a("li",[t._v("Group Leaderæ‰§è¡Œåˆ†åŒºåˆ†é…")]),t._v(" "),a("li",[t._v("Coordinatorå¹¿æ’­åˆ†é…ç»“æœ")])]),t._v(" "),a("p",[a("strong",[t._v("3. Rebalanceæœºåˆ¶")])]),t._v(" "),a("p",[a("strong",[t._v("è§¦å‘æ¡ä»¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ–°æ¶ˆè´¹è€…åŠ å…¥ç»„")]),t._v(" "),a("li",[t._v("æ¶ˆè´¹è€…ç¦»å¼€ç»„ï¼ˆæ­£å¸¸å…³é—­æˆ–æ•…éšœï¼‰")]),t._v(" "),a("li",[t._v("Topicåˆ†åŒºæ•°å˜åŒ–")]),t._v(" "),a("li",[t._v("æ¶ˆè´¹è€…è®¢é˜…çš„Topicå˜åŒ–")])]),t._v(" "),a("p",[a("strong",[t._v("Rebalanceæµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1. æ¶ˆè´¹è€…åœæ­¢æ¶ˆè´¹æ¶ˆæ¯\n2. æ¶ˆè´¹è€…å‘Coordinatorå‘é€JoinGroupè¯·æ±‚\n3. Coordinatoræ”¶é›†æ‰€æœ‰æ¶ˆè´¹è€…ä¿¡æ¯\n4. Coordinatoré€‰æ‹©Group Leader\n5. Group Leaderæ‰§è¡Œåˆ†åŒºåˆ†é…ç®—æ³•\n6. Coordinatorå¹¿æ’­åˆ†é…ç»“æœ\n7. æ¶ˆè´¹è€…æ ¹æ®åˆ†é…ç»“æœå¼€å§‹æ¶ˆè´¹\n")])])]),a("p",[a("strong",[t._v("4. Offsetç®¡ç†")])]),t._v(" "),a("p",[a("strong",[t._v("è‡ªåŠ¨æäº¤")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("enable.auto.commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("auto.commit.interval.ms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("5000")]),t._v("\n")])])]),a("p",[a("strong",[t._v("æ‰‹åŠ¨æäº¤")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒæ­¥æäº¤")]),t._v("\nconsumer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commitSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼‚æ­¥æäº¤")]),t._v("\nconsumer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commitAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("offsets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exception"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exception "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Commit failed"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exception"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("5. å¿ƒè·³æœºåˆ¶")])]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å¿ƒè·³é—´éš”")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("heartbeat.interval.ms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("3000")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä¼šè¯è¶…æ—¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("session.timeout.ms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10000")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æœ€å¤§æ‹‰å–é—´éš”")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("max.poll.interval.ms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("300000")]),t._v("\n")])])]),a("p",[a("strong",[t._v("æ¶ˆè´¹è€…ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),t._v(" props "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprops"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bootstrap.servers"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:9092"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprops"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"group.id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-group"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprops"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"auto.offset.reset"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"earliest"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprops"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"partition.assignment.strategy"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.apache.kafka.clients.consumer.StickyAssignor"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KafkaConsumer")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" consumer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KafkaConsumer")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsumer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("asList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-topic"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerRecords")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" records "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" consumer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("poll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerRecord")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" record "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" records"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†æ¶ˆæ¯")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"offset = %d, key = %s, value = %s%n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n            record"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("offset")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" record"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" record"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    consumer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commitAsync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("æœ€ä½³å®è·µ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åˆç†è®¾ç½®æ¶ˆè´¹è€…æ•°é‡ï¼ˆä¸è¶…è¿‡åˆ†åŒºæ•°ï¼‰")]),t._v(" "),a("li",[t._v("é€‰æ‹©åˆé€‚çš„åˆ†åŒºåˆ†é…ç­–ç•¥")]),t._v(" "),a("li",[t._v("ç›‘æ§Consumer LagæŒ‡æ ‡")]),t._v(" "),a("li",[t._v("å¤„ç†Rebalanceå¼‚å¸¸æƒ…å†µ")]),t._v(" "),a("li",[t._v("åˆç†è®¾ç½®å¿ƒè·³å’Œä¼šè¯è¶…æ—¶å‚æ•°")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ”§-å…­ã€èµ„æºè°ƒåº¦-yarnæ ¸å¿ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”§-å…­ã€èµ„æºè°ƒåº¦-yarnæ ¸å¿ƒ"}},[t._v("#")]),t._v(" ğŸ”§ å…­ã€èµ„æºè°ƒåº¦ï¼ˆYARNæ ¸å¿ƒï¼‰")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("æ ¸å¿ƒæ€æƒ³")]),t._v("ï¼šYARNæ˜¯Hadoop 2.0çš„èµ„æºç®¡ç†æ¡†æ¶ï¼Œå®ç°äº†è®¡ç®—ä¸å­˜å‚¨åˆ†ç¦»ï¼Œæ”¯æŒå¤šç§è®¡ç®—æ¡†æ¶åœ¨åŒä¸€é›†ç¾¤ä¸­è¿è¡Œã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-yarnçš„æ¶æ„åŸç†æ˜¯ä»€ä¹ˆ-ä¸hadoop-1-0ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-yarnçš„æ¶æ„åŸç†æ˜¯ä»€ä¹ˆ-ä¸hadoop-1-0ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿"}},[t._v("#")]),t._v(" ğŸ¯ YARNçš„æ¶æ„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸Hadoop 1.0ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("YARNæ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("YARNï¼ˆYet Another Resource Negotiatorï¼‰æ˜¯Hadoop 2.0å¼•å…¥çš„"),a("strong",[t._v("èµ„æºç®¡ç†æ¡†æ¶")]),t._v("ï¼Œè´Ÿè´£é›†ç¾¤èµ„æºçš„ç»Ÿä¸€ç®¡ç†å’Œè°ƒåº¦ï¼Œæ”¯æŒå¤šç§è®¡ç®—æ¡†æ¶ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("YARNæ ¸å¿ƒæ¶æ„")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. ResourceManagerï¼ˆèµ„æºç®¡ç†å™¨ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("é›†ç¾¤çš„å…¨å±€èµ„æºç®¡ç†è€…")]),t._v(" "),a("li",[a("strong",[t._v("Scheduler")]),t._v("ï¼šè´Ÿè´£èµ„æºåˆ†é…ï¼Œä¸ç›‘æ§åº”ç”¨çŠ¶æ€")]),t._v(" "),a("li",[a("strong",[t._v("ApplicationManager")]),t._v("ï¼šç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸ")])]),t._v(" "),a("p",[a("strong",[t._v("2. NodeManagerï¼ˆèŠ‚ç‚¹ç®¡ç†å™¨ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("å•ä¸ªèŠ‚ç‚¹çš„èµ„æºç®¡ç†è€…")]),t._v(" "),a("li",[t._v("ç›‘æ§èŠ‚ç‚¹èµ„æºä½¿ç”¨æƒ…å†µ")]),t._v(" "),a("li",[t._v("ç®¡ç†Containerçš„ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),a("li",[t._v("å‘ResourceManageræ±‡æŠ¥èŠ‚ç‚¹çŠ¶æ€")])]),t._v(" "),a("p",[a("strong",[t._v("3. ApplicationMasterï¼ˆåº”ç”¨ç®¡ç†å™¨ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("æ¯ä¸ªåº”ç”¨æœ‰ä¸€ä¸ªAM")]),t._v(" "),a("li",[t._v("å‘ResourceManagerç”³è¯·èµ„æº")]),t._v(" "),a("li",[t._v("ä¸NodeManageré€šä¿¡å¯åŠ¨Container")]),t._v(" "),a("li",[t._v("ç›‘æ§ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€")])]),t._v(" "),a("p",[a("strong",[t._v("4. Containerï¼ˆå®¹å™¨ï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½")]),t._v(" "),a("li",[t._v("å°è£…CPUã€å†…å­˜ç­‰èµ„æº")]),t._v(" "),a("li",[t._v("åœ¨NodeManagerä¸Šè¿è¡Œå…·ä½“ä»»åŠ¡")])]),t._v(" "),a("p",[a("strong",[t._v("YARNå·¥ä½œæµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1. Clientæäº¤åº”ç”¨åˆ°ResourceManager\n2. ResourceManageråˆ†é…Containerå¯åŠ¨ApplicationMaster\n3. ApplicationMasterå‘ResourceManageræ³¨å†Œ\n4. ApplicationMasterè¯·æ±‚èµ„æºè¿è¡Œä»»åŠ¡\n5. ResourceManageråˆ†é…Containerç»™ApplicationMaster\n6. ApplicationMasterä¸NodeManageré€šä¿¡å¯åŠ¨Container\n7. Containerè¿è¡Œå…·ä½“ä»»åŠ¡\n8. ApplicationMasterç›‘æ§ä»»åŠ¡è¿›åº¦\n9. åº”ç”¨å®ŒæˆåApplicationMasteræ³¨é”€\n")])])]),a("p",[a("strong",[t._v("YARN vs Hadoop 1.0å¯¹æ¯”")]),t._v("ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("å¯¹æ¯”ç»´åº¦")]),t._v(" "),a("th",[t._v("Hadoop 1.0")]),t._v(" "),a("th",[t._v("YARN")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("æ¶æ„")])]),t._v(" "),a("td",[t._v("JobTracker + TaskTracker")]),t._v(" "),a("td",[t._v("ResourceManager + NodeManager + ApplicationMaster")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ‰©å±•æ€§")])]),t._v(" "),a("td",[t._v("4000èŠ‚ç‚¹ç“¶é¢ˆ")]),t._v(" "),a("td",[t._v("ä¸‡çº§èŠ‚ç‚¹æ”¯æŒ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("è®¡ç®—æ¡†æ¶")])]),t._v(" "),a("td",[t._v("ä»…æ”¯æŒMapReduce")]),t._v(" "),a("td",[t._v("æ”¯æŒMapReduceã€Sparkã€Stormç­‰")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("èµ„æºåˆ©ç”¨ç‡")])]),t._v(" "),a("td",[t._v("é™æ€èµ„æºåˆ†é…")]),t._v(" "),a("td",[t._v("åŠ¨æ€èµ„æºåˆ†é…")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å®¹é”™æ€§")])]),t._v(" "),a("td",[t._v("JobTrackerå•ç‚¹æ•…éšœ")]),t._v(" "),a("td",[t._v("ResourceManager HA")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å¤šç§Ÿæˆ·")])]),t._v(" "),a("td",[t._v("ä¸æ”¯æŒ")]),t._v(" "),a("td",[t._v("æ”¯æŒèµ„æºéš”ç¦»å’Œé…é¢ç®¡ç†")])])])]),t._v(" "),a("p",[a("strong",[t._v("YARNä¼˜åŠ¿")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. èµ„æºåˆ©ç”¨ç‡æå‡")])]),t._v(" "),a("ul",[a("li",[t._v("åŠ¨æ€èµ„æºåˆ†é…")]),t._v(" "),a("li",[t._v("ä¸åŒæ¡†æ¶å…±äº«é›†ç¾¤èµ„æº")]),t._v(" "),a("li",[t._v("é¿å…èµ„æºé™æ€åˆ’åˆ†çš„æµªè´¹")])]),t._v(" "),a("p",[a("strong",[t._v("2. æ‰©å±•æ€§å¢å¼º")])]),t._v(" "),a("ul",[a("li",[t._v("åˆ†ç¦»èµ„æºç®¡ç†å’Œåº”ç”¨ç®¡ç†")]),t._v(" "),a("li",[t._v("å•ä¸ªResourceManagerå¯ç®¡ç†æ•°ä¸‡èŠ‚ç‚¹")]),t._v(" "),a("li",[t._v("ApplicationMasteråˆ†æ•£äº†JobTrackerå‹åŠ›")])]),t._v(" "),a("p",[a("strong",[t._v("3. å¤šæ¡†æ¶æ”¯æŒ")])]),t._v(" "),a("ul",[a("li",[t._v("ç»Ÿä¸€èµ„æºç®¡ç†å¹³å°")]),t._v(" "),a("li",[t._v("MapReduceã€Sparkã€Flinkç­‰éƒ½å¯è¿è¡Œ")]),t._v(" "),a("li",[t._v("é¿å…é‡å¤å»ºè®¾é›†ç¾¤")])]),t._v(" "),a("p",[a("strong",[t._v("4. å®¹é”™æ€§æ”¹è¿›")])]),t._v(" "),a("ul",[a("li",[t._v("ResourceManageræ”¯æŒHA")]),t._v(" "),a("li",[t._v("ApplicationMasteræ•…éšœå¯é‡å¯")]),t._v(" "),a("li",[t._v("Containeræ•…éšœä¸å½±å“å…¶ä»–ä»»åŠ¡")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-yarnçš„èµ„æºè°ƒåº¦å™¨æœ‰å“ªäº›-å„æœ‰ä»€ä¹ˆç‰¹ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-yarnçš„èµ„æºè°ƒåº¦å™¨æœ‰å“ªäº›-å„æœ‰ä»€ä¹ˆç‰¹ç‚¹"}},[t._v("#")]),t._v(" ğŸ¯ YARNçš„èµ„æºè°ƒåº¦å™¨æœ‰å“ªäº›ï¼Ÿå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("YARNè°ƒåº¦å™¨æ¦‚è¿°")]),t._v("ï¼š")]),t._v(" "),a("p",[t._v("YARNçš„è°ƒåº¦å™¨è´Ÿè´£å°†é›†ç¾¤èµ„æºåˆ†é…ç»™å„ä¸ªåº”ç”¨ï¼Œä¸åŒçš„è°ƒåº¦å™¨é‡‡ç”¨ä¸åŒçš„åˆ†é…ç­–ç•¥ï¼Œé€‚ç”¨äºä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("1. FIFO Schedulerï¼ˆå…ˆè¿›å…ˆå‡ºè°ƒåº¦å™¨ï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("ç‰¹ç‚¹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æŒ‰æäº¤æ—¶é—´é¡ºåºåˆ†é…èµ„æº")]),t._v(" "),a("li",[t._v("ç®€å•æ˜“ç†è§£")]),t._v(" "),a("li",[t._v("ä¸æ”¯æŒä¼˜å…ˆçº§")])]),t._v(" "),a("p",[a("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å°é›†ç¾¤æˆ–æµ‹è¯•ç¯å¢ƒ")]),t._v(" "),a("li",[t._v("å•ç”¨æˆ·ç¯å¢ƒ")]),t._v(" "),a("li",[t._v("å¯¹å…¬å¹³æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯")])]),t._v(" "),a("p",[a("strong",[t._v("é…ç½®ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.resourcemanager.scheduler.class"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.yarn.server.resourcemanager.scheduler.fifo.FifoScheduler"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[a("strong",[t._v("2. Capacity Schedulerï¼ˆå®¹é‡è°ƒåº¦å™¨ï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç‰¹ç‚¹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å±‚æ¬¡åŒ–é˜Ÿåˆ—")]),t._v("ï¼šæ”¯æŒå¤šçº§é˜Ÿåˆ—åµŒå¥—")]),t._v(" "),a("li",[a("strong",[t._v("å®¹é‡ä¿è¯")]),t._v("ï¼šæ¯ä¸ªé˜Ÿåˆ—æœ‰æœ€å°å®¹é‡ä¿è¯")]),t._v(" "),a("li",[a("strong",[t._v("å¼¹æ€§èµ„æº")]),t._v("ï¼šé˜Ÿåˆ—å¯å€Ÿç”¨å…¶ä»–é˜Ÿåˆ—ç©ºé—²èµ„æº")]),t._v(" "),a("li",[a("strong",[t._v("å¤šç§Ÿæˆ·")]),t._v("ï¼šä¸åŒé˜Ÿåˆ—å¯é…ç½®ä¸åŒç”¨æˆ·å’Œæƒé™")])]),t._v(" "),a("p",[a("strong",[t._v("é˜Ÿåˆ—é…ç½®")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- é˜Ÿåˆ—å±‚æ¬¡ç»“æ„ --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.scheduler.capacity.resource-calculator"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.yarn.util.resource.DominantResourceCalculator"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- æ ¹é˜Ÿåˆ—é…ç½® --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.scheduler.capacity.root.queues"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("production,development,urgent"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- é˜Ÿåˆ—å®¹é‡é…ç½® --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.scheduler.capacity.root.production.capacity"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("60"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.scheduler.capacity.root.development.capacity"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("30"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.scheduler.capacity.root.urgent.capacity"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("10"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- é˜Ÿåˆ—æœ€å¤§å®¹é‡ --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.scheduler.capacity.root.production.maximum-capacity"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("80"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[a("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä¼ä¸šå¤šéƒ¨é—¨å…±äº«é›†ç¾¤")]),t._v(" "),a("li",[t._v("éœ€è¦èµ„æºéš”ç¦»çš„åœºæ™¯")]),t._v(" "),a("li",[t._v("æœ‰SLAè¦æ±‚çš„ç”Ÿäº§ç¯å¢ƒ")])]),t._v(" "),a("p",[a("strong",[t._v("3. Fair Schedulerï¼ˆå…¬å¹³è°ƒåº¦å™¨ï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç‰¹ç‚¹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å…¬å¹³å…±äº«")]),t._v("ï¼šèµ„æºåœ¨æ´»è·ƒåº”ç”¨é—´å…¬å¹³åˆ†é…")]),t._v(" "),a("li",[a("strong",[t._v("æŠ¢å æœºåˆ¶")]),t._v("ï¼šèµ„æºä¸è¶³æ—¶å¯æŠ¢å å…¶ä»–åº”ç”¨èµ„æº")]),t._v(" "),a("li",[a("strong",[t._v("æƒé‡æ”¯æŒ")]),t._v("ï¼šä¸åŒé˜Ÿåˆ—å¯è®¾ç½®ä¸åŒæƒé‡")]),t._v(" "),a("li",[a("strong",[t._v("å»¶è¿Ÿè°ƒåº¦")]),t._v("ï¼šæ”¯æŒæ•°æ®æœ¬åœ°æ€§ä¼˜åŒ–")])]),t._v(" "),a("p",[a("strong",[t._v("é…ç½®ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- å¯ç”¨Fair Scheduler --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.resourcemanager.scheduler.class"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- é…ç½®æ–‡ä»¶ä½ç½® --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yarn.scheduler.fair.allocation.file"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("${HADOOP_CONF_DIR}/fair-scheduler.xml"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[a("strong",[t._v("fair-scheduler.xmlé…ç½®")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("allocations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("queue")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("production"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("minResources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("10000 mb,10 vcores"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("minResources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("maxResources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("90000 mb,90 vcores"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("maxResources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("weight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("3.0"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("weight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("queue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("queue")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("development"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("minResources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("5000 mb,5 vcores"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("minResources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("maxResources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("50000 mb,50 vcores"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("maxResources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("weight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("weight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("queue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- æŠ¢å é…ç½® --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("fairSharePreemptionTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("60"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("fairSharePreemptionTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("fairSharePreemptionThreshold")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("0.5"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("fairSharePreemptionThreshold")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("allocations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[a("strong",[t._v("è°ƒåº¦å™¨å¯¹æ¯”")]),t._v("ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("ç‰¹æ€§")]),t._v(" "),a("th",[t._v("FIFO")]),t._v(" "),a("th",[t._v("Capacity")]),t._v(" "),a("th",[t._v("Fair")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("å…¬å¹³æ€§")])]),t._v(" "),a("td",[t._v("æ— ")]),t._v(" "),a("td",[t._v("é˜Ÿåˆ—å†…å…¬å¹³")]),t._v(" "),a("td",[t._v("å…¨å±€å…¬å¹³")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("èµ„æºä¿è¯")])]),t._v(" "),a("td",[t._v("æ— ")]),t._v(" "),a("td",[t._v("å®¹é‡ä¿è¯")]),t._v(" "),a("td",[t._v("æœ€å°èµ„æºä¿è¯")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æŠ¢å ")])]),t._v(" "),a("td",[t._v("ä¸æ”¯æŒ")]),t._v(" "),a("td",[t._v("ä¸æ”¯æŒ")]),t._v(" "),a("td",[t._v("æ”¯æŒ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å¤šç§Ÿæˆ·")])]),t._v(" "),a("td",[t._v("ä¸æ”¯æŒ")]),t._v(" "),a("td",[t._v("æ”¯æŒ")]),t._v(" "),a("td",[t._v("æ”¯æŒ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("é…ç½®å¤æ‚åº¦")])]),t._v(" "),a("td",[t._v("ç®€å•")]),t._v(" "),a("td",[t._v("ä¸­ç­‰")]),t._v(" "),a("td",[t._v("å¤æ‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("é€‚ç”¨åœºæ™¯")])]),t._v(" "),a("td",[t._v("æµ‹è¯•ç¯å¢ƒ")]),t._v(" "),a("td",[t._v("ä¼ä¸šç”Ÿäº§")]),t._v(" "),a("td",[t._v("å…±äº«é›†ç¾¤")])])])]),t._v(" "),a("p",[a("strong",[t._v("é€‰æ‹©å»ºè®®")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("FIFO")]),t._v("ï¼šæµ‹è¯•å’Œå¼€å‘ç¯å¢ƒ")]),t._v(" "),a("li",[a("strong",[t._v("Capacity")]),t._v("ï¼šå¤šéƒ¨é—¨ä¼ä¸šç¯å¢ƒï¼Œéœ€è¦ä¸¥æ ¼èµ„æºéš”ç¦»")]),t._v(" "),a("li",[a("strong",[t._v("Fair")]),t._v("ï¼šå…±äº«é›†ç¾¤ç¯å¢ƒï¼Œéœ€è¦åŠ¨æ€å…¬å¹³åˆ†é…")])]),t._v(" "),a("p",[a("strong",[t._v("è°ƒåº¦å™¨ä¼˜åŒ–ç­–ç•¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åˆç†è®¾ç½®é˜Ÿåˆ—å®¹é‡å’Œæƒé‡")]),t._v(" "),a("li",[t._v("å¯ç”¨èµ„æºæŠ¢å æé«˜èµ„æºåˆ©ç”¨ç‡")]),t._v(" "),a("li",[t._v("é…ç½®é€‚å½“çš„è°ƒåº¦é—´éš”")]),t._v(" "),a("li",[t._v("ç›‘æ§é˜Ÿåˆ—èµ„æºä½¿ç”¨æƒ…å†µ")]),t._v(" "),a("li",[t._v("æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è°ƒæ•´å‚æ•°")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ’¼-ä¸ƒã€å®æˆ˜åœºæ™¯é¢˜-é¡¹ç›®ç»éªŒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’¼-ä¸ƒã€å®æˆ˜åœºæ™¯é¢˜-é¡¹ç›®ç»éªŒ"}},[t._v("#")]),t._v(" ğŸ’¼ ä¸ƒã€å®æˆ˜åœºæ™¯é¢˜ï¼ˆé¡¹ç›®ç»éªŒï¼‰")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("æ ¸å¿ƒæ€æƒ³")]),t._v("ï¼šå®æˆ˜åœºæ™¯é¢˜æ˜¯é¢è¯•çš„é‡ç‚¹ï¼Œè€ƒå¯Ÿçš„æ˜¯ä½ åœ¨å®é™…é¡¹ç›®ä¸­è¿ç”¨å¤§æ•°æ®æŠ€æœ¯è§£å†³ä¸šåŠ¡é—®é¢˜çš„èƒ½åŠ›ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-å¦‚ä½•è®¾è®¡ä¸€ä¸ªå®æ—¶æ•°æ®å¤„ç†æ¶æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¦‚ä½•è®¾è®¡ä¸€ä¸ªå®æ—¶æ•°æ®å¤„ç†æ¶æ„"}},[t._v("#")]),t._v(" ğŸ¯ å¦‚ä½•è®¾è®¡ä¸€ä¸ªå®æ—¶æ•°æ®å¤„ç†æ¶æ„ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("ä¸šåŠ¡åœºæ™¯")]),t._v("ï¼š\nå‡è®¾è¦è®¾è®¡ä¸€ä¸ª"),a("strong",[t._v("ç”µå•†å®æ—¶æ¨èç³»ç»Ÿ")]),t._v("ï¼Œéœ€è¦å¤„ç†ç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼ˆç‚¹å‡»ã€æµè§ˆã€è´­ä¹°ï¼‰ï¼Œå®æ—¶æ›´æ–°ç”¨æˆ·ç”»åƒå’Œå•†å“æ¨èã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ¶æ„è®¾è®¡æ€è·¯")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. æ•°æ®æ¥å…¥å±‚")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ç”¨æˆ·è¡Œä¸º â†’ åŸ‹ç‚¹SDK â†’ æ¶ˆæ¯é˜Ÿåˆ—(Kafka) â†’ å®æ—¶å¤„ç†\n")])])]),a("p",[a("strong",[t._v("æŠ€æœ¯é€‰å‹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æ•°æ®æ”¶é›†")]),t._v("ï¼šFlumeã€Logstashã€è‡ªç ”Agent")]),t._v(" "),a("li",[a("strong",[t._v("æ¶ˆæ¯é˜Ÿåˆ—")]),t._v("ï¼šKafkaï¼ˆé«˜ååã€ä½å»¶è¿Ÿï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("æ•°æ®æ ¼å¼")]),t._v("ï¼šAvro/JSONï¼ˆç»“æ„åŒ–æ•°æ®ï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("2. å®æ—¶è®¡ç®—å±‚")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Kafka â†’ Flink/Spark Streaming â†’ å®æ—¶ç‰¹å¾è®¡ç®— â†’ å­˜å‚¨å±‚\n")])])]),a("p",[a("strong",[t._v("Flinkå®æ—¶å¤„ç†ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æˆ·è¡Œä¸ºæµ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataStream")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserBehavior")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" behaviorStream "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" env\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FlinkKafkaConsumer")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user-behavior"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserBehaviorSchema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" properties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("assignTimestampsAndWatermarks")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WatermarkStrategy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserBehavior")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forBoundedOutOfOrderness")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofSeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withTimestampAssigner")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timestamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTimestamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®æ—¶ç‰¹å¾è®¡ç®—")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataStream")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserFeature")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" userFeatures "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" behaviorStream\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keyBy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserBehavior")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("window")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TumblingEventTimeWindows")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("of")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("minutes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("aggregate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserFeatureAggregator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¾“å‡ºåˆ°å­˜å‚¨ç³»ç»Ÿ")]),t._v("\nuserFeatures"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSink")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisSink")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("3. å­˜å‚¨å±‚")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å®æ—¶å­˜å‚¨")]),t._v("ï¼šRedis/HBaseï¼ˆæ¯«ç§’çº§è¯»å†™ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("ç¦»çº¿å­˜å‚¨")]),t._v("ï¼šHDFS/S3ï¼ˆå†å²æ•°æ®å­˜æ¡£ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("OLAPå­˜å‚¨")]),t._v("ï¼šClickHouse/Druidï¼ˆå®æ—¶åˆ†ææŸ¥è¯¢ï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("4. æœåŠ¡å±‚")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æ¨èæœåŠ¡")]),t._v("ï¼šåŸºäºå®æ—¶ç‰¹å¾çš„æ¨èç®—æ³•")]),t._v(" "),a("li",[a("strong",[t._v("A/Bæµ‹è¯•")]),t._v("ï¼šå®æ—¶æ•ˆæœç›‘æ§å’Œç­–ç•¥è°ƒæ•´")]),t._v(" "),a("li",[a("strong",[t._v("APIç½‘å…³")]),t._v("ï¼šç»Ÿä¸€æ¥å£ç®¡ç†")])]),t._v(" "),a("p",[a("strong",[t._v("æ¶æ„ä¼˜åŒ–è€ƒè™‘")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("æ€§èƒ½ä¼˜åŒ–")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Kafkaåˆ†åŒºæ•° = æ¶ˆè´¹è€…å¹¶å‘åº¦")]),t._v(" "),a("li",[t._v("Flinkå¹¶è¡Œåº¦æ ¹æ®æ•°æ®é‡åŠ¨æ€è°ƒæ•´")]),t._v(" "),a("li",[t._v("Redisé›†ç¾¤åŒ–éƒ¨ç½²ï¼Œé¿å…çƒ­ç‚¹æ•°æ®")])]),t._v(" "),a("p",[a("strong",[t._v("å®¹é”™å¤„ç†")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Kafkaå¤šå‰¯æœ¬ä¿è¯æ•°æ®ä¸ä¸¢å¤±")]),t._v(" "),a("li",[t._v("Flink Checkpointæœºåˆ¶ä¿è¯exactly-once")]),t._v(" "),a("li",[t._v("å¤šæ´»éƒ¨ç½²é¿å…å•ç‚¹æ•…éšœ")])]),t._v(" "),a("p",[a("strong",[t._v("æ‰©å±•æ€§è®¾è®¡")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å¾®æœåŠ¡æ¶æ„ï¼Œå„ç»„ä»¶ç‹¬ç«‹æ‰©å±•")]),t._v(" "),a("li",[t._v("æ¶ˆæ¯é˜Ÿåˆ—æ”¯æŒæ°´å¹³æ‰©å±•")]),t._v(" "),a("li",[t._v("å­˜å‚¨åˆ†ç‰‡ç­–ç•¥æ”¯æŒæ•°æ®å¢é•¿")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-å¤§æ•°æ®å¹³å°çš„æŠ€æœ¯é€‰å‹å¦‚ä½•è€ƒè™‘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¤§æ•°æ®å¹³å°çš„æŠ€æœ¯é€‰å‹å¦‚ä½•è€ƒè™‘"}},[t._v("#")]),t._v(" ğŸ¯ å¤§æ•°æ®å¹³å°çš„æŠ€æœ¯é€‰å‹å¦‚ä½•è€ƒè™‘ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("æŠ€æœ¯é€‰å‹çš„è€ƒè™‘ç»´åº¦")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. ä¸šåŠ¡éœ€æ±‚åˆ†æ")])]),t._v(" "),a("p",[a("strong",[t._v("æ•°æ®é‡çº§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("TBçº§åˆ«")]),t._v("ï¼šå•æœºæˆ–å°é›†ç¾¤å¯å¤„ç†")]),t._v(" "),a("li",[a("strong",[t._v("PBçº§åˆ«")]),t._v("ï¼šéœ€è¦åˆ†å¸ƒå¼å¤§æ•°æ®æŠ€æœ¯")]),t._v(" "),a("li",[a("strong",[t._v("EBçº§åˆ«")]),t._v("ï¼šéœ€è¦ä¸“ä¸šçš„å¤§æ•°æ®æ¶æ„")])]),t._v(" "),a("p",[a("strong",[t._v("å®æ—¶æ€§è¦æ±‚")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("ç¦»çº¿æ‰¹å¤„ç†")]),t._v("ï¼šT+1æ•°æ®å¤„ç†ï¼Œé€‰æ‹©Hadoop/Spark")]),t._v(" "),a("li",[a("strong",[t._v("å‡†å®æ—¶")]),t._v("ï¼šåˆ†é’Ÿçº§å»¶è¿Ÿï¼Œé€‰æ‹©Spark Streaming")]),t._v(" "),a("li",[a("strong",[t._v("å®æ—¶")]),t._v("ï¼šç§’çº§å»¶è¿Ÿï¼Œé€‰æ‹©Flink/Storm")])]),t._v(" "),a("p",[a("strong",[t._v("æŸ¥è¯¢æ¨¡å¼")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("OLTP")]),t._v("ï¼šé«˜å¹¶å‘äº‹åŠ¡ï¼Œé€‰æ‹©ä¼ ç»Ÿæ•°æ®åº“")]),t._v(" "),a("li",[a("strong",[t._v("OLAP")]),t._v("ï¼šå¤æ‚åˆ†ææŸ¥è¯¢ï¼Œé€‰æ‹©æ•°æ®ä»“åº“")]),t._v(" "),a("li",[a("strong",[t._v("æ··åˆè´Ÿè½½")]),t._v("ï¼šé€‰æ‹©HTAPæ•°æ®åº“")])]),t._v(" "),a("p",[a("strong",[t._v("2. æŠ€æœ¯é€‰å‹çŸ©é˜µ")])]),t._v(" "),a("p",[a("strong",[t._v("å­˜å‚¨æŠ€æœ¯é€‰å‹")]),t._v("ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("æ•°æ®ç±»å‹")]),t._v(" "),a("th",[t._v("ç»“æ„åŒ–æ•°æ®")]),t._v(" "),a("th",[t._v("åŠç»“æ„åŒ–æ•°æ®")]),t._v(" "),a("th",[t._v("éç»“æ„åŒ–æ•°æ®")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("çƒ­æ•°æ®")])]),t._v(" "),a("td",[t._v("MySQL/PostgreSQL")]),t._v(" "),a("td",[t._v("ElasticSearch")]),t._v(" "),a("td",[t._v("å¯¹è±¡å­˜å‚¨+CDN")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ¸©æ•°æ®")])]),t._v(" "),a("td",[t._v("Hive/Presto")]),t._v(" "),a("td",[t._v("ElasticSearch")]),t._v(" "),a("td",[t._v("HDFS")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å†·æ•°æ®")])]),t._v(" "),a("td",[t._v("æ•°æ®æ¹–(Delta Lake)")]),t._v(" "),a("td",[t._v("æ•°æ®æ¹–")]),t._v(" "),a("td",[t._v("å¯¹è±¡å­˜å‚¨")])])])]),t._v(" "),a("p",[a("strong",[t._v("è®¡ç®—æ¡†æ¶é€‰å‹")]),t._v("ï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("åœºæ™¯")]),t._v(" "),a("th",[t._v("æ‰¹å¤„ç†")]),t._v(" "),a("th",[t._v("æµå¤„ç†")]),t._v(" "),a("th",[t._v("äº¤äº’å¼æŸ¥è¯¢")]),t._v(" "),a("th",[t._v("æœºå™¨å­¦ä¹ ")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("æ¨èæ–¹æ¡ˆ")])]),t._v(" "),a("td",[t._v("Spark")]),t._v(" "),a("td",[t._v("Flink")]),t._v(" "),a("td",[t._v("Presto/Trino")]),t._v(" "),a("td",[t._v("Spark MLlib")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å¤‡é€‰æ–¹æ¡ˆ")])]),t._v(" "),a("td",[t._v("MapReduce")]),t._v(" "),a("td",[t._v("Kafka Streams")]),t._v(" "),a("td",[t._v("ClickHouse")]),t._v(" "),a("td",[t._v("TensorFlow on Spark")])])])]),t._v(" "),a("p",[a("strong",[t._v("3. é¡¹ç›®å®è·µæ¡ˆä¾‹")])]),t._v(" "),a("p",[a("strong",[t._v("ç”µå•†æ•°æ®å¹³å°æ¶æ„")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("æ•°æ®æºå±‚ï¼š\n- ä¸šåŠ¡æ•°æ®åº“ï¼ˆMySQLï¼‰\n- åŸ‹ç‚¹æ—¥å¿—ï¼ˆNginx/Appï¼‰\n- ç¬¬ä¸‰æ–¹APIæ•°æ®\n\næ•°æ®æ¥å…¥å±‚ï¼š\n- ç¦»çº¿ï¼šSqoop/DataXï¼ˆæ•°æ®åº“ï¼‰ + Flumeï¼ˆæ—¥å¿—ï¼‰\n- å®æ—¶ï¼šKafka + Canalï¼ˆbinlogï¼‰\n\næ•°æ®å­˜å‚¨å±‚ï¼š\n- æ•°æ®æ¹–ï¼šHDFSï¼ˆåŸå§‹æ•°æ®ï¼‰\n- æ•°æ®ä»“åº“ï¼šHiveï¼ˆç»“æ„åŒ–æ•°æ®ï¼‰\n- å®æ—¶å­˜å‚¨ï¼šHBase/Cassandra\n\næ•°æ®è®¡ç®—å±‚ï¼š\n- ç¦»çº¿è®¡ç®—ï¼šSparkï¼ˆETL + æœºå™¨å­¦ä¹ ï¼‰\n- å®æ—¶è®¡ç®—ï¼šFlinkï¼ˆå®æ—¶æŒ‡æ ‡è®¡ç®—ï¼‰\n- å³å¸­æŸ¥è¯¢ï¼šPrestoï¼ˆæ•°æ®æ¢ç´¢ï¼‰\n\næ•°æ®æœåŠ¡å±‚ï¼š\n- APIç½‘å…³ï¼šSpring Cloud Gateway\n- ç¼“å­˜å±‚ï¼šRedis Cluster\n- æœç´¢å¼•æ“ï¼šElasticSearch\n")])])]),a("p",[a("strong",[t._v("æŠ€æœ¯é€‰å‹å†³ç­–è¿‡ç¨‹")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("Step 1ï¼šéœ€æ±‚è°ƒç ”")])]),t._v(" "),a("ul",[a("li",[t._v("æ•°æ®é‡è¯„ä¼°ï¼šæ—¥å¢1TBï¼Œæ€»é‡100TB")]),t._v(" "),a("li",[t._v("æŸ¥è¯¢QPSï¼š1000/sï¼Œå»¶è¿Ÿ<200ms")]),t._v(" "),a("li",[t._v("ç”¨æˆ·è§„æ¨¡ï¼š100ä¸‡DAU")])]),t._v(" "),a("p",[a("strong",[t._v("Step 2ï¼šPOCéªŒè¯")])]),t._v(" "),a("ul",[a("li",[t._v("æ­å»ºå°è§„æ¨¡æµ‹è¯•ç¯å¢ƒ")]),t._v(" "),a("li",[t._v("å‹æµ‹éªŒè¯æ€§èƒ½æŒ‡æ ‡")]),t._v(" "),a("li",[t._v("è¯„ä¼°å¼€å‘å’Œè¿ç»´æˆæœ¬")])]),t._v(" "),a("p",[a("strong",[t._v("Step 3ï¼šæ¶æ„è®¾è®¡")])]),t._v(" "),a("ul",[a("li",[t._v("è€ƒè™‘æŠ€æœ¯æ ˆå…¼å®¹æ€§")]),t._v(" "),a("li",[t._v("è¯„ä¼°å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›")]),t._v(" "),a("li",[t._v("åˆ¶å®šè¿ç§»å’Œæ‰©å®¹æ–¹æ¡ˆ")])]),t._v(" "),a("p",[a("strong",[t._v("é€‰å‹æœ€ä½³å®è·µ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("ä¼˜å…ˆé€‰æ‹©æˆç†Ÿç¨³å®šçš„æŠ€æœ¯")])]),t._v(" "),a("li",[a("strong",[t._v("è€ƒè™‘å›¢é˜ŸæŠ€æœ¯æ ˆå’Œå­¦ä¹ æˆæœ¬")])]),t._v(" "),a("li",[a("strong",[t._v("å…³æ³¨å¼€æºç¤¾åŒºæ´»è·ƒåº¦")])]),t._v(" "),a("li",[a("strong",[t._v("è¯„ä¼°å•†ä¸šæ”¯æŒå’ŒæœåŠ¡")])]),t._v(" "),a("li",[a("strong",[t._v("åˆ¶å®šæŠ€æœ¯æ¼”è¿›è·¯çº¿å›¾")])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-å¦‚ä½•å¤„ç†æ•°æ®å€¾æ–œé—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¦‚ä½•å¤„ç†æ•°æ®å€¾æ–œé—®é¢˜"}},[t._v("#")]),t._v(" ğŸ¯ å¦‚ä½•å¤„ç†æ•°æ®å€¾æ–œé—®é¢˜ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("æ•°æ®å€¾æ–œæ˜¯ä»€ä¹ˆï¼Ÿ")])]),t._v(" "),a("p",[t._v("æ•°æ®å€¾æ–œæ˜¯æŒ‡åœ¨åˆ†å¸ƒå¼è®¡ç®—ä¸­ï¼Œ"),a("strong",[t._v("æ•°æ®åˆ†å¸ƒä¸å‡åŒ€")]),t._v("ï¼Œå¯¼è‡´æŸäº›èŠ‚ç‚¹å¤„ç†çš„æ•°æ®é‡è¿œå¤§äºå…¶ä»–èŠ‚ç‚¹ï¼Œæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ•°æ®å€¾æ–œçš„è¡¨ç°")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä½œä¸šæ‰§è¡Œæ—¶é—´è¿‡é•¿")]),t._v(" "),a("li",[t._v("æŸäº›Taskæ‰§è¡Œæ—¶é—´è¿œè¶…å…¶ä»–Task")]),t._v(" "),a("li",[t._v("å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰é”™è¯¯")]),t._v(" "),a("li",[t._v("é›†ç¾¤èµ„æºåˆ©ç”¨ç‡ä¸å‡")])]),t._v(" "),a("p",[a("strong",[t._v("å¸¸è§å€¾æ–œåœºæ™¯")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. Joinå€¾æ–œ")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- å¤§è¡¨Joinå°è¡¨ï¼ŒæŸä¸ªkeyæ•°æ®é‡å·¨å¤§")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" big_table a\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("JOIN")]),t._v(" small_table b "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user_id\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("date")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2024-01-01'")]),t._v("\n")])])]),a("p",[a("strong",[t._v("2. GroupByå€¾æ–œ")])]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- æŸä¸ªåˆ†ç»„çš„æ•°æ®é‡è¿‡å¤§")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" user_type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("COUNT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" user_behavior\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("date")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2024-01-01'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GROUP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" user_type\n")])])]),a("p",[a("strong",[t._v("3. åˆ†åŒºå€¾æ–œ")])]),t._v(" "),a("ul",[a("li",[t._v("æŒ‰æ—¥æœŸåˆ†åŒºï¼ŒæŸäº›æ—¥æœŸæ•°æ®é‡ç‰¹åˆ«å¤§")]),t._v(" "),a("li",[t._v("Hashåˆ†åŒºï¼ŒæŸäº›keyçš„hashå€¼é›†ä¸­")])]),t._v(" "),a("p",[a("strong",[t._v("æ•°æ®å€¾æ–œè§£å†³æ–¹æ¡ˆ")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. é¢„å¤„ç†é˜¶æ®µä¼˜åŒ–")])]),t._v(" "),a("p",[a("strong",[t._v("æ•°æ®é‡‡æ ·åˆ†æ")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Sparkæ•°æ®é‡‡æ ·")]),t._v("\nsample_df "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" df"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sample"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.01")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nskew_keys "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sample_df"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("groupBy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("orderBy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"count"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("limit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("è¿‡æ»¤å¼‚å¸¸æ•°æ®")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- è¿‡æ»¤nullå€¼å’Œå¼‚å¸¸å€¼")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("table")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("IS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("AND")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'unknown'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("AND")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("key")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n")])])]),a("p",[a("strong",[t._v("2. Joinå€¾æ–œä¼˜åŒ–")])]),t._v(" "),a("p",[a("strong",[t._v("å¹¿æ’­Joinï¼ˆMap-side Joinï¼‰")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-scala extra-class"},[a("pre",{pre:!0,attrs:{class:"language-scala"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Sparkå¹¿æ’­å°è¡¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" broadcast_small "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" spark"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sparkContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("broadcast"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("small_table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" big_table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("map "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" row "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" small_data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" broadcast_small"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Joiné€»è¾‘")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("åŠ ç›æŠ€æœ¯ï¼ˆSaltingï¼‰")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-scala extra-class"},[a("pre",{pre:!0,attrs:{class:"language-scala"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤§è¡¨åŠ éšæœºå‰ç¼€")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" salted_big "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" big_table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("map "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" row "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" salt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Random"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nextInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token id function"}},[t._v("s")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[t._v("salt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[t._v("row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°è¡¨æ‰©å±•")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" expanded_small "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" small_table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("flatMap "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" row "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" until "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token id function"}},[t._v("s")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[t._v("i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[t._v("row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Joinåå»é™¤ç›å€¼")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" salted_big"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("expanded_small"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("map "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("salted_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("big_row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" small_row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†ç»“æœ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("ä¸¤é˜¶æ®µèšåˆ")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-scala extra-class"},[a("pre",{pre:!0,attrs:{class:"language-scala"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€é˜¶æ®µï¼šå±€éƒ¨èšåˆåŠ éšæœºåç¼€")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" stage1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" df"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("map "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" row "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" salt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Random"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nextInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token id function"}},[t._v("s")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[t._v("row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("${")]),a("span",{pre:!0,attrs:{class:"token expression"}},[t._v("salt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" row"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reduceByKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬äºŒé˜¶æ®µï¼šå…¨å±€èšåˆå»æ‰åç¼€")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" stage2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stage1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("map "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("salted_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" salted_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("split"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reduceByKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" _"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("3. åˆ†åŒºç­–ç•¥ä¼˜åŒ–")])]),t._v(" "),a("p",[a("strong",[t._v("è‡ªå®šä¹‰åˆ†åŒºå™¨")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-scala extra-class"},[a("pre",{pre:!0,attrs:{class:"language-scala"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" CustomPartitioner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("partitions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" Partitioner "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" numPartitions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" partitions\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" getPartition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Any")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("match")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" hotKey "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" isHotKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hotKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// çƒ­ç‚¹æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªåˆ†åŒº")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hotKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hashCode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("partitions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("abs\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" _ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hashCode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" partitions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("abs\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("4. Hiveä¸­å¤„ç†æ•°æ®å€¾æ–œ")])]),t._v(" "),a("p",[a("strong",[t._v("Map-side Join")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- å¼€å¯Map Join")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("auto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("convert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mapjoin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("smalltable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filesize"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("åˆ†æ¡¶è¡¨Join")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- åˆ›å»ºåˆ†æ¡¶è¡¨é¿å…å€¾æ–œ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" bucketed_table "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name STRING\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CLUSTERED")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" BUCKETS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("åŠ¨æ€åˆ†åŒº")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- ä½¿ç”¨åŠ¨æ€åˆ†åŒºå‡åŒ€åˆ†å¸ƒæ•°æ®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dynamic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("partition")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SET")]),t._v(" hive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("exec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dynamic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("partition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nonstrict"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("5. Flinkä¸­å¤„ç†æ•°æ®å€¾æ–œ")])]),t._v(" "),a("p",[a("strong",[t._v("è‡ªå®šä¹‰åˆ†åŒºå‡½æ•°")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰åˆ†åŒºç­–ç•¥")]),t._v("\nstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("partitionCustom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Partitioner")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("partition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" numPartitions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isHotKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// çƒ­ç‚¹æ•°æ®éšæœºåˆ†åŒº")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadLocalRandom")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("current")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("numPartitions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hashCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" numPartitions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" keySelector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("ç›‘æ§å’Œé¢„é˜²")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç›‘æ§Taskæ‰§è¡Œæ—¶é—´åˆ†å¸ƒ")]),t._v(" "),a("li",[t._v("è®¾ç½®æ•°æ®å€¾æ–œå‘Šè­¦")]),t._v(" "),a("li",[t._v("å®šæœŸåˆ†æçƒ­ç‚¹æ•°æ®")]),t._v(" "),a("li",[t._v("å»ºç«‹æ•°æ®å€¾æ–œå¤„ç†è§„èŒƒ")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-å¤§æ•°æ®å¹³å°çš„ç›‘æ§ä½“ç³»å¦‚ä½•å»ºè®¾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¤§æ•°æ®å¹³å°çš„ç›‘æ§ä½“ç³»å¦‚ä½•å»ºè®¾"}},[t._v("#")]),t._v(" ğŸ¯ å¤§æ•°æ®å¹³å°çš„ç›‘æ§ä½“ç³»å¦‚ä½•å»ºè®¾ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("ç›‘æ§ä½“ç³»çš„é‡è¦æ€§")]),t._v("ï¼š\nå¤§æ•°æ®å¹³å°æ¶‰åŠå¤šä¸ªç»„ä»¶ï¼Œæ•°æ®é“¾è·¯å¤æ‚ï¼Œéœ€è¦å®Œå–„çš„ç›‘æ§ä½“ç³»ä¿è¯ç³»ç»Ÿç¨³å®šè¿è¡Œå’ŒåŠæ—¶å‘ç°é—®é¢˜ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("ç›‘æ§ä½“ç³»æ¶æ„")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. æ•°æ®æ”¶é›†å±‚")])]),t._v(" "),a("p",[a("strong",[t._v("ç³»ç»Ÿç›‘æ§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("èŠ‚ç‚¹èµ„æº")]),t._v("ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œ")]),t._v(" "),a("li",[a("strong",[t._v("JVMæŒ‡æ ‡")]),t._v("ï¼šå †å†…å­˜ã€GCã€çº¿ç¨‹æ•°")]),t._v(" "),a("li",[a("strong",[t._v("ç»„ä»¶æ—¥å¿—")]),t._v("ï¼šåº”ç”¨æ—¥å¿—ã€é”™è¯¯æ—¥å¿—")])]),t._v(" "),a("p",[a("strong",[t._v("ä¸šåŠ¡ç›‘æ§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æ•°æ®è´¨é‡")]),t._v("ï¼šæ•°æ®å®Œæ•´æ€§ã€å‡†ç¡®æ€§ã€æ—¶æ•ˆæ€§")]),t._v(" "),a("li",[a("strong",[t._v("ä»»åŠ¡æ‰§è¡Œ")]),t._v("ï¼šä½œä¸šæˆåŠŸç‡ã€æ‰§è¡Œæ—¶é—´ã€èµ„æºæ¶ˆè€—")]),t._v(" "),a("li",[a("strong",[t._v("æ•°æ®æµé‡")]),t._v("ï¼šååé‡ã€å»¶è¿Ÿã€ç§¯å‹")])]),t._v(" "),a("p",[a("strong",[t._v("ç›‘æ§å·¥å…·é€‰æ‹©")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ç³»ç»Ÿç›‘æ§ï¼šPrometheus + Node Exporter\nåº”ç”¨ç›‘æ§ï¼šMicrometer + Prometheus\næ—¥å¿—æ”¶é›†ï¼šELK Stack (Elasticsearch + Logstash + Kibana)\né“¾è·¯è¿½è¸ªï¼šJaeger/Zipkin\n")])])]),a("p",[a("strong",[t._v("2. ç›‘æ§æŒ‡æ ‡è®¾è®¡")])]),t._v(" "),a("p",[a("strong",[t._v("åŸºç¡€è®¾æ–½ç›‘æ§")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Prometheusç›‘æ§é…ç½®ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("groups")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" hadoop.rules\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("rules")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" HDFSNameNodeDown\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("expr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" up"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v('job="namenode"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" == 0\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30s\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("severity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" critical\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("annotations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("summary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HDFS NameNode is down"')]),t._v("\n      \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DataNodeDiskUsage\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("expr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" (node_filesystem_size_bytes "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" node_filesystem_free_bytes) / node_filesystem_size_bytes "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" 0.85\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 2m\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("severity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" warning\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("annotations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("summary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DataNode disk usage > 85%"')]),t._v("\n")])])]),a("p",[a("strong",[t._v("åº”ç”¨å±‚ç›‘æ§æŒ‡æ ‡")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("Sparkåº”ç”¨ç›‘æ§")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-scala extra-class"},[a("pre",{pre:!0,attrs:{class:"language-scala"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰Metrics")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" sparkConf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" SparkConf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsparkConf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"spark.sql.streaming.metricsEnabled"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsparkConf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"spark.metrics.conf.driver.source.jvm.class"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.apache.spark.metrics.source.JvmSource"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸šåŠ¡æŒ‡æ ‡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SparkEnv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("metricsSystem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"custom.records.processed"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ncounter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("recordCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("Flinkåº”ç”¨ç›‘æ§")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Flinkè‡ªå®šä¹‰Metrics")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyMapFunction")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RichMapFunction")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Configuration")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRuntimeContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetricGroup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("counter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"records_processed"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("inc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toUpperCase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("3. å‘Šè­¦æœºåˆ¶")])]),t._v(" "),a("p",[a("strong",[t._v("å‘Šè­¦è§„åˆ™è®¾è®¡")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# AlertManagerå‘Šè­¦è§„åˆ™")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" SparkJobFailure\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("expr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" spark_job_status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v('status="failed"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" 0\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0m\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("severity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" critical\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("team")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("platform\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("annotations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("summary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Spark job {{ $labels.job_name }} failed"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Job has been failing for more than 0 minutes"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" KafkaConsumerLag\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("expr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" kafka_consumer_lag_sum "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" 10000\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 5m\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("severity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" warning\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("annotations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("summary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Kafka consumer lag is high"')]),t._v("\n")])])]),a("p",[a("strong",[t._v("å‘Šè­¦æ¸ é“")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä¼ä¸šå¾®ä¿¡/é’‰é’‰æœºå™¨äºº")]),t._v(" "),a("li",[t._v("é‚®ä»¶é€šçŸ¥")]),t._v(" "),a("li",[t._v("çŸ­ä¿¡å‘Šè­¦ï¼ˆä¸¥é‡æ•…éšœï¼‰")]),t._v(" "),a("li",[t._v("PagerDutyï¼ˆæµ·å¤–ï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("4. å¯è§†åŒ–ç›‘æ§å¤§ç›˜")])]),t._v(" "),a("p",[a("strong",[t._v("Grafana Dashboardè®¾è®¡")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("é›†ç¾¤æ¦‚è§ˆå¤§ç›˜")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dashboard"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Big Data Platform Overview"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"panels"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HDFS Storage Usage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"stat"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"targets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expr"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hdfs_capacity_used_bytes / hdfs_capacity_total_bytes * 100"')]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"YARN Resource Usage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"graph"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"targets"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expr"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yarn_cluster_memory_used / yarn_cluster_memory_total * 100"')]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("å®æ—¶ä»»åŠ¡ç›‘æ§å¤§ç›˜")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä»»åŠ¡è¿è¡ŒçŠ¶æ€ç»Ÿè®¡")]),t._v(" "),a("li",[t._v("æ•°æ®å¤„ç†ååé‡")]),t._v(" "),a("li",[t._v("ä»»åŠ¡æ‰§è¡Œå»¶è¿Ÿ")]),t._v(" "),a("li",[t._v("é”™è¯¯ç‡è¶‹åŠ¿")])]),t._v(" "),a("p",[a("strong",[t._v("5. æ•°æ®è´¨é‡ç›‘æ§")])]),t._v(" "),a("p",[a("strong",[t._v("æ•°æ®è´¨é‡æ£€æŸ¥")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ä½¿ç”¨Great Expectationsè¿›è¡Œæ•°æ®è´¨é‡æ£€æŸ¥")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" great_expectations "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" ge\n\ndf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read_csv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data.csv"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ•°æ®å®Œæ•´æ€§æ£€æŸ¥")]),t._v("\ndf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expect_column_to_exist"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expect_column_values_to_not_be_null"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ•°æ®å‡†ç¡®æ€§æ£€æŸ¥")]),t._v("\ndf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expect_column_values_to_be_between"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"age"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" min_value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" max_value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥")]),t._v("\ndf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("expect_column_values_to_be_in_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"status"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"active"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inactive"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("æ•°æ®è¡€ç¼˜ç›‘æ§")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Apache Atlasæ•°æ®è¡€ç¼˜")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" pyatlas "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Atlas\n\nclient "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Atlas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://atlas-server:21000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ›å»ºæ•°æ®é›†å®ä½“")]),t._v("\ndataset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typeName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DataSet"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attributes"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user_behavior"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"qualifiedName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user_behavior@cluster1"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ›å»ºå¤„ç†è¿‡ç¨‹å®ä½“")]),t._v("\nprocess "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typeName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Process"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"attributes"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"etl_user_behavior"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inputs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("dataset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"outputs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("processed_dataset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("ç›‘æ§æœ€ä½³å®è·µ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("åˆ†å±‚ç›‘æ§")]),t._v("ï¼šåŸºç¡€è®¾æ–½ â†’ ç»„ä»¶ â†’ åº”ç”¨ â†’ ä¸šåŠ¡")]),t._v(" "),a("li",[a("strong",[t._v("å¼‚å¸¸æ£€æµ‹")]),t._v("ï¼šåŸºäºæœºå™¨å­¦ä¹ çš„å¼‚å¸¸è¯†åˆ«")]),t._v(" "),a("li",[a("strong",[t._v("SLAå®šä¹‰")]),t._v("ï¼šæ˜ç¡®æœåŠ¡ç­‰çº§åè®®")]),t._v(" "),a("li",[a("strong",[t._v("æ•…éšœé¢„æ¡ˆ")]),t._v("ï¼šå»ºç«‹æ ‡å‡†åŒ–åº”æ€¥å“åº”æµç¨‹")]),t._v(" "),a("li",[a("strong",[t._v("ç›‘æ§å³ä»£ç ")]),t._v("ï¼šç›‘æ§é…ç½®ç‰ˆæœ¬åŒ–ç®¡ç†")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ¯-å¤§æ•°æ®é¢è¯•å¤‡æˆ˜æŒ‡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¤§æ•°æ®é¢è¯•å¤‡æˆ˜æŒ‡å—"}},[t._v("#")]),t._v(" ğŸ¯ å¤§æ•°æ®é¢è¯•å¤‡æˆ˜æŒ‡å—")]),t._v(" "),a("h3",{attrs:{id:"ğŸ’¡-é«˜é¢‘è€ƒç‚¹top15"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’¡-é«˜é¢‘è€ƒç‚¹top15"}},[t._v("#")]),t._v(" ğŸ’¡ é«˜é¢‘è€ƒç‚¹Top15")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ğŸ—ï¸ HDFSæ¶æ„åŸç†")]),t._v(" - åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸåŸºç¡€ï¼Œå‰¯æœ¬æœºåˆ¶å’Œå®¹é”™")]),t._v(" "),a("li",[a("strong",[t._v("âš¡ MapReduce vs Spark")]),t._v(" - æ‰¹è®¡ç®—æ¡†æ¶å¯¹æ¯”ï¼Œå†…å­˜è®¡ç®—ä¼˜åŠ¿")]),t._v(" "),a("li",[a("strong",[t._v("ğŸŒŠ Flinkæµå¤„ç†")]),t._v(" - æµè®¡ç®—å¼•æ“ï¼ŒWatermarkå’ŒçŠ¶æ€ç®¡ç†")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ“Š Hiveæ•°æ®ä»“åº“")]),t._v(" - SQLè½¬MapReduceï¼Œå­˜å‚¨æ ¼å¼ä¼˜åŒ–")]),t._v(" "),a("li",[a("strong",[t._v("ğŸš€ Kafkaæ¶ˆæ¯é˜Ÿåˆ—")]),t._v(" - é«˜æ€§èƒ½æ¶ˆæ¯ç³»ç»Ÿï¼Œåˆ†åŒºå‰¯æœ¬æœºåˆ¶")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ”§ YARNèµ„æºè°ƒåº¦")]),t._v(" - é›†ç¾¤èµ„æºç®¡ç†ï¼Œè°ƒåº¦å™¨å¯¹æ¯”")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ’¾ æ•°æ®å€¾æ–œå¤„ç†")]),t._v(" - åˆ†å¸ƒå¼è®¡ç®—å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ¯ æŠ€æœ¯é€‰å‹")]),t._v(" - ä¸åŒåœºæ™¯ä¸‹çš„æŠ€æœ¯é€‰æ‹©ç­–ç•¥")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ“ˆ ç›‘æ§è¿ç»´")]),t._v(" - å¤§æ•°æ®å¹³å°ç›‘æ§ä½“ç³»å»ºè®¾")]),t._v(" "),a("li",[a("strong",[t._v("âš™ï¸ æ€§èƒ½è°ƒä¼˜")]),t._v(" - å„ç»„ä»¶çš„å‚æ•°ä¼˜åŒ–å’Œæœ€ä½³å®è·µ")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ” æ•°æ®å®‰å…¨")]),t._v(" - Kerberosè®¤è¯ï¼Œæƒé™ç®¡ç†")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ“¦ å®¹å™¨åŒ–éƒ¨ç½²")]),t._v(" - Dockerã€Kubernetesåœ¨å¤§æ•°æ®ä¸­çš„åº”ç”¨")]),t._v(" "),a("li",[a("strong",[t._v("â˜ï¸ äº‘åŸç”Ÿæ¶æ„")]),t._v(" - äº‘ä¸Šå¤§æ•°æ®è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ¤– å®æ—¶è®¡ç®—")]),t._v(" - æµæ‰¹ä¸€ä½“åŒ–æ¶æ„è®¾è®¡")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ’¡ æ¶æ„æ¼”è¿›")]),t._v(" - ä»ä¼ ç»Ÿæ¶æ„åˆ°ç°ä»£æ•°æ®æ¹–æ¶æ„")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ­-é¢è¯•ç­”é¢˜æŠ€å·§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ­-é¢è¯•ç­”é¢˜æŠ€å·§"}},[t._v("#")]),t._v(" ğŸ­ é¢è¯•ç­”é¢˜æŠ€å·§")]),t._v(" "),a("p",[a("strong",[t._v("ğŸ“ æ ‡å‡†å›ç­”ç»“æ„")])]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("èƒŒæ™¯ä»‹ç»")]),t._v("ï¼ˆ20ç§’ï¼‰ - è¯´æ˜æŠ€æœ¯çš„åº”ç”¨èƒŒæ™¯å’Œè§£å†³çš„é—®é¢˜")]),t._v(" "),a("li",[a("strong",[t._v("æ ¸å¿ƒåŸç†")]),t._v("ï¼ˆ2åˆ†é’Ÿï¼‰ - æ·±å…¥è®²è§£æŠ€æœ¯åŸç†å’Œå…³é”®æœºåˆ¶")]),t._v(" "),a("li",[a("strong",[t._v("å®è·µåº”ç”¨")]),t._v("ï¼ˆ1åˆ†é’Ÿï¼‰ - ç»“åˆå®é™…é¡¹ç›®è¯´æ˜å¦‚ä½•ä½¿ç”¨")]),t._v(" "),a("li",[a("strong",[t._v("å¯¹æ¯”åˆ†æ")]),t._v("ï¼ˆ1åˆ†é’Ÿï¼‰ - ä¸å…¶ä»–æŠ€æœ¯çš„å¯¹æ¯”ä¼˜åŠ¿")]),t._v(" "),a("li",[a("strong",[t._v("æ³¨æ„äº‹é¡¹")]),t._v("ï¼ˆ30ç§’ï¼‰ - ä½¿ç”¨ä¸­çš„å…³é”®ç‚¹å’Œæœ€ä½³å®è·µ")])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ—£ï¸ è¡¨è¾¾è¯æœ¯æ¨¡æ¿")])]),t._v(" "),a("ul",[a("li",[t._v('"åœ¨æˆ‘ä»¬é¡¹ç›®ä¸­ï¼Œé¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜æ˜¯..."')]),t._v(" "),a("li",[t._v('"æˆ‘ä»¬é€‰æ‹©è¿™ä¸ªæŠ€æœ¯çš„åŸå› æ˜¯..."')]),t._v(" "),a("li",[t._v('"ä»æ€§èƒ½è§’åº¦æ¥çœ‹ï¼Œè¿™ç§æ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äº..."')]),t._v(" "),a("li",[t._v('"åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„..."')]),t._v(" "),a("li",[t._v('"ç›¸æ¯”äºä¼ ç»Ÿæ–¹æ¡ˆï¼Œæ–°æ¶æ„å¸¦æ¥çš„æ”¶ç›Šæ˜¯..."')])]),t._v(" "),a("h3",{attrs:{id:"ğŸš€-è¿›é˜¶åŠ åˆ†ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš€-è¿›é˜¶åŠ åˆ†ç‚¹"}},[t._v("#")]),t._v(" ğŸš€ è¿›é˜¶åŠ åˆ†ç‚¹")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æ¶æ„è®¾è®¡èƒ½åŠ›")]),t._v("ï¼šèƒ½è®¾è®¡å®Œæ•´çš„å¤§æ•°æ®å¤„ç†æ¶æ„")]),t._v(" "),a("li",[a("strong",[t._v("æ€§èƒ½ä¼˜åŒ–ç»éªŒ")]),t._v("ï¼šæœ‰å…·ä½“çš„è°ƒä¼˜æ¡ˆä¾‹å’Œæ•ˆæœæ•°æ®")]),t._v(" "),a("li",[a("strong",[t._v("æ•…éšœå¤„ç†èƒ½åŠ›")]),t._v("ï¼šèƒ½å¿«é€Ÿå®šä½å’Œè§£å†³çº¿ä¸Šé—®é¢˜")]),t._v(" "),a("li",[a("strong",[t._v("æŠ€æœ¯æ·±åº¦")]),t._v("ï¼šäº†è§£åº•å±‚åŸç†å’Œæºç å®ç°")]),t._v(" "),a("li",[a("strong",[t._v("ä¸šåŠ¡ç†è§£")]),t._v("ï¼šèƒ½ç»“åˆä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ–¹æ¡ˆ")]),t._v(" "),a("li",[a("strong",[t._v("å›¢é˜Ÿåä½œ")]),t._v("ï¼šæœ‰è·¨å›¢é˜Ÿåˆä½œçš„å¤§æ•°æ®é¡¹ç›®ç»éªŒ")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ“š-å»¶ä¼¸å­¦ä¹ å»ºè®®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“š-å»¶ä¼¸å­¦ä¹ å»ºè®®"}},[t._v("#")]),t._v(" ğŸ“š å»¶ä¼¸å­¦ä¹ å»ºè®®")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å®˜æ–¹æ–‡æ¡£")]),t._v("ï¼šå„ç»„ä»¶çš„å®˜æ–¹æ–‡æ¡£æ˜¯æœ€æƒå¨çš„å­¦ä¹ èµ„æ–™")]),t._v(" "),a("li",[a("strong",[t._v("æºç é˜…è¯»")]),t._v("ï¼šæ·±å…¥ç†è§£æ ¸å¿ƒç»„ä»¶çš„å®ç°åŸç†")]),t._v(" "),a("li",[a("strong",[t._v("å®æˆ˜é¡¹ç›®")]),t._v("ï¼šæ­å»ºå®Œæ•´çš„å¤§æ•°æ®å¤„ç†é“¾è·¯")]),t._v(" "),a("li",[a("strong",[t._v("æŠ€æœ¯åšå®¢")]),t._v("ï¼šå…³æ³¨çŸ¥åå…¬å¸çš„å¤§æ•°æ®æŠ€æœ¯åˆ†äº«")]),t._v(" "),a("li",[a("strong",[t._v("å¼€æºè´¡çŒ®")]),t._v("ï¼šå‚ä¸å¼€æºé¡¹ç›®ï¼Œæå‡æŠ€æœ¯å½±å“åŠ›")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ‰-æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ‰-æ€»ç»“"}},[t._v("#")]),t._v(" ğŸ‰ æ€»ç»“")]),t._v(" "),a("p",[a("strong",[t._v("å¤§æ•°æ®æŠ€æœ¯æ ˆæ˜¯ç°ä»£ä¼ä¸šæ•°å­—åŒ–è½¬å‹çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½")]),t._v("ï¼ŒæŒæ¡è¿™äº›æŠ€æœ¯ä¸ä»…æ˜¯æŠ€æœ¯èƒ½åŠ›çš„ä½“ç°ï¼Œæ›´æ˜¯è§£å†³ä¸šåŠ¡é—®é¢˜çš„é‡è¦æ‰‹æ®µã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è®°ä½ï¼šé¢è¯•å®˜è€ƒå¯Ÿçš„ä¸æ˜¯æ­»è®°ç¡¬èƒŒï¼Œè€Œæ˜¯ä½ è¿ç”¨å¤§æ•°æ®æŠ€æœ¯è§£å†³å®é™…ä¸šåŠ¡é—®é¢˜çš„èƒ½åŠ›å’Œæ€ç»´æ–¹å¼ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("æœ€åä¸€å¥è¯")]),t._v("ï¼š"),a("em",[t._v('"å®è·µå‡ºçœŸçŸ¥ï¼Œé¡¹ç›®è§çœŸç« "')]),t._v(" - ç†è®ºå­¦ä¹ è¦ä¸å®é™…é¡¹ç›®ç›¸ç»“åˆï¼Œåœ¨å®æˆ˜ä¸­åŠ æ·±ç†è§£ï¼")]),t._v(" "),a("hr"),t._v(" "),a("blockquote",[a("p",[t._v("ğŸ’Œ "),a("strong",[t._v("æŒç»­å­¦ä¹ ï¼Œæ‹¥æŠ±å˜åŒ–ï¼")]),a("br"),t._v("\nå¤§æ•°æ®æŠ€æœ¯æ—¥æ–°æœˆå¼‚ï¼Œä¿æŒå­¦ä¹ çš„çƒ­æƒ…ï¼Œåœ¨æŠ€æœ¯çš„æµ·æ´‹ä¸­ä¸æ–­æ¢ç´¢å‰è¡Œï¼")])])])}),[],!1,null,null,null);s.default=e.exports}}]);