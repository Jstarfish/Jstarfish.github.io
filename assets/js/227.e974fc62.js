(window.webpackJsonp=window.webpackJsonp||[]).push([[227],{718:function(t,a,s){"use strict";s.r(a);var v=s(2),n=Object(v.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("img",{attrs:{src:"https://img.starfish.ink/common/faq-banner.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸ºå•¥ java ä¸ç”¨ 360 è¿›è¡Œåƒåœ¾å›æ”¶ï¼Ÿ   å“ˆå“ˆå“ˆå“ˆ~")]),t._v(" "),s("p",[t._v("å¼€ç©ç¬‘ï¼Œè¨€å½’æ­£ä¼ ã€‚ èƒŒè¯µä¸€ä¸‹G1 åƒåœ¾å›æ”¶æ–¹æ³•ç±»çš„ç¬¬ 108 è¡Œï¼Ÿ")]),t._v(" "),s("p",[t._v("ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"ğŸ—ºï¸-çŸ¥è¯†å¯¼èˆª"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ—ºï¸-çŸ¥è¯†å¯¼èˆª"}},[t._v("#")]),t._v(" ğŸ—ºï¸ çŸ¥è¯†å¯¼èˆª")]),t._v(" "),s("h3",{attrs:{id:"ğŸ·ï¸-æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ·ï¸-æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»"}},[t._v("#")]),t._v(" ğŸ·ï¸ æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("ğŸ“¦ ç±»åŠ è½½æœºåˆ¶")]),t._v("ï¼šç±»åŠ è½½è¿‡ç¨‹ã€åŒäº²å§”æ´¾æ¨¡å‹ã€è‡ªå®šä¹‰ç±»åŠ è½½å™¨")]),t._v(" "),s("li",[t._v("ğŸ§  "),s("strong",[t._v("JVMå†…å­˜æ¨¡å‹")]),t._v("ï¼šè¿è¡Œæ—¶æ•°æ®åŒºã€å†…å­˜åˆ†é…ã€å†…å­˜æº¢å‡ºã€å†…å­˜æ³„æ¼")]),t._v(" "),s("li",[s("strong",[t._v("ğŸ—‘ï¸ åƒåœ¾å›æ”¶æœºåˆ¶")]),t._v("ï¼šGCç®—æ³•ã€åƒåœ¾æ”¶é›†å™¨ã€GCè°ƒä¼˜ã€å†…å­˜åˆ†é…ç­–ç•¥")]),t._v(" "),s("li",[s("strong",[t._v("ğŸ”§ JVMè°ƒä¼˜å®æˆ˜")]),t._v("ï¼šJVMå‚æ•°ã€æ€§èƒ½ç›‘æ§ã€é—®é¢˜è¯Šæ–­ã€è°ƒä¼˜ç­–ç•¥")]),t._v(" "),s("li",[s("strong",[t._v("âš¡ æ€§èƒ½ä¼˜åŒ–")]),t._v("ï¼šå†…å­˜ä¼˜åŒ–ã€GCä¼˜åŒ–ã€ä»£ç ä¼˜åŒ–ã€æœ€ä½³å®è·µ")])]),t._v(" "),s("h2",{attrs:{id:"ä¸€ã€ç±»åŠ è½½æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€ç±»åŠ è½½æœºåˆ¶"}},[t._v("#")]),t._v(" ä¸€ã€ç±»åŠ è½½æœºåˆ¶")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ç±»åŠ è½½æœºåˆ¶-ç±»åŠ è½½è¿‡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ç±»åŠ è½½æœºåˆ¶-ç±»åŠ è½½è¿‡ç¨‹"}},[t._v("#")]),t._v(" ğŸ¯ ç±»åŠ è½½æœºåˆ¶ï¼Ÿç±»åŠ è½½è¿‡ç¨‹")]),t._v(" "),s("p",[t._v("Java ç¨‹åºè¿è¡Œå‰ï¼Œ"),s("code",[t._v(".java")]),t._v(" æ–‡ä»¶ä¼šè¢«ç¼–è¯‘æˆ "),s("code",[t._v(".class")]),t._v(" å­—èŠ‚ç æ–‡ä»¶ï¼ŒJVM è¦æ‰§è¡Œç±»é‡Œçš„ä»£ç ï¼Œå°±å¿…é¡»å…ˆæŠŠç±»åŠ è½½åˆ°å†…å­˜ã€‚\nè¿™ä¸ªè¿‡ç¨‹ç”± "),s("strong",[t._v("ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰")]),t._v(" æ¥å®Œæˆï¼Œå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯ç”± ClassLoader å’Œå®ƒçš„å­ç±»æ¥å®ç°çš„ã€‚ç±»åŠ è½½å™¨æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œå…¶å®è´¨æ˜¯æŠŠç±»æ–‡ä»¶ä»ç¡¬ç›˜è¯»å–åˆ°å†…å­˜ä¸­ã€‚")]),t._v(" "),s("p",[t._v("ç±»çš„åŠ è½½æ–¹å¼åˆ†ä¸º"),s("strong",[t._v("éšå¼åŠ è½½å’Œæ˜¾ç¤ºåŠ è½½")]),t._v("ã€‚éšå¼åŠ è½½æŒ‡çš„æ˜¯ç¨‹åºåœ¨ä½¿ç”¨ new ç­‰æ–¹å¼åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä¼šéšå¼åœ°è°ƒç”¨ç±»çš„åŠ è½½å™¨æŠŠå¯¹åº”çš„ç±» åŠ è½½åˆ° JVM ä¸­ã€‚æ˜¾ç¤ºåŠ è½½æŒ‡çš„æ˜¯é€šè¿‡ç›´æ¥è°ƒç”¨ "),s("code",[t._v("class.forName()")]),t._v(" æ–¹æ³•æ¥æŠŠæ‰€éœ€çš„ç±»åŠ è½½åˆ° JVM ä¸­ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç±»åŠ è½½å™¨çš„ä½œç”¨")]),t._v("ï¼šè´Ÿè´£æŠŠ "),s("code",[t._v(".class")]),t._v(" æ–‡ä»¶å­—èŠ‚ç åŠ è½½åˆ° JVM å†…å­˜ï¼Œå¹¶åœ¨å†…å­˜ä¸­ç”Ÿæˆ "),s("code",[t._v("java.lang.Class")]),t._v(" å¯¹è±¡ï¼Œä¾›åç»­ä½¿ç”¨ã€‚")])]),t._v(" "),s("p",[t._v("Java è™šæ‹ŸæœºæŠŠæè¿°ç±»çš„æ•°æ®ä» Class æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒã€è½¬æ¢è§£æå’Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆå½¢æˆå¯ä»¥è¢«è™šæ‹Ÿæœºç›´æ¥ä½¿ç”¨çš„ Java ç±»å‹ï¼Œè¿™å°±æ˜¯è™šæ‹Ÿæœºçš„åŠ è½½æœºåˆ¶ã€‚")]),t._v(" "),s("p",[t._v("ç±»ä»è¢«åŠ è½½åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­å¼€å§‹ï¼Œåˆ°å¸è½½å‡ºå†…å­˜ä¸ºæ­¢ï¼Œå®ƒçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ï¼š"),s("strong",[t._v("åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–ã€ä½¿ç”¨å’Œå¸è½½")]),t._v("ä¸ƒä¸ªé˜¶æ®µã€‚(éªŒè¯ã€å‡†å¤‡å’Œè§£æåˆç»Ÿç§°ä¸ºè¿æ¥ï¼Œä¸ºäº†æ”¯æŒJavaè¯­è¨€çš„"),s("strong",[t._v("è¿è¡Œæ—¶ç»‘å®š")]),t._v("ï¼Œæ‰€ä»¥"),s("strong",[t._v("è§£æé˜¶æ®µä¹Ÿå¯ä»¥æ˜¯åœ¨åˆå§‹åŒ–ä¹‹åè¿›è¡Œçš„")]),t._v("ã€‚ä»¥ä¸Šé¡ºåºéƒ½åªæ˜¯è¯´å¼€å§‹çš„é¡ºåºï¼Œå®é™…è¿‡ç¨‹ä¸­æ˜¯äº¤å‰çš„æ··åˆå¼è¿›è¡Œçš„ï¼ŒåŠ è½½è¿‡ç¨‹ä¸­å¯èƒ½å°±å·²ç»å¼€å§‹éªŒè¯äº†)")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img.starfish.ink/jvm/jvm-class-load.png",alt:"jvm-class-load"}})]),t._v(" "),s("blockquote",[s("h5",{attrs:{id:"_1-åŠ è½½-loading"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-åŠ è½½-loading"}},[t._v("#")]),t._v(" 1. "),s("strong",[t._v("åŠ è½½ï¼ˆLoadingï¼‰")])]),t._v(" "),s("ul",[s("li",[t._v("æ ¸å¿ƒä»»åŠ¡ï¼š\n"),s("ol",[s("li",[t._v("é€šè¿‡å…¨é™å®šåè·å–ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼ˆæ¥æºåŒ…æ‹¬JARã€ç½‘ç»œã€åŠ¨æ€ç”Ÿæˆç­‰ï¼‰")]),t._v(" "),s("li",[t._v("å°†å­—èŠ‚æµè½¬æ¢ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ã€‚")]),t._v(" "),s("li",[t._v("åœ¨å †ä¸­ç”Ÿæˆ "),s("code",[t._v("java.lang.Class")]),t._v("å¯¹è±¡ï¼Œä½œä¸ºè®¿é—®å…¥å£")])])]),t._v(" "),s("li",[t._v("è‡ªå®šä¹‰åŠ è½½å™¨ï¼šå¯é‡å†™ "),s("code",[t._v("findClass()")]),t._v("æ–¹æ³•å®ç°ä»éæ ‡å‡†æ¥æºåŠ è½½ç±»ï¼ˆå¦‚ç½‘ç»œï¼‰ã€‚")])]),t._v(" "),s("h5",{attrs:{id:"_2-éªŒè¯-verification"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-éªŒè¯-verification"}},[t._v("#")]),t._v(" 2. "),s("strong",[t._v("éªŒè¯ï¼ˆVerificationï¼‰")])]),t._v(" "),s("ul",[s("li",[t._v("ç¡®ä¿å­—èŠ‚æµç¬¦åˆJVMè§„èŒƒä¸”æ— å®³ï¼š\n"),s("ul",[s("li",[t._v("æ–‡ä»¶æ ¼å¼éªŒè¯ï¼šæ£€æŸ¥é­”æ•°ï¼ˆ"),s("code",[t._v("0xCAFEBABE")]),t._v("ï¼‰ã€ç‰ˆæœ¬å·ç­‰ã€‚")]),t._v(" "),s("li",[t._v("å…ƒæ•°æ®éªŒè¯ï¼šæ£€æŸ¥è¯­ä¹‰ï¼ˆå¦‚æ˜¯å¦ç»§æ‰¿finalç±»ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("å­—èŠ‚ç éªŒè¯ï¼šåˆ†æç¨‹åºé€»è¾‘ï¼ˆå¦‚ç±»å‹è½¬æ¢æœ‰æ•ˆæ€§ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("ç¬¦å·å¼•ç”¨éªŒè¯ï¼šç¡®è®¤ç¬¦å·å¼•ç”¨å¯è§£æï¼ˆå¦‚ç±»ã€æ–¹æ³•æ˜¯å¦å­˜åœ¨ï¼‰ã€‚")])])]),t._v(" "),s("li",[t._v("å¯å…³é—­ï¼šç”Ÿäº§ç¯å¢ƒå¯é€šè¿‡ "),s("code",[t._v("-Xverify:none")]),t._v(" è·³è¿‡éƒ¨åˆ†éªŒè¯ã€‚")])]),t._v(" "),s("h5",{attrs:{id:"_3-å‡†å¤‡-preparation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-å‡†å¤‡-preparation"}},[t._v("#")]),t._v(" 3. "),s("strong",[t._v("å‡†å¤‡ï¼ˆPreparationï¼‰")])]),t._v(" "),s("ul",[s("li",[t._v("ä¸º**é™æ€å˜é‡ï¼ˆç±»å˜é‡ï¼‰**åˆ†é…å†…å­˜å¹¶è®¾ç½®åˆå§‹å€¼ï¼š\n"),s("ul",[s("li",[t._v("é»˜è®¤é›¶å€¼ï¼šå¦‚ "),s("code",[t._v("int")]),t._v(" ä¸º0ï¼Œ"),s("code",[t._v("boolean")]),t._v(" ä¸ºfalseï¼Œå¼•ç”¨ç±»å‹ä¸º nullã€‚")]),t._v(" "),s("li",[t._v("Finalå¸¸é‡ä¾‹å¤–ï¼šè‹¥å˜é‡è¢« "),s("code",[t._v("final static")]),t._v(" ä¿®é¥°ï¼Œåˆ™ç›´æ¥èµ‹ä»£ç ä¸­çš„åˆå§‹å€¼ã€‚")])])]),t._v(" "),s("li",[t._v("å†…å­˜åˆ†é…ä½ç½®ï¼šJDK7+åé™æ€å˜é‡å­˜å‚¨åœ¨å †ä¸­è€Œéæ–¹æ³•åŒºã€‚")])]),t._v(" "),s("h5",{attrs:{id:"_4-è§£æ-resolution"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-è§£æ-resolution"}},[t._v("#")]),t._v(" 4. "),s("strong",[t._v("è§£æï¼ˆResolutionï¼‰")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆå†…å­˜åœ°å€æˆ–åç§»é‡ï¼‰ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ç¬¦å·å¼•ç”¨ï¼šç±»ã€æ–¹æ³•ã€å­—æ®µçš„æè¿°å­—ç¬¦ä¸²ï¼ˆå¦‚ "),s("code",[t._v("java/lang/Object")]),t._v("ï¼‰ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("ç¬¦å·å¼•ç”¨ï¼šç¼–è¯‘æ—¶ç”Ÿæˆçš„æŠ½è±¡æè¿°ï¼ŒåŒ…å«ç±»/æ¥å£å…¨é™å®šåã€å­—æ®µ/æ–¹æ³•åç§°åŠæè¿°ç¬¦ã€‚ä¾‹å¦‚ï¼Œ"),s("code",[t._v("java/lang/String.length:()I")]),t._v(" è¡¨ç¤º "),s("code",[t._v("String.length()")]),t._v(" æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ã€‚")]),t._v(" "),s("li",[t._v("ç‰¹ç‚¹ï¼šä¸å†…å­˜å¸ƒå±€æ— å…³ï¼Œä»…é€šè¿‡ç¬¦å·å®šä½ç›®æ ‡ï¼ŒæœªåŠ è½½æ—¶æ— æ³•ç¡®å®šå®é™…åœ°å€ã€‚")])])]),t._v(" "),s("li",[s("p",[t._v("ç›´æ¥å¼•ç”¨ï¼šæŒ‡å‘ç›®æ ‡çš„å†…å­˜åœ°å€æˆ–åç§»é‡ï¼Œå¦‚æ–¹æ³•åœ¨æ–¹æ³•è¡¨ä¸­çš„ç´¢å¼•æˆ–å­—æ®µåœ¨å¯¹è±¡ä¸­çš„åç§»ã€‚")]),t._v(" "),s("p",[t._v("è½¬æ¢æ—¶æœºï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é™æ€è§£æ")]),t._v("ï¼šç±»åŠ è½½çš„è§£æé˜¶æ®µï¼ˆå¦‚ "),s("code",[t._v("invokestatic")]),t._v(" è°ƒç”¨é™æ€æ–¹æ³•ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åŠ¨æ€è§£æ")]),t._v("ï¼šè¿è¡Œæ—¶æ ¹æ®å®é™…å¯¹è±¡ç±»å‹ç¡®å®šï¼ˆå¦‚ "),s("code",[t._v("invokevirtual")]),t._v(" å®ç°å¤šæ€ï¼‰")])])])])]),t._v(" "),s("li",[s("p",[t._v("åŠ¨æ€ç»‘å®šï¼šéƒ¨åˆ†è§£æå¯èƒ½åœ¨åˆå§‹åŒ–åæ‰§è¡Œï¼ˆå¦‚æ¥å£æ–¹æ³•è°ƒç”¨ï¼‰ã€‚")])])]),t._v(" "),s("h5",{attrs:{id:"_5-åˆå§‹åŒ–-initialization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-åˆå§‹åŒ–-initialization"}},[t._v("#")]),t._v(" 5. "),s("strong",[t._v("åˆå§‹åŒ–ï¼ˆInitializationï¼‰")])]),t._v(" "),s("ul",[s("li",[t._v("æ‰§è¡Œç±»æ„é€ å™¨ "),s("code",[t._v("<clinit>()")]),t._v("æ–¹æ³•ï¼ˆç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š\n"),s("ul",[s("li",[t._v("å†…å®¹ï¼šåˆå¹¶é™æ€å˜é‡èµ‹å€¼å’Œé™æ€ä»£ç å—è¯­å¥ï¼ŒæŒ‰ä»£ç é¡ºåºæ‰§è¡Œã€‚")]),t._v(" "),s("li",[t._v("çº¿ç¨‹å®‰å…¨ï¼šJVMä¿è¯ "),s("code",[t._v("<clinit>()")]),t._v("åœ¨å¤šçº¿ç¨‹ä¸‹ä»…æ‰§è¡Œä¸€æ¬¡ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("çˆ¶ç±»ä¼˜å…ˆ")]),t._v("ï¼šå­ç±»åˆå§‹åŒ–å‰ç¡®ä¿çˆ¶ç±»å·²åˆå§‹åŒ–")])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ç¬¦å·å¼•ç”¨æ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ç¬¦å·å¼•ç”¨æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ ç¬¦å·å¼•ç”¨æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),s("p",[t._v("ç¬¦å·å¼•ç”¨å°±æ˜¯ "),s("strong",[t._v("å­—èŠ‚ç å±‚é¢çš„æŠ½è±¡æ ‡è¯†")]),t._v("ï¼Œæ¯”å¦‚ç±»å "),s("code",[t._v('"com/example/Test"')]),t._v("ã€æ–¹æ³•å "),s("code",[t._v('"doSomething()V"')]),t._v("ã€‚åœ¨è§£æé˜¶æ®µï¼ŒJVM ä¼šæŠŠè¿™äº›ç¬¦å·è§£ææˆå…·ä½“çš„ "),s("strong",[t._v("å†…å­˜åœ°å€æˆ–åç§»é‡")]),t._v("ï¼ˆç›´æ¥å¼•ç”¨ï¼‰ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("ç¬¦å·å¼•ç”¨å­˜åœ¨äºï¼š\n"),s("ul",[s("li",[t._v("ç±»çš„å¸¸é‡æ± ")]),t._v(" "),s("li",[t._v("æ–¹æ³•ç¬¦å·å¼•ç”¨")]),t._v(" "),s("li",[t._v("å­—æ®µç¬¦å·å¼•ç”¨")])])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-è§¦å‘åˆå§‹åŒ–çš„æ¡ä»¶-ä¸»åŠ¨å¼•ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è§¦å‘åˆå§‹åŒ–çš„æ¡ä»¶-ä¸»åŠ¨å¼•ç”¨"}},[t._v("#")]),t._v(" ğŸ¯ è§¦å‘åˆå§‹åŒ–çš„æ¡ä»¶ï¼ˆä¸»åŠ¨å¼•ç”¨ï¼‰")]),t._v(" "),s("p",[t._v("ä»¥ä¸‹æƒ…å†µä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–é˜¶æ®µ ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("åˆ›å»ºå®ä¾‹")]),t._v("ï¼šé€šè¿‡ "),s("code",[t._v("new")]),t._v(" å…³é”®å­—å®ä¾‹åŒ–å¯¹è±¡ã€‚")]),t._v(" "),s("li",[t._v("è®¿é—®é™æ€æˆå‘˜ï¼šè®¿é—®ç±»çš„é™æ€å˜é‡ï¼ˆé "),s("code",[t._v("final")]),t._v("ï¼‰æˆ–è°ƒç”¨é™æ€æ–¹æ³•ï¼ˆåŒ…æ‹¬åå°„è°ƒç”¨ "),s("code",[t._v("Class.forName()")]),t._v("ï¼‰ã€‚\n"),s("ul",[s("li",[t._v("ä¾‹å¤–ï¼šè‹¥é™æ€å˜é‡æ˜¯ final å¸¸é‡ï¼ˆå¦‚ "),s("code",[t._v("final static int a=1")]),t._v("ï¼‰ï¼Œä¸ä¼šè§¦å‘åˆå§‹åŒ–ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("åå°„è°ƒç”¨")]),t._v("ï¼šä½¿ç”¨ "),s("code",[t._v("java.lang.reflect")]),t._v(" åŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å­ç±»åˆå§‹åŒ–")]),t._v("ï¼šåˆå§‹åŒ–å­ç±»æ—¶ï¼Œè‹¥çˆ¶ç±»æœªåˆå§‹åŒ–ï¼Œåˆ™ä¼˜å…ˆåˆå§‹åŒ–çˆ¶ç±»ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ä¸»ç±»å¯åŠ¨")]),t._v("ï¼šæ‰§è¡ŒåŒ…å« "),s("code",[t._v("main()")]),t._v(" æ–¹æ³•çš„ç±»ï¼ˆJVM å¯åŠ¨æ—¶çš„å…¥å£ç±»ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åŠ¨æ€è¯­è¨€æ”¯æŒ")]),t._v("ï¼šé€šè¿‡ "),s("code",[t._v("java.lang.invoke.MethodHandle")]),t._v(" åŠ¨æ€è°ƒç”¨æ—¶ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("è¢«åŠ¨å¼•ç”¨ç¤ºä¾‹ï¼ˆä¸è§¦å‘åˆå§‹åŒ–ï¼‰")])]),t._v(" "),s("ul",[s("li",[t._v("é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼ˆä»…åˆå§‹åŒ–çˆ¶ç±»ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("é€šè¿‡æ•°ç»„å®šä¹‰å¼•ç”¨ç±»ï¼ˆå¦‚ "),s("code",[t._v("ClassA[] arr = new ClassA[10]")]),t._v("ï¼‰")]),t._v(" "),s("li",[t._v("è®¿é—®ç±»çš„ "),s("code",[t._v("final static")]),t._v(" å¸¸é‡ï¼ˆç¼–è¯‘æœŸå·²æ”¾å…¥å¸¸é‡æ± ï¼‰")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ç±»å¸è½½æ¡ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ç±»å¸è½½æ¡ä»¶"}},[t._v("#")]),t._v(" ğŸ¯ ç±»å¸è½½æ¡ä»¶")]),t._v(" "),s("ol",[s("li",[t._v("æ‰€æœ‰å®ä¾‹å·²è¢«GCå›æ”¶ã€‚")]),t._v(" "),s("li",[t._v("æ— ä»»ä½•åœ°æ–¹å¼•ç”¨è¯¥ç±»çš„"),s("code",[t._v("Class")]),t._v("å¯¹è±¡ã€‚")]),t._v(" "),s("li",[t._v("åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨å®ä¾‹å·²è¢«GCã€‚")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ³¨æ„")]),t._v("ï¼šç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½çš„ç±»ï¼ˆå¦‚æ ¸å¿ƒç±»ï¼‰æ°¸ä¸å¸è½½")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-é™æ€å˜é‡ä½•æ—¶èµ‹å€¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-é™æ€å˜é‡ä½•æ—¶èµ‹å€¼"}},[t._v("#")]),t._v(" ğŸ¯ "),s("strong",[t._v("é™æ€å˜é‡ä½•æ—¶èµ‹å€¼ï¼Ÿ")])]),t._v(" "),s("p",[t._v("éfinalå˜é‡åœ¨åˆå§‹åŒ–é˜¶æ®µèµ‹å€¼ï¼Œfinalå¸¸é‡åœ¨å‡†å¤‡é˜¶æ®µèµ‹å€¼")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨-ç±»åŠ è½½å™¨æœ‰å“ªäº›-è¿™äº›ç±»åŠ è½½å™¨éƒ½åŠ è½½å“ªäº›æ–‡ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨-ç±»åŠ è½½å™¨æœ‰å“ªäº›-è¿™äº›ç±»åŠ è½½å™¨éƒ½åŠ è½½å“ªäº›æ–‡ä»¶"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿè¿™äº›ç±»åŠ è½½å™¨éƒ½åŠ è½½å“ªäº›æ–‡ä»¶ï¼Ÿ")]),t._v(" "),s("p",[t._v("ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰æ˜¯ JVM çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£å°† "),s("code",[t._v(".class")]),t._v(" æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶åœ¨å †ä¸­ç”Ÿæˆå¯¹åº”çš„ "),s("code",[t._v("java.lang.Class")]),t._v(" å¯¹è±¡ï¼Œä½œä¸ºè®¿é—®ç±»å…ƒæ•°æ®çš„å…¥å£ã€‚å…¶æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("å®šä½å¹¶è¯»å–å­—èŠ‚ç æ–‡ä»¶")]),t._v("ï¼ˆå¦‚ä»æœ¬åœ°æ–‡ä»¶ã€ç½‘ç»œã€JAR åŒ…ç­‰æ¥æºï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("éªŒè¯å­—èŠ‚ç åˆæ³•æ€§")]),t._v("ï¼ˆå¦‚æ–‡ä»¶æ ¼å¼ã€è¯­ä¹‰æ£€æŸ¥ç­‰ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åˆ†é…å†…å­˜å¹¶åˆå§‹åŒ–é»˜è®¤å€¼")]),t._v("ï¼ˆå¦‚é™æ€å˜é‡çš„é›¶å€¼ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("è§£æç¬¦å·å¼•ç”¨ä¸ºç›´æ¥å¼•ç”¨")]),t._v("ï¼ˆå†…å­˜åœ°å€æˆ–åç§»é‡ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ‰§è¡Œç±»çš„åˆå§‹åŒ–é€»è¾‘")]),t._v("ï¼ˆå¦‚é™æ€ä»£ç å—ï¼‰")])]),t._v(" "),s("h5",{attrs:{id:"å¯åŠ¨ç±»åŠ è½½å™¨-å¼•å¯¼ç±»åŠ è½½å™¨-bootstrap-classloader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¯åŠ¨ç±»åŠ è½½å™¨-å¼•å¯¼ç±»åŠ è½½å™¨-bootstrap-classloader"}},[t._v("#")]),t._v(" å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆå¼•å¯¼ç±»åŠ è½½å™¨ï¼ŒBootstrap ClassLoaderï¼‰")]),t._v(" "),s("ul",[s("li",[t._v("è¿™ä¸ªç±»åŠ è½½ä½¿ç”¨ C/C++ è¯­è¨€å®ç°ï¼ŒåµŒå¥—åœ¨ JVM å†…éƒ¨")]),t._v(" "),s("li",[t._v("å®ƒç”¨æ¥åŠ è½½ Java çš„æ ¸å¿ƒåº“ï¼ˆ"),s("code",[t._v("JAVA_HOME/jre/lib/rt.jar")]),t._v("ã€"),s("code",[t._v("resource.jar")]),t._v("æˆ–"),s("code",[t._v("sun.boot.class.path")]),t._v("è·¯å¾„ä¸‹çš„å†…å®¹ï¼‰ï¼Œç”¨äºæä¾› JVM è‡ªèº«éœ€è¦çš„ç±»")]),t._v(" "),s("li",[t._v("å¹¶ä¸ç»§æ‰¿è‡ª "),s("code",[t._v("java.lang.ClassLoader")]),t._v("ï¼Œæ²¡æœ‰çˆ¶åŠ è½½å™¨")]),t._v(" "),s("li",[t._v("åŠ è½½æ‰©å±•ç±»å’Œåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼Œå¹¶æŒ‡å®šä¸ºä»–ä»¬çš„çˆ¶ç±»åŠ è½½å™¨")]),t._v(" "),s("li",[t._v("å‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒBootstrap å¯åŠ¨ç±»åŠ è½½å™¨åªåŠ è½½åä¸ºjavaã€Javaxã€sunç­‰å¼€å¤´çš„ç±»")])]),t._v(" "),s("h5",{attrs:{id:"æ‰©å±•ç±»åŠ è½½å™¨-extension-classloader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ‰©å±•ç±»åŠ è½½å™¨-extension-classloader"}},[t._v("#")]),t._v(" æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰")]),t._v(" "),s("ul",[s("li",[t._v("Java è¯­è¨€ç¼–å†™ï¼Œç”±"),s("code",[t._v("sun.misc.Launcher$ExtClassLoader")]),t._v("å®ç°")]),t._v(" "),s("li",[t._v("æ´¾ç”Ÿäº ClassLoader")]),t._v(" "),s("li",[t._v("çˆ¶ç±»åŠ è½½å™¨ä¸ºå¯åŠ¨ç±»åŠ è½½å™¨")]),t._v(" "),s("li",[t._v("ä» "),s("code",[t._v("java.ext.dirs")]),t._v(" ç³»ç»Ÿå±æ€§æ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ è½½ç±»åº“ï¼Œæˆ–ä» JDK çš„å®‰è£…ç›®å½•çš„"),s("code",[t._v("jre/lib/ext")]),t._v(" å­ç›®å½•ï¼ˆæ‰©å±•ç›®å½•ï¼‰ä¸‹åŠ è½½ç±»åº“ã€‚å¦‚æœç”¨æˆ·åˆ›å»ºçš„ JAR æ”¾åœ¨æ­¤ç›®å½•ä¸‹ï¼Œä¹Ÿä¼šè‡ªåŠ¨ç”±æ‰©å±•ç±»åŠ è½½å™¨åŠ è½½")])]),t._v(" "),s("h5",{attrs:{id:"åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨-ä¹Ÿå«ç³»ç»Ÿç±»åŠ è½½å™¨-appclassloader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨-ä¹Ÿå«ç³»ç»Ÿç±»åŠ è½½å™¨-appclassloader"}},[t._v("#")]),t._v(" åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆä¹Ÿå«ç³»ç»Ÿç±»åŠ è½½å™¨ï¼ŒAppClassLoaderï¼‰")]),t._v(" "),s("ul",[s("li",[t._v("Java è¯­è¨€ç¼–å†™ï¼Œç”± "),s("code",[t._v("sun.misc.Lanucher$AppClassLoader")]),t._v(" å®ç°")]),t._v(" "),s("li",[t._v("æ´¾ç”Ÿäº ClassLoader")]),t._v(" "),s("li",[t._v("çˆ¶ç±»åŠ è½½å™¨ä¸ºæ‰©å±•ç±»åŠ è½½å™¨")]),t._v(" "),s("li",[t._v("å®ƒè´Ÿè´£åŠ è½½ç¯å¢ƒå˜é‡"),s("code",[t._v("classpath")]),t._v("æˆ–ç³»ç»Ÿå±æ€§"),s("code",[t._v("java.class.path")]),t._v(" æŒ‡å®šè·¯å¾„ä¸‹çš„ç±»åº“")]),t._v(" "),s("li",[t._v("è¯¥ç±»åŠ è½½æ˜¯"),s("strong",[t._v("ç¨‹åºä¸­é»˜è®¤çš„ç±»åŠ è½½å™¨")]),t._v("ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒJava åº”ç”¨çš„ç±»éƒ½æ˜¯ç”±å®ƒæ¥å®ŒæˆåŠ è½½çš„")]),t._v(" "),s("li",[t._v("é€šè¿‡ "),s("code",[t._v("ClassLoader#getSystemClassLoader()")]),t._v(" æ–¹æ³•å¯ä»¥è·å–åˆ°è¯¥ç±»åŠ è½½å™¨")])]),t._v(" "),s("h5",{attrs:{id:"ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨"}},[t._v("#")]),t._v(" ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨")]),t._v(" "),s("ul",[s("li",[t._v("ç»§æ‰¿ "),s("code",[t._v("ClassLoader")]),t._v("ï¼Œå¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½é€»è¾‘ï¼Œæ¯”å¦‚ä»ç½‘ç»œ/æ•°æ®åº“åŠ è½½ç±»ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æœºåˆ¶-å®ƒæœ‰å•¥ä¼˜åŠ¿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æœºåˆ¶-å®ƒæœ‰å•¥ä¼˜åŠ¿"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿå®ƒæœ‰å•¥ä¼˜åŠ¿ï¼Ÿ")]),t._v(" "),s("p",[t._v("Java è™šæ‹Ÿæœºå¯¹ class æ–‡ä»¶é‡‡ç”¨çš„æ˜¯"),s("strong",[t._v("æŒ‰éœ€åŠ è½½")]),t._v("çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½“éœ€è¦ä½¿ç”¨è¯¥ç±»çš„æ—¶å€™æ‰ä¼šå°†å®ƒçš„ class æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ç”Ÿæˆ class å¯¹è±¡ã€‚è€Œä¸”åŠ è½½æŸä¸ªç±»çš„ class æ–‡ä»¶æ—¶ï¼ŒJava è™šæ‹Ÿæœºé‡‡ç”¨çš„æ˜¯åŒäº²å§”æ´¾æ¨¡å¼ï¼Œå³æŠŠè¯·æ±‚äº¤ç»™çˆ¶ç±»å¤„ç†ï¼Œå®ƒæ˜¯ä¸€ç§ä»»åŠ¡å§”æ´¾æ¨¡å¼ã€‚")]),t._v(" "),s("p",[t._v("ç®€å•è¯´å°±æ˜¯å½“ç±»åŠ è½½å™¨ï¼ˆClass-Loaderï¼‰è¯•å›¾åŠ è½½æŸä¸ªç±»å‹çš„æ—¶å€™ï¼Œé™¤éçˆ¶åŠ è½½å™¨æ‰¾ä¸åˆ°ç›¸åº”ç±»å‹ï¼Œå¦åˆ™å°½é‡å°†è¿™ä¸ªä»»åŠ¡ä»£ç†ç»™å½“å‰åŠ è½½å™¨çš„çˆ¶åŠ è½½å™¨å»åšã€‚ä½¿ç”¨å§”æ´¾æ¨¡å‹çš„ç›®çš„æ˜¯é¿å…é‡å¤åŠ è½½ Java ç±»å‹ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ ¸å¿ƒåŸåˆ™")]),t._v("ï¼šç±»åŠ è½½å™¨æ”¶åˆ°åŠ è½½è¯·æ±‚æ—¶ï¼Œä¼˜å…ˆå§”æ´¾çˆ¶ç±»åŠ è½½å™¨å®ŒæˆåŠ è½½ï¼Œè‹¥çˆ¶ç±»æ— æ³•åŠ è½½ï¼Œåˆ™ç”±è‡ªèº«å°è¯•åŠ è½½ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ„ä¹‰")]),t._v("ï¼šé¿å…é‡å¤åŠ è½½ï¼Œä¿è¯æ ¸å¿ƒç±»å®‰å…¨ï¼ˆå¦‚é˜²æ­¢è‡ªå®šä¹‰"),s("code",[t._v("java.lang.String")]),t._v("è¦†ç›–ç³»ç»Ÿç±»ï¼‰")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img.starfish.ink/jvm/classloader.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("å·¥ä½œè¿‡ç¨‹")])]),t._v(" "),s("ol",[s("li",[t._v("å½“æŸä¸ªç±»åŠ è½½å™¨æ”¶åˆ° "),s("code",[t._v('loadClass("java.lang.String")')]),t._v(" è¯·æ±‚ï¼š\n"),s("ul",[s("li",[t._v("å®ƒä¼šå…ˆäº¤ç»™ "),s("strong",[t._v("çˆ¶åŠ è½½å™¨")]),t._v(" å»å¤„ç†ã€‚")])])]),t._v(" "),s("li",[t._v("çˆ¶åŠ è½½å™¨ç»§ç»­å‘ä¸Šå§”æ‰˜ï¼Œç›´åˆ°é¡¶å±‚ "),s("strong",[t._v("Bootstrap ClassLoader")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("Bootstrap æ‰¾åˆ° "),s("code",[t._v("rt.jar")]),t._v(" ä¸­çš„ "),s("code",[t._v("java.lang.String")]),t._v("ï¼Œå°±åŠ è½½è¿”å›ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœçˆ¶åŠ è½½å™¨éƒ½æ‰¾ä¸åˆ°ï¼Œæ‰ä¼šç”±å­åŠ è½½å™¨è‡ªå·±å»å°è¯•ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("ä¼˜åŠ¿")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é¿å…ç±»çš„é‡å¤åŠ è½½")]),t._v("ï¼ŒJVM ä¸­åŒºåˆ†ä¸åŒç±»ï¼Œä¸ä»…ä»…æ˜¯æ ¹æ®ç±»åï¼Œç›¸åŒçš„ class æ–‡ä»¶è¢«ä¸åŒçš„ ClassLoader åŠ è½½å°±å±äºä¸¤ä¸ªä¸åŒçš„ç±»ï¼ˆæ¯”å¦‚ï¼ŒJavaä¸­çš„Objectç±»ï¼Œæ— è®ºå“ªä¸€ä¸ªç±»åŠ è½½å™¨è¦åŠ è½½è¿™ä¸ªç±»ï¼Œæœ€ç»ˆéƒ½æ˜¯å§”æ´¾ç»™å¤„äºæ¨¡å‹æœ€é¡¶ç«¯çš„å¯åŠ¨ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼Œå¦‚æœä¸é‡‡ç”¨åŒäº²å§”æ´¾æ¨¡å‹ï¼Œç”±å„ä¸ªç±»åŠ è½½å™¨è‡ªå·±å»åŠ è½½çš„è¯ï¼Œç³»ç»Ÿä¸­ä¼šå­˜åœ¨å¤šç§ä¸åŒçš„ Object ç±»ï¼‰")]),t._v(" "),s("li",[s("strong",[t._v("ä¿æŠ¤ç¨‹åºå®‰å…¨ï¼Œé˜²æ­¢æ ¸å¿ƒ API è¢«éšæ„ç¯¡æ”¹")]),t._v("ï¼Œé¿å…ç”¨æˆ·è‡ªå·±ç¼–å†™çš„ç±»åŠ¨æ€æ›¿æ¢ Java çš„ä¸€äº›æ ¸å¿ƒç±»ï¼Œæ¯”å¦‚æˆ‘ä»¬è‡ªå®šä¹‰ç±»ï¼š"),s("code",[t._v("java.lang.String")])])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨"}},[t._v("#")]),t._v(" ğŸ¯ ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Ÿ")]),t._v(" "),s("ul",[s("li",[t._v("éš”ç¦»åŠ è½½ç±»")]),t._v(" "),s("li",[t._v("ä¿®æ”¹ç±»åŠ è½½çš„æ–¹å¼")]),t._v(" "),s("li",[t._v("æ‰©å±•åŠ è½½æºï¼ˆå¯ä»¥ä»æ•°æ®åº“ã€äº‘ç«¯ç­‰æŒ‡å®šæ¥æºåŠ è½½ç±»ï¼‰")]),t._v(" "),s("li",[t._v("é˜²æ­¢æºç æ³„éœ²ï¼ˆJava ä»£ç å®¹æ˜“è¢«åç¼–è¯‘ï¼Œå¦‚æœåŠ å¯†åï¼Œè‡ªå®šä¹‰åŠ è½½å™¨åŠ è½½ç±»çš„æ—¶å€™å°±å¯ä»¥å…ˆè§£å¯†ï¼Œå†åŠ è½½ï¼‰")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-è‡ªå®šä¹‰äº†ä¸€ä¸ªstring-é‚£ä¹ˆä¼šåŠ è½½å“ªä¸ªstring"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è‡ªå®šä¹‰äº†ä¸€ä¸ªstring-é‚£ä¹ˆä¼šåŠ è½½å“ªä¸ªstring"}},[t._v("#")]),t._v(" ğŸ¯ è‡ªå®šä¹‰äº†ä¸€ä¸ªStringï¼Œé‚£ä¹ˆä¼šåŠ è½½å“ªä¸ªStringï¼Ÿ")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("åœºæ™¯")])]),t._v(" "),s("th",[s("strong",[t._v("èƒ½å¦åŠ è½½è‡ªå®šä¹‰"),s("code",[t._v("String")])])]),t._v(" "),s("th",[s("strong",[t._v("åŸå› ")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("åŒ…åä¸º"),s("code",[t._v("java.lang")])]),t._v(" "),s("td",[t._v("âŒ ä¸èƒ½")]),t._v(" "),s("td",[t._v("åŒäº²å§”æ´¾æœºåˆ¶ä¼˜å…ˆåŠ è½½ç³»ç»Ÿç±»ï¼Œä¸”JVMå®‰å…¨æœºåˆ¶ç¦æ­¢ç¯¡æ”¹æ ¸å¿ƒåŒ…")])]),t._v(" "),s("tr",[s("td",[t._v("åŒ…åé"),s("code",[t._v("java.lang")])]),t._v(" "),s("td",[t._v("âœ… èƒ½")]),t._v(" "),s("td",[t._v("åº”ç”¨ç±»åŠ è½½å™¨ç›´æ¥åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ä¸‹çš„è‡ªå®šä¹‰ç±»ï¼Œä¸ç³»ç»Ÿç±»æ— å†²çª")])]),t._v(" "),s("tr",[s("td",[t._v("è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ‰“ç ´å§”æ´¾")]),t._v(" "),s("td",[t._v("âœ… èƒ½ï¼ˆä½†ç±»å‹ä¸åŒï¼‰")]),t._v(" "),s("td",[t._v("ç»•è¿‡åŒäº²å§”æ´¾ç›´æ¥åŠ è½½ï¼Œä½†JVMè®¤ä¸ºè‡ªå®šä¹‰ç±»ä¸ç³»ç»Ÿç±»æ˜¯ç‹¬ç«‹å­˜åœ¨çš„")])])])]),t._v(" "),s("ul",[s("li",[t._v("JVMä¼šé˜»æ­¢ç”¨æˆ·å®šä¹‰ä»¥"),s("code",[t._v("java.lang")]),t._v("å¼€å¤´çš„åŒ…åï¼Œç›´æ¥æŠ›å‡º"),s("code",[t._v("SecurityException: Prohibited package name: java.lang")]),t._v("ï¼Œé¿å…æ ¸å¿ƒç±»è¢«ç¯¡æ”¹")]),t._v(" "),s("li",[t._v("è‹¥è‡ªå®šä¹‰"),s("code",[t._v("String")]),t._v("ç±»çš„åŒ…åä¸åŒï¼ˆå¦‚"),s("code",[t._v("com.example.String")]),t._v("ï¼‰ï¼Œåº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆAppClassLoaderï¼‰ä¼šç›´æ¥åŠ è½½å®ƒï¼Œä¸ä¼šä¸ç³»ç»Ÿ"),s("code",[t._v("String")]),t._v("å†²çªã€‚")]),t._v(" "),s("li",[t._v("ä½¿ç”¨æ—¶éœ€æ˜ç¡®æŒ‡å®šå…¨é™å®šç±»åï¼ˆå¦‚"),s("code",[t._v("com.example.String str = new com.example.String()")]),t._v("ï¼‰")])]),t._v(" "),s("blockquote",[s("p",[t._v("å¦‚æœä½ è‡ªå®šä¹‰äº†ä¸€ä¸ª "),s("code",[t._v("String")]),t._v(" ç±»å‹çš„æ•°æ®ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šåŠ è½½å“ªä¸ª "),s("code",[t._v("String")]),t._v(" å–å†³äºå‡ ä¸ªå› ç´ ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("ä½œç”¨åŸŸï¼ˆScopeï¼‰")]),t._v("ï¼š\n"),s("ul",[s("li",[t._v("å¦‚æœè‡ªå®šä¹‰çš„ "),s("code",[t._v("String")]),t._v(" ä½äºå±€éƒ¨ä½œç”¨åŸŸå†…ï¼ˆä¾‹å¦‚ä¸€ä¸ªæ–¹æ³•å†…éƒ¨ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå±€éƒ¨å˜é‡å°†ä¼šè¢«ä¼˜å…ˆä½¿ç”¨ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœè‡ªå®šä¹‰çš„ "),s("code",[t._v("String")]),t._v(" ä½äºç±»çš„æˆå‘˜å˜é‡æˆ–è€…å…¨å±€å˜é‡ï¼Œé‚£ä¹ˆåœ¨è¯¥ç±»æˆ–å…¨å±€èŒƒå›´å†…ä¼šä¼˜å…ˆä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰çš„ "),s("code",[t._v("String")]),t._v("ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("ç±»åŠ è½½é¡ºåº")]),t._v("ï¼š\n"),s("ul",[s("li",[t._v("å¦‚æœä½ åœ¨æŸä¸ªç±»ä¸­è‡ªå®šä¹‰äº†ä¸€ä¸ªåä¸º "),s("code",[t._v("String")]),t._v(" çš„ç±»å‹ï¼Œè¿™ä¸ªè‡ªå®šä¹‰çš„ç±»å‹ä¼šåœ¨è¯¥ç±»çš„ä¸Šä¸‹æ–‡ä¸­è¢«ä¼˜å…ˆåŠ è½½ã€‚")]),t._v(" "),s("li",[t._v("é€šå¸¸æ¥è¯´ï¼Œæ ‡å‡†åº“ä¸­çš„ "),s("code",[t._v("java.lang.String")]),t._v(" ä¼šåœ¨é»˜è®¤æƒ…å†µä¸‹è¢«åŠ è½½ä½¿ç”¨ï¼Œä½†å¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ªåŒåç±»ä¸”åœ¨å½“å‰ä½œç”¨åŸŸå†…ï¼Œè¿™ä¸ªè‡ªå®šä¹‰çš„ç±»ä¼šè¦†ç›–æ ‡å‡†åº“ä¸­çš„ç±»ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("åŒ…çš„ä½¿ç”¨")]),t._v("ï¼š\n"),s("ul",[s("li",[t._v("å¦‚æœä½ çš„è‡ªå®šä¹‰ "),s("code",[t._v("String")]),t._v(" ç±»å‹åœ¨æŸä¸ªç‰¹å®šçš„åŒ…ä¸­ï¼Œè€Œæ ‡å‡†åº“çš„ "),s("code",[t._v("java.lang.String")]),t._v(" æ˜¯åœ¨ "),s("code",[t._v("java.lang")]),t._v(" åŒ…ä¸­ï¼Œé‚£ä¹ˆåœ¨ä¸æ˜ç¡®æŒ‡å®šåŒ…åçš„æƒ…å†µä¸‹ï¼Œå½“å‰ä½œç”¨åŸŸå†…çš„ç±»å‹ä¼šä¼˜å…ˆè¢«åŠ è½½ã€‚")]),t._v(" "),s("li",[t._v("å¯ä»¥é€šè¿‡å®Œå…¨é™å®šåï¼ˆFully Qualified Nameï¼‰æ¥åŒºåˆ†ï¼Œä¾‹å¦‚ä½¿ç”¨ "),s("code",[t._v("java.lang.String")]),t._v(" æ¥ç¡®ä¿ä½¿ç”¨çš„æ˜¯æ ‡å‡†åº“ä¸­çš„ "),s("code",[t._v("String")]),t._v("ã€‚")])])])]),t._v(" "),s("p",[t._v("ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹æ¥è¯´æ˜ä½œç”¨åŸŸå’Œç±»åŠ è½½çš„æƒ…å†µï¼š")]),t._v(" "),s("div",{staticClass:"language-JAVA extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyClass")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰çš„Stringç±»")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"This is my custom String class."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨è‡ªå®šä¹‰çš„Stringç±»")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" myString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        myString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¾“å‡º: This is my custom String class.")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨æ ‡å‡†åº“çš„Stringç±»")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("String")]),t._v(" standardString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("standardString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¾“å‡º: Hello, World!")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("mypackage.MyClass.String")]),t._v(" æ˜¯è‡ªå®šä¹‰çš„ "),s("code",[t._v("String")]),t._v(" ç±»ï¼Œå¹¶åœ¨ "),s("code",[t._v("main")]),t._v(" æ–¹æ³•ä¸­ä¼˜å…ˆä½¿ç”¨ã€‚")]),t._v(" "),s("li",[s("code",[t._v("java.lang.String")]),t._v(" æ˜¯æ ‡å‡†åº“ä¸­çš„ "),s("code",[t._v("String")]),t._v(" ç±»ï¼Œé€šè¿‡å®Œå…¨é™å®šåç¡®ä¿å…¶æ­£ç¡®åŠ è½½ã€‚")])]),t._v(" "),s("p",[t._v("ç»¼ä¸Šæ‰€è¿°ï¼Œç³»ç»Ÿä¼šåŠ è½½å“ªä¸ª "),s("code",[t._v("String")]),t._v("ï¼Œå–å†³äºä½ çš„è‡ªå®šä¹‰ "),s("code",[t._v("String")]),t._v(" åœ¨ä»£ç ä¸­çš„å®šä¹‰ä½ç½®å’Œä½¿ç”¨èŒƒå›´ã€‚å¦‚æœä½ æ˜ç¡®æŒ‡å®šäº†å®Œå…¨é™å®šåï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå‡†ç¡®åŠ è½½ä½ æŒ‡å®šçš„é‚£ä¸ª "),s("code",[t._v("String")]),t._v(" ç±»ã€‚")]),t._v(" "),s("p",[t._v("é’ˆå¯¹ java.*å¼€å¤´çš„ç±»ï¼Œjvm çš„å®ç°ä¸­å·²ç»ä¿è¯äº†å¿…é¡»ç”± bootstrp æ¥åŠ è½½")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹-ç±»çš„åŠ è½½ä¸ºä»€ä¹ˆä¸ä¼šå‡ºç°é‡å¤åŠ è½½çš„æƒ…å†µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹-ç±»çš„åŠ è½½ä¸ºä»€ä¹ˆä¸ä¼šå‡ºç°é‡å¤åŠ è½½çš„æƒ…å†µ"}},[t._v("#")]),t._v(" ğŸ¯ å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œç±»çš„åŠ è½½ä¸ºä»€ä¹ˆä¸ä¼šå‡ºç°é‡å¤åŠ è½½çš„æƒ…å†µï¼Ÿ")]),t._v(" "),s("p",[t._v("åŒäº²å§”æ´¾")]),t._v(" "),s("p",[s("strong",[t._v("ä¸‰ä¸ªç±»åŠ è½½å™¨çš„å…³ç³»ï¼Œä¸æ˜¯çˆ¶å­å…³ç³»ï¼Œæ˜¯ç»„åˆå…³ç³»ã€‚")])]),t._v(" "),s("p",[t._v("çœ‹çœ‹ç±»åŠ è½½å™¨çš„åŠ è½½ç±»çš„æ–¹æ³• loadClass")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassNotFoundException")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//çœ‹ï¼Œè¿™é‡Œæœ‰é”")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassLoadingLock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// First, check if the class has already been loaded")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å»çœ‹çœ‹ç±»æ˜¯å¦è¢«åŠ è½½è¿‡ï¼Œå¦‚æœè¢«åŠ è½½è¿‡ï¼Œå°±ç«‹å³è¿”å›")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findLoadedClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" t0 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nanoTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¿™é‡Œé€šè¿‡æ˜¯å¦æœ‰parentæ¥åŒºåˆ†å¯åŠ¨ç±»åŠ è½½å™¨å’Œå…¶ä»–2ä¸ªç±»åŠ è½½å™¨")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å…ˆå°è¯•è¯·æ±‚çˆ¶ç±»åŠ è½½å™¨å»åŠ è½½ç±»ï¼Œçˆ¶ç±»åŠ è½½å™¨åŠ è½½ä¸åˆ°ï¼Œå†å»å°è¯•è‡ªå·±åŠ è½½ç±»")]),t._v("\n          c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ç±»ï¼Œæœ¬è´¨æ˜¯è°ƒç”¨c++çš„æ–¹æ³•")]),t._v("\n          c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findBootstrapClassOrNull")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassNotFoundException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ClassNotFoundException thrown if class not found")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// from the non-null parent class loader")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å¦‚æœçˆ¶ç±»åŠ è½½å™¨åŠ è½½ä¸åˆ°ç±»ï¼Œå­ç±»åŠ è½½å™¨å†å°è¯•è‡ªå·±åŠ è½½")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If still not found, then invoke findClass in order")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// to find the class.")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" t1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nanoTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//åŠ è½½ç±»")]),t._v("\n        c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this is the defining class loader; record the stats")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("sun"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("misc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("PerfCounter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParentDelegationTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("sun"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("misc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("PerfCounter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFindClassTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addElapsedTimeFrom")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("sun"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("misc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("PerfCounter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFindClasses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("æ€»ç»“ä¸€ä¸‹loadClassæ–¹æ³•çš„å¤§æ¦‚é€»è¾‘ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("é¦–å…ˆåŠ é”ï¼Œé˜²æ­¢å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œé‡å¤åŠ è½½åŒä¸€ä¸ªç±»")]),t._v(" "),s("li",[t._v("å½“åŠ è½½ç±»çš„æ—¶å€™ï¼Œå…ˆè¯·æ±‚å…¶çˆ¶ç±»åŠ è½½å™¨å»åŠ è½½ç±»ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½ç±»æ—¶ï¼Œæ‰è‡ªå·±å°è¯•å»åŠ è½½ç±»ã€‚")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://uploadfiles.nowcoder.com/files/20210318/9603430_1616033889317/154ad50dc8dd4b109ab5e2100c63fe66.png",alt:"å›¾ç‰‡æ‘˜è‡ªç½‘ç»œ"}})]),t._v(" "),s("p",[t._v("ä¸Šé¢çš„æºç è§£æï¼Œå¯ä»¥å›ç­”é—®é¢˜ï¼šåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œç±»çš„åŠ è½½ä¸ºä»€ä¹ˆä¸ä¼šå‡ºç°é‡å¤åŠ è½½çš„æƒ…å†µï¼Ÿ")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å¯ä»¥æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¯ä»¥æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶å—"}},[t._v("#")]),t._v(" ğŸ¯ å¯ä»¥æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶å—ï¼Ÿ")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("åŒäº²å§”æ´¾æ¨¡å‹å¹¶ä¸æ˜¯ä¸€ä¸ªå¼ºåˆ¶æ€§çš„çº¦æŸæ¨¡å‹ï¼Œè€Œæ˜¯ Java è®¾è®¡è€…æ¨èç»™å¼€å‘è€…çš„ç±»åŠ è½½å™¨å®ç°æ–¹å¼ï¼Œå¯ä»¥â€œè¢«ç ´åâ€ï¼Œåªè¦æˆ‘ä»¬è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œ"),s("strong",[t._v("é‡å†™ "),s("code",[t._v("loadClass()")]),t._v(" æ–¹æ³•")]),t._v("ï¼ŒæŒ‡å®šæ–°çš„åŠ è½½é€»è¾‘å°±ç ´åäº†ï¼Œé‡å†™ "),s("code",[t._v("findClass()")]),t._v(" æ–¹æ³•ä¸ä¼šç ´ååŒäº²å§”æ´¾ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("åŒäº²å§”æ´¾æ¨¡å‹æœ‰ä¸€ä¸ªé—®é¢˜ï¼šé¡¶å±‚ ClassLoaderï¼Œæ— æ³•åŠ è½½åº•å±‚ ClassLoader çš„ç±»ã€‚å…¸å‹ä¾‹å­ JNDIã€JDBCï¼Œæ‰€ä»¥åŠ å…¥äº†çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆThread Context ClassLoaderï¼‰ï¼Œå¯ä»¥é€šè¿‡ "),s("code",[t._v("Thread.setContextClassLoaser()")]),t._v("è®¾ç½®è¯¥ç±»åŠ è½½å™¨ï¼Œç„¶åé¡¶å±‚ ClassLoader å†ä½¿ç”¨ "),s("code",[t._v("Thread.getContextClassLoader()")]),t._v(" è·å¾—åº•å±‚çš„ ClassLoader è¿›è¡ŒåŠ è½½ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("Tomcat ä¸­ä½¿ç”¨äº†è‡ªå®šä¹‰ ClassLoaderï¼Œå¹¶ä¸”ä¹Ÿç ´åäº†åŒäº²å§”æ‰˜æœºåˆ¶ã€‚æ¯ä¸ªåº”ç”¨ä½¿ç”¨ WebAppClassloader è¿›è¡Œå•ç‹¬åŠ è½½ï¼Œä»–é¦–å…ˆä½¿ç”¨ WebAppClassloader è¿›è¡Œç±»åŠ è½½ï¼Œå¦‚æœåŠ è½½ä¸äº†å†å§”æ‰˜çˆ¶åŠ è½½å™¨å»åŠ è½½ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¯ä¸ªåº”ç”¨ä¸­çš„ç±»ä¸å†²çªã€‚æ¯ä¸ª tomcat ä¸­å¯ä»¥éƒ¨ç½²å¤šä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®ä¸­å­˜åœ¨å¾ˆå¤šç›¸åŒçš„ class æ–‡ä»¶ï¼ˆå¾ˆå¤šç›¸åŒçš„jaråŒ…ï¼‰ï¼Œä»–ä»¬åŠ è½½åˆ° jvm ä¸­å¯ä»¥åšåˆ°äº’ä¸å¹²æ‰°ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("Tomcat ä¸ºæ¯ä¸ª Web åº”ç”¨åˆ›å»ºç‹¬ç«‹çš„ "),s("code",[t._v("WebAppClassLoader")]),t._v("ï¼Œç¡®ä¿ä¸åŒåº”ç”¨ä¸­åŒåç±»ï¼ˆå¦‚ä¸åŒç‰ˆæœ¬çš„ "),s("code",[t._v("commons-lang")]),t._v("ï¼‰äº’ä¸å¹²æ‰°ã€‚ä¾‹å¦‚ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åº”ç”¨ A")]),t._v(" ä½¿ç”¨ "),s("code",[t._v("commons-lang-2.0.jar")]),t._v("ï¼Œç”± "),s("code",[t._v("WebAppClassLoaderA")]),t._v(" åŠ è½½ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åº”ç”¨ B")]),t._v(" ä½¿ç”¨ "),s("code",[t._v("commons-lang-3.0.jar")]),t._v("ï¼Œç”± "),s("code",[t._v("WebAppClassLoaderB")]),t._v(" åŠ è½½ã€‚ å³ä½¿ç±»åç›¸åŒï¼Œä¸¤ä¸ªåº”ç”¨ä¸­çš„ç±»ä¹Ÿä¼šè¢« JVM è§†ä¸ºä¸åŒçš„ç±»")])])])]),t._v(" "),s("li",[s("p",[t._v("åˆ©ç”¨ç ´ååŒäº²å§”æ´¾æ¥å®ç°"),s("strong",[t._v("ä»£ç çƒ­æ›¿æ¢")]),t._v("ï¼ˆæ¯æ¬¡ä¿®æ”¹ç±»æ–‡ä»¶ï¼Œä¸éœ€è¦é‡å¯æœåŠ¡ï¼‰ã€‚å› ä¸ºä¸€ä¸ª Class åªèƒ½è¢«ä¸€ä¸ª ClassLoader åŠ è½½ä¸€æ¬¡ï¼Œå¦åˆ™ä¼šæŠ¥ "),s("code",[t._v("java.lang.LinkageError")]),t._v("ã€‚å½“æˆ‘ä»¬æƒ³è¦å®ç°ä»£ç çƒ­éƒ¨ç½²æ—¶ï¼Œå¯ä»¥æ¯æ¬¡éƒ½ new ä¸€ä¸ªè‡ªå®šä¹‰çš„ ClassLoader æ¥åŠ è½½æ–°çš„ Classæ–‡ä»¶ã€‚JSP çš„å®ç°åŠ¨æ€ä¿®æ”¹å°±æ˜¯ä½¿ç”¨æ­¤ç‰¹æ€§å®ç°ã€‚")])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-i-å’Œ-i-i-1åœ¨å­—èŠ‚ç æ–‡ä»¶ä¸Šæ€ä¹ˆå®ç°åŠåŒºåˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-i-å’Œ-i-i-1åœ¨å­—èŠ‚ç æ–‡ä»¶ä¸Šæ€ä¹ˆå®ç°åŠåŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ i++ å’Œ i=i+1åœ¨å­—èŠ‚ç æ–‡ä»¶ä¸Šæ€ä¹ˆå®ç°åŠåŒºåˆ«ï¼Ÿ")]),t._v(" "),s("p",[s("strong",[t._v("i++")]),t._v(" çš„å­—èŠ‚ç ï¼ˆä½¿ç”¨ "),s("code",[t._v("javap -c")]),t._v(" æŸ¥çœ‹ï¼‰ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("0:  iconst_0               // å°† 0 å‹å…¥æ“ä½œæ•°æ ˆ\n1:  istore_1               // å°†æ ˆé¡¶çš„å€¼ï¼ˆ0ï¼‰å­˜å‚¨åˆ°å±€éƒ¨å˜é‡ 1ï¼ˆiï¼‰\n2:  iinc 1, 1              // i é€’å¢ 1ï¼ˆç›¸å½“äº i++ï¼‰\n5:  return\n")])])]),s("p",[s("strong",[t._v("i = i + 1")]),t._v(" çš„å­—èŠ‚ç ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("0:  iconst_0               // å°† 0 å‹å…¥æ“ä½œæ•°æ ˆ\n1:  istore_1               // å°†æ ˆé¡¶çš„å€¼ï¼ˆ0ï¼‰å­˜å‚¨åˆ°å±€éƒ¨å˜é‡ 1ï¼ˆiï¼‰\n2:  iload_1                // å°†å±€éƒ¨å˜é‡ 1ï¼ˆiï¼‰åŠ è½½åˆ°æ“ä½œæ•°æ ˆ\n3:  iconst_1               // å°†å¸¸é‡ 1 æ¨å…¥æ“ä½œæ•°æ ˆ\n4:  iadd                    // æ ˆé¡¶ä¸¤ä¸ªæ•°ç›¸åŠ ï¼ˆi + 1ï¼‰\n5:  istore_1               // å°†ç»“æœå­˜å‚¨åˆ°å±€éƒ¨å˜é‡ 1ï¼ˆiï¼‰\n6:  return\n")])])]),s("p",[s("strong",[t._v("å­—èŠ‚ç å·®å¼‚")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("i++")]),t._v(" é€šè¿‡ "),s("strong",[s("code",[t._v("iinc")])]),t._v(" æŒ‡ä»¤ç›´æ¥ä¿®æ”¹å±€éƒ¨å˜é‡ "),s("code",[t._v("i")]),t._v(" çš„å€¼ï¼Œè€Œ "),s("code",[t._v("i = i + 1")]),t._v(" éœ€è¦å…ˆåŠ è½½å˜é‡ "),s("code",[t._v("i")]),t._v(" åˆ°æ ˆä¸­ï¼Œå†åŠ ä¸Š 1ï¼Œæœ€åå°†ç»“æœå­˜å‚¨å› "),s("code",[t._v("i")]),t._v("ã€‚å› æ­¤ï¼Œ"),s("code",[t._v("i++")]),t._v(" ç›¸æ¯” "),s("code",[t._v("i = i + 1")]),t._v(" æ›´ä¸ºç®€æ´ï¼Œç›´æ¥ä¿®æ”¹å˜é‡ï¼Œè€Œ "),s("code",[t._v("i = i + 1")]),t._v(" éœ€è¦é¢å¤–çš„åŠ æ³•å’Œæ ˆæ“ä½œã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("æ•ˆç‡å·®å¼‚")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[s("code",[t._v("i++")])]),t._v(" çš„å­—èŠ‚ç æ›´é«˜æ•ˆï¼Œä½¿ç”¨ "),s("strong",[s("code",[t._v("iinc")])]),t._v(" æŒ‡ä»¤ç›´æ¥å¢åŠ å±€éƒ¨å˜é‡çš„å€¼ï¼Œä¸éœ€è¦è¿›è¡ŒåŠ æ³•è¿ç®—ã€‚")]),t._v(" "),s("li",[s("strong",[s("code",[t._v("i = i + 1")])]),t._v(" çš„å­—èŠ‚ç åˆ™éœ€è¦è¿›è¡Œ "),s("strong",[t._v("åŠ è½½ã€åŠ æ³•ã€å­˜å‚¨")]),t._v(" ä¸‰æ­¥æ“ä½œï¼Œæ¶‰åŠåˆ°æ›´å¤šçš„æŒ‡ä»¤å’Œæ“ä½œæ•°æ ˆã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("å¯è¯»æ€§å·®å¼‚")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("i++")]),t._v(" æ›´ç¬¦åˆç¼–ç¨‹ä¹ æƒ¯å’Œè¯­æ³•é€»è¾‘ï¼Œå®ƒæ˜ç¡®è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé€’å¢æ“ä½œï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œåä¼šè¿”å› "),s("code",[t._v("i")]),t._v(" çš„æ—§å€¼ã€‚")]),t._v(" "),s("li",[s("code",[t._v("i = i + 1")]),t._v(" æ›´ä¸ºç›´è§‚ï¼Œè¡¨è¾¾äº† "),s("code",[t._v("i")]),t._v(" å¢åŠ çš„è¿‡ç¨‹ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªèµ‹å€¼æ“ä½œï¼Œè¯­ä¹‰ä¸Šæ›´æ¸…æ™°ä¸€äº›ã€‚")])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"äºŒã€jvmå†…å­˜æ¨¡å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€jvmå†…å­˜æ¨¡å‹"}},[t._v("#")]),t._v(" äºŒã€JVMå†…å­˜æ¨¡å‹")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-java-å†…å­˜ç»“æ„-jvm-å†…å­˜åŒºåŸŸçš„åˆ’åˆ†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-java-å†…å­˜ç»“æ„-jvm-å†…å­˜åŒºåŸŸçš„åˆ’åˆ†"}},[t._v("#")]),t._v(" ğŸ¯ Java å†…å­˜ç»“æ„ï¼Ÿ| JVM å†…å­˜åŒºåŸŸçš„åˆ’åˆ†")]),t._v(" "),s("blockquote",[s("p",[t._v("JVMå†…å­˜ç»“æ„ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("åŒºåŸŸç±»å‹")]),t._v(" "),s("th",[t._v("åŒ…å«åŒºåŸŸ")]),t._v(" "),s("th",[t._v("ä½œç”¨")]),t._v(" "),s("th",[t._v("æ˜¯å¦ä¼š OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("çº¿ç¨‹å…±äº«åŒº")])]),t._v(" "),s("td",[t._v("å †ï¼ˆHeapï¼‰")]),t._v(" "),s("td",[t._v("å­˜å‚¨å¯¹è±¡å®ä¾‹ã€æ•°ç»„ï¼ŒGC ä¸»è¦å›æ”¶åŒºåŸŸ")]),t._v(" "),s("td",[t._v("ä¼šï¼ˆå¯¹è±¡è¿‡å¤šæ—¶ï¼‰")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",[t._v("æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰")]),t._v(" "),s("td",[t._v("å­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å­—èŠ‚ç ç­‰")]),t._v(" "),s("td",[t._v("ä¼šï¼ˆç±»è¿‡å¤š / å¸¸é‡è¿‡å¤§æ—¶ï¼‰")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("çº¿ç¨‹ç§æœ‰åŒº")])]),t._v(" "),s("td",[t._v("è™šæ‹Ÿæœºæ ˆï¼ˆVM Stackï¼‰")]),t._v(" "),s("td",[t._v("å­˜å‚¨æ–¹æ³•è°ƒç”¨çš„æ ˆå¸§ï¼ˆå±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆç­‰ï¼‰")]),t._v(" "),s("td",[t._v("ä¼šï¼ˆæ ˆæ·±åº¦è¿‡å¤§æ—¶ï¼‰")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",[t._v("æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Stackï¼‰")]),t._v(" "),s("td",[t._v("æ”¯æŒ native æ–¹æ³•è°ƒç”¨ï¼ˆå¦‚ C è¯­è¨€æ–¹æ³•ï¼‰")]),t._v(" "),s("td",[t._v("ä¼š")])]),t._v(" "),s("tr",[s("td"),t._v(" "),s("td",[t._v("ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰")]),t._v(" "),s("td",[t._v("è®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€")]),t._v(" "),s("td",[t._v("ä¸ä¼šï¼ˆå†…å­˜å›ºå®šï¼‰")])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img.starfish.ink/jvm/jvm-framework.png",alt:"1.png"}})]),t._v(" "),s("p",[t._v("é€šå¸¸å¯ä»¥æŠŠ JVM å†…å­˜åŒºåŸŸåˆ†ä¸ºä¸‹é¢å‡ ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ï¼Œæœ‰çš„åŒºåŸŸæ˜¯ä»¥çº¿ç¨‹ä¸ºå•ä½ï¼Œè€Œæœ‰çš„åŒºåŸŸåˆ™æ˜¯æ•´ä¸ª JVM è¿›ç¨‹å”¯ä¸€çš„ã€‚")]),t._v(" "),s("p",[t._v("é¦–å…ˆï¼Œ"),s("strong",[t._v("ç¨‹åºè®¡æ•°å™¨")]),t._v("ï¼ˆPCï¼ŒProgram Counter Registerï¼‰ã€‚åœ¨ JVM è§„èŒƒä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å®ƒè‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå¹¶ä¸”ä»»ä½•æ—¶é—´ä¸€ä¸ªçº¿ç¨‹éƒ½åªæœ‰ä¸€ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å½“å‰æ–¹æ³•ã€‚ç¨‹åºè®¡æ•°å™¨ä¼šå­˜å‚¨å½“å‰çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„ Java æ–¹æ³•çš„ JVM æŒ‡ä»¤åœ°å€ï¼›æˆ–è€…ï¼Œå¦‚æœæ˜¯åœ¨æ‰§è¡Œæœ¬åœ°æ–¹æ³•ï¼Œåˆ™æ˜¯æœªæŒ‡å®šå€¼ï¼ˆundefinedï¼‰ã€‚")]),t._v(" "),s("p",[t._v("ç¬¬äºŒï¼Œ"),s("strong",[t._v("Java è™šæ‹Ÿæœºæ ˆ")]),t._v("ï¼ˆJava Virtual Machine Stackï¼‰ï¼Œæ—©æœŸä¹Ÿå« Java æ ˆã€‚æ¯ä¸ªçº¿ç¨‹åœ¨åˆ›å»ºæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºæ ˆï¼Œå…¶å†…éƒ¨ä¿å­˜ä¸€ä¸ªä¸ªçš„æ ˆå¸§ï¼ˆStack Frameï¼‰ï¼Œå¯¹åº”ç€ä¸€æ¬¡æ¬¡çš„ Java æ–¹æ³•è°ƒç”¨ã€‚")]),t._v(" "),s("p",[t._v("å‰é¢è°ˆç¨‹åºè®¡æ•°å™¨æ—¶ï¼Œæåˆ°äº†å½“å‰æ–¹æ³•ï¼›åŒç†ï¼Œåœ¨ä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œå¯¹åº”çš„åªä¼šæœ‰ä¸€ä¸ªæ´»åŠ¨çš„æ ˆå¸§ï¼Œé€šå¸¸å«ä½œå½“å‰å¸§ï¼Œæ–¹æ³•æ‰€åœ¨çš„ç±»å«ä½œå½“å‰ç±»ã€‚å¦‚æœåœ¨è¯¥æ–¹æ³•ä¸­è°ƒç”¨äº†å…¶ä»–æ–¹æ³•ï¼Œå¯¹åº”çš„æ–°çš„æ ˆå¸§ä¼šè¢«åˆ›å»ºå‡ºæ¥ï¼Œæˆä¸ºæ–°çš„å½“å‰å¸§ï¼Œä¸€ç›´åˆ°å®ƒè¿”å›ç»“æœæˆ–è€…æ‰§è¡Œç»“æŸã€‚JVM ç›´æ¥å¯¹ Java æ ˆçš„æ“ä½œåªæœ‰ä¸¤ä¸ªï¼Œå°±æ˜¯å¯¹æ ˆå¸§çš„å‹æ ˆå’Œå‡ºæ ˆã€‚")]),t._v(" "),s("p",[t._v("æ ˆå¸§ä¸­å­˜å‚¨ç€å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°ï¼ˆoperandï¼‰æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•æ­£å¸¸é€€å‡ºæˆ–è€…å¼‚å¸¸é€€å‡ºçš„å®šä¹‰ç­‰ã€‚")]),t._v(" "),s("p",[t._v("ç¬¬ä¸‰ï¼Œ"),s("strong",[t._v("å †")]),t._v("ï¼ˆHeapï¼‰ï¼Œå®ƒæ˜¯ Java å†…å­˜ç®¡ç†çš„æ ¸å¿ƒåŒºåŸŸï¼Œç”¨æ¥æ”¾ç½® Java å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰åˆ›å»ºçš„ Java å¯¹è±¡å®ä¾‹éƒ½æ˜¯è¢«ç›´æ¥åˆ†é…åœ¨å †ä¸Šã€‚å †è¢«æ‰€æœ‰çš„çº¿ç¨‹å…±äº«ï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬æŒ‡å®šçš„â€œXmxâ€ä¹‹ç±»å‚æ•°å°±æ˜¯ç”¨æ¥æŒ‡å®šæœ€å¤§å †ç©ºé—´ç­‰æŒ‡æ ‡ã€‚")]),t._v(" "),s("p",[t._v("ç†æ‰€å½“ç„¶ï¼Œå †ä¹Ÿæ˜¯åƒåœ¾æ”¶é›†å™¨é‡ç‚¹ç…§é¡¾çš„åŒºåŸŸï¼Œæ‰€ä»¥å †å†…ç©ºé—´è¿˜ä¼šè¢«ä¸åŒçš„åƒåœ¾æ”¶é›†å™¨è¿›è¡Œè¿›ä¸€æ­¥çš„ç»†åˆ†ï¼Œæœ€æœ‰åçš„å°±æ˜¯æ–°ç”Ÿä»£ã€è€å¹´ä»£çš„åˆ’åˆ†ã€‚")]),t._v(" "),s("p",[t._v("ç¬¬å››ï¼Œ"),s("strong",[t._v("æ–¹æ³•åŒº")]),t._v("ï¼ˆMethod Areaï¼‰ã€‚è¿™ä¹Ÿæ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨æ‰€è°“çš„å…ƒï¼ˆMetaï¼‰æ•°æ®ï¼Œä¾‹å¦‚ç±»ç»“æ„ä¿¡æ¯ï¼Œä»¥åŠå¯¹åº”çš„è¿è¡Œæ—¶å¸¸é‡æ± ã€å­—æ®µã€æ–¹æ³•ä»£ç ç­‰ã€‚")]),t._v(" "),s("p",[t._v("ç”±äºæ—©æœŸçš„ Hotspot JVM å®ç°ï¼Œå¾ˆå¤šäººä¹ æƒ¯äºå°†æ–¹æ³•åŒºç§°ä¸ºæ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰ã€‚Oracle JDK 8 ä¸­å°†æ°¸ä¹…ä»£ç§»é™¤ï¼ŒåŒæ—¶å¢åŠ äº†å…ƒæ•°æ®åŒºï¼ˆMetaspaceï¼‰ã€‚")]),t._v(" "),s("p",[t._v("ç¬¬äº”ï¼Œ"),s("strong",[t._v("è¿è¡Œæ—¶å¸¸é‡æ± ")]),t._v("ï¼ˆRun-Time Constant Poolï¼‰ï¼Œè¿™æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœä»”ç»†åˆ†æè¿‡åç¼–è¯‘çš„ç±»æ–‡ä»¶ç»“æ„ï¼Œä½ èƒ½çœ‹åˆ°ç‰ˆæœ¬å·ã€å­—æ®µã€æ–¹æ³•ã€è¶…ç±»ã€æ¥å£ç­‰å„ç§ä¿¡æ¯ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯å°±æ˜¯å¸¸é‡æ± ã€‚Java çš„å¸¸é‡æ± å¯ä»¥å­˜æ”¾å„ç§å¸¸é‡ä¿¡æ¯ï¼Œä¸ç®¡æ˜¯ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡ï¼Œè¿˜æ˜¯éœ€è¦åœ¨è¿è¡Œæ—¶å†³å®šçš„ç¬¦å·å¼•ç”¨ï¼Œæ‰€ä»¥å®ƒæ¯”ä¸€èˆ¬è¯­è¨€çš„ç¬¦å·è¡¨å­˜å‚¨çš„ä¿¡æ¯æ›´åŠ å®½æ³›ã€‚")]),t._v(" "),s("p",[t._v("ç¬¬å…­ï¼Œ"),s("strong",[t._v("æœ¬åœ°æ–¹æ³•æ ˆ")]),t._v("ï¼ˆNative Method Stackï¼‰ã€‚å®ƒå’Œ Java è™šæ‹Ÿæœºæ ˆæ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œæ”¯æŒå¯¹æœ¬åœ°æ–¹æ³•çš„è°ƒç”¨ï¼Œä¹Ÿæ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªã€‚åœ¨ Oracle Hotspot JVM ä¸­ï¼Œæœ¬åœ°æ–¹æ³•æ ˆå’Œ Java è™šæ‹Ÿæœºæ ˆæ˜¯åœ¨åŒä¸€å—å„¿åŒºåŸŸï¼Œè¿™å®Œå…¨å–å†³äºæŠ€æœ¯å®ç°çš„å†³å®šï¼Œå¹¶æœªåœ¨è§„èŒƒä¸­å¼ºåˆ¶ã€‚")]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰åŒºåŸŸï¼Œ Direct Buffer æ‰€ç›´æ¥åˆ†é…çš„å†…å­˜ï¼Œä¹Ÿæ˜¯ä¸ªå®¹æ˜“å‡ºç°é—®é¢˜çš„åœ°æ–¹ã€‚å°½ç®¡ï¼Œåœ¨ JVM å·¥ç¨‹å¸ˆçš„çœ¼ä¸­ï¼Œå¹¶ä¸è®¤ä¸ºå®ƒæ˜¯ JVM å†…éƒ¨å†…å­˜çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå¹¶æœªä½“ç° JVM å†…å­˜æ¨¡å‹ä¸­ã€‚")]),t._v(" "),s("li",[t._v("JVM æœ¬èº«æ˜¯ä¸ªæœ¬åœ°ç¨‹åºï¼Œè¿˜éœ€è¦å…¶ä»–çš„å†…å­˜å»å®Œæˆå„ç§åŸºæœ¬ä»»åŠ¡ï¼Œæ¯”å¦‚ï¼ŒJIT Compiler åœ¨è¿è¡Œæ—¶å¯¹çƒ­ç‚¹æ–¹æ³•è¿›è¡Œç¼–è¯‘ï¼Œå°±ä¼šå°†ç¼–è¯‘åçš„æ–¹æ³•å‚¨å­˜åœ¨ Code Cache é‡Œé¢ï¼›GC ç­‰åŠŸèƒ½éœ€è¦è¿è¡Œåœ¨æœ¬åœ°çº¿ç¨‹ä¹‹ä¸­ï¼Œç±»ä¼¼éƒ¨åˆ†éƒ½éœ€è¦å ç”¨å†…å­˜ç©ºé—´ã€‚è¿™äº›æ˜¯å®ç° JVM JIT ç­‰åŠŸèƒ½çš„éœ€è¦ï¼Œä½†è§„èŒƒä¸­å¹¶ä¸æ¶‰åŠã€‚")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://abiasforaction.net/wp-content/uploads/2020/12/xJVM_Overview.png,qx60851.pagespeed.ic.yS2Huqqhjz.webp",alt:"JVM Overview"}})])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-1-7-å’Œ-1-8-ä¸­-jvm-å†…å­˜ç»“æ„çš„åŒºåˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-1-7-å’Œ-1-8-ä¸­-jvm-å†…å­˜ç»“æ„çš„åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ 1.7 å’Œ 1.8 ä¸­ jvm å†…å­˜ç»“æ„çš„åŒºåˆ«")]),t._v(" "),s("p",[t._v("åœ¨ Java8 ä¸­ï¼Œæ°¸ä¹…ä»£è¢«ç§»é™¤ï¼Œè¢«ä¸€ä¸ªç§°ä¸ºå…ƒç©ºé—´çš„åŒºåŸŸä»£æ›¿ï¼Œå…ƒç©ºé—´çš„æœ¬è´¨å’Œæ°¸ä¹…ä»£ç±»ä¼¼ï¼Œéƒ½æ˜¯æ–¹æ³•åŒºçš„å®ç°ã€‚")]),t._v(" "),s("p",[t._v("å…ƒç©ºé—´ï¼ˆJava8ï¼‰å’Œæ°¸ä¹…ä»£ï¼ˆJava7ï¼‰ä¹‹é—´æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼šæ°¸ä¹…ä»£ä½¿ç”¨çš„ JVM çš„å †å†…å­˜ï¼ŒJava8 ä»¥åçš„å…ƒç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­è€Œæ˜¯ä½¿ç”¨æœ¬æœºç‰©ç†å†…å­˜ã€‚")]),t._v(" "),s("p",[t._v("å› æ­¤ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå…ƒç©ºé—´çš„å¤§å°ä»…å—æœ¬åœ°å†…å­˜é™åˆ¶ã€‚ç±»çš„å…ƒæ•°æ®æ”¾å…¥ natice memoryï¼Œå­—ç¬¦ä¸²æ± å’Œç±»çš„é™æ€å˜é‡æ”¾å…¥å †ä¸­ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://dl-harmonyos.51cto.com/images/202212/d37207e632cd193510c4713b1db551924c2d36.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-jvm-å †å†…éƒ¨ç»“æ„-jvm-å †å†…å­˜ä¸ºä»€ä¹ˆè¦åˆ†æˆæ–°ç”Ÿä»£-è€å¹´ä»£-æŒä¹…ä»£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-jvm-å †å†…éƒ¨ç»“æ„-jvm-å †å†…å­˜ä¸ºä»€ä¹ˆè¦åˆ†æˆæ–°ç”Ÿä»£-è€å¹´ä»£-æŒä¹…ä»£"}},[t._v("#")]),t._v(" ğŸ¯ JVM å †å†…éƒ¨ç»“æ„ï¼Ÿ |  JVM å †å†…å­˜ä¸ºä»€ä¹ˆè¦åˆ†æˆæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£ï¼ŒæŒä¹…ä»£")]),t._v(" "),s("blockquote",[s("p",[t._v("å †å†…å­˜æ˜¯JVMä¸­æœ€å¤§çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œä¸»è¦ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                        å †å†…å­˜ç»“æ„                           â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  æ–°ç”Ÿä»£(Young Generation) - 1/3å †ç©ºé—´                      â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\nâ”‚  â”‚ EdenåŒº      â”‚  â”‚ Survivor0   â”‚  â”‚ Survivor1           â”‚ â”‚\nâ”‚  â”‚ (8/10)     â”‚  â”‚ (1/10)      â”‚  â”‚ (1/10)              â”‚ â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  è€å¹´ä»£(Old Generation) - 2/3å †ç©ºé—´                        â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\nâ”‚  â”‚                                                         â”‚ â”‚\nâ”‚  â”‚                                                         â”‚ â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n")])])]),s("p",[s("strong",[t._v("æ–°ç”Ÿä»£ç‰¹ç‚¹")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("EdenåŒº")]),t._v("ï¼šæ–°åˆ›å»ºçš„å¯¹è±¡é¦–å…ˆåˆ†é…åœ¨è¿™é‡Œ")]),t._v(" "),s("li",[s("strong",[t._v("SurvivoråŒº")]),t._v("ï¼šç»è¿‡Minor GCåå­˜æ´»çš„å¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°SurvivoråŒº")]),t._v(" "),s("li",[s("strong",[t._v("æ¯”ä¾‹")]),t._v("ï¼šEden:S0:S1 = 8:1:1")])]),t._v(" "),s("p",[s("strong",[t._v("è€å¹´ä»£ç‰¹ç‚¹")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å­˜å‚¨ç»è¿‡å¤šæ¬¡Minor GCåä»ç„¶å­˜æ´»çš„å¯¹è±¡")]),t._v(" "),s("li",[t._v("å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£")]),t._v(" "),s("li",[t._v("è§¦å‘Major GC/Full GC")])])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("æ–°ç”Ÿä»£ï¼šæ–°ç”Ÿä»£æ˜¯å¤§éƒ¨åˆ†å¯¹è±¡åˆ›å»ºå’Œé”€æ¯çš„åŒºåŸŸï¼Œåœ¨é€šå¸¸çš„ Java åº”ç”¨ä¸­ï¼Œç»å¤§éƒ¨åˆ†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸéƒ½æ˜¯å¾ˆçŸ­æš‚çš„ã€‚å…¶å†…éƒ¨åˆåˆ†ä¸º Eden åŒºåŸŸï¼Œä½œä¸ºå¯¹è±¡åˆå§‹åˆ†é…çš„åŒºåŸŸï¼›ä¸¤ä¸ª Survivorï¼Œæœ‰æ—¶å€™ä¹Ÿå« fromã€to åŒºåŸŸï¼Œè¢«ç”¨æ¥æ”¾ç½®ä» Minor GC ä¸­ä¿ç•™ä¸‹æ¥çš„å¯¹è±¡ã€‚")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("JVM ä¼šéšæ„é€‰å–ä¸€ä¸ª Survivor åŒºåŸŸä½œä¸ºâ€œtoâ€ï¼Œç„¶åä¼šåœ¨ GC è¿‡ç¨‹ä¸­è¿›è¡ŒåŒºåŸŸé—´æ‹·è´ï¼Œä¹Ÿå°±æ˜¯å°† Eden ä¸­å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡å’Œ from åŒºåŸŸçš„å¯¹è±¡ï¼Œæ‹·è´åˆ°è¿™ä¸ªâ€œtoâ€åŒºåŸŸã€‚è¿™ç§è®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢å†…å­˜çš„ç¢ç‰‡åŒ–ï¼Œå¹¶è¿›ä¸€æ­¥æ¸…ç†æ— ç”¨å¯¹è±¡ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("ä»å†…å­˜æ¨¡å‹è€Œä¸æ˜¯åƒåœ¾æ”¶é›†çš„è§’åº¦ï¼Œå¯¹ Eden åŒºåŸŸç»§ç»­è¿›è¡Œåˆ’åˆ†ï¼ŒHotspot JVM è¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå«åš Thread Local Allocation Bufferï¼ˆTLABï¼‰ï¼Œæ®æˆ‘æ‰€çŸ¥æ‰€æœ‰ OpenJDK è¡ç”Ÿå‡ºæ¥çš„ JVM éƒ½æä¾›äº† TLAB çš„è®¾è®¡ã€‚è¿™æ˜¯ JVM ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…çš„ä¸€ä¸ªç§æœ‰ç¼“å­˜åŒºåŸŸï¼Œå¦åˆ™ï¼Œå¤šçº¿ç¨‹åŒæ—¶åˆ†é…å†…å­˜æ—¶ï¼Œä¸ºé¿å…æ“ä½œåŒä¸€åœ°å€ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨åŠ é”ç­‰æœºåˆ¶ï¼Œè¿›è€Œå½±å“åˆ†é…é€Ÿåº¦ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ç¤ºæ„å›¾ã€‚ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒTLAB ä»ç„¶åœ¨å †ä¸Šï¼Œå®ƒæ˜¯åˆ†é…åœ¨ Eden åŒºåŸŸå†…çš„ã€‚å…¶å†…éƒ¨ç»“æ„æ¯”è¾ƒç›´è§‚æ˜“æ‡‚ï¼Œstartã€end å°±æ˜¯èµ·å§‹åœ°å€ï¼Œtopï¼ˆæŒ‡é’ˆï¼‰åˆ™è¡¨ç¤ºå·²ç»åˆ†é…åˆ°å“ªé‡Œäº†ã€‚æ‰€ä»¥æˆ‘ä»¬åˆ†é…æ–°å¯¹è±¡ï¼ŒJVM å°±ä¼šç§»åŠ¨ topï¼Œå½“ top å’Œ end ç›¸é‡æ—¶ï¼Œå³è¡¨ç¤ºè¯¥ç¼“å­˜å·²æ»¡ï¼ŒJVM ä¼šè¯•å›¾å†ä» Eden é‡Œåˆ†é…ä¸€å—å„¿ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static001.geekbang.org/resource/image/f5/bd/f546839e98ea5d43b595235849b0f2bd.png",alt:""}})])])])]),t._v(" "),s("li",[s("p",[t._v("è€å¹´ä»£ï¼šæ”¾ç½®é•¿ç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ï¼Œé€šå¸¸éƒ½æ˜¯ä» Survivor åŒºåŸŸæ‹·è´è¿‡æ¥çš„å¯¹è±¡ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæˆ‘ä»¬çŸ¥é“æ™®é€šçš„å¯¹è±¡ä¼šè¢«åˆ†é…åœ¨ TLAB ä¸Šï¼›å¦‚æœå¯¹è±¡è¾ƒå¤§ï¼ŒJVM ä¼šè¯•å›¾ç›´æ¥åˆ†é…åœ¨ Eden å…¶ä»–ä½ç½®ä¸Šï¼›å¦‚æœå¯¹è±¡å¤ªå¤§ï¼Œå®Œå…¨æ— æ³•åœ¨æ–°ç”Ÿä»£æ‰¾åˆ°è¶³å¤Ÿé•¿çš„è¿ç»­ç©ºé—²ç©ºé—´ï¼ŒJVM å°±ä¼šç›´æ¥åˆ†é…åˆ°è€å¹´ä»£ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("æ°¸ä¹…ä»£ï¼šè¿™éƒ¨åˆ†å°±æ˜¯æ—©æœŸ Hotspot JVM çš„æ–¹æ³•åŒºå®ç°æ–¹å¼äº†ï¼Œå‚¨å­˜ Java ç±»å…ƒæ•°æ®ã€å¸¸é‡æ± ã€Intern å­—ç¬¦ä¸²ç¼“å­˜ï¼Œåœ¨ JDK 8 ä¹‹åå°±ä¸å­˜åœ¨æ°¸ä¹…ä»£è¿™å—å„¿äº†ã€‚")])])]),t._v(" "),s("h4",{attrs:{id:"ä¸€äº›å‚æ•°çš„é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€äº›å‚æ•°çš„é…ç½®"}},[t._v("#")]),t._v(" ä¸€äº›å‚æ•°çš„é…ç½®")]),t._v(" "),s("ul",[s("li",[t._v("é»˜è®¤çš„ï¼Œæ–°ç”Ÿä»£ ( Young ) ä¸è€å¹´ä»£ ( Old ) çš„æ¯”ä¾‹çš„å€¼ä¸º 1:2 ï¼Œå¯ä»¥é€šè¿‡å‚æ•° â€“XX:NewRatio é…ç½®ã€‚")]),t._v(" "),s("li",[t._v("é»˜è®¤çš„ï¼ŒEdem : from : to = 8 : 1 : 1 ( å¯ä»¥é€šè¿‡å‚æ•° â€“XX:SurvivorRatio æ¥è®¾å®š)")]),t._v(" "),s("li",[t._v("SurvivoråŒºä¸­çš„å¯¹è±¡è¢«å¤åˆ¶æ¬¡æ•°ä¸º15(å¯¹åº”è™šæ‹Ÿæœºå‚æ•° -XX:+MaxTenuringThreshold)")])]),t._v(" "),s("h4",{attrs:{id:"ä¸ºä»€ä¹ˆè¦åˆ†ä¸ºedenå’Œsurvivor-ä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸¤ä¸ªsurvivoråŒº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦åˆ†ä¸ºedenå’Œsurvivor-ä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸¤ä¸ªsurvivoråŒº"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè¦åˆ†ä¸ºEdenå’ŒSurvivor?ä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸¤ä¸ªSurvivoråŒºï¼Ÿ")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœæ²¡æœ‰Survivorï¼ŒEdenåŒºæ¯è¿›è¡Œä¸€æ¬¡Minor GCï¼Œå­˜æ´»çš„å¯¹è±¡å°±ä¼šè¢«é€åˆ°è€å¹´ä»£ã€‚è€å¹´ä»£å¾ˆå¿«è¢«å¡«æ»¡ï¼Œè§¦å‘Major GCã€‚è€å¹´ä»£çš„å†…å­˜ç©ºé—´è¿œå¤§äºæ–°ç”Ÿä»£ï¼Œè¿›è¡Œä¸€æ¬¡ Full GC æ¶ˆè€—çš„æ—¶é—´æ¯” Minor GC é•¿å¾—å¤š,æ‰€ä»¥éœ€è¦åˆ†ä¸º Eden å’Œ Survivorã€‚")]),t._v(" "),s("li",[t._v("Survivor çš„å­˜åœ¨æ„ä¹‰ï¼Œå°±æ˜¯å‡å°‘è¢«é€åˆ°è€å¹´ä»£çš„å¯¹è±¡ï¼Œè¿›è€Œå‡å°‘ Full GC çš„å‘ç”Ÿ")]),t._v(" "),s("li",[t._v("è®¾ç½®ä¸¤ä¸ª Survivor åŒºæœ€å¤§çš„å¥½å¤„å°±æ˜¯è§£å†³äº†ç¢ç‰‡åŒ–ï¼Œåˆšåˆšæ–°å»ºçš„å¯¹è±¡åœ¨ Eden ä¸­ï¼Œç»å†ä¸€æ¬¡ Minor GCï¼ŒEden ä¸­çš„å­˜æ´»å¯¹è±¡å°±ä¼šè¢«ç§»åŠ¨åˆ°ç¬¬ä¸€å— survivor space S0ï¼ŒEden è¢«æ¸…ç©ºï¼›ç­‰ Eden åŒºå†æ»¡äº†ï¼Œå°±å†è§¦å‘ä¸€æ¬¡ Minor GCï¼ŒEden å’Œ S0 ä¸­çš„å­˜æ´»å¯¹è±¡åˆä¼šè¢«å¤åˆ¶é€å…¥ç¬¬äºŒå— survivor space S1ï¼ˆè¿™ä¸ªè¿‡ç¨‹éå¸¸é‡è¦ï¼Œå› ä¸ºè¿™ç§å¤åˆ¶ç®—æ³•ä¿è¯äº†S1ä¸­æ¥è‡ªS0å’ŒEdenä¸¤éƒ¨åˆ†çš„å­˜æ´»å¯¹è±¡å ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œé¿å…äº†ç¢ç‰‡åŒ–çš„å‘ç”Ÿï¼‰")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-æ–¹æ³•åŒºå­˜å‚¨ä»€ä¹ˆå†…å®¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æ–¹æ³•åŒºå­˜å‚¨ä»€ä¹ˆå†…å®¹"}},[t._v("#")]),t._v(" ğŸ¯ æ–¹æ³•åŒºå­˜å‚¨ä»€ä¹ˆå†…å®¹ï¼Ÿ")]),t._v(" "),s("p",[t._v("æ–¹æ³•åŒºå­˜å‚¨çš„æ˜¯ç±»çº§åˆ«çš„æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("ç±»ä¿¡æ¯")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ç±»çš„å®Œæ•´åç§°")]),t._v(" "),s("li",[t._v("ç±»çš„ç›´æ¥çˆ¶ç±»")]),t._v(" "),s("li",[t._v("ç±»çš„ä¿®é¥°ç¬¦")]),t._v(" "),s("li",[t._v("ç±»çš„æ¥å£åˆ—è¡¨")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å­—æ®µä¿¡æ¯")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å­—æ®µåç§°")]),t._v(" "),s("li",[t._v("å­—æ®µç±»å‹")]),t._v(" "),s("li",[t._v("å­—æ®µä¿®é¥°ç¬¦")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ–¹æ³•ä¿¡æ¯")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æ–¹æ³•åç§°")]),t._v(" "),s("li",[t._v("æ–¹æ³•è¿”å›ç±»å‹")]),t._v(" "),s("li",[t._v("æ–¹æ³•å‚æ•°")]),t._v(" "),s("li",[t._v("æ–¹æ³•ä¿®é¥°ç¬¦")]),t._v(" "),s("li",[t._v("æ–¹æ³•çš„å­—èŠ‚ç ")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å¸¸é‡æ± ")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å­—ç¬¦ä¸²å¸¸é‡")]),t._v(" "),s("li",[t._v("æ•°å­—å¸¸é‡")]),t._v(" "),s("li",[t._v("ç±»å’Œæ¥å£çš„ç¬¦å·å¼•ç”¨")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("é™æ€å˜é‡")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ç±»å˜é‡ï¼ˆstaticä¿®é¥°çš„å˜é‡ï¼‰")])])])]),t._v(" "),s("p",[s("strong",[t._v("JDKç‰ˆæœ¬å˜åŒ–")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("JDK 1.7ä¹‹å‰")]),t._v('ï¼šæ–¹æ³•åŒºç§°ä¸º"æ°¸ä¹…ä»£"(PermGen)')]),t._v(" "),s("li",[s("strong",[t._v("JDK 1.8ä¹‹å")]),t._v('ï¼šæ–¹æ³•åŒºç§°ä¸º"å…ƒç©ºé—´"(Metaspace)ï¼Œä½¿ç”¨æœ¬åœ°å†…å­˜')])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-æ ˆå¸§çš„å†…éƒ¨ç»“æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æ ˆå¸§çš„å†…éƒ¨ç»“æ„"}},[t._v("#")]),t._v(" ğŸ¯ æ ˆå¸§çš„å†…éƒ¨ç»“æ„?")]),t._v(" "),s("p",[t._v("åœ¨ Java ä¸­ï¼Œ"),s("strong",[t._v("è™šæ‹Ÿæœºæ ˆ")]),t._v("ï¼ˆJVM Stackï¼‰æ˜¯ JVM å†…å­˜æ¨¡å‹çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒç”¨äºå­˜å‚¨æ–¹æ³•è°ƒç”¨çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚å±€éƒ¨å˜é‡ã€æ“ä½œæ•°æ ˆã€æ–¹æ³•è°ƒç”¨çš„è¿”å›åœ°å€ç­‰ã€‚æ¯ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œæ—¶éƒ½ä¼šæœ‰ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºæ ˆï¼Œç¡®ä¿å¤šçº¿ç¨‹é—´çš„æ•°æ®éš”ç¦»ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„è™šæ‹Ÿæœºæ ˆ")]),t._v("ï¼Œæ ˆæ˜¯æŒ‰ç…§æ–¹æ³•è°ƒç”¨æ¥ç»„ç»‡çš„ã€‚")]),t._v(" "),s("li",[t._v("æ ˆä¸­çš„æ•°æ®æ˜¯ "),s("strong",[t._v("æ–¹æ³•è°ƒç”¨æ ˆå¸§")]),t._v("ï¼ˆStack Frameï¼‰ï¼Œæ¯ä¸ªæ ˆå¸§è¡¨ç¤ºä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œã€‚")]),t._v(" "),s("li",[t._v("æ–¹æ³•åœ¨æ‰§è¡Œæ—¶ï¼ŒJVM ä¼šä¸ºæ¯ä¸ªæ–¹æ³•åˆ†é…ä¸€ä¸ªæ ˆå¸§ï¼Œæ¯å½“æ–¹æ³•è°ƒç”¨æ—¶ä¼šå°†æ ˆå¸§å‹å…¥æ ˆä¸­ï¼Œæ–¹æ³•è¿”å›æ—¶ä¼šå°†æ ˆå¸§å¼¹å‡ºã€‚")])]),t._v(" "),s("p",[t._v("æ¯ä¸ª"),s("strong",[t._v("æ ˆå¸§")]),t._v("ï¼ˆStack Frameï¼‰ä¸­å­˜å‚¨ç€ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å±€éƒ¨å˜é‡è¡¨")]),t._v("ï¼šå­˜å‚¨æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼ˆåŸºæœ¬ç±»å‹ã€å¯¹è±¡å¼•ç”¨ã€returnAddress ç±»å‹ï¼‰ï¼Œå®¹é‡åœ¨ç¼–è¯‘æœŸç¡®å®šï¼ˆå¦‚ "),s("code",[t._v("int a=1")]),t._v(" å ç”¨ 1 ä¸ªæ§½ä½ï¼Œ"),s("code",[t._v("long b=2")]),t._v(" å ç”¨ 2 ä¸ªæ§½ä½ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ“ä½œæ•°æ ˆ")]),t._v("ï¼šæ‰§è¡Œå­—èŠ‚ç æŒ‡ä»¤æ—¶çš„ä¸´æ—¶æ•°æ®æ ˆï¼ˆå¦‚ "),s("code",[t._v("a+b")]),t._v(" è¿ç®—æ—¶ï¼Œéœ€å…ˆå°† aã€b å…¥æ ˆï¼Œå†æ‰§è¡ŒåŠ æ³•æŒ‡ä»¤ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åŠ¨æ€é“¾æ¥")]),t._v("ï¼šæŒ‡å‘æ–¹æ³•åŒºä¸­è¯¥æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ï¼ˆå°†ç¬¦å·å¼•ç”¨è½¬ä¸ºç›´æ¥å¼•ç”¨ï¼Œæ”¯æŒå¤šæ€ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ–¹æ³•è¿”å›åœ°å€")]),t._v("ï¼šæ–¹æ³•æ‰§è¡Œå®Œæ¯•åï¼Œè¿”å›è°ƒç”¨è€…çš„æŒ‡ä»¤åœ°å€ï¼ˆå¦‚æ­£å¸¸è¿”å›çš„ pc è®¡æ•°å™¨å€¼ï¼Œæˆ–å¼‚å¸¸å¤„ç†çš„åœ°å€ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("ä¸€äº›é™„åŠ ä¿¡æ¯")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_jpg/Z0fxkgAKKLMAVEVNlW7gDqZIFzSvVq29fMr12sicgr3HIgRFtFRY8IAcDvwP6orNRRIojrn3edcS3h2ibblgAgQg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-æ–¹æ³•è¿”å›åœ°å€ä»€ä¹ˆæ—¶å€™å›æ”¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æ–¹æ³•è¿”å›åœ°å€ä»€ä¹ˆæ—¶å€™å›æ”¶"}},[t._v("#")]),t._v(" ğŸ¯ æ–¹æ³•è¿”å›åœ°å€ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼Ÿ")]),t._v(" "),s("p",[t._v("æ–¹æ³•è¿”å›åœ°å€å­˜å‚¨åœ¨æ ˆå¸§ä¸­ï¼Œå…¶å›æ”¶ä¸ "),s("strong",[t._v("æ ˆå¸§å‡ºæ ˆ")]),t._v(" åŒæ­¥ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å½“æ–¹æ³•æ­£å¸¸æ‰§è¡Œå®Œæ¯•ï¼ˆé‡åˆ° "),s("code",[t._v("return")]),t._v(" æŒ‡ä»¤ï¼‰æˆ–å¼‚å¸¸ç»ˆæ­¢ï¼ˆæœªè¢«æ•è·çš„å¼‚å¸¸å¯¼è‡´æ–¹æ³•é€€å‡ºï¼‰æ—¶ï¼Œå½“å‰æ ˆå¸§ä¼šä»è™šæ‹Ÿæœºæ ˆä¸­å¼¹å‡ºã€‚")]),t._v(" "),s("li",[t._v("æ ˆå¸§å‡ºæ ˆåï¼Œå…¶åŒ…å«çš„ â€œæ–¹æ³•è¿”å›åœ°å€â€â€œå±€éƒ¨å˜é‡è¡¨â€â€œæ“ä½œæ•°æ ˆâ€ ç­‰æ•°æ®ä¼šè¢«è‡ªåŠ¨å›æ”¶ï¼ˆæ— éœ€ GC å‚ä¸ï¼Œå±äºçº¿ç¨‹ç§æœ‰å†…å­˜çš„è‡ªåŠ¨é‡Šæ”¾ï¼‰ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ç¨‹åºè®¡æ•°å™¨ä»€ä¹ˆæ—¶å€™ä¸ºç©º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ç¨‹åºè®¡æ•°å™¨ä»€ä¹ˆæ—¶å€™ä¸ºç©º"}},[t._v("#")]),t._v(" ğŸ¯ ç¨‹åºè®¡æ•°å™¨ä»€ä¹ˆæ—¶å€™ä¸ºç©º?")]),t._v(" "),s("p",[t._v("ç¨‹åºè®¡æ•°å™¨çš„ä½œç”¨æ˜¯ "),s("strong",[t._v("è®°å½•å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€")]),t._v("ï¼ˆå¦‚ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤ä½ç½®ï¼‰ï¼Œå…¶ â€œä¸ºç©ºâ€ çš„åœºæ™¯åªæœ‰ä¸€ç§ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å½“çº¿ç¨‹æ‰§è¡Œçš„æ˜¯ native æ–¹æ³•æ—¶")]),t._v("ï¼ˆå¦‚è°ƒç”¨ "),s("code",[t._v("System.currentTimeMillis()")]),t._v(" ç­‰æœ¬åœ°æ–¹æ³•ï¼‰ï¼Œç”±äº native æ–¹æ³•ç”±é Java è¯­è¨€å®ç°ï¼ˆå¦‚ C/C++ï¼‰ï¼Œå…¶æ‰§è¡Œä¸å— JVM å­—èŠ‚ç æŒ‡ä»¤æ§åˆ¶ï¼Œæ­¤æ—¶ç¨‹åºè®¡æ•°å™¨çš„å€¼ä¸º "),s("strong",[t._v("undefined")]),t._v("ï¼ˆå¯ç†è§£ä¸º â€œç©ºâ€ï¼‰ã€‚")])]),t._v(" "),s("p",[t._v("å…¶ä»–åœºæ™¯ï¼ˆæ‰§è¡Œ Java æ–¹æ³•æ—¶ï¼‰ï¼Œç¨‹åºè®¡æ•°å™¨å§‹ç»ˆå­˜å‚¨æœ‰æ•ˆæŒ‡ä»¤åœ°å€ï¼ˆå³ä½¿æ–¹æ³•é˜»å¡ï¼Œè®¡æ•°å™¨ä¹Ÿä¼šä¿ç•™å½“å‰ä½ç½®ï¼Œçº¿ç¨‹å”¤é†’åå¯ç»§ç»­æ‰§è¡Œï¼‰ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-java-å¯¹è±¡æ˜¯ä¸æ˜¯éƒ½åˆ›å»ºåœ¨å †ä¸Šçš„å‘¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-java-å¯¹è±¡æ˜¯ä¸æ˜¯éƒ½åˆ›å»ºåœ¨å †ä¸Šçš„å‘¢"}},[t._v("#")]),t._v(" ğŸ¯ Java å¯¹è±¡æ˜¯ä¸æ˜¯éƒ½åˆ›å»ºåœ¨å †ä¸Šçš„å‘¢ï¼Ÿ")]),t._v(" "),s("blockquote",[s("p",[t._v("JVM çš„ä¸€äº›é«˜çº§ä¼˜åŒ–æŠ€æœ¯ï¼Œä¾‹å¦‚é€ƒé€¸åˆ†æï¼ˆEscape Analysisï¼‰ï¼Œå¯ä»¥ä½¿å¯¹è±¡åœ¨æ ˆä¸Šåˆ†é…å†…å­˜ï¼Œè€Œä¸æ˜¯å †ä¸Šã€‚é€ƒé€¸åˆ†æå¯ä»¥åˆ¤æ–­å¯¹è±¡çš„ä½œç”¨åŸŸï¼Œå¦‚æœç¡®å®šå¯¹è±¡ä¸ä¼šé€ƒé€¸å‡ºæ–¹æ³•ï¼ˆå³å¯¹è±¡ä»…åœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼‰ï¼ŒJVM å¯ä»¥é€‰æ‹©å°†å¯¹è±¡åˆ†é…åœ¨æ ˆä¸Šã€‚è¿™ç§ä¼˜åŒ–å‡å°‘äº†åƒåœ¾å›æ”¶çš„è´Ÿæ‹…ï¼Œå¹¶æé«˜äº†æ€§èƒ½ã€‚")]),t._v(" "),s("p",[t._v("é€šè¿‡"),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Escape_analysis",target:"_blank",rel:"noopener noreferrer"}},[t._v("é€ƒé€¸åˆ†æ"),s("OutboundLink")],1),t._v("ï¼ŒJVM ä¼šåœ¨æ ˆä¸Šåˆ†é…é‚£äº›ä¸ä¼šé€ƒé€¸çš„å¯¹è±¡ï¼Œè¿™åœ¨ç†è®ºä¸Šæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å–å†³äº JVM è®¾è®¡è€…çš„é€‰æ‹©ã€‚")])]),t._v(" "),s("p",[t._v("åœ¨ Java ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å¯¹è±¡éƒ½ä¸¥æ ¼åˆ›å»ºåœ¨å †ä¸Šï¼Œå°½ç®¡å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç¡®å®å¦‚æ­¤ã€‚å…·ä½“æ¥è¯´ï¼š")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("æ™®é€šå¯¹è±¡ï¼šé€šå¸¸åˆ›å»ºåœ¨å †ä¸Š")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Java ä¸­é€šè¿‡ "),s("code",[t._v("new")]),t._v(" å…³é”®å­—åˆ›å»ºçš„å¯¹è±¡ï¼ˆæ¯”å¦‚ "),s("code",[t._v("new MyClass()")]),t._v("ï¼‰ï¼Œä»¥åŠé€šè¿‡åå°„ã€åºåˆ—åŒ–ç­‰æœºåˆ¶åˆ›å»ºçš„å¯¹è±¡ï¼Œé»˜è®¤åˆ†é…åœ¨å †ä¸Šã€‚")])]),t._v(" "),s("li",[s("p",[t._v("å †æ˜¯ JVM ä¸­ç”¨æ¥å­˜å‚¨å¯¹è±¡å®ä¾‹å’Œæ•°ç»„çš„åŒºåŸŸï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«ã€‚")])])])]),t._v(" "),s("li",[s("p",[t._v("æ ˆä¸Šåˆ†é…å¯¹è±¡ï¼ˆé€ƒé€¸åˆ†æ & æ ‡é‡æ›¿æ¢ä¼˜åŒ–ï¼‰")]),t._v(" "),s("ul",[s("li",[t._v("åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒJVM å¯ä»¥é€šè¿‡ä¼˜åŒ–æŠ€æœ¯å°†åŸæœ¬åº”è¯¥åœ¨å †ä¸Šåˆ†é…çš„å¯¹è±¡è½¬ç§»åˆ°æ ˆä¸Šåˆ†é…ã€‚è¿™ç§ä¼˜åŒ–æ˜¯é€šè¿‡**é€ƒé€¸åˆ†æï¼ˆEscape Analysisï¼‰**å®ç°çš„ã€‚\n"),s("ul",[s("li",[t._v("å¦‚æœ JVM ç¡®å®šæŸä¸ªå¯¹è±¡ä¸ä¼šåœ¨å½“å‰æ–¹æ³•ä¹‹å¤–è¢«è®¿é—®ï¼ˆä¸ä¼šé€ƒé€¸å½“å‰çº¿ç¨‹ï¼‰ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½ä¼šå°†è¯¥å¯¹è±¡åˆ†é…åœ¨æ ˆä¸Šã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœå¯¹è±¡åˆ†é…åœ¨æ ˆä¸Šï¼Œå½“æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæ ˆå¸§å‡ºæ ˆæ—¶ï¼Œå¯¹è±¡ä¼šè‡ªåŠ¨é”€æ¯ï¼Œä¸éœ€è¦åƒåœ¾å›æ”¶ã€‚")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ ‡é‡æ›¿æ¢")])]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœé€ƒé€¸åˆ†æè¿›ä¸€æ­¥ç¡®å®šä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡å¯ä»¥ç›´æ¥ç”¨åŸºæœ¬æ•°æ®ç±»å‹ä»£æ›¿ï¼Œåˆ™ JVM å¯èƒ½ä¼šå°†å¯¹è±¡â€œæ‹†åˆ†â€ä¸ºä¸€ç»„æ ‡é‡å˜é‡ï¼Œè€Œæ ¹æœ¬ä¸åˆ›å»ºå¯¹è±¡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹è±¡å®é™…ä¸Šå¹¶æ²¡æœ‰è¢«æ˜¾å¼åˆ†é…åœ¨å †æˆ–æ ˆä¸Šã€‚")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ–¹æ³•åŒºä¸­çš„ç‰¹æ®Šå¯¹è±¡")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("ç±»å¯¹è±¡")]),t._v("ï¼šæ¯ä¸ªç±»çš„ "),s("code",[t._v("Class")]),t._v(" å¯¹è±¡æ˜¯å­˜å‚¨åœ¨"),s("strong",[t._v("æ–¹æ³•åŒº")]),t._v("ä¸­çš„ï¼Œç”¨äºåå°„å’Œç±»å…ƒæ•°æ®ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å­—ç¬¦ä¸²æ± ")]),t._v("ï¼šå­—ç¬¦ä¸²å­—é¢é‡ï¼ˆå¦‚ "),s("code",[t._v('"hello"')]),t._v("ï¼‰å­˜å‚¨åœ¨å †å¤–çš„å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆJava 7 å¼€å§‹å­—ç¬¦ä¸²å¸¸é‡æ± åœ¨å †ä¸­ï¼‰ã€‚")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ç›´æ¥å†…å­˜ä¸­çš„å¯¹è±¡")])])])]),t._v(" "),s("ul",[s("li",[t._v("é€šè¿‡ "),s("code",[t._v("ByteBuffer.allocateDirect()")]),t._v(" åˆ†é…çš„ç›´æ¥å†…å­˜åŒºåŸŸï¼ˆDirect Memoryï¼‰ä¸åœ¨å †ä¸Šï¼Œè€Œæ˜¯ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„å†…å­˜ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("ç»“è®º")])]),t._v(" "),s("p",[t._v("è™½ç„¶å¤§éƒ¨åˆ† Java å¯¹è±¡åˆ›å»ºåœ¨å †ä¸Šï¼Œä½†ç”±äº JVM çš„ä¼˜åŒ–ï¼ˆå¦‚é€ƒé€¸åˆ†æã€æ ‡é‡æ›¿æ¢ï¼‰å’Œä¸€äº›ç‰¹å®šæœºåˆ¶ï¼ˆå¦‚å­—ç¬¦ä¸²å¸¸é‡æ± ã€ç›´æ¥å†…å­˜ï¼‰ï¼Œå¹¶éæ‰€æœ‰å¯¹è±¡éƒ½ä¸¥æ ¼åˆ›å»ºåœ¨å †ä¸Šã€‚æ˜¯å¦åœ¨å †ä¸Šåˆ†é…ï¼Œå…·ä½“å–å†³äºå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€ä½œç”¨åŸŸä»¥åŠ JVM çš„è¿è¡Œæ—¶ä¼˜åŒ–ç­–ç•¥ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-java-new-ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-java-new-ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ Java new ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ")]),t._v(" "),s("p",[t._v("Java åœ¨ new ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šå…ˆæŸ¥çœ‹å¯¹è±¡æ‰€å±çš„ç±»æœ‰æ²¡æœ‰è¢«åŠ è½½åˆ°å†…å­˜ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œå°±ä¼šå…ˆé€šè¿‡ç±»çš„å…¨é™å®šåæ¥åŠ è½½ã€‚åŠ è½½å¹¶åˆå§‹åŒ–ç±»å®Œæˆåï¼Œå†è¿›è¡Œå¯¹è±¡çš„åˆ›å»ºå·¥ä½œã€‚")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å…ˆå‡è®¾æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨è¯¥ç±»ï¼Œè¿™æ ·çš„è¯ new ä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªè¿‡ç¨‹ï¼š"),s("strong",[t._v("åŠ è½½å¹¶åˆå§‹åŒ–ç±»å’Œåˆ›å»ºå¯¹è±¡")])]),t._v(" "),s("p",[t._v("åŠ è½½è¿‡ç¨‹å°±æ˜¯ ClassLoader é‚£ä¸€å¥—ï¼šåŠ è½½-éªŒè¯-å‡†å¤‡-è§£æ-åˆå§‹åŒ–")]),t._v(" "),s("p",[s("strong",[t._v("ä¸€ã€ç±»åŠ è½½ä¸åˆå§‹åŒ–ï¼ˆé¦–æ¬¡ä½¿ç”¨ç±»æ—¶è§¦å‘ï¼‰")])]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("ç±»åŠ è½½æ£€æŸ¥")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("è§¦å‘æ¡ä»¶")]),t._v("ï¼šé¦–æ¬¡ä½¿ç”¨ç±»ï¼ˆå¦‚ "),s("code",[t._v("new")]),t._v("ã€åå°„è°ƒç”¨ç­‰ï¼‰ï¼Œæ£€æŸ¥æ˜¯å¦å·²åŠ è½½ç±»å…ƒæ•°æ®ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("åŠ è½½æµç¨‹ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åŠ è½½ï¼ˆLoadingï¼‰")]),t._v("ï¼šé€šè¿‡ç±»åŠ è½½å™¨ï¼ˆå¦‚ "),s("code",[t._v("AppClassLoader")]),t._v("ï¼‰ä»ç£ç›˜ã€ç½‘ç»œç­‰æ¥æºè¯»å– "),s("code",[t._v(".class")]),t._v(" å­—èŠ‚æµã€‚")]),t._v(" "),s("li",[s("strong",[t._v("éªŒè¯ï¼ˆVerificationï¼‰")]),t._v("ï¼šæ£€æŸ¥å­—èŠ‚ç åˆæ³•æ€§ï¼ˆå¦‚é­”æ•° "),s("code",[t._v("0xCAFEBABE")]),t._v("ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å‡†å¤‡ï¼ˆPreparationï¼‰")]),t._v("ï¼šä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶èµ‹é›¶å€¼ï¼ˆå¦‚ "),s("code",[t._v("static int")]),t._v(" åˆå§‹åŒ–ä¸º 0ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("è§£æï¼ˆResolutionï¼‰")]),t._v("ï¼šå°†ç¬¦å·å¼•ç”¨è½¬ä¸ºç›´æ¥å¼•ç”¨ï¼ˆå¦‚æ–¹æ³•åœ°å€ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åˆå§‹åŒ–ï¼ˆInitializationï¼‰")]),t._v("ï¼šæ‰§è¡Œ "),s("code",[t._v("<clinit>()")]),t._v(" æ–¹æ³•ï¼Œåˆå¹¶é™æ€ä»£ç å—å’Œé™æ€å˜é‡èµ‹å€¼ã€‚")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ç±»åŠ è½½çš„æ‡’åŠ è½½ç‰¹æ€§")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("å»¶è¿ŸåŠ è½½")]),t._v("ï¼šç±»ä»…åœ¨é¦–æ¬¡ä¸»åŠ¨ä½¿ç”¨æ—¶åŠ è½½ï¼Œé¿å…å¯åŠ¨æ—¶åŠ è½½æ‰€æœ‰ç±»ã€‚")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyClass")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç±»å·²åˆå§‹åŒ–"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Test")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é¦–æ¬¡ new æ—¶è§¦å‘ç±»åŠ è½½å’Œåˆå§‹åŒ–")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyClass")]),t._v(" obj "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// è¾“å‡ºï¼š"ç±»å·²åˆå§‹åŒ–"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])]),t._v(" "),s("p",[s("strong",[t._v("äºŒã€å¯¹è±¡å®ä¾‹åŒ–é˜¶æ®µ")])]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("åˆ†é…å †å†…å­˜")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("å†…å­˜åˆ†é…æ–¹å¼ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æŒ‡é’ˆç¢°æ’ï¼ˆBump the Pointerï¼‰")]),t._v("ï¼šé€‚ç”¨äºè§„æ•´å†…å­˜ï¼ˆå¦‚ "),s("code",[t._v("Serial")]),t._v(" æ”¶é›†å™¨ï¼‰ï¼Œé€šè¿‡ç§»åŠ¨æŒ‡é’ˆåˆ†é…è¿ç»­å†…å­˜ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰")]),t._v("ï¼šé€‚ç”¨äºç¢ç‰‡åŒ–å†…å­˜ï¼ˆå¦‚ "),s("code",[t._v("CMS")]),t._v(" æ”¶é›†å™¨ï¼‰ï¼Œç»´æŠ¤å¯ç”¨å†…å­˜å—åˆ—è¡¨ã€‚")])])]),t._v(" "),s("li",[s("p",[t._v("çº¿ç¨‹å®‰å…¨æœºåˆ¶ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("CAS + é‡è¯•")]),t._v("ï¼šé€šè¿‡åŸå­æ“ä½œé¿å…å¤šçº¿ç¨‹ç«äº‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("TLABï¼ˆThread Local Allocation Bufferï¼‰")]),t._v("ï¼šä¸ºæ¯ä¸ªçº¿ç¨‹é¢„åˆ†é…ç§æœ‰å†…å­˜åŒºåŸŸï¼Œå‡å°‘é”ç«äº‰ã€‚")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("åˆå§‹åŒ–é›¶å€¼")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("JVM å°†å¯¹è±¡å†…å­˜åŒºåŸŸåˆå§‹åŒ–ä¸ºé›¶å€¼ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åŸºæœ¬ç±»å‹ï¼š"),s("code",[t._v("int")]),t._v(" â†’ "),s("code",[t._v("0")]),t._v("ï¼Œ"),s("code",[t._v("boolean")]),t._v(" â†’ "),s("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("å¼•ç”¨ç±»å‹ï¼šåˆå§‹åŒ–ä¸º "),s("code",[t._v("null")]),t._v("ã€‚")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ„ä¹‰")]),t._v("ï¼šç¡®ä¿æœªæ˜¾å¼èµ‹å€¼çš„å­—æ®µå¯ç›´æ¥ä½¿ç”¨ã€‚")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("è®¾ç½®å¯¹è±¡å¤´ï¼ˆObject Headerï¼‰")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("Mark Word")]),t._v("ï¼šå­˜å‚¨å“ˆå¸Œç ã€GC åˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€ï¼ˆå¦‚åå‘é”æ ‡è®°ï¼‰ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ç±»å‹æŒ‡é’ˆï¼ˆClass Pointerï¼‰")]),t._v("ï¼šæŒ‡å‘æ–¹æ³•åŒºä¸­çš„ç±»å…ƒæ•°æ®ï¼ˆ"),s("code",[t._v("Class")]),t._v(" å¯¹è±¡ï¼‰ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ•°ç»„é•¿åº¦")]),t._v("ï¼ˆä»…æ•°ç»„å¯¹è±¡ï¼‰ï¼šè®°å½•æ•°ç»„é•¿åº¦ã€‚")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ‰§è¡Œ "),s("code",[t._v("<init>()")]),t._v(" æ–¹æ³•")])]),t._v(" "),s("ul",[s("li",[t._v("åˆå§‹åŒ–é¡ºåºï¼š\n"),s("ol",[s("li",[s("strong",[t._v("çˆ¶ç±»æ„é€ æ–¹æ³•")]),t._v("ï¼šé€’å½’è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•ï¼ˆéšå¼è°ƒç”¨ "),s("code",[t._v("super()")]),t._v("ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å®ä¾‹å˜é‡åˆå§‹åŒ–")]),t._v("ï¼šæŒ‰ä»£ç é¡ºåºæ‰§è¡Œå­—æ®µèµ‹å€¼å’Œå®ä¾‹ä»£ç å—ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ„é€ æ–¹æ³•ä½“")]),t._v("ï¼šæ‰§è¡Œç”¨æˆ·ç¼–å†™çš„æ„é€ é€»è¾‘ã€‚")])])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Parent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Parent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Parentæ„é€ æ–¹æ³•"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Parent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initX")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ä¾‹å˜é‡åˆå§‹åŒ–")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Childå®ä¾‹ä»£ç å—"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®ä¾‹ä»£ç å—")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Childæ„é€ æ–¹æ³•"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initX")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åˆå§‹åŒ–x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¾“å‡ºé¡ºåºï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Parentæ„é€ æ–¹æ³• â†’ åˆå§‹åŒ–x â†’ Childå®ä¾‹ä»£ç å— â†’ Childæ„é€ æ–¹æ³•")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("è¿”å›å¯¹è±¡å¼•ç”¨")]),t._v("ï¼šæ„é€ å®Œæˆåï¼Œæ ˆå¸§ä¸­å¼•ç”¨å˜é‡ï¼ˆå¦‚ "),s("code",[t._v("obj")]),t._v("ï¼‰æŒ‡å‘å †å†…å­˜åœ°å€ã€‚")])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-è¯·è°ˆè°ˆä½ å¯¹-oom-çš„è®¤è¯†-å“ªäº›åŒºåŸŸå¯èƒ½å‘ç”Ÿ-outofmemoryerror"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è¯·è°ˆè°ˆä½ å¯¹-oom-çš„è®¤è¯†-å“ªäº›åŒºåŸŸå¯èƒ½å‘ç”Ÿ-outofmemoryerror"}},[t._v("#")]),t._v(" ğŸ¯ è¯·è°ˆè°ˆä½ å¯¹ OOM çš„è®¤è¯† | å“ªäº›åŒºåŸŸå¯èƒ½å‘ç”Ÿ OutOfMemoryErrorï¼Ÿ")]),t._v(" "),s("p",[t._v("OOM å¦‚æœé€šä¿—ç‚¹å„¿è¯´ï¼Œå°±æ˜¯ JVM å†…å­˜ä¸å¤Ÿç”¨äº†ï¼Œjavadoc ä¸­å¯¹"),s("a",{attrs:{href:"https://docs.oracle.com/javase/9/docs/api/java/lang/OutOfMemoryError.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("OutOfMemoryError"),s("OutboundLink")],1),t._v("çš„è§£é‡Šæ˜¯ï¼Œæ²¡æœ‰ç©ºé—²å†…å­˜ï¼Œå¹¶ä¸”åƒåœ¾æ”¶é›†å™¨ä¹Ÿæ— æ³•æä¾›æ›´å¤šå†…å­˜ã€‚")]),t._v(" "),s("p",[t._v("è¿™é‡Œé¢éšå«ç€ä¸€å±‚æ„æ€æ˜¯ï¼Œåœ¨æŠ›å‡º OutOfMemoryError ä¹‹å‰ï¼Œé€šå¸¸åƒåœ¾æ”¶é›†å™¨ä¼šè¢«è§¦å‘ï¼Œå°½å…¶æ‰€èƒ½å»æ¸…ç†å‡ºç©ºé—´")]),t._v(" "),s("p",[t._v("å½“ç„¶ï¼Œä¹Ÿä¸æ˜¯åœ¨ä»»ä½•æƒ…å†µä¸‹åƒåœ¾æ”¶é›†å™¨éƒ½ä¼šè¢«è§¦å‘çš„ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬å»åˆ†é…ä¸€ä¸ªè¶…å¤§å¯¹è±¡ï¼Œç±»ä¼¼ä¸€ä¸ªè¶…å¤§æ•°ç»„è¶…è¿‡å †çš„æœ€å¤§å€¼ï¼ŒJVM å¯ä»¥åˆ¤æ–­å‡ºåƒåœ¾æ”¶é›†å¹¶ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥ç›´æ¥æŠ›å‡º OutOfMemoryErrorã€‚")]),t._v(" "),s("p",[t._v("ä»æ•°æ®åŒºçš„è§’åº¦ï¼Œé™¤äº†ç¨‹åºè®¡æ•°å™¨ï¼Œå…¶ä»–åŒºåŸŸéƒ½æœ‰å¯èƒ½ä¼šå› ä¸ºå¯èƒ½çš„ç©ºé—´ä¸è¶³å‘ç”Ÿ OutOfMemoryErrorï¼Œç®€å•æ€»ç»“å¦‚ä¸‹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å †å†…å­˜ä¸è¶³æ˜¯æœ€å¸¸è§çš„ OOM åŸå› ä¹‹ä¸€ï¼ŒæŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯æ˜¯â€œjava.lang.OutOfMemoryError:Java heap spaceâ€ï¼ŒåŸå› å¯èƒ½åƒå¥‡ç™¾æ€ªï¼Œä¾‹å¦‚ï¼Œå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ï¼›ä¹Ÿå¾ˆæœ‰å¯èƒ½å°±æ˜¯å †çš„å¤§å°ä¸åˆç†ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦å¤„ç†æ¯”è¾ƒå¯è§‚çš„æ•°æ®é‡ï¼Œä½†æ˜¯æ²¡æœ‰æ˜¾å¼æŒ‡å®š JVM å †å¤§å°æˆ–è€…æŒ‡å®šæ•°å€¼åå°ï¼›æˆ–è€…å‡ºç° JVM å¤„ç†å¼•ç”¨ä¸åŠæ—¶ï¼Œå¯¼è‡´å †ç§¯èµ·æ¥ï¼Œå†…å­˜æ— æ³•é‡Šæ”¾ç­‰ã€‚")]),t._v(" "),s("li",[t._v("è€Œå¯¹äº Java è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œè¿™é‡Œè¦ç¨å¾®å¤æ‚ä¸€ç‚¹ã€‚å¦‚æœæˆ‘ä»¬å†™ä¸€æ®µç¨‹åºä¸æ–­çš„è¿›è¡Œé€’å½’è°ƒç”¨ï¼Œè€Œä¸”æ²¡æœ‰é€€å‡ºæ¡ä»¶ï¼Œå°±ä¼šå¯¼è‡´ä¸æ–­åœ°è¿›è¡Œå‹æ ˆã€‚ç±»ä¼¼è¿™ç§æƒ…å†µï¼ŒJVM å®é™…ä¼šæŠ›å‡º StackOverFlowErrorï¼›å½“ç„¶ï¼Œå¦‚æœ JVM è¯•å›¾å»æ‰©å±•æ ˆç©ºé—´çš„çš„æ—¶å€™å¤±è´¥ï¼Œåˆ™ä¼šæŠ›å‡º OutOfMemoryErrorã€‚")]),t._v(" "),s("li",[t._v("å¯¹äºè€ç‰ˆæœ¬çš„ Oracle JDKï¼Œå› ä¸ºæ°¸ä¹…ä»£çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œå¹¶ä¸” JVM å¯¹æ°¸ä¹…ä»£åƒåœ¾å›æ”¶ï¼ˆå¦‚ï¼Œå¸¸é‡æ± å›æ”¶ã€å¸è½½ä¸å†éœ€è¦çš„ç±»å‹ï¼‰éå¸¸ä¸ç§¯æï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ä¸æ–­æ·»åŠ æ–°ç±»å‹çš„æ—¶å€™ï¼Œæ°¸ä¹…ä»£å‡ºç° OutOfMemoryError ä¹Ÿéå¸¸å¤šè§ï¼Œå°¤å…¶æ˜¯åœ¨è¿è¡Œæ—¶å­˜åœ¨å¤§é‡åŠ¨æ€ç±»å‹ç”Ÿæˆçš„åœºåˆï¼›ç±»ä¼¼ Intern å­—ç¬¦ä¸²ç¼“å­˜å ç”¨å¤ªå¤šç©ºé—´ï¼Œä¹Ÿä¼šå¯¼è‡´ OOM é—®é¢˜ã€‚å¯¹åº”çš„å¼‚å¸¸ä¿¡æ¯ï¼Œä¼šæ ‡è®°å‡ºæ¥å’Œæ°¸ä¹…ä»£ç›¸å…³ï¼šâ€œjava.lang.OutOfMemoryError: PermGen spaceâ€ã€‚")]),t._v(" "),s("li",[t._v("éšç€å…ƒæ•°æ®åŒºçš„å¼•å…¥ï¼Œæ–¹æ³•åŒºå†…å­˜å·²ç»ä¸å†é‚£ä¹ˆçª˜è¿«ï¼Œæ‰€ä»¥ç›¸åº”çš„ OOM æœ‰æ‰€æ”¹è§‚ï¼Œå‡ºç° OOMï¼Œå¼‚å¸¸ä¿¡æ¯åˆ™å˜æˆäº†ï¼šâ€œjava.lang.OutOfMemoryError: Metaspaceâ€ã€‚")]),t._v(" "),s("li",[t._v("ç›´æ¥å†…å­˜ä¸è¶³ï¼Œä¹Ÿä¼šå¯¼è‡´ OOM")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å†…å­˜æ³„éœ²å’Œå†…å­˜æº¢å‡ºçš„åŒºåˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å†…å­˜æ³„éœ²å’Œå†…å­˜æº¢å‡ºçš„åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ å†…å­˜æ³„éœ²å’Œå†…å­˜æº¢å‡ºçš„åŒºåˆ«ï¼Ÿ")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("å†…å­˜æ³„éœ² memory leakï¼Œæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜åï¼Œæ— æ³•é‡Šæ”¾å·²ç”³è¯·çš„å†…å­˜ç©ºé—´ï¼Œä¸€æ¬¡å†…å­˜æ³„éœ²å±å®³å¯ä»¥å¿½ç•¥ï¼Œä½†å†…å­˜æ³„éœ²å †ç§¯åæœå¾ˆä¸¥é‡ï¼Œæ— è®ºå¤šå°‘å†…å­˜ï¼Œè¿Ÿæ—©ä¼šè¢«å å…‰ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("å†…å­˜æº¢å‡º out of memoryï¼Œæ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜æ—¶ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ä¾›å…¶ä½¿ç”¨ï¼Œå‡ºç° out of memoryï¼›æ¯”å¦‚ç”³è¯·äº†ä¸€ä¸ª integer,ä½†ç»™å®ƒå­˜äº† long æ‰èƒ½å­˜ä¸‹çš„æ•°ï¼Œé‚£å°±æ˜¯å†…å­˜æº¢å‡ºã€‚")]),t._v(" "),s("p",[t._v("memory leak  æœ€ç»ˆä¼šå¯¼è‡´ out of memoryï¼")])])]),t._v(" "),s("p",[t._v("å†…å­˜æ³„æ¼æ˜¯å†…å­˜æº¢å‡ºçš„å¸¸è§è¯±å› ï¼Œä½†å†…å­˜æº¢å‡ºä¹Ÿå¯èƒ½ç”±éæ³„æ¼å› ç´ ï¼ˆå¦‚æ•°æ®é‡è¿‡å¤§ï¼‰ç›´æ¥å¼•å‘")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å†…å­˜æ³„æ¼æ—¶-å¦‚ä½•å®šä½é—®é¢˜ä»£ç "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å†…å­˜æ³„æ¼æ—¶-å¦‚ä½•å®šä½é—®é¢˜ä»£ç "}},[t._v("#")]),t._v(" ğŸ¯ å†…å­˜æ³„æ¼æ—¶ï¼Œå¦‚ä½•å®šä½é—®é¢˜ä»£ç ?")]),t._v(" "),s("p",[t._v("åœ¨ Java ä¸­ï¼Œå†…å­˜æ³„æ¼é€šå¸¸æŒ‡çš„æ˜¯å¯¹è±¡è¢«ä¸å†éœ€è¦ä½†ä»è¢«å¼•ç”¨ï¼Œä»è€Œæ— æ³•è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æƒ…å†µã€‚è¦å®šä½å’Œä¿®å¤å†…å­˜æ³„æ¼ï¼Œé€šå¸¸éœ€è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("ç¡®è®¤å†…å­˜æ³„æ¼")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("è¡¨ç°")]),t._v("ï¼šåº”ç”¨ç¨‹åºåœ¨é•¿æ—¶é—´è¿è¡Œåä¼šå‡ºç°æ€§èƒ½ä¸‹é™ï¼Œå†…å­˜å ç”¨ä¸æ–­å¢åŠ ï¼ŒGCï¼ˆåƒåœ¾å›æ”¶ï¼‰é¢‘ç¹ä½†æ— æ³•å›æ”¶è¶³å¤Ÿçš„å†…å­˜ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("å·¥å…·ï¼šå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·æ¥ç¡®è®¤å†…å­˜æ³„æ¼ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("JVMæ—¥å¿—")]),t._v("ï¼šå¯ç”¨ GC æ—¥å¿— ("),s("code",[t._v("-Xlog:gc*")]),t._v(")ï¼Œæ£€æŸ¥åƒåœ¾å›æ”¶çš„æƒ…å†µï¼Œå°¤å…¶æ˜¯ Full GC é¢‘ç¹ä¸”å›æ”¶çš„å†…å­˜ä¸å¤šæ—¶ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Heap Dump")]),t._v("ï¼šé€šè¿‡ "),s("code",[t._v("-XX:+HeapDumpOnOutOfMemoryError")]),t._v(" ç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶ï¼Œæˆ–è€…ä½¿ç”¨ "),s("code",[t._v("jmap")]),t._v(" å·¥å…·æ‰‹åŠ¨ç”Ÿæˆå †è½¬å‚¨ã€‚")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("åˆ†æå †è½¬å‚¨ï¼ˆHeap Dumpï¼‰")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("Heap Dump åˆ†æå·¥å…·")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Eclipse MAT")]),t._v(" (Memory Analyzer Tool)ï¼šå¯ä»¥åŠ è½½å †è½¬å‚¨æ–‡ä»¶ï¼Œç”Ÿæˆæ³„æ¼åˆ†ææŠ¥å‘Šï¼Œæ˜¾ç¤ºå“ªäº›å¯¹è±¡å ç”¨äº†æœ€å¤šå†…å­˜ï¼Œä»¥åŠå“ªäº›å¯¹è±¡æ²¡æœ‰è¢«å›æ”¶ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("VisualVM")]),t._v("ï¼šè¿™æ˜¯ä¸€ä¸ª Java æ€§èƒ½åˆ†æå·¥å…·ï¼Œæ”¯æŒå †è½¬å‚¨çš„åŠ è½½ä¸åˆ†æï¼Œå¹¶èƒ½å¤ŸæŸ¥çœ‹å¯¹è±¡å¼•ç”¨é“¾ï¼Œå¸®åŠ©å®šä½å¯¼è‡´æ³„æ¼çš„å¯¹è±¡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("YourKit")]),t._v("ã€"),s("strong",[t._v("JProfiler")]),t._v("ï¼šè¿™äº›æ˜¯å•†ä¸šæ€§èƒ½åˆ†æå·¥å…·ï¼ŒåŠŸèƒ½æ›´å…¨é¢ï¼Œæ”¯æŒå®æ—¶ç›‘æ§ã€å †åˆ†æã€å†…å­˜æ³„æ¼æ£€æµ‹ç­‰ã€‚")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("åˆ†æå †è½¬å‚¨æ—¶çš„å…³é”®ç‚¹")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æŸ¥æ‰¾é•¿æ—¶é—´å­˜åœ¨çš„å¯¹è±¡ï¼ˆä¾‹å¦‚å¸¸é©»å†…å­˜çš„å•ä¾‹æˆ–ç¼“å­˜ï¼‰ï¼ŒæŸ¥çœ‹å…¶å¼•ç”¨é“¾ã€‚")]),t._v(" "),s("li",[t._v("æ‰¾åˆ°ä¸å†éœ€è¦ä½†ä»è¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œåˆ†æå…¶å¼•ç”¨è·¯å¾„ã€‚")]),t._v(" "),s("li",[t._v("æŸ¥çœ‹æŸäº›ç‰¹å®šç±»å®ä¾‹çš„æ•°é‡æ˜¯å¦å¼‚å¸¸å¢é•¿ã€‚")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ä½¿ç”¨åˆ†æå·¥å…·è¿›è¡ŒåŠ¨æ€åˆ†æ")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("VisualVM")]),t._v("ï¼šé€šè¿‡ "),s("code",[t._v("VisualVM")]),t._v(" å¯ä»¥åœ¨è¿è¡Œæ—¶ç›‘æ§å †ä½¿ç”¨æƒ…å†µï¼Œåˆ†æç±»çš„å®ä¾‹æ•°é‡ï¼ŒæŸ¥çœ‹åƒåœ¾å›æ”¶æ—¥å¿—ï¼Œç”šè‡³è¿›è¡Œå †è½¬å‚¨ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("JProfiler")]),t._v(" æˆ– "),s("strong",[t._v("YourKit")]),t._v("ï¼šè¿™äº›å·¥å…·ä¸ä»…æä¾›å †åˆ†æï¼Œè¿˜èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶å®æ—¶æ˜¾ç¤ºå†…å­˜åˆ†é…ã€å¯¹è±¡å®ä¾‹åŒ–æƒ…å†µåŠå¼•ç”¨å…³ç³»ï¼Œå¸®åŠ©å¿«é€Ÿå®šä½å†…å­˜æ³„æ¼ã€‚")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("åˆ†æä»£ç å’Œæ—¥å¿—")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("æ£€æŸ¥å“ªäº›å¯¹è±¡æ²¡æœ‰æ­£ç¡®åœ°é‡Šæ”¾æˆ–æ¸…ç†ï¼Œä¾‹å¦‚ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç¼“å­˜/é›†åˆ")]),t._v("ï¼šä½¿ç”¨äº† "),s("code",[t._v("HashMap")]),t._v("ã€"),s("code",[t._v("ArrayList")]),t._v(" ç­‰æ•°æ®ç»“æ„ï¼Œä½†æ²¡æœ‰åŠæ—¶æ¸…ç†è¿‡æœŸæ•°æ®ï¼Œå¯¼è‡´å¤§é‡å¯¹è±¡æ— æ³•å›æ”¶ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç›‘å¬å™¨")]),t._v("ï¼šäº‹ä»¶ç›‘å¬å™¨æ²¡æœ‰å–æ¶ˆæ³¨å†Œï¼Œå¯¼è‡´å¯¹è±¡æ— æ³•è¢«åƒåœ¾å›æ”¶ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ThreadLocal")]),t._v("ï¼šå¦‚æœæ²¡æœ‰æ­£ç¡®æ¸…ç† "),s("code",[t._v("ThreadLocal")]),t._v(" å˜é‡ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œç‰¹åˆ«æ˜¯åœ¨çº¿ç¨‹æ± ä¸­ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œè¿æ¥ç­‰èµ„æº")]),t._v("ï¼šæ²¡æœ‰æ­£ç¡®å…³é—­ï¼Œå¯¼è‡´èµ„æºæ³„æ¼ã€‚")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ—¥å¿—è°ƒè¯•")]),t._v("ï¼šé€šè¿‡å¯ç”¨è°ƒè¯•æ—¥å¿—ã€ä½¿ç”¨æ—¥å¿—è®°å½•å¯¹è±¡çš„åˆ›å»ºå’Œé‡Šæ”¾æƒ…å†µï¼Œå¸®åŠ©æ‰¾å‡ºæœªæ­£ç¡®é‡Šæ”¾çš„èµ„æºã€‚")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("GC æ ¹åˆ†æï¼ˆGC Rootsï¼‰")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("é€šè¿‡åˆ†æå¯¹è±¡çš„ GC æ ¹ï¼Œå¯ä»¥æ‰¾åˆ°å“ªäº›å¯¹è±¡è¢«å¼•ç”¨ç€ä½†ä¸å†è¢«ä½¿ç”¨ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å¼•ç”¨é“¾åˆ†æ")]),t._v('ï¼šå¯ä»¥å€ŸåŠ©å·¥å…·æŸ¥çœ‹å“ªäº›å¯¹è±¡é€šè¿‡å¼•ç”¨é“¾æœªè¢«å›æ”¶ï¼Œç‰¹åˆ«æ˜¯å¸¸è§çš„ "å•ä¾‹æ¨¡å¼"ã€"é™æ€å˜é‡" ç­‰å¯èƒ½ä¼šå¼•èµ·é—®é¢˜ã€‚')])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("é¿å…å¸¸è§å†…å­˜æ³„æ¼é—®é¢˜")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("ç¼“å­˜é—®é¢˜")]),t._v("ï¼šå¦‚æœä½¿ç”¨ç¼“å­˜ï¼Œå¦‚ "),s("code",[t._v("HashMap")]),t._v("ã€"),s("code",[t._v("WeakHashMap")]),t._v(" ç­‰ï¼Œè¦ç¡®ä¿ç¼“å­˜æ•°æ®å®šæœŸæ¸…ç†ï¼Œé¿å…æ— é™åˆ¶å¢åŠ å†…å­˜å ç”¨ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Listener / Observer ç›¸å…³é—®é¢˜")]),t._v("ï¼šæ³¨å†Œçš„äº‹ä»¶ç›‘å¬å™¨æˆ–è§‚å¯Ÿè€…æœªå–æ¶ˆæ³¨å†Œï¼Œå¯¼è‡´å¯¹è±¡æ— æ³•è¢«å›æ”¶ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ThreadLocal")]),t._v("ï¼šåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨å®Œ "),s("code",[t._v("ThreadLocal")]),t._v(" åï¼Œè¦è°ƒç”¨ "),s("code",[t._v("remove()")]),t._v(" æ–¹æ³•æ¸…ç†çº¿ç¨‹æœ¬åœ°å˜é‡ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ•°æ®åº“è¿æ¥æ± ")]),t._v("ï¼šç¡®ä¿æ•°æ®åº“è¿æ¥æ± è®¾ç½®åˆç†ï¼Œé¿å…å› è¿æ¥æ± è¿‡åº¦å¢é•¿å¯¼è‡´å†…å­˜æ³„æ¼ã€‚")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å‹åŠ›æµ‹è¯•")])]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨ "),s("strong",[t._v("JMeter")]),t._v(" æˆ– "),s("strong",[t._v("Gatling")]),t._v(" ç­‰å‹åŠ›æµ‹è¯•å·¥å…·æ¨¡æ‹Ÿé«˜å¹¶å‘åœºæ™¯ï¼Œè§‚å¯Ÿåº”ç”¨ç¨‹åºåœ¨é•¿æ—¶é—´é«˜è´Ÿè½½ä¸‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚é€šè¿‡ç›‘æ§å †å†…å­˜ã€GC æ—¥å¿—ç­‰ï¼Œå¸®åŠ©æ•æ‰å†…å­˜æ³„æ¼çš„è¿¹è±¡ã€‚")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ä»£ç å®¡æŸ¥")])]),t._v(" "),s("ul",[s("li",[t._v("å®šæœŸè¿›è¡Œä»£ç å®¡æŸ¥ï¼Œç‰¹åˆ«æ˜¯å¯¹èµ„æºç®¡ç†ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ã€IOæµç­‰ï¼‰å’Œå¤§å¯¹è±¡ï¼ˆå¦‚å¤§å‹é›†åˆã€ç¼“å­˜ï¼‰çš„å¤„ç†ï¼Œç¡®ä¿èµ„æºåœ¨ä½¿ç”¨å®Œåæ­£ç¡®é‡Šæ”¾ã€‚")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å¸¸è§å†…å­˜æ³„æ¼ç¤ºä¾‹")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ç¼“å­˜æ³„æ¼ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¼“å­˜å¯¹è±¡æ²¡æœ‰è¿‡æœŸæ¸…ç†")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" cache "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addToCache")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    cache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é•¿æ—¶é—´å ç”¨å†…å­˜")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("ç›‘å¬å™¨æœªç§»é™¤ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyListener")]),t._v(" listener"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    eventSource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("listener"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¿˜è®°ç§»é™¤")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])]),t._v(" "),s("p",[t._v("å®šä½ Java ä¸­çš„å†…å­˜æ³„æ¼éœ€è¦é€šè¿‡ä¸€ç³»åˆ—å·¥å…·å’Œæ–¹æ³•è¿›è¡Œåˆ†æï¼Œä»ç¡®è®¤å†…å­˜æ³„æ¼å¼€å§‹ï¼Œé€æ­¥ä½¿ç”¨å †è½¬å‚¨ã€GC æ—¥å¿—åˆ†æã€åŠ¨æ€ç›‘æ§å·¥å…·ç­‰æ‰‹æ®µï¼Œæœ€ç»ˆæ‰¾å‡ºæ³„æ¼çš„æ ¹æºï¼Œå¹¶æ ¹æ®åˆ†æç»“æœä¿®å¤ä»£ç ä¸­çš„å†…å­˜ç®¡ç†é—®é¢˜ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿæ ˆå†…å­˜æº¢å‡º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿæ ˆå†…å­˜æº¢å‡º"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿæ ˆå†…å­˜æº¢å‡º?")]),t._v(" "),s("ul",[s("li",[t._v("æ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œä»–çš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒï¼Œæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼Œç”¨æ¥å­˜å‚¨å±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ•°æ ˆï¼ŒåŠ¨æ€é“¾æ¥ï¼Œæ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚å±€éƒ¨å˜é‡è¡¨åˆåŒ…å«åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯¹è±¡å¼•ç”¨ç±»å‹")]),t._v(" "),s("li",[t._v("å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æœ€å¤§æ·±åº¦ï¼Œå°†æŠ›å‡ºStackOverflowErrorå¼‚å¸¸ï¼Œæ–¹æ³•é€’å½’è°ƒç”¨äº§ç”Ÿè¿™ç§ç»“æœã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœ Java è™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œå¹¶ä¸”æ‰©å±•çš„åŠ¨ä½œå·²ç»å°è¯•è¿‡ï¼Œä½†æ˜¯æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜å»å®Œæˆæ‰©å±•ï¼Œæˆ–è€…åœ¨æ–°å»ºç«‹çº¿ç¨‹çš„æ—¶å€™æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜å»åˆ›å»ºå¯¹åº”çš„è™šæ‹Ÿæœºæ ˆï¼Œé‚£ä¹ˆ Java è™šæ‹Ÿæœºå°†æŠ›å‡ºä¸€ä¸ª OutOfMemory å¼‚å¸¸ã€‚(çº¿ç¨‹å¯åŠ¨è¿‡å¤š)")]),t._v(" "),s("li",[t._v("å‚æ•° -Xss å»è°ƒæ•´ JVM æ ˆçš„å¤§å°")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å¦‚ä½•ç›‘æ§å’Œè¯Šæ–­-jvm-å †å†…å’Œå †å¤–å†…å­˜ä½¿ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¦‚ä½•ç›‘æ§å’Œè¯Šæ–­-jvm-å †å†…å’Œå †å¤–å†…å­˜ä½¿ç”¨"}},[t._v("#")]),t._v(" ğŸ¯ å¦‚ä½•ç›‘æ§å’Œè¯Šæ–­ JVM å †å†…å’Œå †å¤–å†…å­˜ä½¿ç”¨ï¼Ÿ")]),t._v(" "),s("p",[t._v("äº†è§£ JVM å†…å­˜çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå…·ä½“èƒ½åŠ›èŒƒå›´ä¹Ÿæœ‰åŒºåˆ«ï¼Œç®€å•æ€»ç»“å¦‚ä¸‹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å¯ä»¥ä½¿ç”¨ç»¼åˆæ€§çš„å›¾å½¢åŒ–å·¥å…·ï¼Œå¦‚ JConsoleã€VisualVMï¼ˆæ³¨æ„ï¼Œä» Oracle JDK 9 å¼€å§‹ï¼ŒVisualVM å·²ç»ä¸å†åŒ…å«åœ¨ JDK å®‰è£…åŒ…ä¸­ï¼‰ç­‰ã€‚è¿™äº›å·¥å…·å…·ä½“ä½¿ç”¨èµ·æ¥ç›¸å¯¹æ¯”è¾ƒç›´è§‚ï¼Œç›´æ¥è¿æ¥åˆ° Java è¿›ç¨‹ï¼Œç„¶åå°±å¯ä»¥åœ¨å›¾å½¢åŒ–ç•Œé¢é‡ŒæŒæ¡å†…å­˜ä½¿ç”¨æƒ…å†µã€‚")])]),t._v(" "),s("p",[t._v("ä»¥ JConsole ä¸ºä¾‹ï¼Œå…¶å†…å­˜é¡µé¢å¯ä»¥æ˜¾ç¤ºå¸¸è§çš„"),s("strong",[t._v("å †å†…å­˜")]),t._v("å’Œ"),s("strong",[t._v("å„ç§å †å¤–éƒ¨åˆ†")]),t._v("ä½¿ç”¨çŠ¶æ€ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·è¿›è¡Œè¿è¡Œæ—¶æŸ¥è¯¢ï¼Œå¦‚ jstat å’Œ jmap ç­‰å·¥å…·éƒ½æä¾›äº†ä¸€äº›é€‰é¡¹ï¼Œå¯ä»¥æŸ¥çœ‹å †ã€æ–¹æ³•åŒºç­‰ä½¿ç”¨æ•°æ®ã€‚")]),t._v(" "),s("li",[t._v("æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ jmap ç­‰æä¾›çš„å‘½ä»¤ï¼Œç”Ÿæˆå †è½¬å‚¨ï¼ˆHeap Dumpï¼‰æ–‡ä»¶ï¼Œç„¶ååˆ©ç”¨ jhat æˆ– Eclipse MAT ç­‰å †è½¬å‚¨åˆ†æå·¥å…·è¿›è¡Œè¯¦ç»†åˆ†æã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Tomcatã€Weblogic ç­‰ Java EE æœåŠ¡å™¨ï¼Œè¿™äº›æœåŠ¡å™¨åŒæ ·æä¾›äº†å†…å­˜ç®¡ç†ç›¸å…³çš„åŠŸèƒ½ã€‚")]),t._v(" "),s("li",[t._v("å¦å¤–ï¼Œä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼ŒGC æ—¥å¿—ç­‰è¾“å‡ºï¼ŒåŒæ ·åŒ…å«ç€ä¸°å¯Œçš„ä¿¡æ¯ã€‚")])]),t._v(" "),s("p",[t._v("è¿™é‡Œæœ‰ä¸€ä¸ªç›¸å¯¹ç‰¹æ®Šçš„éƒ¨åˆ†ï¼Œå°±æ˜¯å †å¤–å†…å­˜ä¸­çš„ç›´æ¥å†…å­˜ï¼Œå‰é¢çš„å·¥å…·åŸºæœ¬ä¸é€‚ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ JDK è‡ªå¸¦çš„ Native Memory Trackingï¼ˆNMTï¼‰ç‰¹æ€§ï¼Œå®ƒä¼šä» JVM æœ¬åœ°å†…å­˜åˆ†é…çš„è§’åº¦è¿›è¡Œè§£è¯»ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-string-å­—ç¬¦ä¸²å­˜æ”¾ä½ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-string-å­—ç¬¦ä¸²å­˜æ”¾ä½ç½®"}},[t._v("#")]),t._v(" ğŸ¯ String å­—ç¬¦ä¸²å­˜æ”¾ä½ç½®ï¼Ÿ")]),t._v(" "),s("p",[t._v("åœ¨ Java ä¸­ï¼Œ"),s("code",[t._v("String")]),t._v(" ç±»å‹çš„ç‰¹æ®Šä¹‹å¤„åœ¨äºå®ƒå¯èƒ½ä¼šåœ¨ä¸¤ç§ä½ç½®å­˜æ”¾ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Poolï¼‰")]),t._v("ï¼š\n"),s("ul",[s("li",[t._v("åœ¨ Java ä¸­ï¼Œæ‰€æœ‰çš„å­—ç¬¦ä¸²å¸¸é‡ï¼ˆå³ç›´æ¥é€šè¿‡åŒå¼•å·å£°æ˜çš„å­—ç¬¦ä¸²å­—é¢é‡ï¼‰éƒ½ä¼šå­˜æ”¾åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ã€‚å­—ç¬¦ä¸²å¸¸é‡æ± æ˜¯ä½äºå †å†…å­˜ä¸­çš„ä¸€å—ç‰¹æ®Šçš„å­˜å‚¨åŒºåŸŸã€‚")]),t._v(" "),s("li",[t._v("å½“ç¨‹åºä¸­å¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„å­—ç¬¦ä¸²å­—é¢é‡æ—¶ï¼ŒJavaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¼šé¦–å…ˆåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¯¥å­—ç¬¦ä¸²ã€‚å¦‚æœå­˜åœ¨ï¼Œå°±å¤ç”¨å·²æœ‰çš„å­—ç¬¦ä¸²å¼•ç”¨ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("å †å†…å­˜ï¼ˆHeapï¼‰")]),t._v("ï¼š\n"),s("ul",[s("li",[t._v("é€šè¿‡"),s("code",[t._v("new")]),t._v("å…³é”®å­—åˆ›å»ºçš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œæˆ–è€…é€šè¿‡å­—ç¬¦ä¸²è¿æ¥æ“ä½œç¬¦ï¼ˆ"),s("code",[t._v("+")]),t._v("ï¼‰åŠ¨æ€ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œä¼šå­˜æ”¾åœ¨Javaå †å†…å­˜ä¸­ã€‚")]),t._v(" "),s("li",[t._v("å †å†…å­˜æ˜¯Javaä¸­å­˜æ”¾å¯¹è±¡å®ä¾‹çš„åœ°æ–¹ï¼ŒåŒ…æ‹¬é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºçš„"),s("code",[t._v("String")]),t._v("å¯¹è±¡ã€‚")])])])]),t._v(" "),s("p",[t._v("ä»¥ä¸‹æ˜¯ä¸¤ç§æƒ…å†µçš„ç¤ºä¾‹ï¼š")]),t._v(" "),s("p",[s("strong",[t._v("å­—ç¬¦ä¸²å¸¸é‡æ± ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" str1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" str2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// str1å’Œstr2å¯èƒ½æŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡")]),t._v("\n")])])]),s("p",[s("strong",[t._v("å †å†…å­˜ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" str1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" str2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// str1å’Œstr2æŒ‡å‘å †å†…å­˜ä¸­çš„ä¸åŒå¯¹è±¡ï¼Œå³ä½¿å­—ç¬¦ä¸²å†…å®¹ç›¸åŒ")]),t._v("\n")])])]),s("p",[s("strong",[t._v("æ³¨æ„")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åœ¨ Java 7 åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± è¢«ç§»åŠ¨åˆ°äº†å †å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯æ–¹æ³•åŒºã€‚è¿™æ˜¯ä¸ºäº†æé«˜ JVM çš„æ€§èƒ½å’Œå‡å°‘å†…å­˜ç¢ç‰‡ã€‚")]),t._v(" "),s("li",[t._v("å­—ç¬¦ä¸²å¸¸é‡æ± å’Œå †å†…å­˜ä¸­çš„å­—ç¬¦ä¸²å¯¹è±¡å¯èƒ½é€šè¿‡å†…éƒ¨çš„"),s("code",[t._v("offset")]),t._v("å’Œ"),s("code",[t._v("count")]),t._v("å­—æ®µæ¥å…±äº«charæ•°ç»„ï¼Œè¿™æ˜¯é€šè¿‡Javaçš„å­—ç¬¦ä¸²å…±äº«æœºåˆ¶å®ç°çš„ã€‚")]),t._v(" "),s("li",[t._v("å½“ä½¿ç”¨"),s("code",[t._v("String.intern()")]),t._v("æ–¹æ³•æ—¶ï¼Œå¯ä»¥å°†ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡æ”¾å…¥å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ã€‚å¦‚æœå­—ç¬¦ä¸²å·²ç»å­˜åœ¨äºæ± ä¸­çš„ï¼Œ"),s("code",[t._v("intern()")]),t._v("æ–¹æ³•è¿”å›çš„æ˜¯æ± ä¸­å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" str1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" str2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("intern")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// str1å’Œstr2ç°åœ¨æŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡")]),t._v("\n")])])]),s("h3",{attrs:{id:"ğŸ¯-æ·±æ‹·è´å’Œæµ…æ‹·è´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æ·±æ‹·è´å’Œæµ…æ‹·è´"}},[t._v("#")]),t._v(" ğŸ¯ æ·±æ‹·è´å’Œæµ…æ‹·è´")]),t._v(" "),s("blockquote",[s("p",[t._v("æµ…æ‹·è´åªå¤åˆ¶å¯¹è±¡çš„åŸºæœ¬ç±»å‹å­—æ®µå’Œå¼•ç”¨åœ°å€ï¼Œå¼•ç”¨å¯¹è±¡å…±äº«ï¼›è€Œæ·±æ‹·è´ä¼šé€’å½’å¤åˆ¶å¼•ç”¨å¯¹è±¡ï¼Œå®Œå…¨ç‹¬ç«‹ã€‚æµ…æ‹·è´æ€§èƒ½å¥½ä½†å®¹æ˜“äº§ç”Ÿå¼•ç”¨å…±äº«é—®é¢˜ï¼Œæ·±æ‹·è´å†…å­˜å¼€é”€å¤§ä½†å®‰å…¨ã€‚å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœå¯¹è±¡æ¯”è¾ƒç®€å•å¯ä»¥ç”¨æµ…æ‹·è´ï¼›å¦‚æœæ¶‰åŠå¤æ‚å¼•ç”¨ï¼Œé€šå¸¸ä¼šå®ç°æ·±æ‹·è´ï¼Œæ¯”å¦‚åºåˆ—åŒ–çš„æ–¹å¼ã€‚")])]),t._v(" "),s("p",[t._v("ç®€å•æ¥è®²å°±æ˜¯å¤åˆ¶ã€å…‹éš†ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("æµ…æ‹·è´ï¼ˆShallow Copyï¼‰")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("å®šä¹‰")]),t._v("ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä½†æ˜¯"),s("strong",[t._v("åªå¤åˆ¶åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼")]),t._v("ï¼Œè€Œå¼•ç”¨ç±»å‹åªå¤åˆ¶å¼•ç”¨åœ°å€ï¼Œä¸å¤åˆ¶å¼•ç”¨å¯¹è±¡æœ¬èº«ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ç‰¹ç‚¹")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å¯¹è±¡æœ¬èº«æ˜¯æ–°çš„ï¼Œä½†é‡Œé¢çš„å¼•ç”¨å˜é‡å’ŒåŸå¯¹è±¡æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜ã€‚")]),t._v(" "),s("li",[t._v("ä¿®æ”¹å¼•ç”¨å¯¹è±¡ä¼šäº’ç›¸å½±å“ã€‚")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Person")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cloneable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Address")]),t._v(" addr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CloneNotSupportedException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é»˜è®¤æ˜¯æµ…æ‹·è´")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("è¿™é‡Œ "),s("code",[t._v("addr")]),t._v(" æ˜¯æµ…æ‹·è´çš„ï¼Œä¸¤ä¸ªå¯¹è±¡å…±äº«åŒä¸€ä¸ªåœ°å€å¯¹è±¡ã€‚")])])]),t._v(" "),s("p",[s("strong",[t._v("æ·±æ‹·è´ï¼ˆDeep Copyï¼‰")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å®šä¹‰")]),t._v("ï¼šä¸ä»…å¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œè¿˜ä¼š"),s("strong",[t._v("å¤åˆ¶å¯¹è±¡ä¸­çš„æ‰€æœ‰å¼•ç”¨å¯¹è±¡")]),t._v("ï¼Œå®ç°çœŸæ­£çš„ç‹¬ç«‹ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç‰¹ç‚¹")]),t._v("ï¼š\n"),s("ul",[s("li",[t._v("æ‹·è´åçš„å¯¹è±¡ä¸åŸå¯¹è±¡å®Œå…¨éš”ç¦»ã€‚")]),t._v(" "),s("li",[t._v("ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨å±æ€§ï¼Œä¸ä¼šå½±å“å¦ä¸€ä¸ªå¯¹è±¡ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("å®ç°æ–¹å¼")]),t._v("ï¼š\n"),s("ol",[s("li",[t._v("æ‰‹åŠ¨é‡å†™ "),s("code",[t._v("clone()")]),t._v(" æ–¹æ³•ï¼Œé€å±‚æ‹·è´å¼•ç”¨å¯¹è±¡ã€‚")]),t._v(" "),s("li",[t._v("é€šè¿‡ "),s("strong",[t._v("åºåˆ—åŒ–/ååºåˆ—åŒ–")]),t._v(" å®ç°ã€‚")]),t._v(" "),s("li",[t._v("å€ŸåŠ©ä¸‰æ–¹å·¥å…·ï¼ˆå¦‚ Apache Commons Lang çš„ "),s("code",[t._v("SerializationUtils.clone()")]),t._v("ï¼‰ã€‚")])])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-æ€»ä½“æ¥çœ‹-jvm-æŠŠå†…å­˜åˆ’åˆ†ä¸º-æ ˆ-stack-ä¸-å †-heap-ä¸¤å¤§ç±»-ä¸ºä½•è¦è¿™æ ·è®¾è®¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æ€»ä½“æ¥çœ‹-jvm-æŠŠå†…å­˜åˆ’åˆ†ä¸º-æ ˆ-stack-ä¸-å †-heap-ä¸¤å¤§ç±»-ä¸ºä½•è¦è¿™æ ·è®¾è®¡"}},[t._v("#")]),t._v(" ğŸ¯ æ€»ä½“æ¥çœ‹ï¼ŒJVM æŠŠå†…å­˜åˆ’åˆ†ä¸ºâ€œæ ˆ(stack)â€ä¸â€œå †(heap)â€ä¸¤å¤§ç±»ï¼Œä¸ºä½•è¦è¿™æ ·è®¾è®¡ï¼Ÿ")]),t._v(" "),s("p",[t._v("ä¸ªäººç†è§£ï¼Œç¨‹åºè¿è¡Œæ—¶ï¼Œå†…å­˜ä¸­çš„ä¿¡æ¯å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼š")]),t._v(" "),s("p",[t._v("è·Ÿç¨‹åºæ‰§è¡Œé€»è¾‘ç›¸å…³çš„æŒ‡ä»¤æ•°æ®ï¼Œè¿™ç±»æ•°æ®é€šå¸¸ä¸å¤§ï¼Œè€Œä¸”ç”Ÿå‘½å‘¨æœŸçŸ­ï¼›")]),t._v(" "),s("p",[t._v("è·Ÿå¯¹è±¡å®ä¾‹ç›¸å…³çš„æ•°æ®ï¼Œè¿™ç±»æ•°æ®å¯èƒ½ä¼šå¾ˆå¤§ï¼Œè€Œä¸”å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹é•¿æ—¶é—´å†…åå¤å…±ç”¨ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²å¸¸é‡ã€ç¼“å­˜å¯¹è±¡è¿™ç±»ã€‚")]),t._v(" "),s("p",[t._v("å°†è¿™ä¸¤ç±»ç‰¹ç‚¹ä¸åŒçš„æ•°æ®åˆ†å¼€ç®¡ç†ï¼Œä½“ç°äº†è½¯ä»¶è®¾è®¡ä¸Šâ€œæ¨¡å—éš”ç¦»â€çš„æ€æƒ³ã€‚å¥½æ¯”æˆ‘ä»¬é€šå¸¸ä¼šæŠŠåç«¯ service ä¸å‰ç«¯ website è§£è€¦ç±»ä¼¼ï¼Œä¹Ÿæ›´ä¾¿äºå†…å­˜ç®¡ç†ã€‚")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("æ€§èƒ½å’Œæ•ˆç‡")]),t._v("ï¼šæ ˆå†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾é€Ÿåº¦å¿«ï¼Œéå¸¸é€‚åˆæ–¹æ³•è°ƒç”¨å’Œå±€éƒ¨å˜é‡çš„ç®¡ç†ï¼Œè€Œå †å†…å­˜è™½ç„¶ç®¡ç†å¤æ‚ï¼Œä½†é€‚åˆç®¡ç†ç”Ÿå‘½å‘¨æœŸé•¿ã€éœ€è¦åŠ¨æ€åˆ†é…çš„å¯¹è±¡ã€‚é€šè¿‡å°†å†…å­˜åˆ†ä¸ºæ ˆå’Œå †ï¼ŒJVMèƒ½å¤Ÿåœ¨ä¸åŒåœºæ™¯ä¸‹ä¼˜åŒ–å†…å­˜ç®¡ç†ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å®‰å…¨æ€§")]),t._v("ï¼šæ ˆå†…å­˜ç”±æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹æ‹¥æœ‰ï¼Œä¿è¯äº†çº¿ç¨‹é—´çš„æ•°æ®éš”ç¦»ï¼Œé¿å…äº†æ•°æ®ç«äº‰å’Œå®‰å…¨é—®é¢˜ã€‚å †å†…å­˜è™½ç„¶æ˜¯å…±äº«çš„ï¼Œä½†é€šè¿‡åŒæ­¥æœºåˆ¶å¯ä»¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("çµæ´»æ€§")]),t._v("ï¼šå †å†…å­˜å…è®¸åŠ¨æ€åˆ†é…å’Œé‡Šæ”¾ï¼Œé€‚åº”äº†Javaè¯­è¨€ä¸­å¤§é‡ä½¿ç”¨å¯¹è±¡çš„ç‰¹ç‚¹ï¼ŒåŒæ—¶åƒåœ¾å›æ”¶æœºåˆ¶èƒ½å¤Ÿè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œå‡å°‘äº†å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†å†…å­˜çš„è´Ÿæ‹…ã€‚")])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"ä¸‰ã€åƒåœ¾å›æ”¶æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€åƒåœ¾å›æ”¶æœºåˆ¶"}},[t._v("#")]),t._v(" ä¸‰ã€åƒåœ¾å›æ”¶æœºåˆ¶")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-è°ˆä¸‹-java-çš„å†…å­˜ç®¡ç†å’Œåƒåœ¾å›æ”¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è°ˆä¸‹-java-çš„å†…å­˜ç®¡ç†å’Œåƒåœ¾å›æ”¶"}},[t._v("#")]),t._v(" ğŸ¯ è°ˆä¸‹ Java çš„å†…å­˜ç®¡ç†å’Œåƒåœ¾å›æ”¶")]),t._v(" "),s("p",[t._v("å†…å­˜ç®¡ç†å°±æ˜¯å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ…æ‹¬å†…å­˜çš„ç”³è¯·ã€å‹ç¼©ã€å›æ”¶ç­‰æ“ä½œã€‚ Java çš„å†…å­˜ç®¡ç†å°±æ˜¯ GCï¼ŒJVM çš„ GC æ¨¡å—ä¸ä»…ç®¡ç†å†…å­˜çš„å›æ”¶ï¼Œä¹Ÿè´Ÿè´£å†…å­˜çš„åˆ†é…å’Œå‹ç¼©æ•´ç†ã€‚")]),t._v(" "),s("p",[t._v("Java ç¨‹åºçš„æŒ‡ä»¤éƒ½è¿è¡Œåœ¨ JVM ä¸Šï¼Œè€Œä¸”æˆ‘ä»¬çš„ç¨‹åºä»£ç å¹¶ä¸éœ€è¦å»åˆ†é…å†…å­˜å’Œé‡Šæ”¾å†…å­˜ï¼ˆä¾‹å¦‚ C/C++ é‡Œéœ€è¦ä½¿ç”¨çš„ malloc/freeï¼‰ï¼Œé‚£ä¹ˆè¿™äº›æ“ä½œè‡ªç„¶æ˜¯ç”± JVM å¸®æˆ‘ä»¬æå®šçš„ã€‚")]),t._v(" "),s("p",[t._v("JVM åœ¨æˆ‘ä»¬åˆ›å»º Java å¯¹è±¡çš„æ—¶å€™å»åˆ†é…æ–°å†…å­˜ï¼Œå¹¶ä½¿ç”¨ GC ç®—æ³•ï¼Œæ ¹æ®å¯¹è±¡çš„å­˜æ´»æ—¶é—´ï¼Œåœ¨å¯¹è±¡ä¸ä½¿ç”¨ä¹‹åï¼Œè‡ªåŠ¨æ‰§è¡Œå¯¹è±¡çš„å†…å­˜å›æ”¶æ“ä½œã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ç®€è¿°åƒåœ¾å›æ”¶æœºåˆ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ç®€è¿°åƒåœ¾å›æ”¶æœºåˆ¶"}},[t._v("#")]),t._v(" ğŸ¯ ç®€è¿°åƒåœ¾å›æ”¶æœºåˆ¶")]),t._v(" "),s("blockquote",[s("p",[t._v("Java çš„åƒåœ¾å›æ”¶æœºåˆ¶é€šè¿‡ "),s("strong",[t._v("å¯è¾¾æ€§åˆ†æ")]),t._v("æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»ï¼Œå¸¸ç”¨çš„ç®—æ³•æœ‰æ ‡è®°-æ¸…é™¤ã€æ ‡è®°-æ•´ç†ã€å¤åˆ¶ç®—æ³•ï¼Œç»“åˆåˆ†ä»£æ”¶é›†æå‡æ•ˆç‡ã€‚å¸¸è§çš„æ”¶é›†å™¨æœ‰ Serialã€Parallelã€CMS å’Œ G1ã€‚GC çš„æ ¸å¿ƒç›®æ ‡æ˜¯ "),s("strong",[t._v("åœ¨å°½é‡å‡å°‘åœé¡¿çš„æƒ…å†µä¸‹å›æ”¶æ— ç”¨å¯¹è±¡ï¼Œé¿å… OOM")]),t._v("ã€‚")])]),t._v(" "),s("p",[t._v("ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¤§éƒ¨åˆ†æ•°æ®éƒ½æ˜¯ä¼šåŠ è½½åˆ°å†…å­˜ä¸­è¿›è¡Œè¿ç®—çš„ï¼Œæœ‰äº›æ•°æ®æ˜¯éœ€è¦å¸¸é©»å†…å­˜ä¸­çš„ï¼Œä½†æ˜¯æœ‰äº›æ•°æ®ï¼Œç”¨è¿‡ä¹‹åä¾¿ä¸ä¼šå†éœ€è¦äº†ï¼Œæˆ‘ä»¬ç§°è¿™éƒ¨åˆ†æ•°æ®ä¸ºåƒåœ¾æ•°æ®ã€‚")]),t._v(" "),s("p",[t._v("ä¸ºäº†é˜²æ­¢å†…å­˜è¢«ä½¿ç”¨å®Œï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›åƒåœ¾æ•°æ®è¿›è¡Œå›æ”¶ï¼Œå³éœ€è¦å°†è¿™éƒ¨åˆ†å†…å­˜ç©ºé—´è¿›è¡Œé‡Šæ”¾ã€‚ä¸åŒäº C++ éœ€è¦è‡ªè¡Œé‡Šæ”¾å†…å­˜çš„æœºåˆ¶ï¼ŒJava è™šæ‹Ÿæœºï¼ˆJVMï¼‰æä¾›äº†ä¸€ç§è‡ªåŠ¨å›æ”¶å†…å­˜çš„æœºåˆ¶ï¼Œå®ƒæ˜¯ä½ä¼˜å…ˆçº§çš„ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œåªæœ‰åœ¨è™šæ‹Ÿæœºç©ºé—²æˆ–è€…å½“å‰å †å†…å­˜ä¸è¶³æ—¶ï¼Œæ‰ä¼šè§¦å‘æ‰§è¡Œï¼Œæ‰«æé‚£äº›æ²¡æœ‰è¢«ä»»ä½•å¼•ç”¨çš„å¯¹è±¡ï¼Œ å¹¶å°†å®ƒä»¬æ·»åŠ åˆ°è¦å›æ”¶çš„é›†åˆä¸­ï¼Œè¿›è¡Œå›æ”¶ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("1. ä¸ºä»€ä¹ˆéœ€è¦ GCï¼Ÿ")])]),t._v(" "),s("ul",[s("li",[t._v("Java ä½¿ç”¨ "),s("strong",[t._v("è‡ªåŠ¨å†…å­˜ç®¡ç†")]),t._v("ï¼Œä¸éœ€è¦æ‰‹åŠ¨ "),s("code",[t._v("free")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("GC çš„ç›®æ ‡æ˜¯ "),s("strong",[t._v("å›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡")]),t._v("ï¼Œé¿å…å†…å­˜æ³„æ¼å’Œ OOMã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("2. å¦‚ä½•åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯å›æ”¶ï¼Ÿ")])]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("å¼•ç”¨è®¡æ•°æ³•")]),t._v("ï¼ˆç¼ºç‚¹ï¼šå¾ªç¯å¼•ç”¨æ— æ³•è§£å†³ï¼ŒJava åŸºæœ¬ä¸ç”¨ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¯è¾¾æ€§åˆ†æï¼ˆReachability Analysisï¼‰")]),t._v("ï¼ˆJava é‡‡ç”¨ï¼‰ï¼š\n"),s("ul",[s("li",[t._v("ä»¥ "),s("strong",[t._v("GC Roots")]),t._v("ï¼ˆå¦‚è™šæ‹Ÿæœºæ ˆä¸­çš„å¼•ç”¨ã€é™æ€å˜é‡ã€JNIå¼•ç”¨ï¼‰ä¸ºèµ·ç‚¹ï¼Œ")]),t._v(" "),s("li",[t._v("é€šè¿‡å¼•ç”¨é“¾éå†èƒ½åˆ°è¾¾çš„å¯¹è±¡éƒ½æ˜¯å­˜æ´»çš„ï¼Œæ— æ³•åˆ°è¾¾çš„æ‰ä¼šè¢«å›æ”¶ã€‚")])])])]),t._v(" "),s("p",[s("strong",[t._v("3. å¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ ‡è®°-æ¸…é™¤ï¼ˆMark-Sweepï¼‰")]),t._v("ï¼šæ ‡è®°å¯è¾¾å¯¹è±¡ï¼Œæ¸…é™¤ä¸å¯è¾¾å¯¹è±¡ï¼›ä½†ä¼šäº§ç”Ÿç¢ç‰‡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ ‡è®°-æ•´ç†ï¼ˆMark-Compactï¼‰")]),t._v("ï¼šæ ‡è®°åæŠŠå­˜æ´»å¯¹è±¡å‹ç¼©åˆ°ä¸€è¾¹ï¼Œé¿å…ç¢ç‰‡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¤åˆ¶ç®—æ³•ï¼ˆCopyingï¼‰")]),t._v("ï¼šæŠŠå¯¹è±¡åˆ†ä¸¤å—å†…å­˜ï¼Œæ¯æ¬¡åªç”¨ä¸€å—ï¼Œå­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—ï¼Œæ•ˆç‡é«˜ï¼›å¸¸ç”¨äºå¹´è½»ä»£ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åˆ†ä»£æ”¶é›†ï¼ˆGenerational GCï¼‰")]),t._v("ï¼šæ ¹æ®å¯¹è±¡å­˜æ´»æ—¶é—´åˆ’åˆ† "),s("strong",[t._v("å¹´è½»ä»£ / è€å¹´ä»£")]),t._v("ï¼Œé‡‡ç”¨ä¸åŒç®—æ³•ï¼š\n"),s("ul",[s("li",[t._v("å¹´è½»ä»£ï¼ˆçŸ­å‘½å¯¹è±¡å¤šï¼‰ï¼šå¤åˆ¶ç®—æ³•")]),t._v(" "),s("li",[t._v("è€å¹´ä»£ï¼ˆé•¿å‘½å¯¹è±¡å¤šï¼‰ï¼šæ ‡è®°-æ¸…é™¤ / æ ‡è®°-æ•´ç†")])])])]),t._v(" "),s("p",[s("strong",[t._v("4. å¸¸è§åƒåœ¾æ”¶é›†å™¨")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Serial")]),t._v("ï¼šå•çº¿ç¨‹ï¼Œé€‚åˆå°å†…å­˜ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Parallelï¼ˆååé‡ä¼˜å…ˆï¼‰")]),t._v("ï¼šå¤šçº¿ç¨‹ï¼Œé€‚åˆåå°ä»»åŠ¡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("CMSï¼ˆå¹¶å‘ä½åœé¡¿ï¼‰")]),t._v("ï¼šå¹¶å‘å›æ”¶ï¼Œé™ä½ STWï¼ˆStop The Worldï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("G1ï¼ˆé¢å‘å¤§å †å†…å­˜ï¼‰")]),t._v("ï¼šåŒºåŸŸåŒ–å†…å­˜ç®¡ç†ï¼Œé¢„æµ‹åœé¡¿æ—¶é—´ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-jvm-åƒåœ¾å›æ”¶çš„æ—¶å€™å¦‚ä½•ç¡®å®šåƒåœ¾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-jvm-åƒåœ¾å›æ”¶çš„æ—¶å€™å¦‚ä½•ç¡®å®šåƒåœ¾"}},[t._v("#")]),t._v(" ğŸ¯ JVM åƒåœ¾å›æ”¶çš„æ—¶å€™å¦‚ä½•ç¡®å®šåƒåœ¾ï¼Ÿ")]),t._v(" "),s("p",[t._v("è‡ªåŠ¨åƒåœ¾æ”¶é›†çš„å‰ææ˜¯æ¸…æ¥šå“ªäº›å†…å­˜å¯ä»¥è¢«é‡Šæ”¾ï¼Œå†…å­˜ä¸­ä¸å†ä½¿ç”¨çš„ç©ºé—´å°±æ˜¯åƒåœ¾")]),t._v(" "),s("p",[t._v("å¯¹äºå¯¹è±¡å®ä¾‹æ”¶é›†ï¼Œä¸»è¦æ˜¯ä¸¤ç§åŸºæœ¬ç®—æ³•")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("å¼•ç”¨è®¡æ•°æ³•ï¼šå¼•ç”¨è®¡æ•°ç®—æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸ºå¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œç”¨äºè®°å½•å¯¹è±¡è¢«å¼•ç”¨çš„æƒ…å†µï¼Œå¦‚æœè®¡æ•°ä¸º 0ï¼Œå³è¡¨ç¤ºå¯¹è±¡å¯å›æ”¶ã€‚æœ‰å¾ªç¯å¼•ç”¨é—®é¢˜")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img.starfish.ink/jvm/Reference-Counting.png",alt:"Reference Counting"}})])]),t._v(" "),s("li",[s("p",[t._v("å¯è¾¾æ€§åˆ†æï¼šå°†å¯¹è±¡åŠå…¶å¼•ç”¨å…³ç³»çœ‹ä½œä¸€ä¸ªå›¾ï¼Œé€‰å®šæ´»åŠ¨çš„å¯¹è±¡ä½œä¸º GC Rootsï¼Œç„¶åè·Ÿè¸ªå¼•ç”¨é“¾æ¡ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡å’Œ GC Roots ä¹‹é—´ä¸å¯è¾¾ï¼Œä¹Ÿå°±æ˜¯ä¸å­˜åœ¨å¼•ç”¨é“¾æ¡ï¼Œé‚£ä¹ˆå³å¯è®¤ä¸ºæ˜¯å¯å›æ”¶å¯¹è±¡")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img.starfish.ink/jvm/Tracing-Garbage-Collectors.png",alt:"Tracing Garbage Collectors"}})])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å¼•ç”¨è®¡æ•°æ³•çš„ç¼ºç‚¹-é™¤äº†å¾ªç¯å¼•ç”¨-è¯´ä¸€åˆ°ä¸¤ä¸ª"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¼•ç”¨è®¡æ•°æ³•çš„ç¼ºç‚¹-é™¤äº†å¾ªç¯å¼•ç”¨-è¯´ä¸€åˆ°ä¸¤ä¸ª"}},[t._v("#")]),t._v(" ğŸ¯ å¼•ç”¨è®¡æ•°æ³•çš„ç¼ºç‚¹ï¼Œé™¤äº†å¾ªç¯å¼•ç”¨ï¼Œè¯´ä¸€åˆ°ä¸¤ä¸ª?")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("é¢å¤–çš„æ€§èƒ½å¼€é”€")]),t._v("ï¼šæ¯ä¸ªå¯¹è±¡éƒ½éœ€è¦ç»´æŠ¤ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯æ¬¡å¯¹è±¡è¢«å¼•ç”¨æˆ–é‡Šæ”¾æ—¶ï¼Œéƒ½è¦å¯¹è®¡æ•°å™¨è¿›è¡Œå¢å‡æ“ä½œã€‚è¿™ä¼šå¸¦æ¥é¢‘ç¹çš„å†…å­˜è¯»å†™å¼€é”€ï¼Œå°¤å…¶åœ¨é«˜é¢‘æ¬¡å¯¹è±¡äº¤äº’çš„åœºæ™¯ï¼ˆå¦‚å¤æ‚æ•°æ®ç»“æ„æ“ä½œã€å¤šçº¿ç¨‹ç¯å¢ƒï¼‰ä¸­ï¼Œå¯èƒ½æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªé“¾è¡¨éå†è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨è®¡æ•°éƒ½ä¼šè¢«é¢‘ç¹ä¿®æ”¹ï¼Œç´¯ç§¯çš„å¼€é”€ä¼šå½±å“æ•´ä½“æ•ˆç‡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("è®¡æ•°å™¨æº¢å‡ºé£é™©")]),t._v("ï¼šå¯¹è±¡å¼•ç”¨è®¡æ•°å™¨æœ¬èº«æ˜¯éœ€è¦ç©ºé—´çš„ï¼Œè€Œè®¡æ•°å™¨è¦å ç”¨å¤šå°‘ä½ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜")]),t._v(" "),s("li",[t._v("ä¸€ä¸ªè‡´å‘½ç¼ºé™·æ˜¯å¾ªç¯å¼•ç”¨ï¼Œå°±æ˜¯ï¼Œ objAå¼•ç”¨äº†objBï¼ŒobjBä¹Ÿå¼•ç”¨äº†objAï¼Œä½†æ˜¯é™¤æ­¤ä¹‹å¤–ï¼Œå†æ²¡æœ‰å…¶ä»–çš„åœ°æ–¹å¼•ç”¨è¿™ä¸¤ä¸ªå¯¹è±¡äº†ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å°±éƒ½æ˜¯1ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸èƒ½è¢«å›æ”¶çš„ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ä½ çŸ¥é“ä»€ä¹ˆæ˜¯-gc-roots-å—-gc-roots-å¦‚ä½•ç¡®å®š-å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º-gc-roots"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä½ çŸ¥é“ä»€ä¹ˆæ˜¯-gc-roots-å—-gc-roots-å¦‚ä½•ç¡®å®š-å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º-gc-roots"}},[t._v("#")]),t._v(" ğŸ¯ ä½ çŸ¥é“ä»€ä¹ˆæ˜¯ GC Roots å—ï¼ŸGC Roots å¦‚ä½•ç¡®å®šï¼Œå“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º GC Roots?")]),t._v(" "),s("p",[t._v("ä¸ºäº†è§£å†³å¼•ç”¨è®¡æ•°æ³•çš„å¾ªç¯å¼•ç”¨é—®é¢˜ï¼ŒJava ä½¿ç”¨äº†å¯è¾¾æ€§åˆ†æçš„æ–¹æ³•")]),t._v(" "),s("p",[t._v("å¯è¾¾æ€§ç®—æ³•çš„åŸç†æ˜¯ä»¥ä¸€ç³»åˆ—å«åš "),s("strong",[t._v("GC Root")]),t._v(" çš„å¯¹è±¡ä¸ºèµ·ç‚¹å‡ºå‘ï¼Œå¼•å‡ºå®ƒä»¬æŒ‡å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå†ä»¥ä¸‹ä¸ªèŠ‚ç‚¹ä¸ºèµ·ç‚¹ï¼Œå¼•å‡ºæ­¤èŠ‚ç‚¹æŒ‡å‘çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ã€‚ã€‚ã€‚ï¼ˆè¿™æ ·é€šè¿‡ GC Root ä¸²æˆçš„ä¸€æ¡çº¿å°±å«å¼•ç”¨é“¾ï¼‰ï¼Œç›´åˆ°æ‰€æœ‰çš„ç»“ç‚¹éƒ½éå†å®Œæ¯•ï¼Œå¦‚æœç›¸å…³å¯¹è±¡ä¸åœ¨ä»»æ„ä¸€ä¸ªä»¥ "),s("strong",[t._v("GC Root")]),t._v(" ä¸ºèµ·ç‚¹çš„å¼•ç”¨é“¾ä¸­ï¼Œåˆ™è¿™äº›å¯¹è±¡ä¼šè¢«åˆ¤æ–­ä¸ºã€Œåƒåœ¾ã€,ä¼šè¢« GC å›æ”¶ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("å“ªäº›å¯¹è±¡å¯ä»¥ä½œä¸º GC Root å‘¢ï¼Œæœ‰ä»¥ä¸‹å‡ ç±»")])]),t._v(" "),s("ul",[s("li",[t._v("è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡")]),t._v(" "),s("li",[t._v("æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡")]),t._v(" "),s("li",[t._v("æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡")]),t._v(" "),s("li",[t._v("æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNIï¼ˆå³ä¸€èˆ¬è¯´çš„ Native æ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡")]),t._v(" "),s("li",[t._v("Java è™šæ‹Ÿæœºå†…éƒ¨çš„å¼•ç”¨ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„ Class å¯¹è±¡ï¼Œä¸€äº›å¸¸é©»çš„å¼‚å¸¸å¯¹è±¡")]),t._v(" "),s("li",[t._v("æ‰€æœ‰è¢«åŒæ­¥é”ï¼ˆsynchronized å…³é”®å­—ï¼‰æŒæœ‰çš„å¯¹è±¡")]),t._v(" "),s("li",[t._v("åæ˜  Java è™šæ‹Ÿæœºå†…éƒ¨æƒ…å†µçš„ JMXBeanã€JVMTI ä¸­æ³¨å†Œçš„å›è°ƒã€æœ¬åœ°ä»£ç ç¼“å­˜")])]),t._v(" "),s("p",[t._v("åœ¨å®é™…è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒJVM ä¼šé€šè¿‡ç»´æŠ¤ä¸€å¼ å…¨å±€çš„å¼•ç”¨è¡¨æ¥ç®¡ç† GC Rootsã€‚è¿™ä¸ªè¡¨åŒ…å«äº†æ‰€æœ‰æ´»åŠ¨çº¿ç¨‹ã€é™æ€å˜é‡ã€å¸¸é‡å¼•ç”¨å’Œ JNI å…¨å±€å¼•ç”¨ç­‰ã€‚åƒåœ¾å›æ”¶å™¨åœ¨è¿›è¡Œæ ‡è®°é˜¶æ®µæ—¶ï¼Œä¼šéå†è¿™ä¸ªå…¨å±€å¼•ç”¨è¡¨ï¼Œæ ‡è®°ä» GC Roots å¼€å§‹çš„æ‰€æœ‰å¯è¾¾å¯¹è±¡ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å“ªäº›å†…å­˜åŒºåŸŸéœ€è¦-gc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å“ªäº›å†…å­˜åŒºåŸŸéœ€è¦-gc"}},[t._v("#")]),t._v(" ğŸ¯ å“ªäº›å†…å­˜åŒºåŸŸéœ€è¦ GC ?")]),t._v(" "),s("p",[t._v("Thread ç‹¬äº«çš„åŒºåŸŸï¼šPC Regiesterã€JVM Stackã€Native Method Stackï¼Œå…¶ç”Ÿå‘½å‘¨æœŸéƒ½ä¸çº¿ç¨‹ç›¸åŒï¼ˆå³ä¸çº¿ç¨‹å…±ç”Ÿæ­»ï¼‰ï¼Œæ‰€ä»¥æ— éœ€ GCã€‚è€Œçº¿ç¨‹å…±äº«çš„ Heap åŒºã€Method Area åˆ™æ˜¯ GC å…³æ³¨çš„é‡ç‚¹å¯¹è±¡")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å¯¹è±¡çš„æ­»äº¡è¿‡ç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¯¹è±¡çš„æ­»äº¡è¿‡ç¨‹"}},[t._v("#")]),t._v(" ğŸ¯ å¯¹è±¡çš„æ­»äº¡è¿‡ç¨‹?")]),t._v(" "),s("p",[t._v("åœ¨ Java ä¸­ï¼Œå¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨ï¼ˆGarbage Collector, GCï¼‰åˆ¤å®šä¸ºâ€œæ­»äº¡â€å¹¶å›æ”¶å†…å­˜çš„è¿‡ç¨‹ï¼Œæ¶‰åŠ "),s("strong",[t._v("ä¸¤æ¬¡æ ‡è®°")]),t._v(" å’Œæ½œåœ¨çš„ "),s("strong",[t._v("è‡ªæ•‘æœºä¼š")]),t._v("ï¼ˆé€šè¿‡ "),s("code",[t._v("finalize()")]),t._v(" æ–¹æ³•ï¼‰")]),t._v(" "),s("p",[s("strong",[t._v("ä¸€ã€ç¬¬ä¸€æ¬¡æ ‡è®°ï¼šå¯è¾¾æ€§åˆ†æ")])]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("è§¦å‘æ¡ä»¶")]),t._v("ï¼šå½“ JVM å¼€å§‹åƒåœ¾å›æ”¶æ—¶ï¼Œé¦–å…ˆé€šè¿‡ "),s("strong",[t._v("å¯è¾¾æ€§åˆ†æç®—æ³•ï¼ˆReachability Analysisï¼‰")]),t._v(" åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("GC Roots çš„å¼•ç”¨é“¾")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("GC Roots å¯¹è±¡åŒ…æ‹¬ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„å±€éƒ¨å˜é‡è¡¨ï¼‰å¼•ç”¨çš„å¯¹è±¡ã€‚")]),t._v(" "),s("li",[t._v("æ–¹æ³•åŒºä¸­é™æ€å˜é‡å¼•ç”¨çš„å¯¹è±¡ã€‚")]),t._v(" "),s("li",[t._v("æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ï¼ˆå¦‚å­—ç¬¦ä¸²å¸¸é‡æ± ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("JNIï¼ˆJava Native Interfaceï¼‰å¼•ç”¨çš„æœ¬åœ°æ–¹æ³•æ ˆå¯¹è±¡ã€‚")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("éå†è¿‡ç¨‹")]),t._v("ï¼šä» GC Roots å‡ºå‘ï¼Œé€’å½’éå†æ‰€æœ‰å¼•ç”¨é“¾ã€‚æœªè¢«éå†åˆ°çš„å¯¹è±¡å³ä¸ºä¸å¯è¾¾å¯¹è±¡ã€‚")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ç¬¬ä¸€æ¬¡æ ‡è®°ç»“æœ")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("å­˜æ´»å¯¹è±¡")]),t._v("ï¼šä¸ GC Roots å­˜åœ¨å¼•ç”¨é“¾ï¼Œç»§ç»­ä¿ç•™ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å¾…å›æ”¶å¯¹è±¡")]),t._v("ï¼šä¸å¯è¾¾ï¼Œè¢«æ ‡è®°ä¸ºâ€œå¯å›æ”¶â€ï¼Œè¿›å…¥ç¬¬äºŒæ¬¡æ ‡è®°é˜¶æ®µã€‚")])])])])]),t._v(" "),s("p",[s("strong",[t._v("äºŒã€ç¬¬äºŒæ¬¡æ ‡è®°ï¼šfinalize() æ–¹æ³•çš„è‡ªæ•‘æœºä¼š")])]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("ç­›é€‰æ¡ä»¶")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("è‹¥å¯¹è±¡æœªè¦†ç›– "),s("code",[t._v("finalize()")]),t._v(" æ–¹æ³•ï¼Œæˆ– "),s("code",[t._v("finalize()")]),t._v(" å·²è¢«è°ƒç”¨è¿‡ï¼Œåˆ™ç›´æ¥åˆ¤å®šä¸ºæ­»äº¡ï¼Œæ— éœ€è¿›å…¥é˜Ÿåˆ—ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("è‹¥å¯¹è±¡è¦†ç›–äº† "),s("code",[t._v("finalize()")]),t._v(" ä¸”æœªè¢«è°ƒç”¨è¿‡ï¼Œåˆ™å°†å…¶åŠ å…¥ "),s("strong",[t._v("F-Queue é˜Ÿåˆ—")]),t._v("ï¼Œè¿›å…¥è‡ªæ•‘æµç¨‹ã€‚")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("F-Queue ä¸ Finalizer çº¿ç¨‹")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("F-Queue")]),t._v("ï¼šä¸€ä¸ªä½ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ï¼Œå­˜æ”¾å¾…æ‰§è¡Œ "),s("code",[t._v("finalize()")]),t._v(" çš„å¯¹è±¡ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("Finalizer çº¿ç¨‹ï¼šJVM åˆ›å»ºçš„å®ˆæŠ¤çº¿ç¨‹ï¼Œè´Ÿè´£å¼‚æ­¥æ‰§è¡Œé˜Ÿåˆ—ä¸­å¯¹è±¡çš„ "),s("code",[t._v("finalize()")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ³¨æ„")]),t._v("ï¼š"),s("code",[t._v("finalize()")]),t._v(" çš„æ‰§è¡Œä¸ä¿è¯å®Œæˆï¼ˆå¦‚çº¿ç¨‹ä¼˜å…ˆçº§ä½æˆ–æ–¹æ³•æ­»å¾ªç¯ï¼‰ã€‚")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("è‡ªæ•‘æœºåˆ¶")])]),t._v(" "),s("p",[t._v("åœ¨ "),s("code",[t._v("finalize()")]),t._v(" æ–¹æ³•ä¸­ï¼Œå¯¹è±¡å¯é€šè¿‡é‡æ–°ä¸ GC Roots å¼•ç”¨é“¾å»ºç«‹å…³è”æ¥è‡ªæ•‘ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Zombie")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Zombie")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SAVE_HOOK")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("finalize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("finalize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"finalize() æ‰§è¡Œï¼Œå¯¹è±¡è‡ªæ•‘"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SAVE_HOOK")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡æ–°å»ºç«‹ä¸ GC Roots çš„å…³è”")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SAVE_HOOK")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Zombie")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SAVE_HOOK")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–­å¼€å¼•ç”¨ï¼Œè§¦å‘ GC")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç­‰å¾… Finalizer çº¿ç¨‹æ‰§è¡Œ finalize()")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SAVE_HOOK")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å¯¹è±¡å­˜æ´»"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å¯¹è±¡è¢«å›æ”¶"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" è¾“å‡ºç»“æœ\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("finalize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" æ‰§è¡Œï¼Œå¯¹è±¡è‡ªæ•‘\nå¯¹è±¡å­˜æ´»\n")])])])])]),t._v(" "),s("ul",[s("li",[t._v("å…³é”®ç‚¹ï¼š\n"),s("ul",[s("li",[t._v("å¯¹è±¡é€šè¿‡ "),s("code",[t._v("finalize()")]),t._v(" å°† "),s("code",[t._v("this")]),t._v(" èµ‹å€¼ç»™é™æ€å˜é‡ "),s("code",[t._v("SAVE_HOOK")]),t._v("ï¼Œé‡æ–°å»ºç«‹ä¸ GC Roots çš„å¼•ç”¨é“¾ã€‚")]),t._v(" "),s("li",[t._v("è‡ªæ•‘ä»…ç”Ÿæ•ˆä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡ GC æ—¶å¯¹è±¡ä»ä¼šè¢«å›æ”¶ã€‚")])])])]),t._v(" "),s("p",[s("strong",[t._v("ä¸‰ã€å¯¹è±¡å›æ”¶çš„æœ€ç»ˆåˆ¤å®š")])]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("ç¬¬äºŒæ¬¡æ ‡è®°ç»“æœ")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("è‡ªæ•‘æˆåŠŸ")]),t._v("ï¼šå¯¹è±¡é‡æ–°ä¸å¼•ç”¨é“¾å…³è”ï¼Œç§»å‡ºå¾…å›æ”¶é›†åˆã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("è‡ªæ•‘å¤±è´¥")]),t._v("ï¼šå¯¹è±¡ä»ä¸å¯è¾¾ï¼Œè¢«æ ‡è®°ä¸ºâ€œæ­»äº¡â€ï¼Œç­‰å¾…å†…å­˜å›æ”¶ã€‚")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å›æ”¶å†…å­˜")])]),t._v(" "),s("p",[t._v("æ ¹æ®åƒåœ¾æ”¶é›†ç®—æ³•ï¼ˆå¦‚æ ‡è®°-æ¸…é™¤ã€å¤åˆ¶ã€æ ‡è®°-æ•´ç†ç­‰ï¼‰ï¼Œå°†æ­»äº¡å¯¹è±¡çš„å†…å­˜å›æ”¶ã€‚")])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-è¯´ä¸€è¯´å¸¸ç”¨çš„-gc-ç®—æ³•åŠå…¶ä¼˜ç¼ºç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è¯´ä¸€è¯´å¸¸ç”¨çš„-gc-ç®—æ³•åŠå…¶ä¼˜ç¼ºç‚¹"}},[t._v("#")]),t._v(" ğŸ¯ è¯´ä¸€è¯´å¸¸ç”¨çš„ GC ç®—æ³•åŠå…¶ä¼˜ç¼ºç‚¹")]),t._v(" "),s("p",[t._v("åƒåœ¾å›æ”¶ï¼ˆGarbage Collection, GCï¼‰æ˜¯è‡ªåŠ¨å†…å­˜ç®¡ç†çš„å…³é”®éƒ¨åˆ†ï¼Œç”¨äºå›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ GC ç®—æ³•åŠå…¶ä¼˜ç¼ºç‚¹ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ç®—æ³•")]),t._v(" "),s("th",[t._v("æ€è·¯")]),t._v(" "),s("th",[t._v("ä¼˜ç‚¹")]),t._v(" "),s("th",[t._v("ç¼ºç‚¹")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("æ ‡è®°-æ¸…é™¤ï¼ˆMark-Sweepï¼‰")]),t._v(" "),s("td",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M00/56/27/Cgp9HWEsmp-AV969AAAXLK9JRog778.jpg",alt:"10.jpg"}}),t._v("é»‘è‰²åŒºåŸŸè¡¨ç¤ºå¾…æ¸…ç†çš„åƒåœ¾å¯¹è±¡ï¼Œæ ‡è®°å‡ºæ¥åç›´æ¥æ¸…ç©º")]),t._v(" "),s("td",[t._v("ç®€å•æ˜“æ‡‚ã€‚"),s("br"),t._v("ä¸éœ€è¦ç§»åŠ¨å¯¹è±¡ï¼Œä¿ç•™äº†å¯¹è±¡çš„åŸå§‹å¼•ç”¨ã€‚")]),t._v(" "),s("td",[t._v("æ•ˆç‡é—®é¢˜ï¼šæ ‡è®°å’Œæ¸…é™¤è¿‡ç¨‹å¯èƒ½äº§ç”Ÿè¾ƒé•¿çš„åœé¡¿æ—¶é—´ï¼ˆStop-the-Worldï¼‰ã€‚ "),s("br"),t._v("å†…å­˜ç¢ç‰‡ï¼šæ¸…é™¤åå†…å­˜ä¸­å¯èƒ½ä¼šæœ‰å¤§é‡ç¢ç‰‡ï¼Œå½±å“åç»­å†…å­˜åˆ†é…")])]),t._v(" "),s("tr",[s("td",[t._v("æ ‡è®°-æ•´ç†ï¼ˆMark-Compactï¼‰")]),t._v(" "),s("td",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M00/56/28/Cgp9HWEsmuuAVl1CAAAXeNiLceQ497.jpg",alt:"12.jpg"}}),t._v("å°†åƒåœ¾å¯¹è±¡æ¸…ç†æ‰åï¼ŒåŒæ—¶å°†å‰©ä¸‹çš„å­˜æ´»å¯¹è±¡è¿›è¡Œæ•´ç†æŒªåŠ¨ï¼ˆç±»ä¼¼äº windows çš„ç£ç›˜ç¢ç‰‡æ•´ç†)ï¼Œä¿è¯å®ƒä»¬å ç”¨çš„ç©ºé—´è¿ç»­")]),t._v(" "),s("td",[t._v("è§£å†³äº†å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œé€šè¿‡æ•´ç†é˜¶æ®µç§»åŠ¨å¯¹è±¡ï¼Œå‡å°‘å†…å­˜ç¢ç‰‡ã€‚")]),t._v(" "),s("td",[t._v("æ•ˆç‡é—®é¢˜ï¼šæ•´ç†é˜¶æ®µå¯èƒ½éœ€è¦ç§»åŠ¨å¯¹è±¡ï¼Œå¢åŠ GCçš„å¼€é”€ã€‚ ç§»åŠ¨å¯¹è±¡å¯èƒ½å¯¼è‡´é¢å¤–çš„å¼€é”€ï¼Œå› ä¸ºéœ€è¦æ›´æ–°æ‰€æœ‰æŒ‡å‘ç§»åŠ¨å¯¹è±¡çš„å¼•ç”¨ã€‚")])]),t._v(" "),s("tr",[s("td",[t._v("å¤åˆ¶ï¼ˆCopyingï¼‰")]),t._v(" "),s("td",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M00/56/30/CioPOWEsmsiAaFzWAAAZCCjflgw041.jpg",alt:"11.jpg"}}),t._v("å°†å†…å­˜å¯¹åŠåˆ†ï¼Œæ€»æ˜¯ä¿ç•™ä¸€å—ç©ºç€ï¼ˆä¸Šå›¾ä¸­çš„å³ä¾§ï¼‰ï¼Œå°†å·¦ä¾§å­˜æ´»çš„å¯¹è±¡ï¼ˆæµ…ç°è‰²åŒºåŸŸ)å¤åˆ¶åˆ°å³ä¾§ï¼Œç„¶åå·¦ä¾§å…¨éƒ¨æ¸…ç©º")]),t._v(" "),s("td",[t._v("ç®€å•ä¸”é«˜æ•ˆï¼Œç‰¹åˆ«é€‚åˆæ–°ç”Ÿä»£GCã€‚ æ²¡æœ‰å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œå› ä¸ºå¤åˆ¶ç®—æ³•é€šè¿‡å¤åˆ¶å­˜æ´»å¯¹è±¡åˆ°å¦ä¸€ä¸ªç©ºé—´æ¥é¿å…ç¢ç‰‡ã€‚")]),t._v(" "),s("td",[t._v("ç©ºé—´åˆ©ç”¨ç‡ä½ï¼šåªä½¿ç”¨å †çš„ä¸€åŠï¼ˆæˆ–è€…æ ¹æ®ç®—æ³•ä¸åŒï¼Œä½¿ç”¨çš„æ¯”ä¾‹ä¸åŒï¼‰ã€‚ å¤åˆ¶è¿‡ç¨‹å¯èƒ½äº§ç”ŸçŸ­æš‚çš„åœé¡¿ã€‚")])]),t._v(" "),s("tr",[s("td",[t._v("åˆ†ä»£æ”¶é›†ï¼ˆGenerational Collectionï¼‰")]),t._v(" "),s("td",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M00/56/28/Cgp9HWEsmzOALLLdAAAteML8kLI706.jpg",alt:"14.jpg"}})]),t._v(" "),s("td",[t._v("åŸºäºå¼±åˆ†ä»£å‡è®¾ï¼ˆå¤§éƒ¨åˆ†å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•æ­»çš„ï¼‰ï¼Œé€šè¿‡å°†å¯¹è±¡åˆ†é…åˆ°ä¸åŒçš„ä»£æ¥ä¼˜åŒ–GCæ€§èƒ½ã€‚ æ–°ç”Ÿä»£ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œè€å¹´ä»£ä½¿ç”¨æ ‡è®°-æ¸…é™¤æˆ–æ ‡è®°-æ•´ç†ç®—æ³•ã€‚")]),t._v(" "),s("td",[t._v("å¯¹äºé•¿å¯¿å‘½çš„å¯¹è±¡ï¼Œå¦‚æœé¢‘ç¹æ™‹å‡åˆ°è€å¹´ä»£ï¼Œå¯èƒ½ä¼šå¢åŠ è€å¹´ä»£çš„GCå‹åŠ›ã€‚ éœ€è¦ç»´æŠ¤å¤šä¸ªæ•°æ®ç»“æ„æ¥åŒºåˆ†ä¸åŒä»£çš„å¯¹è±¡ã€‚")])])])]),t._v(" "),s("p",[t._v("æ¯ç§GCç®—æ³•éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯å’Œé™åˆ¶ã€‚é€‰æ‹©åˆé€‚çš„GCç®—æ³•å–å†³äºåº”ç”¨ç¨‹åºçš„å…·ä½“éœ€æ±‚ï¼ŒåŒ…æ‹¬å¯¹å»¶è¿Ÿçš„æ•æ„Ÿåº¦ã€å †å†…å­˜çš„å¤§å°ã€å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç‰¹æ€§ç­‰å› ç´ ã€‚ç°ä»£ JVM é€šå¸¸æä¾›äº†å¤šç§ GC ç®—æ³•ï¼Œå…è®¸å¼€å‘è€…æ ¹æ®éœ€è¦é€‰æ‹©æˆ–è°ƒæ•´ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-jvmä¸­ä¸€æ¬¡å®Œæ•´çš„gcæµç¨‹æ˜¯æ€æ ·çš„-å¯¹è±¡å¦‚ä½•æ™‹å‡åˆ°è€å¹´ä»£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-jvmä¸­ä¸€æ¬¡å®Œæ•´çš„gcæµç¨‹æ˜¯æ€æ ·çš„-å¯¹è±¡å¦‚ä½•æ™‹å‡åˆ°è€å¹´ä»£"}},[t._v("#")]),t._v(" ğŸ¯ JVMä¸­ä¸€æ¬¡å®Œæ•´çš„GCæµç¨‹æ˜¯æ€æ ·çš„ï¼Œå¯¹è±¡å¦‚ä½•æ™‹å‡åˆ°è€å¹´ä»£")]),t._v(" "),s("p",[s("strong",[t._v("æ€è·¯ï¼š")]),t._v(" å…ˆæè¿°ä¸€ä¸‹Javaå †å†…å­˜åˆ’åˆ†ï¼Œå†è§£é‡Š Minor GCï¼ŒMajor GCï¼Œfull GCï¼Œæè¿°å®ƒä»¬ä¹‹é—´è½¬åŒ–æµç¨‹ã€‚")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Javaå † = æ–°ç”Ÿä»£  + è€å¹´ä»£")])]),t._v(" "),s("li",[s("p",[t._v("æ–°ç”Ÿä»£ = Eden + S0 + S1")])]),t._v(" "),s("li",[s("p",[t._v("å½“ Eden åŒºçš„ç©ºé—´æ»¡äº†ï¼Œ Javaè™šæ‹Ÿæœºä¼šè§¦å‘ä¸€æ¬¡ Minor GCï¼Œä»¥æ”¶é›†æ–°ç”Ÿä»£çš„åƒåœ¾ï¼Œå­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ï¼Œåˆ™ä¼šè½¬ç§»åˆ° SurvivoråŒºã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å¤§å¯¹è±¡")]),t._v("ï¼ˆéœ€è¦å¤§é‡è¿ç»­å†…å­˜ç©ºé—´çš„Javaå¯¹è±¡ï¼Œå¦‚é‚£ç§å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼‰"),s("strong",[t._v("ç›´æ¥è¿›å…¥è€å¹´æ€")]),t._v("ï¼›")])]),t._v(" "),s("li",[s("p",[t._v("å¦‚æœå¯¹è±¡åœ¨ Eden å‡ºç”Ÿï¼Œå¹¶ç»è¿‡ç¬¬ä¸€æ¬¡ Minor GC åä»ç„¶å­˜æ´»ï¼Œå¹¶ä¸”è¢« Survivor å®¹çº³çš„è¯ï¼Œå¹´é¾„è®¾ä¸º 1ï¼Œæ¯ç†¬è¿‡ä¸€æ¬¡ Minor GCï¼Œå¹´é¾„+1ï¼Œ"),s("strong",[t._v("è‹¥å¹´é¾„è¶…è¿‡ä¸€å®šé™åˆ¶ï¼ˆ15ï¼‰ï¼Œåˆ™è¢«æ™‹å‡åˆ°è€å¹´æ€")]),t._v("ã€‚å³"),s("strong",[t._v("é•¿æœŸå­˜æ´»çš„å¯¹è±¡è¿›å…¥è€å¹´æ€")]),t._v("ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("s0 ä¸ s1 çš„è§’è‰²å…¶å®ä¼šäº’æ¢ï¼Œæ¥å›ç§»åŠ¨")]),t._v(" "),s("p",[s("mark",[t._v("æ³¨ï¼šè¿™é‡Œå…¶å®å·²ç»ç»¼åˆè¿ç”¨äº†â€œã€æ ‡è®°-æ¸…ç†edenã€‘+ã€æ ‡è®°-å¤åˆ¶ eden->s0ã€‘â€ç®—æ³•ã€‚")])])])]),t._v(" "),s("li",[s("p",[t._v("è€å¹´ä»£æ»¡äº†è€Œ"),s("strong",[t._v("æ— æ³•å®¹çº³æ›´å¤šçš„å¯¹è±¡")]),t._v("ï¼ŒMinor GC ä¹‹åé€šå¸¸å°±ä¼šè¿›è¡ŒFull GCï¼ŒFull GC  æ¸…ç†æ•´ä¸ªå†…å­˜å † â€“ "),s("strong",[t._v("åŒ…æ‹¬å¹´è½»ä»£å’Œå¹´è€ä»£")]),t._v("ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("Major GC "),s("strong",[t._v("å‘ç”Ÿåœ¨è€å¹´ä»£çš„GC")]),t._v("ï¼Œ"),s("strong",[t._v("æ¸…ç†è€å¹´åŒº")]),t._v("ï¼Œç»å¸¸ä¼šä¼´éšè‡³å°‘ä¸€æ¬¡Minor GCï¼Œ"),s("strong",[t._v("æ¯”Minor GCæ…¢10å€ä»¥ä¸Š")]),t._v("ã€‚")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static001.infoq.cn/resource/image/e6/69/e663bd3043c6b3465edc1e7313671d69.png",alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-gcåˆ†ä»£å¹´é¾„ä¸ºä»€ä¹ˆæœ€å¤§ä¸º15"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-gcåˆ†ä»£å¹´é¾„ä¸ºä»€ä¹ˆæœ€å¤§ä¸º15"}},[t._v("#")]),t._v(" ğŸ¯ GCåˆ†ä»£å¹´é¾„ä¸ºä»€ä¹ˆæœ€å¤§ä¸º15ï¼Ÿ")]),t._v(" "),s("blockquote",[s("p",[t._v("åœ¨ hotspot è™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„å­˜å‚¨å¸ƒå±€å¯ä»¥åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š"),s("strong",[t._v("å¯¹è±¡å¤´ï¼Œå®ä¾‹æ•°æ®ï¼Œå¯¹é½å¡«å……")]),t._v("ã€‚\nHotSpotè™šæ‹Ÿæœºå¯¹è±¡çš„å¯¹è±¡å¤´éƒ¨åŒ…å«ä¸¤ç±»ä¿¡æ¯")]),t._v(" "),s("ul",[s("li",[t._v("ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚HashCodeï¼ŒGCçš„åˆ†ä»£å¹´é¾„ï¼Œé”çŠ¶æ€æ ‡å¿—ï¼Œçº¿ç¨‹æŒæœ‰çš„é”ï¼Œåå‘çº¿ç¨‹IDï¼Œåå‘æ—¶é—´æˆ³ç­‰ã€‚è¿™éƒ¨æ•°æ®çš„é•¿åº¦åœ¨32ä½å’Œ64ä½çš„è™šæ‹Ÿæœºä¸­åˆ†åˆ«ä¸º32æ¯”ç‰¹å’Œ64æ¯”ç‰¹ï¼Œå®˜æ–¹ç§°ä¸ºâ€œMark wordâ€ã€‚")]),t._v(" "),s("li",[t._v("å¦ä¸€ç§æ˜¯ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å‹å…ƒæ•°æ®çš„æŒ‡é’ˆï¼ŒJavaé€šè¿‡è¿™ä¸ªæŒ‡é’ˆç¡®å®šè¯¥å¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚ä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„è™šæ‹Ÿæœºå®ç°éƒ½å¿…é¡»åœ¨å¯¹è±¡æ•°æ®ä¸Šä¿ç•™ç±»å‹æŒ‡é’ˆï¼Œæ¢å¥è¯è¯´ï¼ŒæŸ¥æ‰¾å¯¹è±¡çš„å…ƒæ•°æ®ä¿¡æ¯ä¸ä¸€å®šè¦ç»è¿‡å¯¹è±¡æœ¬èº«ã€‚")])]),t._v(" "),s("p",[t._v("åœ¨32ä½çš„HotSpotè™šæ‹Ÿæœºä¸­ï¼Œå¦‚å¯¹è±¡æœªè¢«åŒæ­¥é”é”å®šçš„çŠ¶æ€ä¸‹ï¼ŒMark Wordçš„32ä¸ªæ¯”ç‰¹å­˜å‚¨ç©ºé—´ä¸­çš„25ä¸ªæ¯”ç‰¹ç”¨äºå­˜å‚¨å¯¹è±¡çš„HashCodeï¼Œ"),s("strong",[t._v("4ä¸ªæ¯”ç‰¹å­˜å‚¨å¯¹è±¡åˆ†ä»£å¹´é¾„")]),t._v("ï¼Œ2ä¸ªæ¯”ç‰¹å­˜å‚¨é”æ ‡å¿—ä½ï¼Œä¸€ä¸ªæ¯”ç‰¹å›ºå®šä¸º0.")]),t._v(" "),s("p",[s("strong",[t._v("å› ä¸ºObject Headeré‡‡ç”¨4ä¸ªbitä½æ¥ä¿å­˜å¹´é¾„ï¼Œ4ä¸ªbitä½èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°å°±æ˜¯15ï¼")])])]),t._v(" "),s("p",[t._v("åœ¨ JVM çš„å®ç°ä¸­ï¼Œå°¤å…¶æ˜¯ HotSpot è™šæ‹Ÿæœºä¸­ï¼Œåˆ†ä»£å¹´é¾„çš„æœ€å¤§å€¼æ˜¯ 15ã€‚è¿™æ˜¯ç”± JVM çš„è®¾è®¡å’Œåƒåœ¾æ”¶é›†å™¨çš„å®ç°æ‰€å†³å®šçš„ï¼Œä¸»è¦åŸå› å¦‚ä¸‹ï¼š")]),t._v(" "),s("p",[s("strong",[t._v("æ ‡è®°å­—æ®µçš„ä½æ•°é™åˆ¶")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åœ¨ HotSpot VM ä¸­ï¼Œå¯¹è±¡å¤´çš„ Mark Word é‡Œå­˜å‚¨äº†å¯¹è±¡çš„å¹´é¾„ä¿¡æ¯ã€‚å¯¹è±¡å¤´çš„ Mark Word æ˜¯ä¸€ä¸ª 32 ä½æˆ–è€… 64 ä½çš„å­—æ®µ (å–å†³äº JVM çš„è¿è¡Œæ¨¡å¼)ã€‚")]),t._v(" "),s("li",[t._v("ä¸ºäº†é«˜æ•ˆåœ°å­˜å‚¨å’Œç®¡ç†å¯¹è±¡çš„å¹´é¾„ï¼ŒJVM ä¸ºå¹´é¾„å­—æ®µåˆ†é…äº† 4 ä½ã€‚è¿™æ„å‘³ç€å¯¹è±¡å¹´é¾„çš„èŒƒå›´æ˜¯ 0 åˆ° 15ï¼Œå³æœ€å¤§ä¸º 15ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("åˆç†çš„æ™‹å‡ç­–ç•¥")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åœ¨åˆ†ä»£åƒåœ¾æ”¶é›†ç­–ç•¥ä¸­ï¼Œå¤§å¤šæ•°å¯¹è±¡åœ¨å¹´è½»ä»£åˆ›å»ºï¼Œå¹¶ä¸”å¾ˆå¿«å˜å¾—ä¸å¯è¾¾è€Œè¢«å›æ”¶ã€‚å°‘æ•°å­˜æ´»è¾ƒé•¿çš„å¯¹è±¡ä¼šé€æ¸æ™‹å‡åˆ°è€å¹´ä»£ã€‚")]),t._v(" "),s("li",[t._v("é€šè¿‡è®¾å®šæœ€å¤§å¹´é¾„ä¸º 15ï¼Œå¯ä»¥ç¡®ä¿åœ¨é€‚å½“çš„æ—¶é—´ç‚¹å°†é•¿æœŸå­˜æ´»çš„å¯¹è±¡æ™‹å‡åˆ°è€å¹´ä»£ï¼Œå‡å°‘å¹´è½»ä»£çš„è´Ÿæ‹…ã€‚")]),t._v(" "),s("li",[t._v("è¿™ä¸€è®¾è®¡æ˜¯åŸºäºå¸¸è§çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸåˆ†å¸ƒ (å³å¤§éƒ¨åˆ†å¯¹è±¡çŸ­å‘½ï¼Œå°‘æ•°å¯¹è±¡é•¿å¯¿) è€Œè¿›è¡Œçš„ä¼˜åŒ–ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("æ€§èƒ½å’Œæ•ˆç‡")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨ 4 ä½æ¥è¡¨ç¤ºå¯¹è±¡å¹´é¾„ï¼Œä½¿å¾—åƒåœ¾æ”¶é›†å™¨èƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å’Œç®¡ç†å¯¹è±¡çš„æ™‹å‡é€»è¾‘ã€‚")]),t._v(" "),s("li",[t._v("é™åˆ¶å¹´é¾„æœ€å¤§ä¸º 15 ç®€åŒ–äº†åƒåœ¾æ”¶é›†å™¨çš„å®ç°ï¼Œå¹¶ä¸”è¶³ä»¥åŒºåˆ†çŸ­å‘½å¯¹è±¡å’Œé•¿å‘½å¯¹è±¡ï¼Œä»è€Œä¼˜åŒ–åƒåœ¾æ”¶é›†çš„æ€§èƒ½ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ä½ çŸ¥é“å“ªå‡ ç§åƒåœ¾æ”¶é›†å™¨-å„è‡ªçš„ä¼˜ç¼ºç‚¹-é‡ç‚¹è®²ä¸‹cmså’Œg1-åŒ…æ‹¬åŸç†-æµç¨‹-ä¼˜ç¼ºç‚¹ã€‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä½ çŸ¥é“å“ªå‡ ç§åƒåœ¾æ”¶é›†å™¨-å„è‡ªçš„ä¼˜ç¼ºç‚¹-é‡ç‚¹è®²ä¸‹cmså’Œg1-åŒ…æ‹¬åŸç†-æµç¨‹-ä¼˜ç¼ºç‚¹ã€‚"}},[t._v("#")]),t._v(" ğŸ¯ ä½ çŸ¥é“å“ªå‡ ç§åƒåœ¾æ”¶é›†å™¨ï¼Œå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œé‡ç‚¹è®²ä¸‹cmså’ŒG1ï¼ŒåŒ…æ‹¬åŸç†ï¼Œæµç¨‹ï¼Œä¼˜ç¼ºç‚¹ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("GC åƒåœ¾å›æ”¶ç®—æ³•å’Œåƒåœ¾æ”¶é›†å™¨çš„å…³ç³»ï¼Ÿåˆ†åˆ«æ˜¯ä»€ä¹ˆè¯·ä½ è°ˆè°ˆï¼Ÿ")])]),t._v(" "),s("blockquote",[s("p",[t._v("å®é™…ä¸Šï¼Œåƒåœ¾æ”¶é›†å™¨ï¼ˆGCï¼ŒGarbage Collectorï¼‰æ˜¯å’Œå…·ä½“ JVM å®ç°ç´§å¯†ç›¸å…³çš„ï¼Œä¸åŒå‚å•†ï¼ˆIBMã€Oracleï¼‰ï¼Œä¸åŒç‰ˆæœ¬çš„ JVMï¼Œæä¾›çš„é€‰æ‹©ä¹Ÿä¸åŒã€‚")]),t._v(" "),s("p",[t._v("ä¸ç®—ä¸Šåé¢å‡ºç°çš„ç¥å™¨ ZGCï¼Œå†å²ä¸Šå‡ºç°è¿‡ 7 ç§ç»å…¸çš„åƒåœ¾å›æ”¶å™¨ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M00/56/29/Cgp9HWEsoXuAR2WEAAEJEJx1RMY327.png",alt:"25.png"}})]),t._v(" "),s("p",[t._v("è¿™äº›å›æ”¶å™¨éƒ½æ˜¯åŸºäºåˆ†ä»£çš„ï¼ŒæŠŠ G1 é™¤å¤–ï¼ŒæŒ‰å›æ”¶çš„åˆ†ä»£åˆ’åˆ†å¦‚ä¸‹ã€‚")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("æ¨ªçº¿ä»¥ä¸Šçš„ 3 ç§ï¼šSerialã€ParNewã€Parellel Scavenge éƒ½æ˜¯å›æ”¶å¹´è½»ä»£çš„ï¼›")])]),t._v(" "),s("li",[s("p",[t._v("æ¨ªçº¿ä»¥ä¸‹çš„ 3 ç§ï¼šCMSã€Serial Oldã€Parallel Old éƒ½æ˜¯å›æ”¶è€å¹´ä»£çš„ã€‚")])])])]),t._v(" "),s("p",[s("strong",[t._v("æ€è·¯ï¼š")]),t._v(" ä¸€å®šè¦è®°ä½å…¸å‹çš„åƒåœ¾æ”¶é›†å™¨ï¼Œå°¤å…¶ cms å’Œ G1ï¼Œå®ƒä»¬çš„åŸç†ä¸åŒºåˆ«ï¼Œæ¶‰åŠçš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚")]),t._v(" "),s("h4",{attrs:{id:"aã€å‡ ç§åƒåœ¾æ”¶é›†å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aã€å‡ ç§åƒåœ¾æ”¶é›†å™¨"}},[t._v("#")]),t._v(" aã€å‡ ç§åƒåœ¾æ”¶é›†å™¨ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("Serialæ”¶é›†å™¨ï¼š")]),t._v(" å•çº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œæ”¶é›†åƒåœ¾æ—¶ï¼Œå¿…é¡» stop the worldï¼Œä½¿ç”¨å¤åˆ¶ç®—æ³•ã€‚æ— éœ€ç»´æŠ¤å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œåˆå§‹åŒ–ä¹Ÿç®€å•ï¼Œæ‰€ä»¥ä¸€ç›´æ˜¯ Client æ¨¡å¼ä¸‹ JVM çš„é»˜è®¤é€‰é¡¹")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ParNewæ”¶é›†å™¨ï¼š")]),t._v("  ä¸€æ¬¾å¤šçº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œé‡‡ç”¨å¤åˆ¶ç®—æ³•ï¼Œä¸»è¦å·¥ä½œåœ¨ Young åŒºï¼Œå¯ä»¥é€šè¿‡ "),s("code",[t._v("-XX:ParallelGCThreads")]),t._v(" å‚æ•°æ¥æ§åˆ¶æ”¶é›†çš„çº¿ç¨‹æ•°ï¼Œæ•´ä¸ªè¿‡ç¨‹éƒ½æ˜¯ STW çš„ï¼Œå¸¸ä¸ CMS ç»„åˆä½¿ç”¨")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Parallel Scavengeæ”¶é›†å™¨ï¼š")]),t._v(" æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œå¤åˆ¶ç®—æ³•çš„æ”¶é›†å™¨ï¼Œå¹¶å‘çš„å¤šçº¿ç¨‹æ”¶é›†å™¨ï¼Œç›®æ ‡æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§çš„ååé‡ã€‚å¦‚æœè™šæ‹Ÿæœºæ€»å…±è¿è¡Œ100åˆ†é’Ÿï¼Œå…¶ä¸­åƒåœ¾èŠ±æ‰1åˆ†é’Ÿï¼Œååé‡å°±æ˜¯99%ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Serial Oldæ”¶é›†å™¨ï¼š")]),t._v(" æ˜¯Serialæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå•çº¿ç¨‹æ”¶é›†å™¨ï¼Œä½¿ç”¨æ ‡è®°æ•´ç†ç®—æ³•ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Parallel Oldæ”¶é›†å™¨ï¼š")]),t._v(" æ˜¯Parallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæ ‡è®°-æ•´ç†ç®—æ³•ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("CMS(Concurrent Mark Sweep) æ”¶é›†å™¨ï¼š")]),t._v(" æ˜¯ä¸€ç§ä»¥è·å¾—æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ï¼Œ"),s("strong",[t._v("æ ‡è®°æ¸…é™¤ç®—æ³•ï¼Œè¿ä½œè¿‡ç¨‹ï¼šåˆå§‹æ ‡è®°ï¼Œå¹¶å‘æ ‡è®°ï¼Œé‡æ–°æ ‡è®°ï¼Œå¹¶å‘æ¸…é™¤")]),t._v("ï¼Œæ”¶é›†ç»“æŸä¼šäº§ç”Ÿå¤§é‡ç©ºé—´ç¢ç‰‡ã€‚å…¶ä¸­åˆå§‹æ ‡è®°å’Œé‡æ–°æ ‡è®°ä¼š STWã€‚å¦å¤–ï¼Œæ—¢ç„¶å¼ºè°ƒäº†å¹¶å‘ï¼ˆConcurrentï¼‰ï¼ŒCMS ä¼šå ç”¨æ›´å¤š CPU èµ„æºï¼Œå¹¶å’Œç”¨æˆ·çº¿ç¨‹äº‰æŠ¢ã€‚å¤šæ•°åº”ç”¨äºäº’è”ç½‘ç«™æˆ–è€… B/S ç³»ç»Ÿçš„æœåŠ¡å™¨ç«¯ä¸Šï¼ŒJDK9 è¢«æ ‡è®°å¼ƒç”¨ï¼ŒJDK14 è¢«åˆ é™¤ï¼Œè¯¦æƒ…å¯è§ "),s("a",{attrs:{href:"https://openjdk.java.net/jeps/363",target:"_blank",rel:"noopener noreferrer"}},[t._v("JEP 363"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M00/56/29/Cgp9HWEsoZSAEqicAABcDI3t_Mo844.jpg",alt:"26.jpg"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("G1æ”¶é›†å™¨ï¼š")]),t._v(" ä¸€ç§å…¼é¡¾ååé‡å’Œåœé¡¿æ—¶é—´çš„ GC å®ç°ï¼Œæ˜¯ Oracle JDK 9 ä»¥åçš„é»˜è®¤ GC é€‰é¡¹ã€‚")]),t._v(" "),s("p",[t._v("G1 GC ä»ç„¶å­˜åœ¨ç€å¹´ä»£çš„æ¦‚å¿µï¼Œä½†æ˜¯å…¶å†…å­˜ç»“æ„å¹¶ä¸æ˜¯ç®€å•çš„æ¡å¸¦å¼åˆ’åˆ†ï¼Œè€Œæ˜¯ç±»ä¼¼æ£‹ç›˜çš„ä¸€ä¸ªä¸ª Regionã€‚Region ä¹‹é—´æ˜¯å¤åˆ¶ç®—æ³•ï¼Œä½†æ•´ä½“ä¸Šå®é™…å¯çœ‹ä½œæ˜¯æ ‡è®° - æ•´ç†ï¼ˆMark-Compactï¼‰ç®—æ³•ï¼Œå¯ä»¥æœ‰æ•ˆåœ°é¿å…å†…å­˜ç¢ç‰‡ï¼Œå°¤å…¶æ˜¯å½“ Java å †éå¸¸å¤§çš„æ—¶å€™ï¼ŒG1 çš„ä¼˜åŠ¿æ›´åŠ æ˜æ˜¾ã€‚")]),t._v(" "),s("p",[t._v("æ ‡è®°æ•´ç†ç®—æ³•å®ç°ï¼Œ"),s("strong",[t._v("è¿ä½œæµç¨‹ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ï¼šåˆå§‹æ ‡è®°ï¼Œå¹¶å‘æ ‡è®°ï¼Œæœ€ç»ˆæ ‡è®°ï¼Œç­›é€‰æ ‡è®°")]),t._v("ã€‚ä¸ä¼šäº§ç”Ÿç©ºé—´ç¢ç‰‡ï¼Œå¯ä»¥ç²¾ç¡®åœ°æ§åˆ¶åœé¡¿ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Z Garbage Collector (ZGC)")]),t._v("ï¼ˆZ åƒåœ¾å›æ”¶å™¨ï¼‰ï¼šZGC æ˜¯ "),s("strong",[t._v("ä½å»¶è¿Ÿåƒåœ¾å›æ”¶å™¨")]),t._v("ï¼Œå®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯å°†åƒåœ¾å›æ”¶çš„åœé¡¿æ—¶é—´æ§åˆ¶åœ¨æ¯«ç§’çº§åˆ«ã€‚ZGC æ˜¯ä¸€ç§å¹¶è¡Œã€å¹¶å‘ã€åˆ†ä»£çš„åƒåœ¾å›æ”¶å™¨ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦ä½åœé¡¿å’Œå¤§å †å†…å­˜çš„åº”ç”¨ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šé€‚ç”¨äºè¦æ±‚æä½å»¶è¿Ÿå’Œå¤§å†…å­˜çš„åº”ç”¨ï¼Œå¦‚å¤§æ•°æ®å¤„ç†ã€é«˜é¢‘äº¤æ˜“ç­‰ã€‚")]),t._v(" "),s("p",[t._v("ç‰¹ç‚¹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("è®¾è®¡ç›®æ ‡æ˜¯ "),s("strong",[t._v("ä½å»¶è¿Ÿ")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("é€‚åˆéå¸¸å¤§çš„å †å†…å­˜ï¼ˆä¾‹å¦‚è¶…è¿‡å‡ ç™¾ GBï¼‰ã€‚")]),t._v(" "),s("li",[t._v("é»˜è®¤é…ç½®ï¼š"),s("code",[t._v("-XX:+UseZGC")]),t._v("ï¼ˆä» JDK 15 å¼€å§‹æ”¯æŒï¼‰")])])])]),t._v(" "),s("h4",{attrs:{id:"bã€cms-æ”¶é›†å™¨å’Œ-g1-æ”¶é›†å™¨çš„åŒºåˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bã€cms-æ”¶é›†å™¨å’Œ-g1-æ”¶é›†å™¨çš„åŒºåˆ«"}},[t._v("#")]),t._v(" bã€CMS æ”¶é›†å™¨å’Œ G1 æ”¶é›†å™¨çš„åŒºåˆ«ï¼š")]),t._v(" "),s("p",[t._v("ç›®å‰ä½¿ç”¨æœ€å¤šçš„æ˜¯ CMS å’Œ G1 æ”¶é›†å™¨ï¼ŒäºŒè€…éƒ½æœ‰åˆ†ä»£çš„æ¦‚å¿µï¼Œä¸»è¦å†…å­˜ç»“æ„å¦‚ä¸‹")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p1.meituan.net/travelcube/3a6dacdd87bfbec847d33d09dbe6226d199915.png",alt:"img"}})]),t._v(" "),s("ul",[s("li",[t._v("CMS æ”¶é›†å™¨æ˜¯è€å¹´ä»£çš„æ”¶é›†å™¨ï¼Œå¯ä»¥é…åˆæ–°ç”Ÿä»£çš„ Serial å’Œ ParNew æ”¶é›†å™¨ä¸€èµ·ä½¿ç”¨ï¼›")]),t._v(" "),s("li",[t._v("G1 æ”¶é›†å™¨æ”¶é›†èŒƒå›´æ˜¯è€å¹´ä»£å’Œæ–°ç”Ÿä»£ï¼Œä¸éœ€è¦ç»“åˆå…¶ä»–æ”¶é›†å™¨ä½¿ç”¨ï¼›")]),t._v(" "),s("li",[t._v("CMS æ”¶é›†å™¨ä»¥æœ€å°çš„åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ï¼›")]),t._v(" "),s("li",[t._v("G1 GC è¿™æ˜¯ä¸€ç§å…¼é¡¾ååé‡å’Œåœé¡¿æ—¶é—´çš„ GC å®ç°ï¼Œæ˜¯ Oracle JDK 9 ä»¥åçš„é»˜è®¤ GC é€‰é¡¹ã€‚")]),t._v(" "),s("li",[t._v("G1 GC ä»ç„¶å­˜åœ¨ç€å¹´ä»£çš„æ¦‚å¿µï¼Œä½†æ˜¯å…¶å†…å­˜ç»“æ„å¹¶ä¸æ˜¯ç®€å•çš„æ¡å¸¦å¼åˆ’åˆ†ï¼Œè€Œæ˜¯ç±»ä¼¼æ£‹ç›˜çš„ä¸€ä¸ªä¸ª regionã€‚Region ä¹‹é—´æ˜¯å¤åˆ¶ç®—æ³•ï¼Œä½†æ•´ä½“ä¸Šå®é™…å¯çœ‹ä½œæ˜¯æ ‡è®° - æ•´ç†ï¼ˆMark-Compactï¼‰ç®—æ³•ï¼Œå¯ä»¥æœ‰æ•ˆåœ°é¿å…å†…å­˜ç¢ç‰‡ï¼Œå°¤å…¶æ˜¯å½“ Java å †éå¸¸å¤§çš„æ—¶å€™ï¼ŒG1 çš„ä¼˜åŠ¿æ›´åŠ æ˜æ˜¾ã€‚G1 ååé‡å’Œåœé¡¿è¡¨ç°éƒ½éå¸¸ä¸é”™ï¼Œå¹¶ä¸”ä»ç„¶åœ¨ä¸æ–­åœ°å®Œå–„ï¼Œä¸æ­¤åŒæ—¶ CMS å·²ç»åœ¨ JDK 9 ä¸­è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼ˆdeprecatedï¼‰ï¼Œæ‰€ä»¥ G1 GC å€¼å¾—ä½ æ·±å…¥æŒæ¡ã€‚")]),t._v(" "),s("li",[t._v("CMS æ”¶é›†å™¨æ˜¯ä½¿ç”¨â€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•è¿›è¡Œçš„åƒåœ¾å›æ”¶ï¼Œå®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡")])]),t._v(" "),s("blockquote",[s("p",[t._v("JDK åˆå¢åŠ äº†ä¸¤ç§å…¨æ–°çš„ GC æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://openjdk.java.net/jeps/318",target:"_blank",rel:"noopener noreferrer"}},[t._v("Epsilon GC"),s("OutboundLink")],1),t._v("ï¼Œç®€å•è¯´å°±æ˜¯ä¸ªä¸åšåƒåœ¾æ”¶é›†çš„ GCï¼Œä¼¼ä¹æœ‰ç‚¹å¥‡æ€ªï¼Œæœ‰çš„æƒ…å†µä¸‹ï¼Œä¾‹å¦‚åœ¨è¿›è¡Œæ€§èƒ½æµ‹è¯•çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦æ˜ç¡®åˆ¤æ–­ GC æœ¬èº«äº§ç”Ÿäº†å¤šå¤§çš„å¼€é”€ï¼Œè¿™å°±æ˜¯å…¶å…¸å‹åº”ç”¨åœºæ™¯ã€‚")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://openjdk.java.net/jeps/333",target:"_blank",rel:"noopener noreferrer"}},[t._v("ZGC"),s("OutboundLink")],1),t._v("ï¼Œè¿™æ˜¯ Oracle å¼€æºå‡ºæ¥çš„ä¸€ä¸ªè¶…çº§ GC å®ç°ï¼Œå…·å¤‡ä»¤äººæƒŠè®¶çš„æ‰©å±•èƒ½åŠ›ï¼Œæ¯”å¦‚æ”¯æŒ T bytes çº§åˆ«çš„å †å¤§å°ï¼Œå¹¶ä¸”ä¿è¯ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå»¶è¿Ÿéƒ½ä¸ä¼šè¶…è¿‡ 10 msã€‚è™½ç„¶ç›®å‰è¿˜å¤„äºå®éªŒé˜¶æ®µï¼Œä»…æ”¯æŒ Linux 64 ä½çš„å¹³å°ï¼Œä½†å…¶å·²ç»è¡¨ç°å‡ºçš„èƒ½åŠ›å’Œæ½œåŠ›éƒ½éå¸¸ä»¤äººæœŸå¾…ã€‚")])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-minor-gc-å°å‹-gc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-minor-gc-å°å‹-gc"}},[t._v("#")]),t._v(" ğŸ¯ "),s("strong",[t._v("Minor GCï¼ˆå°å‹ GCï¼‰")])]),t._v(" "),s("p",[t._v("æ”¶é›†å¹´è½»ä»£å†…å­˜çš„ GC äº‹ä»¶ç§°ä¸º Minor GCã€‚å…³äº Minor GC äº‹ä»¶ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€äº›ç›¸å…³çš„å†…å®¹ï¼š")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("å½“ JVM æ— æ³•ä¸ºæ–°å¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´æ—¶å°±ä¼šè§¦å‘ Minor GCï¼ˆ ä¸€èˆ¬å°±æ˜¯ Eden åŒºç”¨æ»¡äº†ï¼‰ã€‚å¦‚æœå¯¹è±¡çš„åˆ†é…é€Ÿç‡å¾ˆå¿«ï¼Œé‚£ä¹ˆ Minor GC çš„æ¬¡æ•°ä¹Ÿå°±ä¼šå¾ˆå¤šï¼Œé¢‘ç‡ä¹Ÿå°±ä¼šå¾ˆå¿«ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("Minor GC äº‹ä»¶ä¸å¤„ç†è€å¹´ä»£ï¼Œæ‰€ä»¥ä¼šæŠŠæ‰€æœ‰ä»è€å¹´ä»£æŒ‡å‘å¹´è½»ä»£çš„å¼•ç”¨éƒ½å½“åš GC Rootã€‚ä»å¹´è½»ä»£æŒ‡å‘è€å¹´ä»£çš„å¼•ç”¨åˆ™åœ¨æ ‡è®°é˜¶æ®µè¢«å¿½ç•¥ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("ä¸æˆ‘ä»¬ä¸€èˆ¬çš„è®¤çŸ¥ç›¸åï¼ŒMinor GC æ¯æ¬¡éƒ½ä¼šå¼•èµ· STW åœé¡¿ï¼ˆstop-the-worldï¼‰ï¼ŒæŒ‚èµ·æ‰€æœ‰çš„åº”ç”¨çº¿ç¨‹ã€‚å¯¹å¤§éƒ¨åˆ†åº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒMinor GC çš„æš‚åœæ—¶é—´å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå› ä¸º Eden åŒºé‡Œé¢çš„å¯¹è±¡å¤§éƒ¨åˆ†éƒ½æ˜¯åƒåœ¾ï¼Œä¹Ÿä¸æ€ä¹ˆå¤åˆ¶åˆ°å­˜æ´»åŒº/è€å¹´ä»£ã€‚ä½†å¦‚æœä¸ç¬¦åˆè¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆå¾ˆå¤šæ–°åˆ›å»ºçš„å¯¹è±¡å°±ä¸èƒ½è¢« GC æ¸…ç†ï¼ŒMinor GC çš„åœé¡¿æ—¶é—´å°±ä¼šå¢å¤§ï¼Œå°±ä¼šäº§ç”Ÿæ¯”è¾ƒæ˜æ˜¾çš„ GC æ€§èƒ½å½±å“ã€‚")])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-minor-gc-å’Œ-full-gc-è§¦å‘æ¡ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-minor-gc-å’Œ-full-gc-è§¦å‘æ¡ä»¶"}},[t._v("#")]),t._v(" ğŸ¯ Minor GC  å’Œ Full GC è§¦å‘æ¡ä»¶")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬çŸ¥é“ï¼Œé™¤äº† Minor GC å¤–ï¼Œå¦å¤–ä¸¤ç§ GC äº‹ä»¶åˆ™æ˜¯ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("Major GCï¼ˆå¤§å‹ GCï¼‰ï¼šæ¸…ç†è€å¹´ä»£ç©ºé—´ï¼ˆOld Spaceï¼‰çš„ GC äº‹ä»¶ã€‚")]),t._v(" "),s("li",[t._v("Full GCï¼ˆå®Œå…¨ GCï¼‰ï¼šæ¸…ç†æ•´ä¸ªå †å†…å­˜ç©ºé—´çš„ GC äº‹ä»¶ï¼ŒåŒ…æ‹¬å¹´è½»ä»£ç©ºé—´å’Œè€å¹´ä»£ç©ºé—´ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘-full-gc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘-full-gc"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘ Full GC ?")]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("System.gc()")]),t._v(" æ–¹æ³•çš„è°ƒç”¨")]),t._v(" "),s("p",[t._v("æ­¤æ–¹æ³•çš„è°ƒç”¨æ˜¯å»ºè®® JVM è¿›è¡Œ Full GCï¼Œè™½ç„¶åªæ˜¯å»ºè®®è€Œéä¸€å®šï¼Œä½†å¾ˆå¤šæƒ…å†µä¸‹å®ƒä¼šè§¦å‘ Full GCï¼Œä»è€Œå¢åŠ Full GC çš„é¢‘ç‡ï¼Œä¹Ÿå³å¢åŠ äº†é—´æ­‡æ€§åœé¡¿çš„æ¬¡æ•°ã€‚å¼ºçƒˆå½±å“ç³»å»ºè®®èƒ½ä¸ä½¿ç”¨æ­¤æ–¹æ³•å°±åˆ«ä½¿ç”¨ï¼Œè®©è™šæ‹Ÿæœºè‡ªå·±å»ç®¡ç†å®ƒçš„å†…å­˜ï¼Œå¯é€šè¿‡ -XX:+ DisableExplicitGC æ¥ç¦æ­¢ RMI è°ƒç”¨ System.gcã€‚")])]),t._v(" "),s("li",[s("p",[t._v("è€å¹´ä»£ç©ºé—´ä¸è¶³")]),t._v(" "),s("p",[t._v("è€å¹´ä»£ç©ºé—´åªæœ‰åœ¨æ–°ç”Ÿä»£å¯¹è±¡è½¬å…¥åŠåˆ›å»ºå¤§å¯¹è±¡ã€å¤§æ•°ç»„æ—¶æ‰ä¼šå‡ºç°ä¸è¶³çš„ç°è±¡ï¼Œå½“æ‰§è¡Œ Full GC åç©ºé—´ä»ç„¶ä¸è¶³ï¼Œåˆ™æŠ›å‡ºå¦‚ä¸‹é”™è¯¯ï¼šjava.lang.OutOfMemoryError: Java heap space ä¸ºé¿å…ä»¥ä¸Šä¸¤ç§çŠ¶å†µå¼•èµ·çš„ Full GCï¼Œè°ƒä¼˜æ—¶åº”å°½é‡åšåˆ°è®©å¯¹è±¡åœ¨ Minor GC é˜¶æ®µè¢«å›æ”¶ã€è®©å¯¹è±¡åœ¨æ–°ç”Ÿä»£å¤šå­˜æ´»ä¸€æ®µæ—¶é—´åŠä¸è¦åˆ›å»ºè¿‡å¤§çš„å¯¹è±¡åŠæ•°ç»„ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("è€å¹´ä»£çš„å†…å­˜ä½¿ç”¨ç‡è¾¾åˆ°äº†ä¸€å®šé˜ˆå€¼ï¼ˆå¯é€šè¿‡å‚æ•°è°ƒæ•´ï¼‰ï¼Œç›´æ¥è§¦å‘ FGC")])]),t._v(" "),s("li",[s("p",[t._v("ç©ºé—´åˆ†é…æ‹…ä¿ï¼šåœ¨ YGC ä¹‹å‰ï¼Œä¼šå…ˆæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£æ‰€æœ‰å¯¹è±¡çš„æ€»ç©ºé—´ã€‚å¦‚æœå°äºï¼Œè¯´æ˜ YGC æ˜¯ä¸å®‰å…¨çš„ï¼Œåˆ™ä¼šæŸ¥çœ‹å‚æ•° HandlePromotionFailure æ˜¯å¦è¢«è®¾ç½®æˆäº†å…è®¸æ‹…ä¿å¤±è´¥ï¼Œå¦‚æœä¸å…è®¸åˆ™ç›´æ¥è§¦å‘ Full GCï¼›å¦‚æœå…è®¸ï¼Œé‚£ä¹ˆä¼šè¿›ä¸€æ­¥æ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºå†æ¬¡æ™‹å‡åˆ°è€å¹´ä»£å¯¹è±¡çš„å¹³å‡å¤§å°ï¼Œå¦‚æœå°äºä¹Ÿä¼šè§¦å‘ Full GC")])]),t._v(" "),s("li",[s("p",[t._v("Metaspaceï¼ˆå…ƒç©ºé—´ï¼‰åœ¨ç©ºé—´ä¸è¶³æ—¶ä¼šè¿›è¡Œæ‰©å®¹ï¼Œå½“æ‰©å®¹åˆ°äº†-XX:MetaspaceSize å‚æ•°çš„æŒ‡å®šå€¼æ—¶ï¼Œä¹Ÿä¼šè§¦å‘FGC")])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-system-gc-å’Œ-runtime-gc-ä¼šåšä»€ä¹ˆäº‹æƒ…"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-system-gc-å’Œ-runtime-gc-ä¼šåšä»€ä¹ˆäº‹æƒ…"}},[t._v("#")]),t._v(" ğŸ¯ System.gc() å’Œ Runtime.gc() ä¼šåšä»€ä¹ˆäº‹æƒ…")]),t._v(" "),s("p",[s("code",[t._v("java.lang.System.gc()")]),t._v(" åªæ˜¯ "),s("code",[t._v("java.lang.Runtime.getRuntime().gc()")]),t._v(" çš„ç®€å†™ï¼Œä¸¤è€…çš„è¡Œä¸ºæ²¡æœ‰ä»»ä½•ä¸åŒ")]),t._v(" "),s("p",[t._v("å…¶å®åŸºæœ¬æ²¡ä»€ä¹ˆæœºä¼šç”¨å¾—åˆ°è¿™ä¸ªå‘½ä»¤ï¼Œå› ä¸ºè¿™ä¸ªå‘½ä»¤åªæ˜¯å»ºè®® JVM å®‰æ’ GC è¿è¡Œï¼Œè¿˜æœ‰å¯èƒ½å®Œå…¨è¢«æ‹’ç»ã€‚ GC æœ¬èº«æ˜¯ä¼šå‘¨æœŸæ€§çš„è‡ªåŠ¨è¿è¡Œçš„ï¼Œç”± JVM å†³å®šè¿è¡Œçš„æ—¶æœºï¼Œè€Œä¸”ç°åœ¨çš„ç‰ˆæœ¬æœ‰å¤šç§æ›´æ™ºèƒ½çš„æ¨¡å¼å¯ä»¥é€‰æ‹©ï¼Œè¿˜ä¼šæ ¹æ®è¿è¡Œçš„æœºå™¨è‡ªåŠ¨å»åšé€‰æ‹©ï¼Œå°±ç®—çœŸçš„æœ‰æ€§èƒ½ä¸Šçš„éœ€æ±‚ï¼Œä¹Ÿåº”è¯¥å»å¯¹ GC çš„è¿è¡Œæœºåˆ¶è¿›è¡Œå¾®è°ƒï¼Œè€Œä¸æ˜¯é€šè¿‡ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥å®ç°æ€§èƒ½çš„ä¼˜åŒ–")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-safepoint-æ˜¯ä»€ä¹ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-safepoint-æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ SafePoint æ˜¯ä»€ä¹ˆ")]),t._v(" "),s("p",[t._v("æ¯”å¦‚ GC çš„æ—¶å€™å¿…é¡»è¦ç­‰åˆ° Java çº¿ç¨‹éƒ½è¿›å…¥åˆ° safepoint çš„æ—¶å€™ VMThread æ‰èƒ½å¼€å§‹ æ‰§è¡Œ GCï¼Œ")]),t._v(" "),s("ol",[s("li",[t._v("å¾ªç¯çš„æœ«å°¾ (é˜²æ­¢å¤§å¾ªç¯çš„æ—¶å€™ä¸€ç›´ä¸è¿›å…¥ safepointï¼Œè€Œå…¶ä»–çº¿ç¨‹åœ¨ç­‰å¾…å®ƒè¿›å…¥ safepoint)")]),t._v(" "),s("li",[t._v("æ–¹æ³•è¿”å›å‰")]),t._v(" "),s("li",[t._v("è°ƒç”¨æ–¹æ³•çš„callä¹‹å")]),t._v(" "),s("li",[t._v("æŠ›å‡ºå¼‚å¸¸çš„ä½ç½®")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ä½ ä»¬ç”¨çš„æ˜¯ä»€ä¹ˆ-gc-éƒ½æœ‰å“ªäº›é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä½ ä»¬ç”¨çš„æ˜¯ä»€ä¹ˆ-gc-éƒ½æœ‰å“ªäº›é…ç½®"}},[t._v("#")]),t._v(" ğŸ¯ ä½ ä»¬ç”¨çš„æ˜¯ä»€ä¹ˆ GCï¼Œéƒ½æœ‰å“ªäº›é…ç½®")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("APP_OPTS:-Xms6656m -Xmx6656m -XX:MetaspaceSize=512m -XX:MaxMetaspaceSize=1024m -XX:+UseG1GC -XX:+HeapDumpOnOutOfMemoryError \n-XX:HeapDumpPath=/home/Logs/***Heap.hprof \n-verbose:gc -Xloggc:/home/Logs/gc.log \n-XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintHeapAtGC \n-Dprofiler.msxf.thread.pool.enable=true  -Dprofiler.thread.pool.spring.enable=true  \n-Dprofiler.msxf.thread.pool.reject-handler.enable=true -Dprofiler.jdbc.druid.poolmetric=true\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("xxx      143       1 54 Jun07 ?        1-13:05:06 /opt/local/jdk/bin/java -Djava.util.logging.config.file=/opt/local/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -server -Xmn1024m -Xms22938M -Xmx22938M -XX:PermSize=512m -XX:MaxPermSize=512m -XX:ParallelGCThreads=3 -XX:+UseConcMarkSweepGC -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=80 -XX:+CMSScavengeBeforeRemark -XX:SoftRefLRUPolicyMSPerMB=0 -XX:ParallelGCThreads=3 -Xss1m -XX:+PrintGCDateStamps -XX:+PrintGCDetails -Xloggc:/opt/logs/gc.log -verbose:gc -XX:+DisableExplicitGC -Dsun.rmi.transport.tcp.maxConnectionThreads=400 -XX:+ParallelRefProcEnabled -XX:+PrintTenuringDistribution -Dsun.rmi.transport.tcp.handshakeTimeout=2000 -Xdebug -Xrunjdwp:transport=dt_socket,address=22062,server=y,suspend=n -Dcom.sun.management.snmp.port=18328 -Dcom.sun.management.snmp.interface=0.0.0.0 -Dcom.sun.management.snmp.acl=false -javaagent:/opt/opbin/service_control/script/jmx_prometheus_javaagent-0.13.0.jar=9999:/opt/opbin/service_control/script/config.yaml -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dignore.endorsed.dirs= -classpath /opt/local/tomcat/bin/bootstrap.jar:/opt/local/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/opt/local/tomcat -Dcatalina.home=/opt/local/tomcat -Djava.io.tmpdir=/opt/local/tomcat/temp org.apache.catalina.startup.Bootstrap start start\n")])])]),s("h3",{attrs:{id:"ğŸ¯-è®²ä¸€è®²-g1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è®²ä¸€è®²-g1"}},[t._v("#")]),t._v(" ğŸ¯ è®²ä¸€è®² G1ï¼Ÿ")]),t._v(" "),s("blockquote",[s("p",[t._v("G1 æ˜¯ Java 9 ä¹‹åé»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨ï¼Œä¸»è¦è®¾è®¡ç›®æ ‡æ˜¯ "),s("strong",[t._v("å¯é¢„æµ‹åœé¡¿æ—¶é—´")]),t._v("ï¼Œéå¸¸é€‚åˆå¤§å†…å­˜ä½å»¶è¿Ÿåº”ç”¨ã€‚")]),t._v(" "),s("p",[t._v("å®ƒçš„æ ¸å¿ƒæœºåˆ¶æ˜¯æŠŠå †åˆ’åˆ†ä¸ºå¤§é‡å¤§å°ç›¸ç­‰çš„ Regionï¼Œé€»è¾‘ä¸Šåˆ†ä»£ä½†ç‰©ç†ä¸Šæ‰“æ•£ï¼Œè¿™æ ·å¯ä»¥é¿å…å†…å­˜ç¢ç‰‡ã€‚")]),t._v(" "),s("p",[t._v("å›æ”¶ç­–ç•¥ä¸Šï¼Œé™¤äº†å¸¸è§„çš„ Young GCï¼Œå®ƒä¼šåœ¨è€å¹´ä»£è¾¾åˆ°é˜ˆå€¼åæ‰§è¡Œå¹¶å‘æ ‡è®°ï¼Œæ¥ç€è¿›è¡Œ Mixed GCâ€”â€”æ—¢æ¸…ç†æ–°ç”Ÿä»£ï¼Œä¹ŸæŒ‘é€‰åƒåœ¾æ¯”ä¾‹é«˜çš„è€å¹´ä»£ Regionï¼Œåˆ†å¤šæ¬¡æ‰§è¡Œï¼Œé¿å…é•¿æ—¶é—´åœé¡¿ã€‚")]),t._v(" "),s("p",[t._v("æŠ€æœ¯ä¸Šï¼ŒG1 é€šè¿‡ "),s("strong",[t._v("Remembered Set")]),t._v(" è¿½è¸ªè·¨ Region å¼•ç”¨ï¼Œç»“åˆåœé¡¿é¢„æµ‹æ¨¡å‹ï¼Œå°½é‡åœ¨ç”¨æˆ·è®¾å®šçš„ç›®æ ‡æ—¶é—´å†…å®Œæˆ GCã€‚")]),t._v(" "),s("p",[t._v("ç›¸æ¯” CMSï¼ŒG1 çš„ä¼˜åŠ¿æ˜¯é¿å…ç¢ç‰‡åŒ–ã€åœé¡¿å¯æ§ï¼›ç¼ºç‚¹æ˜¯ååé‡ç•¥ä½ï¼Œå¹¶ä¸” Humongous å¯¹è±¡ä¼šå¸¦æ¥é¢å¤–å¼€é”€ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœè®©æˆ‘ä¸€å¥è¯æ€»ç»“ï¼š"),s("strong",[t._v("G1 é€šè¿‡ Region åŒ–å†…å­˜ç®¡ç† + å¹¶å‘æ ‡è®° + Mixed GCï¼Œåœ¨ä¿è¯é«˜å›æ”¶æ•ˆç‡çš„åŒæ—¶ï¼ŒæŠŠåœé¡¿æ§åˆ¶åœ¨ç”¨æˆ·æœŸæœ›çš„èŒƒå›´å†…ã€‚")])])]),t._v(" "),s("p",[t._v("G1 åƒåœ¾å›æ”¶å™¨ï¼ˆGarbage Firstï¼Œç®€ç§° G1 GCï¼‰æ˜¯ç›®å‰ HotSpot JVM ä¸­ "),s("strong",[t._v("é¢å‘æœåŠ¡ç«¯ã€æ³¨é‡ä½å»¶è¿Ÿä¸å¤§å †å†…å­˜åœºæ™¯")]),t._v(" çš„ä¸€æ¬¾é‡è¦åƒåœ¾æ”¶é›†å™¨ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š"),s("strong",[t._v("åœ¨å°½å¯èƒ½ä¿è¯é«˜ååé‡çš„åŒæ—¶ï¼Œæä¾›å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´")]),t._v("ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("1. å†…å­˜å¸ƒå±€ï¼šRegion åŒ–")])]),t._v(" "),s("ul",[s("li",[t._v("G1 å°†å †åˆ’åˆ†ä¸ºå¤§é‡å¤§å°ç›¸ç­‰çš„ "),s("strong",[t._v("Region")]),t._v("ï¼ˆ1M ~ 32Mï¼Œ2 çš„æ¬¡å¹‚ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("é€»è¾‘ä¸Šè¿˜æ˜¯åˆ†ä»£ï¼ˆå¹´è½»ä»£ã€è€å¹´ä»£ï¼‰ï¼Œä½†ç‰©ç†ä¸Šæ˜¯åˆ†æ•£çš„ Regionã€‚")]),t._v(" "),s("li",[t._v("ç‰¹æ®Š "),s("strong",[t._v("Humongous Region")]),t._v(" ç”¨äºå¤§å¯¹è±¡ï¼ˆ> Â½ Region å¤§å°ï¼‰ï¼Œè¿ç»­åˆ†é…å‡ ä¸ª Regionã€‚"),s("img",{attrs:{src:"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjmCXRrxZFopVpaiUcBrJLO9UNj6OBq0ee2OeodaeNxp4sWg1eU4CpvT2gIdm0oUoS8T4cVtJ0K9kHSjNCOf8G8fQ8XjvZck1mldVzCbF0quXd3IvGU7C_6dLY82meiX1SiHYguVZagwGQV/s1600/G1Regions.jpg",alt:"img"}})])]),t._v(" "),s("p",[t._v("ä¼˜åŠ¿ï¼šé¿å…å¤§å¯¹è±¡å¯¼è‡´ç¢ç‰‡åŒ–ï¼Œå†…å­˜åˆ©ç”¨æ›´çµæ´»ã€‚")]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("2. åˆ†ä»£ä¸å›æ”¶ç­–ç•¥")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ–°ç”Ÿä»£ GCï¼ˆYoung GCï¼‰")]),t._v(" "),s("ul",[s("li",[t._v("Stop-The-Worldï¼Œå¤åˆ¶ Eden â†’ Survivor / Oldã€‚")]),t._v(" "),s("li",[t._v("ä¾èµ– "),s("strong",[t._v("Remembered Set")]),t._v(" å¤„ç†è·¨ä»£å¼•ç”¨ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("å¹¶å‘æ ‡è®°")]),t._v(" "),s("ul",[s("li",[t._v("è§¦å‘æ¡ä»¶ï¼šè€å¹´ä»£å æ¯”è¾¾åˆ° "),s("code",[t._v("InitiatingHeapOccupancyPercent")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("å››ä¸ªé˜¶æ®µï¼šåˆå§‹æ ‡è®°ï¼ˆSTWï¼‰ã€å¹¶å‘æ ‡è®°ã€é‡æ–°æ ‡è®°ï¼ˆSTWï¼‰ã€ç­›é€‰å›æ”¶é›†ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("Mixed GC")]),t._v(" "),s("ul",[s("li",[t._v("åœ¨å¹¶å‘æ ‡è®°åè§¦å‘ï¼Œä¸ä»…æ¸…ç†æ–°ç”Ÿä»£ï¼Œè¿˜æŒ‘é€‰éƒ¨åˆ†è€å¹´ä»£ Regionï¼ˆåƒåœ¾æ¯”ä¾‹é«˜çš„ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("åˆ†å¤šæ¬¡æ‰§è¡Œï¼Œé¿å… Full GCã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("Full GC")]),t._v(" "),s("ul",[s("li",[t._v("å½“ Mixed GC ä¹Ÿè·Ÿä¸ä¸Šæ—¶ï¼Œè§¦å‘å•çº¿ç¨‹ Full GCï¼Œæ€§èƒ½æå·®ï¼Œéœ€å°½é‡é¿å…ã€‚")])])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("3. Remembered Setï¼ˆRSetï¼‰")])]),t._v(" "),s("ul",[s("li",[t._v("æ¯ä¸ª Region ç»´æŠ¤ä¸€ä¸ª RSetï¼Œè®°å½•å“ªäº›å…¶ä»– Region æŒ‡å‘è‡ªå·±ã€‚")]),t._v(" "),s("li",[t._v("é¿å…æ¯æ¬¡æ‰«ææ•´ä¸ªå †æ¥å¤„ç†è·¨ä»£å¼•ç”¨ã€‚")]),t._v(" "),s("li",[t._v("æœ¬è´¨åŸºäº "),s("strong",[t._v("Card Table")]),t._v("ï¼Œå¢é‡ç»´æŠ¤ã€‚")])]),t._v(" "),s("p",[t._v("ğŸ‘‰ ä»£ä»·ï¼šå†™å±éšœä¼šå¸¦æ¥é¢å¤–å¼€é”€ï¼Œä½†æ¢æ¥äº† GC çš„é«˜æ•ˆã€‚")]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("4. åœé¡¿æ—¶é—´æ¨¡å‹ï¼ˆPause Prediction Modelï¼‰")])]),t._v(" "),s("ul",[s("li",[t._v("G1 æœ€å¤§çš„äº®ç‚¹ï¼š"),s("strong",[t._v("å¯é¢„æµ‹åœé¡¿")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("JVM ä¼šç»´æŠ¤æ¯ä¸ª Region çš„ "),s("strong",[t._v("å­˜æ´»å¯¹è±¡æ¯”ä¾‹")]),t._v("ï¼Œå¹¶ä¼°ç®—æ¸…ç†å®ƒçš„æˆæœ¬ã€‚")]),t._v(" "),s("li",[t._v("GC æ—¶é€‰æ‹©â€œåƒåœ¾æœ€å¤šã€å›æ”¶æ”¶ç›Šæœ€é«˜â€çš„ Regionï¼ˆGarbage Firstï¼‰ã€‚")]),t._v(" "),s("li",[t._v("ç”¨æˆ·å¯é€šè¿‡ "),s("code",[t._v("-XX:MaxGCPauseMillis")]),t._v(" æŒ‡å®šåœé¡¿ç›®æ ‡ï¼ŒG1 ä¼šå°½é‡æ»¡è¶³ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("5. ä¼˜ç¼ºç‚¹")])]),t._v(" "),s("p",[t._v("âœ… ä¼˜ç‚¹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é€‚åˆå¤§å†…å­˜ï¼ˆ> 4Gï¼‰ï¼Œä½å»¶è¿Ÿåº”ç”¨ã€‚")]),t._v(" "),s("li",[t._v("é¿å…ç¢ç‰‡åŒ–ï¼Œå…¨å †å‹ç¼©ã€‚")]),t._v(" "),s("li",[t._v("Mixed GC çµæ´»ï¼Œé¿å…é•¿æ—¶é—´ Full GCã€‚")]),t._v(" "),s("li",[t._v("è‡ªåŠ¨è°ƒä¼˜ï¼Œç”¨æˆ·åªéœ€è®¾å®šåœé¡¿ç›®æ ‡ã€‚")])]),t._v(" "),s("p",[t._v("âŒ ç¼ºç‚¹ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ååé‡ä¸å¦‚ Parallel GCï¼ˆä¸ºä½å»¶è¿Ÿç‰ºç‰²éƒ¨åˆ†ååï¼‰ã€‚")]),t._v(" "),s("li",[t._v("Humongous å¯¹è±¡å¤„ç†æˆæœ¬é«˜ã€‚")]),t._v(" "),s("li",[t._v("ç»´æŠ¤ RSet å¸¦æ¥é¢å¤– CPU å¼€é”€ã€‚")])]),t._v(" "),s("p",[s("strong",[t._v("è¿è¡Œè¿‡ç¨‹")])]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("Young GC")]),t._v("ï¼ˆæ–°ç”Ÿä»£æ»¡æ—¶è§¦å‘ï¼‰\n"),s("ul",[s("li",[t._v("Stop-The-Worldï¼Œå¤åˆ¶ Eden â†’ Survivor / Oldã€‚")]),t._v(" "),s("li",[t._v("ä¾èµ– "),s("strong",[t._v("Remembered Set")]),t._v(" å¤„ç†è·¨ä»£å¼•ç”¨ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("å¹¶å‘æ ‡è®°")]),t._v("ï¼ˆè€å¹´ä»£è¾¾åˆ°é˜ˆå€¼æ—¶è§¦å‘ï¼‰\n"),s("ul",[s("li",[t._v("åˆå§‹æ ‡è®°ï¼šSTWï¼Œæ ‡è®° GC Roots ç›´æ¥å¯è¾¾å¯¹è±¡ã€‚")]),t._v(" "),s("li",[t._v("å¹¶å‘æ ‡è®°ï¼šåº”ç”¨çº¿ç¨‹å¹¶è¡Œï¼Œæ ‡è®°æ•´ä¸ªå †ã€‚")]),t._v(" "),s("li",[t._v("é‡æ–°æ ‡è®°ï¼šSTWï¼Œä¿®æ­£å¹¶å‘æœŸé—´çš„å˜åŒ–ã€‚")]),t._v(" "),s("li",[t._v("ç­›é€‰å›æ”¶é›†ï¼šè®¡ç®—å„ Region åƒåœ¾æ¯”ä¾‹ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("Mixed GC")]),t._v(" "),s("ul",[s("li",[t._v("å›æ”¶æ–°ç”Ÿä»£ + éƒ¨åˆ†è€å¹´ä»£ Regionã€‚")]),t._v(" "),s("li",[t._v("åˆ†å¤šæ¬¡æ‰§è¡Œï¼Œé¿å…ä¸€æ¬¡æ€§é•¿æ—¶é—´åœé¡¿ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("Full GC")]),t._v("ï¼ˆæç«¯æƒ…å†µï¼‰\n"),s("ul",[s("li",[t._v("G1 è°ƒåº¦å¤±è´¥æ—¶ä¼šè§¦å‘å•çº¿ç¨‹ Full GCï¼Œå¼€é”€å¾ˆå¤§ã€‚")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("ä½ å¯ä»¥æ€è€ƒä¸‹ region è®¾è®¡æœ‰ä»€ä¹ˆå‰¯ä½œç”¨ï¼Ÿ")]),t._v(" "),s("p",[t._v("ä¾‹å¦‚ï¼Œregion å¤§å°å’Œå¤§å¯¹è±¡å¾ˆéš¾ä¿è¯ä¸€è‡´ï¼Œè¿™ä¼šå¯¼è‡´ç©ºé—´çš„æµªè´¹ã€‚ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œæˆ‘çš„ç¤ºæ„å›¾ä¸­æœ‰çš„åŒºåŸŸæ˜¯ Humongous é¢œè‰²ï¼Œä½†æ²¡æœ‰ç”¨åç§°æ ‡è®°ï¼Œè¿™æ˜¯ä¸ºäº†è¡¨ç¤ºï¼Œç‰¹åˆ«å¤§çš„å¯¹è±¡æ˜¯å¯èƒ½å ç”¨è¶…è¿‡ä¸€ä¸ª region çš„ã€‚å¹¶ä¸”ï¼Œregion å¤ªå°ä¸åˆé€‚ï¼Œä¼šä»¤ä½ åœ¨åˆ†é…å¤§å¯¹è±¡æ—¶æ›´éš¾æ‰¾åˆ°è¿ç»­ç©ºé—´ï¼Œè¿™æ˜¯ä¸€ä¸ªé•¿ä¹…å­˜åœ¨çš„æƒ…å†µï¼Œè¯·å‚è€ƒ"),s("a",{attrs:{href:"http://mail.openjdk.java.net/pipermail/hotspot-gc-use/2017-November/002726.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenJDK ç¤¾åŒºçš„è®¨è®º"),s("OutboundLink")],1),t._v("ã€‚è¿™æœ¬è´¨ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ JVM çš„ bugï¼Œå°½ç®¡è§£å†³åŠæ³•ä¹Ÿéå¸¸ç®€å•ï¼Œç›´æ¥è®¾ç½®è¾ƒå¤§çš„ region å¤§å°ï¼Œå‚æ•°å¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("-XX:G1HeapRegionSize=<N, ä¾‹å¦‚ 16>M\n")])])]),s("p",[t._v("ä» GC ç®—æ³•çš„è§’åº¦ï¼ŒG1 é€‰æ‹©çš„æ˜¯å¤åˆç®—æ³•ï¼Œå¯ä»¥ç®€åŒ–ç†è§£ä¸ºï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åœ¨æ–°ç”Ÿä»£ï¼ŒG1 é‡‡ç”¨çš„ä»ç„¶æ˜¯å¹¶è¡Œçš„å¤åˆ¶ç®—æ³•ï¼Œæ‰€ä»¥åŒæ ·ä¼šå‘ç”Ÿ Stop-The-World çš„æš‚åœã€‚")]),t._v(" "),s("li",[t._v("åœ¨è€å¹´ä»£ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯å¹¶å‘æ ‡è®°ï¼Œè€Œæ•´ç†ï¼ˆCompactï¼‰åˆ™æ˜¯å’Œæ–°ç”Ÿä»£ GC æ—¶æå¸¦è¿›è¡Œï¼Œå¹¶ä¸”ä¸æ˜¯æ•´ä½“æ€§çš„æ•´ç†ï¼Œè€Œæ˜¯å¢é‡è¿›è¡Œçš„ã€‚")])]),t._v(" "),s("p",[t._v("ä¹ æƒ¯ä¸Šäººä»¬å–œæ¬¢æŠŠæ–°ç”Ÿä»£ GCï¼ˆYoung GCï¼‰å«ä½œ Minor GCï¼Œè€å¹´ä»£ GC å«ä½œ Major GCï¼ŒåŒºåˆ«äºæ•´ä½“æ€§çš„ Full GCã€‚ä½†æ˜¯ç°ä»£ GC ä¸­ï¼Œè¿™ç§æ¦‚å¿µå·²ç»ä¸å†å‡†ç¡®ï¼Œå¯¹äº G1 æ¥è¯´ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("Minor GC ä»ç„¶å­˜åœ¨ï¼Œè™½ç„¶å…·ä½“è¿‡ç¨‹ä¼šæœ‰åŒºåˆ«ï¼Œä¼šæ¶‰åŠ Remembered Set ç­‰ç›¸å…³å¤„ç†ã€‚")]),t._v(" "),s("li",[t._v("è€å¹´ä»£å›æ”¶ï¼Œåˆ™æ˜¯ä¾é  Mixed GCã€‚å¹¶å‘æ ‡è®°ç»“æŸåï¼ŒJVM å°±æœ‰è¶³å¤Ÿçš„ä¿¡æ¯è¿›è¡Œåƒåœ¾æ”¶é›†ï¼ŒMixed GC ä¸ä»…åŒæ—¶ä¼šæ¸…ç† Edenã€Survivor åŒºåŸŸï¼Œè€Œä¸”è¿˜ä¼šæ¸…ç†éƒ¨åˆ† Old åŒºåŸŸã€‚å¯ä»¥é€šè¿‡è®¾ç½®ä¸‹é¢çš„å‚æ•°ï¼ŒæŒ‡å®šè§¦å‘é˜ˆå€¼ï¼Œå¹¶ä¸”è®¾å®šæœ€å¤šè¢«åŒ…å«åœ¨ä¸€æ¬¡ Mixed GC ä¸­çš„ region æ¯”ä¾‹ã€‚")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("â€“XX:G1MixedGCLiveThresholdPercent\nâ€“XX:G1OldCSetRegionThresholdPercent\n")])])]),s("p",[t._v("ä» G1 å†…éƒ¨è¿è¡Œçš„è§’åº¦ï¼Œä¸‹é¢çš„ç¤ºæ„å›¾æè¿°äº† G1 æ­£å¸¸è¿è¡Œæ—¶çš„çŠ¶æ€æµè½¬å˜åŒ–ï¼Œå½“ç„¶ï¼Œåœ¨å‘ç”Ÿé€ƒé€¸å¤±è´¥ç­‰æƒ…å†µä¸‹ï¼Œå°±ä¼šè§¦å‘ Full GCã€‚"),s("img",{attrs:{src:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/Java%20%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95%E7%B2%BE%E8%AE%B2/assets/47dddbd91ad0e0adbd164632eb9facec-20221127201847-p5gmfe2.png",alt:""}})]),t._v(" "),s("p",[t._v("G1 ç›¸å…³æ¦‚å¿µéå¸¸å¤šï¼Œæœ‰ä¸€ä¸ªé‡ç‚¹å°±æ˜¯ "),s("strong",[t._v("Remembered Set")]),t._v("ï¼Œç”¨äºè®°å½•å’Œç»´æŠ¤ region ä¹‹é—´å¯¹è±¡çš„å¼•ç”¨å…³ç³»ã€‚ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆåšå‘¢ï¼Ÿè¯•æƒ³ï¼Œæ–°ç”Ÿä»£ GC æ˜¯å¤åˆ¶ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç±»ä¼¼å¯¹è±¡ä» Eden æˆ–è€… Survivor åˆ° to åŒºåŸŸçš„â€œç§»åŠ¨â€ï¼Œå…¶å®æ˜¯â€œå¤åˆ¶â€ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¿…é¡»ä¿è¯è€å¹´ä»£åˆ°æ–°ç”Ÿä»£çš„è·¨åŒºå¼•ç”¨ä»ç„¶æœ‰æ•ˆã€‚ä¸‹é¢çš„ç¤ºæ„å›¾è¯´æ˜äº†ç›¸å…³è®¾è®¡ã€‚")]),t._v(" "),s("p",[t._v("ä¸»è¦ç”¨äºè§£å†³åˆ†ä»£åƒåœ¾æ”¶é›†å™¨ä¸­çš„è·¨ä»£å¼•ç”¨é—®é¢˜")]),t._v(" "),s("p",[s("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwgAAAIZCAYAAAAC+BidAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAEizSURBVHhe7d0JlJXVne99V/e93ffNTfdtb9K3c28nb3evJCt5703fXt2x13Jlpe/b/UaFyFQFGJDYXjoOF000ahgLKGaKUWSQuRAEESlARBBBFEGccCIyBAcQxSEqTiiDTP+3/k89+9Spw66qs6Gq9t7n+X7W+q3iOeNzTlHP3r9zzvOcCwQAAAAAUhQEAAAAADkUBAAAAAA5FAQAAAAAORQEAAAAADkUBAAAAAA5FAQAAAAAORQEAAAAADkUBAAAAAA5FAQAAAAAORQEAAAAADkUBAAAAAA5FAQAAAAAORQEAAAAADkUBAAAAAA5FAQAAAAAORQEAAAAADkUBAAAAAA5FAQAAAAAORQEAAAAADkUBAAAAAA5FAQAAAAAORQEAAAAADkUBAAAAAA5FAQAAAAAORQEAAAAADkUBAAAAAA5FAQAAAAAORQEAAAAADkUBAAAAAA5FAQAAAAAORQEAAAAADkUBAAAAAA5FAQAQEkYP368XHDBBcnPGD3xxBPJ+rdr1y49BQD8oCAAQMR0QmnLt7/9bbnhhhtk37596SVLX5YKgl5Wf7/6e87/vet1KyoqZMeOHeklAcAdBQEAIpY/OWws9957b3rp0paVgqAFIP/321h69OiRXqNpen96eb1/AFAUBACImJkMFlq3bp1cdNFFyXkXXnihHDp0KD2ndGWhIGjZM79zfZz57xTou0V6vpnwN1c0DAoCgEIUBACImJks2mgpMOdrYSh1WSgIpvQ19xj1tngHAcC5oiAAQMR0YqdpjJn8mQmllgb9iEr+Z9d10lk44TTn6eX1PDMx1ejE00wm9VVr/Sy8vkuh5+lPXc5/x2L27NkNrm/2j8i/TP4kNf9VcI1e13xMyqxP/vrr+ugr6Xq6LuvPwvXSy+vp+fepdNnl+VBm8m1OM5ct5nEq23Omt2fWv6mCYG672MKnl8tfV3Nf+nzp4zCn22Iel3m8Zn01uo76vGVpHxcgSygIABAxM2FrjJn46gRbJ4X5k7zC6KTVMKc1d3nb6RqdKOvEOH/CXBhzGWUKQVP3VzhJzY+ebtanufs0zuX5sD1mnSgX+zibu09NUwXB3I8+F81p6vej66CFxnaeiRaE5i7T1LoCiBcFAQAiZiZqNvmvEOvE1JQF8wqyoa8ym0mreaXeXE9P14mieaVYf+ZPhvU29TpmAqz3aW7LXE5/5r/irfdtzjOTcFMQzGlm/fR28ye6Ta2PuV9zG7ouRuFj1NttiedD6fX1vOYeZ1P3qf82Ox83NenW9dHLmPvTCbw+TvP8G2Zir+ub//vR9TbPp66LMs99/vOl9Dq229Cfelld32KKCoD4UBAAIGI6gdPk0wmcTujMJFcncmbC2NiETid8er6ZnJrbzZ8IG2aSqhNUm/wJvU5CzcQyn55m1k+ZSarediFdB3N7ttsy62Oij9fGXE7v61yfj/xJvdJlPb2Yx2nu09xmocL7bIwWFL1cYfR+9PHk/+4L19cwz7feZ/6/85n1aez3DKB0URAAIGI6gWsqZrLc2CQwn7lO4b8LNTeRzZ/A6r8bU8wk1TC3Z2PWx6Sx+9TJurlMSz0f5rEW8zhN8t9lyNfc85pPS5MWDr2seVeiME3dTv56N/Zc5BczvZytLAIoTfatLQAgCmYCZ0v+RLRwktpUVP6/CzU3kTWTz2Kjt9fYJNUwl7Ux62PS1GTdXKalng/Xx6pp7DE297w2R6+vhdC8e1BMmioIqvDdGY1eXu+HwgCULvvWFgAQBTNpy2c+4qMTRfMRk5aaEKvmJrIUhKbT2GNs7nktlhbDwvtsLM0VBKVFQAuB7TmzfSQMQPzsW1sAQBTMRK1QYUlobhJYqLHbVc1NZPMnzU1N1vM1t37m9mzM+pg0dp/mIzP6nLTU82EeazGPs7n7bO55LVb+81HM43N9Lkxh0Ovocwmg9FAQACBiZiJYSD9vb46go59RNxNZs09Ccxq7XdXcRNbcl6bYHVybm6Sa27PJnxBrGpusm/XS8mR2GD7f58PspFzM4zSTar1/G/PKf1MFQXdCbu6jPWadNI3tpJzPPPeN7RvRGHMfAEoPf9kAELGmJmmFJcFcVieZhRNxXdYJrJm8NnW7LgVBo+ugk8/8o/zoxFUn6WZi3ZIFQW8rf7KrE+r8ddLl/KMLne/zYda9uceZP3HX08zl9HRTHjSNPa/KXEbXSz/ek18W9N/5RzDS6L8bu5x53Hpbelldx/zL6XnmqEj5RUPX2xQs/X8FoPRQEAAgYmYi2Jj8iXAxMZNTs2xjJuSNTWTNZFwnvTrpNLfVWJSZZBdO1I38yxYy61NMdLJr6KS3ueemmOdDn+NiH2d+ESiMuY2mCkKxv0ud9JuJf1PR566x58/8ThqLrktjvy8AcbNv7QAAUTCTtabkT4R10qcT+MLJnzndvFJsTrcxE8rGJrKmIOhPpZNyvWz+5FYnwzpZNq/0m/VpbMJprmdTOME1k+Pm3jVROrk/3+fDKOZxKr1cfqEw69bc82robenjKywl+nj19PzHqf/W289/LszldD3Muxh6m/m3p5fRdwn0Mnr9/Mdkrp//bgOA0kJBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAFO1fbp1PIg0AFIuCAAAomk40V27YTiILBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAoGgUhzlAQALigIAAAikZBiDMUBAAuKAgAgKJREOIMBQGACwoCAKBoFIQ4Q0EA4IKCAAAomk40SZwBgGJREAAARdOJpu0VahJ2KAgAXFAQAABFoyDEGQoCABcUBABA0SgIcYaCAMAFBQEAUDQKQpyhIABwQUEAABSNghBnKAgAXFAQAABFoyDEGQoCABcUBABA0SgIcYaCAMAFBQEAUDQKQpyhIABwQUEAABSNghBnKAgAXFAQAABFoyDEGQoCABcUBABA0SgIcYaCAMAFBQEAUDQKQpyhIABwQUEAABSNghBnKAgAXFAQAABFoyDEGQoCABcUBABA0SgIcYaCAMAFBQEAUDQKQpyhIABwQUEAABSNghBnKAgAXFAQAABFoyDEGQoCABcUBABA0SgIcYaCAMAFBQEAUDQKQpyhIABwQUEAABSNghBnKAgAXFAQAABFoyDEGQoCABcUBABA0SgIcYaCAMAFBQEAUDQKQpyhIABwQUEAABSNghBnKAgAXFAQAABF6zjmIesElIQdCgIAFxQEAEBRPj16Unrc+bx1AkrCDgUBgAsKAgCgKL89+Ll0m7LNOgElYYeCAMAFBQEAUJSNuz+SsqpHrBNQEnYoCABcUBAAAEVZ+OR70nHkg9YJKAk7FAQALigIAICijF57QNpV3GedgJKwQ0EA4IKCAAAoyo1LXpGf9L3LOgElYYeCAMAFBQEA0KwjX55KCoJONG0TUBJ2KAgAXFAQAADNeu39o8lHjCgIcYaCAMAFBQEA0KzNez9JdlKmIMQZCgIAFxQEAECzlj7z++QwpxSEOENBAOCCggAAaNakDW8lX5RGQYgzFAQALigIAIBm9at5XT49epKCEGkoCABcUBAAAE06ceqMXLPwd8m/KQhxhoIAwAUFAQDQpAOHjsmQ+/cn/6YgxBkKAgAXFAQAQJOe3f+ZzNnyTvJvCkKcoSAAcEFBAAA0aeULH8iaHR8m/6YgxBkKAgAXFAQAQJOmbjoozx84nPybghBnKAgAXFAQAABNqli1T9755HjybwpCnKEgAHBBQQAANEmPYHTq9Jnk3xSEOENBAOCCggAAaJS+czBgxevpEgUh1lAQALigIAAAGvXim4eTfRAMCkKcoSAAcEFBAAA0au3Lh2TZ9vfTJQpCrKEgAHBBQQAANGre1nfkqdc/S5coCLGGggDABQUBANCoYQ/sl/0fHk2XKAixhoIAwAUFAQDQqOsW7ZVjJ06nS3UFgcQZACgWBQEAYPXp0ZNyy7JX06U6OtG0vUJNwg4FAYALCgIAwGrPu1/I+PVvpkt1KAhxhoIAwAUFAQBgtXH3R7L46ffSpToUhDhDQQDggoIAALBa+OR7smnPx+lSHQpCnKEgAHBBQQAAWOnHi/a+dyRdqkNBiDMUBAAuKAgAAKsbl7wih4+dSpfqUBDiDAUBgAsKAgDgLEe+PCV9Fu9Nl+pREOIMBQGACwoCAOAs+uVo+iVphSgIcYaCAMAFBQEAcJYtr3wiC7a9my7VoyDEGQoCABcUBADAWZZtf1/W7/woXapHQYgzFAQALigIAICz3L7xLXnxzcPpUj0KQpyhIABwQUEAAJylX83r8sHhE+lSPQpCnKEgAHBBQQAANHDq9BnpvWBPutQQBSHOUBAAuKAgAAAaOPjxcalYtS9daoiCEGcoCABcUBAAAA08u/8zmfHYwXSpIQpCnKEgAHBBQQAANHD/ix8msaEgxBkKAgAXFAQAQAP67oG+i2BDQYgzFAQALigIAIAGdP8D3Q/BhoIQZygIAFxQEAAADegRjE6cOpMuNURBiDMUBAAuKAgAgBz97gP9DoTGUBDiDAUBgAsKAgAgR789Wb9FuTEUhDhDQQDggoIAAMhZv/MjWfrM79Ols1EQ4gwFAYALCgIAIGfBtndlyyufpEtnoyDEGQoCABcUBABAzrAH9sv+D4+mS2ejIMQZCgIAFxQEAEBOn8V75ciXp9Kls1EQ4gwFAYALCgIAIHH42Cm5cckr6ZIdBSHOUBAAuKAgAAASe979QqoeOpAu2VEQ4gwFAYALCgIAILFpz8ey8Mn30iU7CkKcoSAAcEFBAAAkFj/9nmzc/VG6ZEdBiDMUBAAuKAjn6dChQzJ79mxp166dXHDBBbnockVFhezbty+9ZENPPPGE9OjRI3f5Cy+8MFm+995700vY6fXy78dEr6vnAcC5Gr/+Tdn59hfpkh0FIc5QEAC4oCCchx07dsi3v/1t64TdRItCoRtuuMF6WZOmJvrjx4+3Xsdk3bp16SVbn5Ya2+MDEKeblr4qnx49mS7ZURDiDAUBgAsKwjnSdwZ0gqyTcp0kF07MdZKvRUBf2c+n7zbodfS6+m6BvgOh9KcuX3TRRUUVBP1p6LqY0qGFpa2Yxw4gfsdOnJbrFu1NlxpHQYgzFAQALigI58h8PEgn5sXSEmBKhb77cC5sBcEw72a0FQoCUDr0y9GG3L8/XWocBSHOUBAAuKAgnAN9xV4nxzrZN+8AFEPfIdDruZSKQudSEMw7E3qeRi+n17etu757UbhvhK5v/r4UZh0Kk/9uib6jYu7T3IbLcwWgbT31+mcyZ8s76VLjKAhxhoIAwAUF4RyYib7uhOzCTKz1+ufKVhDyP2JUWD7M6bboBD5/0m4ely06yTfvejRXELQc2M7PX2cAYVm2/X1Z+3LzJZ6CEGcoCABcUBDOgW2SrvJfeTfJf1VdP46jp53P0YYam5xr9PbzJ/x6P3q6Tu7zS4mebl7d130ilF5PL6en6X2Y29HyYR5X/mNR5j4LmXU0j1NvS08rfL4AhOP2jW/J8wcOp0uNoyDEGQoCABcUhHNgJsCFE15bQcifQLdmQSh8N0DpOxx6nu0dC1MezPqZV/0L34FQ+eUhX/7185kdsW23BSBMA1a8Lu98cjxdahwFIc5QEAC4oCCcAzMBbu4jRoUTaPNxn/M5FGlhOcn/eFHhZN0UksLiYORfx9xuY+tmbiuf7T6V3p+5vNn/IH8fBgBhOXX6jPResCddahoFIc5QEAC4oCCcA/0svk5+dWffxibfqnAC3RKvrBcWBMPsoJz/7oSZpLd1QTB0XUx50ZzPvhcAWs/Bj48n7yAUg4IQZygIAFxQEM6RmTA3NdkvnEDrq+hmstzShzk1Oxjnr4+ZnDf1ESOzX4Ht+ob5iJEmn15eP9rUHH2stusDCIPuezB108F0qWkUhDhDQQDggoJwjsy7CBotAfrKu3mlXn+aCXfhK+xm0q6TZb1M4XX08k3to9BYQTCTeD3P3KZZBz09/50B/bfZSVkvo/LLi77TYW5DH6fZt6KwPJjLm7Jjfurl8x+b3nZbf0cDgOKt2fGh1Dz/frrUNApCnKEgAHDBjO086ETbTMobS+GRf3TSbCbnjeVcCoIyOyWbIxMp806HLYUTfnPbtth2gi7cKduUocbu0/WwsADaxozHDibfg1AMCkKcoSAAcEFBOE86adaJdf6kX0uDTpLzX0UvpJP4wuuYV96bYvZjyC8BhnkXwEzUDV0/8wq+Ru+3sfvJf3dB09SXquk7BqYM6Pqb29SCk18ezG0ACJN+g/KBQ8fSpaZREOIMBQGACwoCAGTcNQt/JydOnUmXmkZBiDMUBAAuKAgAkGEffXFCbln2arrUPApCnKEgAHBBQQCADPvtwc9l0oa30qXmURDiDAUBgAsKAgBk2PqdH8nip99Ll5pHQYgzFAQALigIAJBhC7a9K5v2fJwuNY+CEGcoCABcUBAAIMNGrz0gr71/NF1qHgUhzlAQALigIABAhvVZvFcOHzuVLjWPghBnKAgAXFAQACCjtBhoQXChE00SZwCgWBQEAMgo/WjRyAffSJcAAKhDQQCAjNKdk3UnZQAA8lEQYjFxosjnn6cLAHD+9PCmephTAADyURBi0bGjSE1NugAA50+/IE2/KA0AgHwUhFjMmiXSu3e6AADn75Zlr8oHh0+kSwAA1KEgxOLgQZFvfCNdAIDzc+LUGblm4e/SJQAA6lEQYvKDH4g8/XS6AADn7sChY1Kxal+6BABAPQpCTIYMERk2LF0AgHP31OufyYzHDqZLAADUoyDE5IknRC66KF0AgHNX8/z7smbHh+kSAAD1KAgxOXlS5OtfF3nvvfQEADg3UzcdlGf3f5YuAQBQj4IQm6uuEpk3L10AgHMzYMXrcvDj4+kSAAD1KAixWbxYpHv3dAEAzk3vBXvk1Okz6RIAAPUoCLH55BORP/szkWPH0hMAwM07nxyXfjWvp0sAADREQYjRj38s8sgj6QIAuHn+wGG5feNb6RIAAA1REGJUVSVyyy3pAgC40aMXLdv+froEAEBDFIQY7dwp8p3vpAsA4GbOlndkyyufpEsAADREQYjVX/+1yGuvpQsAULwh9++X/R8eTZcAAGiIghCrPn1EpkxJFwCgeNct2ivHTpxOlwAAaIiCEKsHHxS55JJ0AQCK8+nRk3LjklfSJQAAzkZBiJUe5lQPd/r55+kJANC83x78XMavfzNdAgDgbBSEmLVvL1JTky4AQPM27v5IFj75XroEAMDZKAgxmzVL5Npr0wUAaJ6WAy0JAAA0hoIQszfeEPnGN9IFAGje6LUHZM+7X6RLAACcjYIQux/8QOS559IFAGia7qCsOyoDANAYCkLsBg4UGTYsXQCAxh358lRyiFMAAJpCQYjdE0+IXHxxugAAjXvt/aMy7IH96RIAAHYUhNidPFl3uNP3OCoJgKZt3vuJzNnyTroEAIAdBaEUXHWVyF13pQsAYLf0md/L2pcPpUsAANhREErB4sUi3bunCwBgN2nDW/Lim4fTJQAA7CgIpeDDD+s+ZqQfNwKARvSreV3e+eR4ugQAgB0FoVT8+McimzenCwDQ0IlTZ6T3gj3pEgAAjaMglIpRo0T69k0XAKChA4eOScWqfekSAACNoyCUipdeEvn+99MFAGjo2f2fydRNB9MlAAAaR0EoJd/8pshrr6ULAFBv5QsfJAEAoDkUhFJy7bUi06enCwBQT989eOr1z9IlAAAaR0EoJQ8+KHLJJekCANTT/Q90PwQAAJpDQSgln39ed7hT/QkAefQIRnokIwAAmkNBKDXt24vcf3+6AACSfPfBbfexfxIAoDgUhFKj+yDovggAkNJvT9ZvUQYAoBgUhFLzxht1RzMCgNTalw/J0md+ny4BANA0CkIp0u9DeO65dAFA1s3b+o5s2vNxugQAQNMoCKVo4MC6b1YGgFrDHtgvr71/NF0CAKBpFIRStHmzyMUXpwsAsu66RXvlyJen0iUAAJpGQXDwL7fOjyKX/HqufP7HX5GyPndYzyeEFJ/YfXr0pPRZvDddAgCgeRQEBzpZ+OKBUVHk5D/9rRy/tbv1PEJIcSmFgrDn3S9k9NoD6VLc8osbISQbgR8UBAf6H9U2iQgxx2/umpQE23mEkOJSCoPTxt0fyYJt76ZLcdPfx8/n7SaEZCQUBH8oCA5iKghHFg+SM//xP8gXq0ZYzyeENJ9SGJwWPvmerN/5UboUNwoCIdkKBcEfCoKDmAqC5vT3viXHxvzCeh4hpPmUwuA0fv2b8tuDn6dLcaMgEJKtUBD8oSA4iK0gfPnzn8iJbv/Leh4hpPmUwuB045JX5KMvTqRLcaMgEJKtUBD8oSA4iK0gHJ3cR05/88+t5xFCmk/sg5Me2vSahb9Ll+JHQSAkW6Eg+ENBcBBbQdCc+dqfypF5v7GeRwhpOrEPTvs/PCpD7t+fLsWPgkBItkJB8IeC4CDGgnDy0h/Kl9d3tJ5HCGk6sQ9OW175RGZufjtdih8FgZBshYLgDwXBQYwF4digXnLqH75rPY8Q0nRiH5yWbX9f1uz4MF2KHwWBkGyFguAPBcFBjAXhyH1Dk8Od6k/b+YSQxhP74HT7xrfk+QOH06X4URAIyVYoCP5QEBzEWBA0p/7u23JsyFXW8wghjSf2walfzety8OPj6VL8KAiEZCsUBH8oCA5iLQi6D4Lui2A7jxDSeGIenE6dPiNXV+9JfpYKCgIh2QoFwR8KgoNYC8LR2bcmRzOynUcIaTwxD076zsGAFa+nS6WBgkBItkJB8IeC4CDWgqDR70M4Ou1X1vMIIfbEPDg9u/+zZB+EUkJBICRboSD4Q0FwEHNBOFH+4+SblW3nEULsiXlwuv/FD5OjGJUSCgIh2QoFwR8KgoOYC8Kxkb3l1H//K+t5hBB7Yh6cZjx2ULa99mm6VBooCIRkKxQEfygIDmIuCF+sGlF3uNPFg+znE0LOSsyDU8Wqfck3KZcSCgIh2QoFwR8KgoOoC0JtTv7of8jxW7tbzyOEnJ2YB6feC/bIsROn06XSQEEgJFuhIPhDQXAQe0E4fnNXOfnPf2c9jxBydmIdnD44fEJuWvpqulQ6KAiEZCsUBH8oCA5iLwhHFg5IPmakHzeynU8IaZhYB6cX3zws49e/mS6VDgoCIdkKBcEfCoKD2AuC5vT3viXHqq61nkcIaZhYB6f1Oz+SxU+/ly6VDgoCIdkKBcEfCoKDUigIJ3r+i5zo9r+s5xFCGibWwWnBtndl4+6P0qXSQUEgJFuhIPhDQXBQCgXh6OQ+cvqv/sJ6HiGkYWIdnIY9sF/2vPtFulQ6KAiEZCsUBH8oCA5KoSBozlz4VTky7zfW8wgh9Yl1cOqzeK8cPnYqXSodFARCshUKgj8UBAelUhBOXvpDOX5DZ+t5hJD6xDg4aTG4btHedKm0UBAIyVYoCP5QEByUSkE4PqCnnPqH79Yt1wxLvmW58DKEkDgLgn60SD9iVIpKpSD0mvOydL/jKelS9bB0HvmAdKxcIT+tWCqX9b87eYz6U5f1dD2/85j10m3Kk8n1bLdHSKmGguAPBcFBqRSEo3feLPJH/05O/eP3kp/sk0CIPTEOTpv2fJzspFyKYi4IPWftkPJxG6XD0OVySd+7pPvIFfLLWZul4p7tMnbVThn/wG6ZumFfLrqsp+v5ernuo1bJT36zQC4fvEy6jH1Yes58yXo/hJRSKAj+UBAcxF4Qvrz60qQMyAW1v/a8nPynv7VenpCsJ8bBSQ9vuvblQ+lSaYmxIFwxbbt0HrlGLuu/SK6f/kgy8Z+75W2pfuJd58zf+nZy/RtmPprcXqcRq2tv/xnr/RJSCqEg+ENBcBB7QdDvPzjzH/7orILwZe921ssTkvXEODjpF6TpF6WVopgKgr7C37l2At9h8FIZsPBpmbP5Leuk/1yjJWPgomekc+Uy6ThsZe39vWhdD0JiDgXBHwqCg9gLgsZWEo4Nucp6WUKynhgHp5uWviq//+zLdKm0xFIQyidulnb975Zb5m1NXvW3TfBbKnr7t1VvS+6vfPyjtfe/66z1ISTWUBD8oSA4KIWCoNGdlOUP/yBXEI4sHGC9HCFZT2yD07ETp6X3gj3pUukJvyDsSt416DZihdz+0KvWCX1rRfdb+NnoVdKhsoadmUnJhILgDwXBQakUBI0pCWf+9CvW8wkh8RWE/R8elYpV+9Kl0hNyQdBJue6AfPXEta3+rkFT0f0cdD2unE1JIPGHguAPBcFBKRUEzfFflcmpv/u29TxCSHwF4anXP5MZjx1Ml0pPqAVBJ+M6Ke8zY5PXcmCi69F+0NLa9dphXV9CYgkFwR8KgoNYC8KhVaNl28IJMnvqVBkwdpZcN3yeXFFRLR37V8v//t+jk5+6rKfr+dOmTJMtd01Irme7vVJMU8+R/t55jrKZ2AanZdvfl5UvfJAulZ5QC4IepejaqRusk3Vf0XcSOg5bZV1fQmIJBcEfCoKDmArCwZqxMmfqNLl66Hy5rG+1dBlyj3QZ85CUT3pcut/xdHJoPD3qhYku6+l6fnK5oUvlktuqpdeQaplxxzQ5sHys9X5iDs8RaS4xDE6fHj2Z/kvk9o1vybP7P0uXSk+IBaHr5K3SpXLZOR+6tLWi72SUD18u5RM2W9ebkBhCQfCHguAghoLw0pJxUlE1W9r3WyBdRq1JJrW95u60/uE1n13J9cvGrE1ur9+Y2bL97vHW+40pPEek2MQwOFU9dECuWfi7ZN+D6xbtlXlb30lKwoFDx+TEqTPppUpDaAVBD2WqRw+avPYV6yTdd3THZV2/Hne+YF1/QkIPBcEfCoKDkAuCvnrdt3Zy2mHgIikb/2iLH8VCJ9DlEx6TzhWL5KaRs2XffVXW9Qg5PEfENTEMTpv3fmL9/6iFgYLQuimr2iA3ztpsnZyHklvnbZVOo9ZZ15+Q0ENB8IeC4CDUglAza7J06F8t5VUP1/5BtfYxsHdJ13EbkvtbcucU+Wy1fZ1CC88ROZfEMDgdPnZKrq7e0+D/oB7qVN9BKDVhFYRd0m7g4uRVetvEPJTM2PSGXNpv0Xm8S0qIv1AQ/KEgOAitIOjEU18R7zh4qfS483nrH1drRT+T33novdJn+Jygd9TlOSLnk1gGp9FrDzT4v7d+50fpOaUlpILQbco26Tl2tXVSHlqumrA22XfK9jgICTkUBH8oCA5CKgg64bymcq50Gb6y9o/I3zdndh39QLIe768cY11Pn+E5IuebWAYnLQTm/9v49W+mp5aeti4I93foI+N/Pcd6Xpcx62TgomesE/LQMnjpc9JpxBrr4yAk5FAQ/KEgOAilIOhEM5n4jn6w9g/I/9fq63r0rJgv764IZwLMc0RaIrEMTh99cSL5f9Zn8d7k36WqrQvCnu/9Y+0oeYEc+Nb3ZeY14+TqvP2WOg1fJSNqXrJOyENL1erdcvmQ5Q0eGyExhILgDwXBQSgFQY/A03nkA9Y/Jl/pMupBuWXUHOv6+gjPEWmJxDQ4jXzwDXn+wOF0qTT5KggmH134F7K4xwC5ZsZz0n7QPcEevagwup+E7odge4yEhBwKgj8UBAchFIS1cydJx4rFAe5wtks6DV4iy2febl3vtgzPEWmpxDQ4vfPJ8fRfpau5gtB75otyy7iNuVRUrpTRfRfmMuP6iTLn38bkUlN2k6zsdGMS/TjRlh+V5fLsDy+TI1/5kwYFweTT//T15EsmQ99BOT9tXa4IaYlQEPyhIDjwXRD0MJ16ZJyfTX/O+ofkO7pTrq7fa8v8Hd6T54i0ZBicztEnn4i88UZ9nntOZPPm+ixeLHLXXXWZN09k2LD69O0r0rt3fTp2FPnnf07y0je/J+9842/kg6/9ZS75E/dTf/CHDc47+JffTd4FMNFJf34J0FJgCoKWhfzyMLXPlOSjRYW3r9e7cdIW3kEgpA3CNtgfCoID3wVh5tRpUjYm7ONZdxv3sIyfNN26/m0RniPSkol+cPrww4YT9SeeqJ+kP/JI/SRdM316w4n6Lbc0nKi3b5+bqCf567+uzze+0WAinST//O/XTrTzr1tW1vC2Bw5seN/561VTk1vnW6/oJwOGr27wLkH+fgEtHS0D5vE8//c/kX6j1ubO030QRq34rXVCHlrYB4HEGgqCP7VbPhTLZ0HQw3V2HlCdvAJt+yMKJT1n7ZDL+1XLx/e3/WE9eY5IS6fFBqeDB+sn6a+9Vj9J16xf33BCPGVKw8lynz4NJ9P5E+2LL244Ef/61+sn6Cb555/PRP3eexuu90svNSwfx1r/exf092H7m2qtaEHQdx5GDlh81nnJUYwWP2udkIeWofe+wFGMSJShIPhDQXDgsyA8tmCClFUus/4BhZZuw2tk9ZzJ1sfRmuE5Is3lyLzf5HL0zpvl2Jhf1GdQLzl+c9dcvrz6Ull4cef6yfK119ZPpK+6quFE+6KLGk7Ev/rVsyfq3/xm/fnf+U7D6+vHaCKaqPvS1gXhtjHrradruk7eKr2q1lgn5KHlXyeulbIJj1kfByEhh4LgDwXBgc+CMHriTCmPZAOvX8gzpGqW9XGcb3Qid+ri/0eO3nHjWefxHEWSmmENJ+q1v8v8ifrxAT0bTtR//hM50fNf6vKzf5aTP/n7+vzof8ipH/xNLqf/6i/kzH/5s1zkj/7dWRP1M1/709z5p//rf25w/VP/+L0Gt3/fD9s1nKjr5+XNRF0/R58/UdfP2edP1D//PN1yoKW0dUFoOnXfpDx9437rpDyUzHz0QN03KbfiR7EIaa1QEPyhIDjwWRBuGDkv+eZO2x9QaLli2jPSu3Ke9XGcb3QCaSZ6hUWB58gtR+4b2nCiPrlPw4n6rd3rJ+q/KqufpGvKf9xgIq2/i/yJ9ulv/nnDiXreBN3kzIVfLXqirveXf/+6Prl1q13P/PXWx5H/uPRx2h5/MWFwCktYBWG3dBn7sNw853HrxDyU3DZ/m3Qcpd8HY38MhIQctsH+1I7UKJbPgtB1ULhH5ilMcqSeftXWx3G+0Qlg4UTTFIVYn6Mjiwc1mNAeq7q2fsI7snf9RFhzQ+cGE+UTnX/UYCJ96h++22CinT9J1wl54XOnyZ+oa/Kvr7eXf/t6f/n3r+uTv3659a7N0QnXN3hcR5YOPuv3GXoYnMISWkHoOfMladf/brlj/evWybnv6Lsbun6xbBcJKQzbYH9qZwgols+CoPcd+s63+Uk+u22ZjLZm9D5jfo6YqIcXBqewhFYQNOUTN0v58OUyf+vb1km6r+j6XDF6lZSN22Rdb0JiCNtgf2pnJiiWz4LAOwh10Qlv/qRac/pv/muygynPEWnpMDiFJcSCoOk4YpVcP/0R60TdV/SjTx0qa6zrS0gsYRvsDwXBgc+CUPf5+ietf0Chpa32QTDFwJzHc0RaOgxOYQm1IFw5e4e0H7RU+szYZJ2st3V0vwNdHz2ksm19CYklbIP9oSA48FkQ9Ag9sRymruvkLa16FKPCYmDCc0RaOgxOYQm1IGi0JHQYutx7SdD7pxyQUgnbYH8oCA58FoQN8ydKeeV91j+g0NJtRI2snN1Kx/ivGWY/vTY8R6Slw+AUlpALgkYPJaolode4NW1++NMZm95Ivu9gQacb5YOv/aXs/c4/yG9/8OPky97Wtvs3WVl7+px/GyNT+0yR0X0XJt8KfRPfjUACD9tgfygIDnwWhPpvCX7J+kcUSvRVNP2W4EOrfH6TMs8RaZkwOIUl9IJQl11SPn6TXNZ/kfRf+JR1Mt/SGbRke3J/ZVUbkvu/cdKW5EvetAjcfuO0pBhoQdCioIVBi4MWCC0Sx/74K3L4qxcm/9ZvjX7xf/6/yWXW/PRaqSm7Kbmu3obelt6m3rb9cbddqm6bL7eM22g9j5RW2Ab7Q0Fw4LMgaKZOmS5dqx6y/hGFkm7jNkjVxOnW9W+L8ByRlgyDU1jiKAh1SQ5EUFmTHOFo8NLnZO6Wlj3KkR6lqHLZC9JtxAq5fMhy6XHn89b1KDY64R4wfHVSBGZeM04WXFWZlIqN/18v2XZxp6Q8HPjW95MiceoP/lA+/U9fl9//l/87Of35v/9JUiru79BHlnW9NSkVk26amdyW3m6fFv5+ms3/1F1O/Ps/TgpM74iOXEfcwzbYHwqCA98F4cDysdKhf3XtQPCC9Q/Jd/SVe12/3fdUWde/LcJzRFoyDE5hiakgmOiBEzoOWyXtBtwtv5q9WW5/6FXrhL/Y6PV/PXdrcnsdh6309uWQOjHXyf+wQUuTV/S1FCzuMSApFVoWnv3hZUl5eOcbf5OUCT2wxEcX/kWyrKfr+Xo5vfzS7n2T64//9RwZOWBxcrvXTX3Ger+ap/7x8uT2NFpS9Hq2y5H4wzbYHwqCA98FQVMza7J0qlhS+4ez66w/JL/ZJWVDl8qi6VOs692W4TkiLRUGp7DEWBBM9EWLzqPXJTsQX9pvofQav0Zum/+EjF65U6pW75apG/bJzEcPJCVAf+qynq7n963ellxeP0bUbuBi6TRq3Xm/Y+Aj+k6CTv71nQV9h0FLgb4LoB9n0rKgH28yH3068pU/SQqA/vvgX343KRVaDPTdAz3NFAQTfRdDb9t2vyTesA32h4LgIISCoLlt9GzpHNhX55dXrZdfjphtXV8f4TkiLREGp7DEXBDyo0cY6jp5a1IYOlaukMsHL5P2A5ckj89El/X0jpU1SSHQI59l8chEuiO1+ejTjOsnyryrR+TKQ2He+/NvyZU33FFbpO6Wn1YsTZ7bziMfkM5j1ifv5OhO5Lb7IOGGbbA/FAQH+h/VNolo67y7YoxcUVFdO7iEMQHuOm5Dsj4Ha8Za19dHeI5IS4TBKSz6+7D9fZHSj5aj8nEbk6NEffC1/9agGOz62x/L3QNmyrR1rybvvGjGP7Bbxq7aKRX3bJdfztos3Uetkp/8ZkFSurqMfTj4g1mQurAN9oeC4CCUgqDRCfA1lXOli+cJsN5/z4r5QU58eY7I+YbBKSwUhOzlimnbpfPIuo9X6bdV68RfS4Hu1/B41z6yaOnTZ+2n0Vh0x269/g0zH01ur9OI1cmXVtrul4QRtsH+UBAchFQQNHqYzGQCXLm8zV8NSV7NGb4iuf/3V46xrl8I4Tki5xMGp7BQELIT3V53rp3Adxi8VAYsfFrmbH4rN9G/v2KmLNj8ZoPJv2v0qFIDFz0jnSuXJTt761GnbOtB/IZtsD8UBAehFQSNHvv/rulT5af9FkjXCZusf2AtnW6TNif3N2vq1OT+besVUniOyLmGwSksFIRspHziZmnX/265Zd7W5FV/2wS/paK3f1v1tuT+ysc/Wnv/oR3cItthG+wPBcFBiAXBZN99VXL98LnSefBiKZ/0uPSau9P6x3bu2ZXsVFc2ZIn8onKu7L03vo/L8BwR1zA4hYWCUOrZlbxroN/tcL6Hg3WN7rfws9Grku+uYGfmcMI22B8KgoOQC4LJlrsmyM2j5iavXpeNfei8D4Wn1y+veji5vV+NnCOPLZhgvd+YwnNEig2DU1goCKUbnZTrDshXT1zb6u8aNBXdz0HX48rZlIQQwjbYHwqCgxgKgslry6pk/KQZ0n1QtVzWt1q6Dr9PulRtlO53PJXslKWft7xydt0h8/SnLuvpen5Z1SPJ5dvrBHrgfBk78c6SfDWc54g0FwansFAQSjM6GddJeZ8Zm7yWAxNdD/2+CrP9J/7CNtgfCoKDmApCfvToORvmT5SJk6bLdcPnSa8h1cmkVh+PiS7r6Xq+TpofmjcpU0fd4TkitujvHeHQ34dtEkHijh6l6NqpG6yTdV/RdxL0G7Bt60vaLmyD/aEgOND/qLZJBCGkNMPgFBYKQulF99vqUrksOaqQbaLuK/pORvnw5VI+YbN1vUnbhG2wPxQEBxQEQrIVBqewUBBKK3ooUz160OS1r1gn6b6jOy7r+vW48wXr+pPWD9tgfygIDigIhGQrDE5hoSCUVsqqNsiNszZbJ+eh5NZ5W6XTqHXW9SetH7bB/lAQHFAQCMlWGJzCQkEopeySdgMXJ6/S2ybmoWTGpjfk0n6LWuGw2KSYsA32h4LggIJASLbC4BQWCkLppNuUbdJz7GrrpDy0XDVhbfLdObbHQVo3bIP9oSA4oCAQkq0wOIWFglA66TJmnQxc9Ix1Qh5aBi99TjqNWGN9HKR1wzbYHwqCAwoCIdkKg1NYKAilk07DV8mImpesE/LQUrV6t1w+ZLn1cZDWDdtgfygIDigIhGQrDE5hoSCUTtoPuifYoxcVRveT0P0QbI+DtG7YBvtDQXBAQSAkW2FwCgsFoXSiv8vQd1DOD//3/IRtsD8UBAf6H9U2iSCElGYYnMLCJK10wjsIpJiwDfaHguCAgkBItsLgFBYKQulE90EYteK31gl5aGEfBH9hG+wPBcEBBYGQbIXBKSwUhNJJchSjxc9aJ+ShZei9L3AUI09hG+wPBcEBBYGQbIXBKSwUhNJJ18lbpVfVGuuEPLT868S1UjbhMevjIK0btsH+UBAcUBAIyVYYnMJCQSil1H2T8vSN+62T8lAy89EDdd+kPOdly2MgrR22wf5QEBxQEAjJVhicwkJBKK10Gfuw3DzncevEPJTcNn+bdBz1oHX9SeuHbbA/FAQHFARCshUGp7BQEEorPWe+JO363y13rH/dOjn3HX13Q9fvZ9Ofs64/af2wDfaHguCAgkBItsLgFBYKQumlfOJmKR++XOZvfds6SfcVXZ8rRq+SsnGbrOtN2iZsg/2hIDigIBCSrTA4hYWCUJrpNOJ++T/TH7FO1H3l5rlbpEPlCuv6krYL22B/KAgOKAiEZCsMTmGhIJRmrpy9Q346aKn0mbHJOllv69xWvS1Zn56zdljXl7Rd2Ab7Q0FwQEEgJFthcAoLBaF0oyWhw9Dl3kuC3n97ykEwYRvsDwXBAQWBkGyFwSksFITSjh5KVEtCr3Fr2vzwpzM2vZF834He/5WzOaRpKGEb7A8FwQEFgZBshcEpLBSELGSXlI/fJJf1XyT9Fz5lncy3dAYt2Z7cX1nVhuT+7etFfIRtsD8UBAcUBEKyFQansFAQspOeM1+UDpU1yRGOBi99TuZuadmjHOlRiiqXvSDdRq6Qy4cslx53Pm9dD+I3bIP9oSA4oCAQkq0wOIWFgpC9dJvypHQavkraD7hbfjX7cbn9oVetE/5io9e/Zd5WaVd7ex2Hray9/W3W+yVhhG2wPxQEBxQEQrIVBqewUBCymx53viBdRq+Tn1bcK5f2Wyg/H79Gbpv/hIxeuVOqVu+WqRv2ycxHDyQlQH/qsp6u5/etri0BtZfXjxG1H7hEOtfeDu8YxBG2wf5QEBxQEAjJVhicwkJBIBo9wlDXyVuTiX7HyhVy+eBlycRf/3+Y6LKe3rGyRjqNWld7+S0cmSjCsA32h4LgQP+j2iYRhJDSDINTWPT3YZtEEEJKM2yD/aEgOKAgEJKtMDiFhYJASLbCNtgfCoIDCgIh2QqDU1goCIRkK2yD/aEgOKAgEJKtMDiFhYJASLbCNtgfCoIDCgIh2QqDU1goCIRkK2yD/aEgOKAgEJKtMDiFhYJASLbCNtgfCoIDCgIh2QqDU1goCIRkK2yD/aEgOIi1IBxaNVq2LZwgs6dOlQFjZ8l1w+fJFRXV0rF/dfKY9Kcu6+l6/rQp02TLXROS69luj5CshMEpLKVSEHrNeVm63/GUdKl6WDqPfCA5lv9PK5bKZf3vTh6j/tRlPV3P7zxmffKNwno92+0RUqphG+wPBcGB/ke1TSJCzMGasTJn6jS5emjtYNO3WroMuUe6jHlIyic9XjswPS1XTHtGes58MRdd1tP1/ORyQ5fKJbdVS68h1TLjjmlyYPlY6/0QUsphcApLzAVBv6SrfNxG6TB0uVzS9y7pPnKF/HLWZqm4Z7uMXbVTxj9Q923AJrqsp+v5ernuo1bJT36zIPnyry5jH67dbr9kvR9CSilsg/2hIDiIoSC8tGScVFTNlvb9FkiXUWuSiX+vuTutf3jNZ1dy/bIxa5Pb6zdmtmy/e7z1fgkpxTA4hSXGgnDFtO3SeeQauaz/Irl++iPJxH/ulrel+ol3nTN/69vJ9W+Y+Whye51GrE620bb7JaQUwjbYHwqCg5ALgr7C37d2At9h4CIpG/9oi78VrSWjfMJj0rlikdw0crbsu6/Kuh6ElFIYnMISU0HQV/g7107gOwxeKgMWPi1zNr9lnfSfa7RkDFz0jHSuXCYdh61M3gm2rQchMYdtsD8UBAehFoSaWZOlQ/9qKa96uPYPatdZf2Atm13SddyG5P6W3DlFPlttXydCSiEMTmGJpSCUT9ws7frfLbfM25q86m+b4LdU9PZvq96W3F/5+Edr77+1xwBC2i5sg/2hIDgIrSDo5FzfNeg4eKn0uPN56x9Xa0Vfreo89F7pM3wOOzOTkg2DU1jCLwi7kncNuo1YIbc/9Kp1Qt9a0f0WfjZ6lXSorGFnZlIyYRvsDwXBQUgFQSfl11TOlS7DV9b+Efl7xajr6AeS9Xh/5RjrehIScxicwhJyQdBJue6AfPXEta3+rkFT0f0cdD2unE1JIPGHbbA/FAQHoRQEnYwn5WD0g7V/QP7fTtb16FkxX95dQUkgpRUGp7CEWhB0Mq6T8j4zNnktBya6Hu0HLa1drx3W9SUklrAN9oeC4CCUgqBHKdJjY9v+mHyly6gH5ZZRc6zrS0isYXAKS6gFQY9SdO3UDdbJuq/oOwkdh62yri8hsYRtsD8UBAchFIS1cydJx4rF53Ho0tbKLuk0eIksn3m7db0JiTEMTmEJsSB0nbxVulQuO+dDl7ZW9J2M8uHLpXzCZut6ExJD2Ab7Q0Fw4Lsg6KFM9ehBP5v+nPUPyXd0x2Vdv9eWcQhUUhphcApLaAVBD2WqRw+avPYV6yTdd3THZV2/Hne+YF1/QkIP22B/KAgOfBeEmVOnSdmYddY/olDSbdzDMn7SdOv6ExJbGJzCElpBKKvaIDfO2mydnIeSW+dtlU6jwh43CGksbIP9oSA48FkQ9JCmnQdUB/9lOD1n7ZDL+1XLx/dz6FMSfxicwhJWQdgl7QYuTl6lt03MQ8mMTW/Ipf0WBfixVEKaD9tgfygIDnwWhMcWTJCyymXWP6DQ0m14jayeM9n6OAiJKQxOYQmpIHSbsk16jl1tnZSHlqsmrJXySY9bHwchIYdtsD8UBAc+C8LoiTOlfMJj1j+g0KID0ZCqWdbHQUhMYXAKi4+CsP6Sq2VlpxvluqnPNDi9y5h1MnDRM9YJeWgZvPQ56TRiTYP1JySGsA32h4LgwGdBuGHkvOQVK9sfUGi5Ytoz0rtynvVxEBJTGJzC4qMgbPlRWe1IeYEc+cqfNCgKnYavkhE1L1kn5KGlavVuuXzI8rMeGyGhh22wPxQEBz4LQtdB4R69qDDJ0Yz6VVsfByExhcEpLD4LgokpCt1unRfs0YsKo/tJ6H4ItsdHSMhhG+wPBcGBz4Kg9x36Dsr5WXhx5waDKiGElFI+/b++KvdOj2MfBI2PckXI+YaC4E/tlg7F8lkQeAeBkLYPg1NYfExyC99BOPUHf5ic9os+t/MOAiGtHLbB/lAQHPgsCHX7IDxp/QMKLeyDQEolDE5h8VkQTDG4bcz65HTdB2HUit9aJ+ShhX0QSKxhG+wPBcGBz4KgRzEqi+QoRl0nb+EoRqQkwuAUFh8FYfM/dW9QDEySoxgtftY6IQ8tQ+99gaMYkSjDNtgfCoIDnwVhw/yJUl55n/UPKLR0G1EjK2fzPQgk/jA4hcVHQejdyL5fXSdvlV5Va6wT8tDyrxPXRvMCEyH5YRvsDwXBgc+CUP9Nyi9Z/4hCyZWz675J+dAqvkmZxB8Gp7D4KAiNp+6blKdv3G+dlIeSmY8eqPsm5TkvWx4DIWGHbbA/FAQHPguCZuqU6dK16iHrH1Eo6TZug1RNnG5df0JiC4NTWMIqCLuly9iH5eY5j1sn5qHktvnbpOOoB63rT0joYRvsDwXBge+CcGD5WOnQv1p63PmC9Q/Jd/TdDV2/3fdUWdefkNjC4BSW0AqCbvPa9b9b7lj/unVy7jv67oauXyxHwCOkMGyD/aEgOPBdEDQ1syZLp8FLav9wdp31h+Q3u6Rs6FJZNH2Kdb0JiTEMTmEJrSBoyidulvLhy2X+1retk3Rf0fW5YvQqKRu3ybrehMQQtsH+UBAchFAQNL8ZM1u6BPaWsX706ZcjZlvXl5BYw+AUlhALgqbjiFVy/fRHrBN1X9GPPnWorLGuLyGxhG2wPxQEB6EUhHdXjJGeFfOly+gwSoLud6Drc7BmrHV9CYk1DE5hCbUg6MEZ2g9aKn1mbLJO1ts6ut+Brk/PWTus60tILGEb7A8FwUEoBUGjJeGayrneS4LeP+WAlGoYnMISakHQaEnoMHS595Kg9085IKUStsH+UBAchFQQNHoo0aQkVC5v88Of6uBTPnxFcv/vrxxjXT9CYg+DU1hCLggaPZSoloRe49a0+eFPZ2x6I/m+A73/K2dzSFNSGmEb7A8FwUFoBUGj349w1/Sp8tN+C6TrhLbZGa3bpM3J/c2aOjW5f9t6EVIKYXAKS+gFoS67pHz8Jrms/yLpv/Ap62S+pTNoyfbk/sqqNiT3b18vQuIL22B/KAgOQiwIJvvuq5Lrh8+VzoMXS/mkx6XX3J3WP7Zzz67km0PLhyyRX1TOlb338pEiUvphcApLHAWhLj1nvpjsJKxHOBq89DmZu6Vlj3KkRymqXPaCdBuxQi4fslx63Pm8dT0IiTlsg/2hIDgIuSCYbLlrgvx61JzkFf7ysQ+d96Ch1+9atV4ur729m0bOkccWTLDeLyGlGAansMRUEEy6TXlSOg5bJe0G3C2/mr1Zbn/oVeuEv9jo9X89d2tyex2Hray9/W3W+yWkFMI22B8KgoMYCoLJa8uqZOKk6fKzimpp17daug2/T7pUbZTudzwlV0x7Jnl1S3eq0z9A/anLerqeX1b1SHL59vqxpYHzZXzt7fCOAcliGJzCEmNBMNEvuOw8el2yA/Gl/RZKr/Fr5Lb5T8jolTulavVumbphn8x89EBSAvSnLuvpen7f6m3J5fVjRO0GLpZOo9bxjgHJRNgG+0NBcBBTQciPHmFow/yJSWG4bvg8+fmQ+VJWO/HXx2Oiy3q6nj9+0gx5aN4kjkxEMh8Gp7Do78M2iYgtepAH/cimFoaOlSvk8sHLpP3AJQ22ybqsp3esrEkKQdfJWzgyEclc2Ab7Q0FwoP9RbZMIQkhphsEpLPr7sE0iCCGlGbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHFAQCMlWGJzCQkEgJFthG+wPBcEBBYGQbIXBKSwUBEKyFbbB/lAQHOh/VEJItoJw6O/DNokghJRm2Ab7Q0EAAEQhv7gRQrIR+EFBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkENBAAAAAJBDQQAAAACQQ0EAAAAAkBL5/wFtF3cnBSEEfQAAAABJRU5ErkJggg==",alt:"img"}})]),t._v(" "),s("p",[t._v("G1 çš„å¾ˆå¤šå¼€é”€éƒ½æ˜¯æºè‡ª Remembered Setï¼Œä¾‹å¦‚ï¼Œå®ƒé€šå¸¸çº¦å ç”¨ Heap å¤§å°çš„ 20% æˆ–æ›´é«˜ï¼Œè¿™å¯æ˜¯éå¸¸å¯è§‚çš„æ¯”ä¾‹ã€‚å¹¶ä¸”ï¼Œæˆ‘ä»¬è¿›è¡Œå¯¹è±¡å¤åˆ¶çš„æ—¶å€™ï¼Œå› ä¸ºéœ€è¦æ‰«æå’Œæ›´æ”¹ Card Table çš„ä¿¡æ¯ï¼Œè¿™ä¸ªé€Ÿåº¦å½±å“äº†å¤åˆ¶çš„é€Ÿåº¦ï¼Œè¿›è€Œå½±å“æš‚åœæ—¶é—´ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-java-11-çš„-zgc-å’Œ-java12-çš„-shenandoah-äº†è§£è¿‡å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-java-11-çš„-zgc-å’Œ-java12-çš„-shenandoah-äº†è§£è¿‡å—"}},[t._v("#")]),t._v(" ğŸ¯ Java 11 çš„ ZGC å’Œ Java12 çš„ Shenandoah äº†è§£è¿‡å—")]),t._v(" "),s("p",[t._v("ZGC å³ Z Garbage Collectorï¼ˆZ åƒåœ¾æ”¶é›†å™¨ï¼ŒZ æœ‰ Zero çš„æ„æ€ï¼Œä¸»è¦ä½œè€…æ˜¯ Oracle çš„ Per Lidenï¼‰ï¼Œè¿™æ˜¯ä¸€æ¬¾ä½åœé¡¿ã€é«˜å¹¶å‘ï¼ŒåŸºäºå°å †å—ï¼ˆregionï¼‰ã€ä¸åˆ†ä»£çš„å¢é‡å‹ç¼©å¼åƒåœ¾æ”¶é›†å™¨ï¼Œå¹³å‡ GC è€—æ—¶ä¸åˆ° 2 æ¯«ç§’ï¼Œæœ€åæƒ…å†µä¸‹çš„æš‚åœæ—¶é—´ä¹Ÿä¸è¶…è¿‡ 10 æ¯«ç§’ã€‚")]),t._v(" "),s("p",[t._v("åƒ G1 å’Œ ZGC ä¹‹ç±»çš„ç°ä»£ GC ç®—æ³•ï¼Œåªè¦ç©ºé—²çš„å †å†…å­˜è¶³å¤Ÿå¤šï¼ŒåŸºæœ¬ä¸Šä¸è§¦å‘ FullGCã€‚")]),t._v(" "),s("p",[t._v("æ‰€ä»¥å¾ˆå¤šæ—¶å€™ï¼Œåªè¦æ¡ä»¶å…è®¸ï¼ŒåŠ å†…å­˜æ‰æ˜¯æœ€æœ‰æ•ˆçš„è§£å†³åŠæ³•ã€‚")]),t._v(" "),s("p",[t._v("æ—¢ç„¶ä½å»¶è¿Ÿæ˜¯ ZGC çš„æ ¸å¿ƒçœ‹ç‚¹ï¼Œè€Œ JVM ä½å»¶è¿Ÿçš„å…³é”®æ˜¯ GC æš‚åœæ—¶é—´ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å“ªäº›æ–¹æ³•å¯ä»¥å‡å°‘ GC æš‚åœæ—¶é—´ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨å¤šçº¿ç¨‹â€œå¹¶è¡Œâ€æ¸…ç†å †å†…å­˜ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU çš„èµ„æºï¼›")]),t._v(" "),s("li",[t._v("ä½¿ç”¨â€œåˆ†é˜¶æ®µâ€çš„æ–¹å¼è¿è¡Œ GC ä»»åŠ¡ï¼ŒæŠŠæš‚åœæ—¶é—´æ‰“æ•£ï¼›")]),t._v(" "),s("li",[t._v("ä½¿ç”¨â€œå¢é‡â€æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œæ¯æ¬¡ GC åªå¤„ç†ä¸€éƒ¨åˆ†å †å†…å­˜ï¼ˆå°å †å—ï¼Œregionï¼‰ï¼›")]),t._v(" "),s("li",[t._v("è®© GC ä¸ä¸šåŠ¡çº¿ç¨‹â€œå¹¶å‘â€æ‰§è¡Œï¼Œä¾‹å¦‚å¢åŠ å¹¶å‘æ ‡è®°ï¼Œå¹¶å‘æ¸…é™¤ç­‰é˜¶æ®µï¼Œä»è€ŒæŠŠæš‚åœæ—¶é—´æ§åˆ¶åœ¨éå¸¸çŸ­çš„èŒƒå›´å†…ï¼ˆç›®å‰æ¥è¯´è¿˜æ˜¯å¿…é¡»ä½¿ç”¨å°‘é‡çš„ STW æš‚åœï¼Œæ¯”å¦‚æ ¹å¯¹è±¡çš„æ‰«æï¼Œæœ€ç»ˆæ ‡è®°ç­‰é˜¶æ®µï¼‰ï¼›")]),t._v(" "),s("li",[t._v("å®Œå…¨ä¸è¿›è¡Œå †å†…å­˜æ•´ç†ï¼Œæ¯”å¦‚ Golang çš„ GC å°±é‡‡ç”¨è¿™ç§æ–¹å¼ï¼ˆé¢˜å¤–è¯ï¼‰ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-zgc-åœ¨-g1-åŸºç¡€ä¸Šåšäº†å“ªäº›æ”¹è¿›"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zgc-åœ¨-g1-åŸºç¡€ä¸Šåšäº†å“ªäº›æ”¹è¿›"}},[t._v("#")]),t._v(" ğŸ¯ ZGC åœ¨ G1 åŸºç¡€ä¸Šåšäº†å“ªäº›æ”¹è¿›ï¼Ÿ")]),t._v(" "),s("p",[t._v("åœ¨ G1 çš„åŸºç¡€ä¸Šï¼Œå®ƒåšäº†å¦‚ä¸‹ 7 ç‚¹æ”¹è¿›ï¼ˆJDK 11 å¼€å§‹å¼•å…¥ï¼‰")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("åŠ¨æ€è°ƒæ•´å¤§å°çš„ Region")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img.starfish.ink/jvm/ZGC.png",alt:"ZGC"}})])]),t._v(" "),s("li",[s("p",[t._v("ä¸åˆ†ä»£ï¼Œå¹²æ‰äº† RSets")]),t._v(" "),s("p",[t._v("G1 ä¸­æ¯ä¸ª Region éœ€è¦å€ŸåŠ©é¢å¤–çš„ RSets æ¥è®°å½•â€œè°å¼•ç”¨äº†æˆ‘â€ï¼Œå ç”¨äº†é¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œæ¯æ¬¡å¯¹è±¡ç§»åŠ¨æ—¶ï¼ŒRSets ä¹Ÿéœ€è¦æ›´æ–°ï¼Œä¼šäº§ç”Ÿå¼€é”€ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("å¸¦é¢œè‰²çš„æŒ‡é’ˆ Colored Pointer")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img.starfish.ink/jvm/cc38abc5ba683cf300bdd6e89f426212.png",alt:""}})]),t._v(" "),s("p",[t._v("è¿™é‡Œçš„æŒ‡é’ˆç±»ä¼¼ Java ä¸­çš„å¼•ç”¨ï¼Œæ„ä¸ºå¯¹æŸå—è™šæ‹Ÿå†…å­˜çš„å¼•ç”¨ã€‚ZGC é‡‡ç”¨äº†64ä½æŒ‡é’ˆï¼ˆæ³¨ï¼šç›®å‰åªæ”¯æŒ linux 64 ä½ç³»ç»Ÿï¼‰ï¼Œå°† 42-45 è¿™ 4 ä¸ª bit ä½ç½®èµ‹äºˆäº†ä¸åŒå«ä¹‰ï¼Œå³æ‰€è°“çš„é¢œè‰²æ ‡å¿—ä½ï¼Œä¹Ÿæ¢ä¸ºæŒ‡é’ˆçš„ metadataã€‚")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("finalizable ä½ï¼šä»… finalizerï¼ˆç±»æ¯” C++ ä¸­çš„ææ„å‡½æ•°ï¼‰å¯è®¿é—®ï¼›")])]),t._v(" "),s("li",[s("p",[t._v("remap ä½ï¼šæŒ‡å‘å¯¹è±¡å½“å‰ï¼ˆæœ€æ–°ï¼‰çš„å†…å­˜åœ°å€ï¼Œå‚è€ƒä¸‹é¢æåˆ°çš„relocationï¼›")])]),t._v(" "),s("li",[s("p",[t._v("marked0 && marked1 ä½ï¼šç”¨äºæ ‡å¿—å¯è¾¾å¯¹è±¡ã€‚")])])]),t._v(" "),s("p",[t._v("è¿™ 4 ä¸ªæ ‡å¿—ä½ï¼ŒåŒä¸€æ—¶åˆ»åªä¼šæœ‰ 1 ä¸ªä½ç½®æ˜¯ 1ã€‚æ¯å½“æŒ‡é’ˆå¯¹åº”çš„å†…å­˜æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ¯”å¦‚å†…å­˜è¢«ç§»åŠ¨ï¼Œé¢œè‰²ä¼šå‘ç”Ÿå˜åŒ–ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("è¯»å±éšœ Load Barrier")]),t._v(" "),s("p",[t._v("ä¼ ç»Ÿ GC åšæ ‡è®°æ—¶ï¼Œä¸ºäº†é˜²æ­¢å…¶ä»–çº¿ç¨‹åœ¨æ ‡è®°æœŸé—´ä¿®æ”¹å¯¹è±¡ï¼Œé€šå¸¸ä¼šç®€å•çš„ STWã€‚è€Œ ZGC æœ‰äº† Colored Pointer åï¼Œå¼•å…¥äº†æ‰€è°“çš„â€œè¯»å±éšœâ€ã€‚")]),t._v(" "),s("p",[t._v("å½“æŒ‡é’ˆå¼•ç”¨çš„å†…å­˜æ­£è¢«ç§»åŠ¨æ—¶ï¼ŒæŒ‡é’ˆä¸Šçš„é¢œè‰²å°±ä¼šå˜åŒ–ï¼ŒZGC ä¼šå…ˆæŠŠæŒ‡é’ˆæ›´æ–°æˆæœ€æ–°çŠ¶æ€ï¼Œç„¶åå†è¿”å›ï¼ˆä½ å¯ä»¥å›æƒ³ä¸‹ Java ä¸­çš„ volatile å…³é”®å­—ï¼Œæœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼‰ã€‚è¿™æ ·ä»…è¯»å–è¯¥æŒ‡é’ˆæ—¶ï¼Œå¯èƒ½ä¼šç•¥æœ‰å¼€é”€ï¼Œè€Œä¸ç”¨å°†æ•´ä¸ª heap STWã€‚")])]),t._v(" "),s("li",[s("p",[t._v("é‡å®šä½ Relocation")]),t._v(" "),s("p",[t._v("å¦‚ä¸‹å›¾ï¼Œåœ¨æ ‡è®°è¿‡ç¨‹ä¸­ï¼Œå…ˆä» Roots å¯¹è±¡æ‰¾åˆ°äº†ç›´æ¥å…³è”çš„ä¸‹çº§å¯¹è±¡ 1ï¼Œ2ï¼Œ4ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M01/56/2A/Cgp9HWEspqWAAHS6AAAcoge7Pv8625.jpg",alt:"39.jpg"}})]),t._v(" "),s("p",[t._v("ç„¶åç»§ç»­å‘ä¸‹å±‚æ ‡è®°ï¼Œæ‰¾åˆ°äº† 5ï¼Œ8 å¯¹è±¡ï¼Œ æ­¤æ—¶å·²ç»å¯ä»¥åˆ¤å®š 3ï¼Œ6ï¼Œ7 ä¸ºåƒåœ¾å¯¹è±¡ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M01/56/2A/Cgp9HWEsprCAZrtCAAAeqKPoHXw488.jpg",alt:"40.jpg"}})]),t._v(" "),s("p",[t._v("å¦‚æœæŒ‰å¸¸è§„æ€è·¯ï¼Œä¸€èˆ¬ä¼šå°† 8 ä»æœ€å³ä¾§çš„ Regionï¼Œç§»åŠ¨æˆ–å¤åˆ¶åˆ°ä¸­é—´çš„ Regionï¼Œç„¶åå†å°†ä¸­é—´ Region çš„ 3 å¹²æ‰ï¼Œæœ€åå†å¯¹ä¸­é—´ Region åšå‹ç¼© compact æ•´ç†ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M01/56/2A/Cgp9HWEspr6AMxziAAAeYmBBjoU744.jpg",alt:"41.jpg"}})]),t._v(" "),s("p",[t._v("ä½† ZGC åšå¾—æ›´é«˜æ˜ï¼Œå®ƒç›´æ¥å°† 4ï¼Œ5 å¤åˆ¶åˆ°äº†ä¸€ä¸ªç©ºçš„æ–° Region å°±å®Œäº‹äº†ï¼Œç„¶åä¸­é—´çš„ 2 ä¸ª Region ç›´æ¥åºŸå¼ƒï¼Œæˆ–ç†è§£ä¸ºâ€œé‡Šæ”¾â€ï¼Œä½œä¸ºä¸‹æ¬¡å›æ”¶çš„â€œæ–°â€ Regionã€‚è¿™æ ·çš„å¥½å¤„æ˜¯é¿å…äº†ä¸­é—´ Region çš„ compact æ•´ç†è¿‡ç¨‹ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M01/56/2A/Cgp9HWEspsuAFh42AAAsCgyJwEk919.jpg",alt:"42.jpg"}})]),t._v(" "),s("p",[t._v("æœ€åï¼ŒæŒ‡é’ˆé‡æ–°è°ƒæ•´ä¸ºæ­£ç¡®çš„æŒ‡å‘ï¼ˆå³ï¼šremapï¼‰ï¼Œè€Œä¸”ä¸Šä¸€é˜¶æ®µçš„ remap ä¸ä¸‹ä¸€é˜¶æ®µçš„markæ˜¯æ··åœ¨ä¸€èµ·å¤„ç†çš„ï¼Œç›¸å¯¹æ›´é«˜æ•ˆã€‚")]),t._v(" "),s("p",[t._v("ã€ Remap çš„æµç¨‹å›¾ã€‘")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s0.lgstatic.com/i/image6/M01/56/2A/Cgp9HWEsptuABwmwAAA8njSoyvA729.jpg",alt:"43.jpg"}})])]),t._v(" "),s("li",[s("p",[t._v("å¤šé‡æ˜ å°„ Multi-Mapping")])]),t._v(" "),s("li",[s("p",[t._v("æ”¯æŒ NUMA æ¶æ„")])])]),t._v(" "),s("h2",{attrs:{id:"å››ã€ç›‘æ§å’Œè°ƒä¼˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€ç›‘æ§å’Œè°ƒä¼˜"}},[t._v("#")]),t._v(" å››ã€ç›‘æ§å’Œè°ƒä¼˜")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-è¯´è¯´ä½ çŸ¥é“çš„å‡ ç§ä¸»è¦çš„-jvm-å‚æ•°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è¯´è¯´ä½ çŸ¥é“çš„å‡ ç§ä¸»è¦çš„-jvm-å‚æ•°"}},[t._v("#")]),t._v(" ğŸ¯ è¯´è¯´ä½ çŸ¥é“çš„å‡ ç§ä¸»è¦çš„ JVM å‚æ•°")]),t._v(" "),s("p",[s("strong",[t._v("æ€è·¯ï¼š")]),t._v(" å¯ä»¥è¯´ä¸€ä¸‹å †æ ˆé…ç½®ç›¸å…³çš„ï¼Œåƒåœ¾æ”¶é›†å™¨ç›¸å…³çš„ï¼Œè¿˜æœ‰ä¸€ä¸‹è¾…åŠ©ä¿¡æ¯ç›¸å…³çš„ã€‚")]),t._v(" "),s("h4",{attrs:{id:"_1-å †æ ˆé…ç½®ç›¸å…³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-å †æ ˆé…ç½®ç›¸å…³"}},[t._v("#")]),t._v(" 1ï¼‰å †æ ˆé…ç½®ç›¸å…³")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("java -Xmx3550m -Xms3550m -Xmn2g -Xss128k \n-XX:MaxPermSize=16m -XX:NewRatio=4 -XX:SurvivorRatio=4 -XX:MaxTenuringThreshold=0\n")])])]),s("p",[s("strong",[t._v("-Xmx3550mï¼š")]),t._v(" æœ€å¤§å †å¤§å°ä¸º3550mã€‚")]),t._v(" "),s("p",[s("strong",[t._v("-Xms3550mï¼š")]),t._v(" è®¾ç½®åˆå§‹å †å¤§å°ä¸º3550mã€‚")]),t._v(" "),s("p",[s("strong",[t._v("-Xmn2gï¼š")]),t._v(" è®¾ç½®å¹´è½»ä»£å¤§å°ä¸º2gã€‚")]),t._v(" "),s("p",[s("strong",[t._v("-Xss128kï¼š")]),t._v(" æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°ä¸º128kã€‚")]),t._v(" "),s("p",[s("strong",[t._v("-XX:MaxPermSizeï¼š")]),t._v("  è®¾ç½®æŒä¹…ä»£å¤§å°ä¸º16m")]),t._v(" "),s("p",[s("strong",[t._v("-XX:NewRatio=4:")]),t._v(" è®¾ç½®å¹´è½»ä»£ï¼ˆåŒ…æ‹¬Edenå’Œä¸¤ä¸ªSurvivoråŒºï¼‰ä¸å¹´è€ä»£çš„æ¯”å€¼ï¼ˆé™¤å»æŒä¹…ä»£ï¼‰ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("-XX:SurvivorRatio=4ï¼š")]),t._v(" è®¾ç½®å¹´è½»ä»£ä¸­EdenåŒºä¸SurvivoråŒºçš„å¤§å°æ¯”å€¼ã€‚è®¾ç½®ä¸º4ï¼Œåˆ™ä¸¤ä¸ªSurvivoråŒºä¸ä¸€ä¸ªEdenåŒºçš„æ¯”å€¼ä¸º2:4ï¼Œä¸€ä¸ªSurvivoråŒºå æ•´ä¸ªå¹´è½»ä»£çš„1/6")]),t._v(" "),s("p",[s("strong",[t._v("-XX:MaxTenuringThreshold=0ï¼š")]),t._v(" è®¾ç½®åƒåœ¾æœ€å¤§å¹´é¾„ã€‚å¦‚æœè®¾ç½®ä¸º0çš„è¯ï¼Œåˆ™å¹´è½»ä»£å¯¹è±¡ä¸ç»è¿‡SurvivoråŒºï¼Œç›´æ¥è¿›å…¥å¹´è€ä»£ã€‚")]),t._v(" "),s("h4",{attrs:{id:"_2-åƒåœ¾æ”¶é›†å™¨ç›¸å…³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-åƒåœ¾æ”¶é›†å™¨ç›¸å…³"}},[t._v("#")]),t._v(" 2ï¼‰åƒåœ¾æ”¶é›†å™¨ç›¸å…³")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("-XX:+UseParallelGC\n-XX:ParallelGCThreads=20\n-XX:+UseConcMarkSweepGC \n-XX:CMSFullGCsBeforeCompaction=5\n-XX:+UseCMSCompactAtFullCollectionï¼š\n")])])]),s("p",[s("strong",[t._v("-XX:+UseParallelGCï¼š")]),t._v(" é€‰æ‹©åƒåœ¾æ”¶é›†å™¨ä¸ºå¹¶è¡Œæ”¶é›†å™¨ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("-XX:ParallelGCThreads=20ï¼š")]),t._v(" é…ç½®å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°")]),t._v(" "),s("p",[s("strong",[t._v("-XX:+UseConcMarkSweepGCï¼š")]),t._v(" è®¾ç½®å¹´è€ä»£ä¸ºå¹¶å‘æ”¶é›†ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("-XX:CMSFullGCsBeforeCompaction")]),t._v("ï¼šç”±äºå¹¶å‘æ”¶é›†å™¨ä¸å¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©ã€æ•´ç†ï¼Œæ‰€ä»¥è¿è¡Œä¸€æ®µæ—¶é—´ä»¥åä¼šäº§ç”Ÿâ€œç¢ç‰‡â€ï¼Œä½¿å¾—è¿è¡Œæ•ˆç‡é™ä½ã€‚æ­¤å€¼è®¾ç½®è¿è¡Œå¤šå°‘æ¬¡GCä»¥åå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©ã€æ•´ç†ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("-XX:+UseCMSCompactAtFullCollectionï¼š")]),t._v(" æ‰“å¼€å¯¹å¹´è€ä»£çš„å‹ç¼©ã€‚å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼Œä½†æ˜¯å¯ä»¥æ¶ˆé™¤ç¢ç‰‡")]),t._v(" "),s("h4",{attrs:{id:"_3-è¾…åŠ©ä¿¡æ¯ç›¸å…³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-è¾…åŠ©ä¿¡æ¯ç›¸å…³"}},[t._v("#")]),t._v(" 3ï¼‰è¾…åŠ©ä¿¡æ¯ç›¸å…³")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("-XX:+PrintGC\n-XX:+PrintGCDetails\n")])])]),s("p",[s("strong",[t._v("-XX:+PrintGC è¾“å‡ºå½¢å¼:")])]),t._v(" "),s("p",[t._v("[GC 118250K->113543K(130112K), 0.0094143 secs] [Full GC 121376K->10414K(130112K), 0.0650971 secs]")]),t._v(" "),s("p",[s("strong",[t._v("-XX:+PrintGCDetails è¾“å‡ºå½¢å¼:")])]),t._v(" "),s("p",[t._v("[GC [DefNew: 8614K->781K(9088K), 0.0123035 secs] 118250K->113543K(130112K), 0.0124633 secs] [GC [DefNew: 8614K->8614K(9088K), 0.0000665 secs][Tenured: 112761K->10414K(121024K), 0.0433488 secs] 121376K->10414K(130112K), 0.0436268 secs")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ä½ å¹³æ—¶å·¥ä½œç”¨è¿‡çš„-jvm-å¸¸ç”¨åŸºæœ¬é…ç½®å‚æ•°æœ‰å“ªäº›"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä½ å¹³æ—¶å·¥ä½œç”¨è¿‡çš„-jvm-å¸¸ç”¨åŸºæœ¬é…ç½®å‚æ•°æœ‰å“ªäº›"}},[t._v("#")]),t._v(" ğŸ¯ ä½ å¹³æ—¶å·¥ä½œç”¨è¿‡çš„ JVM å¸¸ç”¨åŸºæœ¬é…ç½®å‚æ•°æœ‰å“ªäº›ï¼Ÿ")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# è®¾ç½®å †å†…å­˜\n-Xmx4g -Xms4g \n# æŒ‡å®š GC ç®—æ³•\n-XX:+UseG1GC -XX:MaxGCPauseMillis=50 \n# æŒ‡å®š GC å¹¶è¡Œçº¿ç¨‹æ•°\n-XX:ParallelGCThreads=4 \n# æ‰“å° GC æ—¥å¿—\n-XX:+PrintGCDetails -XX:+PrintGCDateStamps \n# æŒ‡å®š GC æ—¥å¿—æ–‡ä»¶\n-Xloggc:gc.log \n# æŒ‡å®š Meta åŒºçš„æœ€å¤§å€¼\n-XX:MaxMetaspaceSize=2g \n# è®¾ç½®å•ä¸ªçº¿ç¨‹æ ˆçš„å¤§å°\n-Xss1m \n# æŒ‡å®šå †å†…å­˜æº¢å‡ºæ—¶è‡ªåŠ¨è¿›è¡Œ Dump\n-XX:+HeapDumpOnOutOfMemoryError \n-XX:HeapDumpPath=/usr/local/\n")])])]),s("h3",{attrs:{id:"ğŸ¯-ä½ è¯´ä½ åšè¿‡-jvm-è°ƒä¼˜å’Œå‚æ•°é…ç½®-è¯·é—®å¦‚ä½•ç›˜ç‚¹æŸ¥çœ‹-jvm-ç³»ç»Ÿé»˜è®¤å€¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä½ è¯´ä½ åšè¿‡-jvm-è°ƒä¼˜å’Œå‚æ•°é…ç½®-è¯·é—®å¦‚ä½•ç›˜ç‚¹æŸ¥çœ‹-jvm-ç³»ç»Ÿé»˜è®¤å€¼"}},[t._v("#")]),t._v(" ğŸ¯ ä½ è¯´ä½ åšè¿‡  JVM è°ƒä¼˜å’Œå‚æ•°é…ç½®ï¼Œè¯·é—®å¦‚ä½•ç›˜ç‚¹æŸ¥çœ‹ JVM ç³»ç»Ÿé»˜è®¤å€¼ï¼Ÿ")]),t._v(" "),s("p",[s("strong",[t._v("JVMå‚æ•°ç±»å‹")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("ç±»å‹")])]),t._v(" "),s("th",[s("strong",[t._v("ç¤ºä¾‹")])]),t._v(" "),s("th",[s("strong",[t._v("ä½œç”¨")])]),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("æ ‡é…å‚æ•°")])]),t._v(" "),s("td",[s("code",[t._v("-version")]),t._v(", "),s("code",[t._v("-help")])]),t._v(" "),s("td",[t._v("æ‰€æœ‰ JVM å¿…é¡»å®ç°çš„é€šç”¨åŠŸèƒ½ï¼Œæ— æ€§èƒ½å½±å“")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("X å‚æ•°")])]),t._v(" "),s("td",[s("code",[t._v("-Xint")]),t._v(", "),s("code",[t._v("-Xcomp")])]),t._v(" "),s("td",[t._v("æ§åˆ¶ JVM è¿è¡Œæ¨¡å¼ï¼ˆè§£é‡Šã€ç¼–è¯‘ã€æ··åˆï¼‰")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("XX å‚æ•°")])]),t._v(" "),s("td",[s("code",[t._v("-XX:+PrintGCDetails")])]),t._v(" "),s("td",[t._v("è°ƒä¼˜æ ¸å¿ƒå‚æ•°ï¼Œåˆ†ä¸º "),s("strong",[t._v("Boolean")]),t._v(" å’Œ "),s("strong",[t._v("KV ç±»å‹")])]),t._v(" "),s("td",[t._v("-xx:+ æˆ–è€… - æŸä¸ªå±æ€§å€¼ï¼ˆ+è¡¨ç¤ºå¼€å¯ï¼Œ- è¡¨ç¤ºå…³é—­ï¼‰")])])])]),t._v(" "),s("p",[s("strong",[t._v("å¸¸ç”¨å·¥å…·")])]),t._v(" "),s("ul",[s("li",[s("strong",[s("code",[t._v("jinfo")])]),t._v("ï¼šæŸ¥çœ‹æˆ–ä¿®æ”¹è¿è¡Œä¸­ JVM çš„å‚æ•°ã€‚")]),t._v(" "),s("li",[s("strong",[s("code",[t._v("java")]),t._v(" å‘½ä»¤å‚æ•°")]),t._v("ï¼šç›´æ¥æ‰“å°é»˜è®¤æˆ–ä¿®æ”¹åçš„å‚æ•°ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Runtime API")]),t._v("ï¼šé€šè¿‡ Java ä»£ç è·å–å†…å­˜ä¿¡æ¯")])]),t._v(" "),s("p",[t._v("è¿™äº›éƒ½æ˜¯å‘½ä»¤çº§åˆ«çš„æŸ¥çœ‹ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨ç¨‹åºè¿è¡Œä¸­æŸ¥çœ‹")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" totalMemory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runtime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRuntime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("totalMemory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" maxMemory "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runtime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRuntime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("maxMemory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"total_memory(-xms)="')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("totalMemory"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å­—èŠ‚ï¼Œ"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("totalMemory"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MB"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max_memory(-xmx)="')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("maxMemory"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å­—èŠ‚ï¼Œ"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("maxMemory"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MB"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"ğŸ¯-ç›˜ç‚¹å®¶åº•æŸ¥çœ‹-jvm-é»˜è®¤å€¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ç›˜ç‚¹å®¶åº•æŸ¥çœ‹-jvm-é»˜è®¤å€¼"}},[t._v("#")]),t._v(" ğŸ¯ ç›˜ç‚¹å®¶åº•æŸ¥çœ‹ JVM é»˜è®¤å€¼")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("-XX:+PrintFlagsInitial")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ä¸»è¦æŸ¥çœ‹åˆå§‹é»˜è®¤å€¼")])]),t._v(" "),s("li",[s("p",[t._v("java -XX:+PrintFlagsInitial")])]),t._v(" "),s("li",[s("p",[t._v("java -XX:+PrintFlagsInitial -version")]),t._v(" "),s("p",[s("strong",[t._v("ç­‰å·å‰æœ‰å†’å·")]),t._v(" :=  è¯´æ˜ jvm å‚æ•°æœ‰äººä¸ºä¿®æ”¹è¿‡æˆ–è€… JVMåŠ è½½ä¿®æ”¹")]),t._v(" "),s("p",[t._v("false è¯´æ˜æ˜¯Boolean ç±»å‹ å‚æ•°ï¼Œæ•°å­—è¯´æ˜æ˜¯ KV ç±»å‹å‚æ•°")])])])]),t._v(" "),s("li",[s("p",[t._v("-XX:+PrintFlagsFinal")]),t._v(" "),s("ul",[s("li",[t._v("ä¸»è¦æŸ¥çœ‹ä¿®æ”¹æ›´æ–°")]),t._v(" "),s("li",[t._v("java -XX:+PrintFlagsFinal")]),t._v(" "),s("li",[t._v("java -XX:+PrintFlagsFinal -version")]),t._v(" "),s("li",[t._v("è¿è¡Œjavaå‘½ä»¤çš„åŒæ—¶æ‰“å°å‡ºå‚æ•° java -XX:+PrintFlagsFinal -XX:MetaspaceSize=512m Hello.java")])])]),t._v(" "),s("li",[s("p",[t._v("-XX:+PrintCommondLineFlags")]),t._v(" "),s("ul",[s("li",[t._v("æ‰“å°å‘½ä»¤è¡Œå‚æ•°")]),t._v(" "),s("li",[t._v("java -XX:+PrintCommondLineFlags -version")]),t._v(" "),s("li",[t._v("å¯ä»¥æ–¹ä¾¿çš„çœ‹åˆ°åƒåœ¾å›æ”¶å™¨")])])])]),t._v(" "),s("h3",{attrs:{id:"æœ‰æ²¡æœ‰é‡åˆ°è¿‡oomçš„é—®é¢˜-çº¿ä¸Šæ€ä¹ˆæ’æŸ¥çš„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœ‰æ²¡æœ‰é‡åˆ°è¿‡oomçš„é—®é¢˜-çº¿ä¸Šæ€ä¹ˆæ’æŸ¥çš„"}},[t._v("#")]),t._v(" æœ‰æ²¡æœ‰é‡åˆ°è¿‡oomçš„é—®é¢˜ï¼Ÿçº¿ä¸Šæ€ä¹ˆæ’æŸ¥çš„ï¼Ÿ")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬çš„æ’æŸ¥æµç¨‹ä¸€èˆ¬æ˜¯åˆ†å‡ æ­¥ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("å…ˆç¡®è®¤ OOM ç±»å‹")]),t._v(" "),s("ul",[s("li",[t._v("å †å†…å­˜ä¸è¶³ï¼ˆJava heap spaceï¼‰")]),t._v(" "),s("li",[t._v("å…ƒç©ºé—´ä¸è¶³ï¼ˆMetaspaceï¼‰")]),t._v(" "),s("li",[t._v("ç›´æ¥å†…å­˜ä¸è¶³ï¼ˆDirect buffer memoryï¼‰")]),t._v(" "),s("li",[t._v("çº¿ç¨‹æ— æ³•åˆ›å»ºï¼ˆunable to create new native threadï¼‰\nä¸åŒç±»å‹çš„ OOMï¼Œå¯¹åº”çš„æ’æŸ¥æ€è·¯ä¸ä¸€æ ·ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("æ”¶é›†ç°åœºä¿¡æ¯")]),t._v(" "),s("ul",[s("li",[t._v("å¼€å¯ "),s("code",[t._v("-XX:+HeapDumpOnOutOfMemoryError")]),t._v("ï¼Œè®© JVM åœ¨ OOM æ—¶è‡ªåŠ¨ç”Ÿæˆ "),s("code",[t._v("heap dump")]),t._v(" æ–‡ä»¶ã€‚")]),t._v(" "),s("li",[t._v("æ”¶é›† GC æ—¥å¿—ï¼ˆ"),s("code",[t._v("-Xloggc")]),t._v("ï¼‰ï¼Œç¡®è®¤æ˜¯å†…å­˜æ³„æ¼è¿˜æ˜¯é…ç½®ä¸åˆç†ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("åˆ†æ Dump æ–‡ä»¶")]),t._v(" "),s("ul",[s("li",[t._v("ç”¨ "),s("strong",[t._v("MATï¼ˆMemory Analyzer Toolï¼‰")]),t._v(" æˆ– "),s("strong",[t._v("VisualVM")]),t._v(" æ‰“å¼€ "),s("code",[t._v("heap dump")]),t._v("ï¼Œçœ‹å“ªäº›å¯¹è±¡å ç”¨å†…å­˜æœ€å¤šã€‚")]),t._v(" "),s("li",[t._v("ç»“åˆ "),s("code",[t._v("dominator tree")]),t._v(" åˆ†ææ˜¯å¦å­˜åœ¨å¼•ç”¨é“¾æœªé‡Šæ”¾ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("å®šä½ä»£ç é—®é¢˜")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœæ˜¯å†…å­˜æ³„æ¼ï¼Œé€šå¸¸æ˜¯ "),s("strong",[t._v("é›†åˆç±»æŒæœ‰è¿‡å¤šå¯¹è±¡ï¼ˆMap/Queue æ²¡æ¸…ç†ï¼‰")]),t._v("ï¼Œæˆ–è€… "),s("strong",[t._v("ç¼“å­˜æ²¡æœ‰æ·˜æ±°ç­–ç•¥")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœæ˜¯å…ƒç©ºé—´ OOMï¼Œå¯èƒ½æ˜¯åŠ¨æ€ç”Ÿæˆç±»å¤ªå¤šï¼ˆå¦‚åå°„ã€CGLIB ä»£ç†ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœæ˜¯ DirectMemoryï¼Œé€šå¸¸æ˜¯ Netty/ByteBuffer æ²¡é‡Šæ”¾ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("ä¼˜åŒ–æªæ–½")]),t._v(" "),s("ul",[s("li",[t._v("è°ƒæ•´ JVM å‚æ•°ï¼ˆå †å¤§å°ã€å…ƒç©ºé—´å¤§å°ã€ç›´æ¥å†…å­˜å¤§å°ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("å¢åŠ å¯¹è±¡å›æ”¶ç­–ç•¥ï¼ˆæ¯”å¦‚ç¼“å­˜åŠ  LRUï¼‰ã€‚")]),t._v(" "),s("li",[t._v("é¿å…æ— ç•Œé˜Ÿåˆ—ï¼Œæ§åˆ¶çº¿ç¨‹æ± å¤§å°ã€‚")]),t._v(" "),s("li",[t._v("å¿…è¦æ—¶è¿›è¡Œä»£ç é‡æ„ã€‚")])])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-èƒ½å†™å‡ ä¸ª-oom-ä»£ç ä¸"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-èƒ½å†™å‡ ä¸ª-oom-ä»£ç ä¸"}},[t._v("#")]),t._v(" ğŸ¯ èƒ½å†™å‡ ä¸ª OOM ä»£ç ä¸ï¼Ÿ")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("java.lang.StackOverflowError")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StackOverflowErrorDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stackoverflowError")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stackoverflowError")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stackoverflowError")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("java.lang.OutOfMemoryError: Java heap space")]),t._v(" "),s("ul",[s("li",[t._v("newä¸ªå¤§å¯¹è±¡,å°±ä¼šå‡ºç°")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//JVMå‚æ•°ï¼š-Xmx12m")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SIZE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SIZE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-è°ˆè°ˆä½ çš„-gc-è°ƒä¼˜æ€è·¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è°ˆè°ˆä½ çš„-gc-è°ƒä¼˜æ€è·¯"}},[t._v("#")]),t._v(" ğŸ¯ è°ˆè°ˆä½ çš„ GC è°ƒä¼˜æ€è·¯ï¼Ÿ")]),t._v(" "),s("blockquote",[s("p",[t._v("è°ˆåˆ°è°ƒä¼˜ï¼Œè¿™ä¸€å®šæ˜¯é’ˆå¯¹ç‰¹å®šåœºæ™¯ã€ç‰¹å®šç›®çš„çš„äº‹æƒ…ï¼Œ å¯¹äº GC è°ƒä¼˜æ¥è¯´ï¼Œé¦–å…ˆå°±éœ€è¦æ¸…æ¥šè°ƒä¼˜çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿä»æ€§èƒ½çš„è§’åº¦çœ‹ï¼Œé€šå¸¸å…³æ³¨ä¸‰ä¸ªæ–¹é¢ï¼Œ"),s("strong",[t._v("å†…å­˜å ç”¨")]),t._v("ï¼ˆfootprintï¼‰ã€"),s("strong",[t._v("å»¶æ—¶")]),t._v("ï¼ˆlatencyï¼‰å’Œ"),s("strong",[t._v("ååé‡")]),t._v("ï¼ˆthroughputï¼‰ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹è°ƒä¼˜ä¼šä¾§é‡äºå…¶ä¸­ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªæ–¹é¢çš„ç›®æ ‡ï¼Œå¾ˆå°‘æœ‰æƒ…å†µå¯ä»¥å…¼é¡¾ä¸‰ä¸ªä¸åŒçš„è§’åº¦ã€‚å½“ç„¶ï¼Œé™¤äº†ä¸Šé¢é€šå¸¸çš„ä¸‰ä¸ªæ–¹é¢ï¼Œä¹Ÿå¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»– GC ç›¸å…³çš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼ŒOOM ä¹Ÿå¯èƒ½ä¸ä¸åˆç†çš„ GC ç›¸å…³å‚æ•°æœ‰å…³ï¼›æˆ–è€…ï¼Œåº”ç”¨å¯åŠ¨é€Ÿåº¦æ–¹é¢çš„éœ€æ±‚ï¼ŒGC ä¹Ÿä¼šæ˜¯ä¸ªè€ƒè™‘çš„æ–¹é¢ã€‚")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å»¶è¿Ÿï¼ˆLatencyï¼‰ï¼š")]),t._v(" ä¹Ÿå¯ä»¥ç†è§£ä¸ºæœ€å¤§åœé¡¿æ—¶é—´ï¼Œå³åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­ä¸€æ¬¡ STW çš„æœ€é•¿æ—¶é—´ï¼Œè¶ŠçŸ­è¶Šå¥½ï¼Œä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æ¥å—é¢‘æ¬¡çš„å¢å¤§ï¼ŒGC æŠ€æœ¯çš„ä¸»è¦å‘å±•æ–¹å‘ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ååé‡ï¼ˆThroughputï¼‰ï¼š")]),t._v(" åº”ç”¨ç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œç”±äº GC çº¿ç¨‹ä¼šå ç”¨ Mutator å½“å‰å¯ç”¨çš„ CPU æ—¶é’Ÿå‘¨æœŸï¼Œååé‡å³ä¸º Mutator æœ‰æ•ˆèŠ±è´¹çš„æ—¶é—´å ç³»ç»Ÿæ€»è¿è¡Œæ—¶é—´çš„ç™¾åˆ†æ¯”ï¼Œä¾‹å¦‚ç³»ç»Ÿè¿è¡Œäº† 100 minï¼ŒGC è€—æ—¶ 1 minï¼Œåˆ™ç³»ç»Ÿååé‡ä¸º 99%ï¼Œååé‡ä¼˜å…ˆçš„æ”¶é›†å™¨å¯ä»¥æ¥å—è¾ƒé•¿çš„åœé¡¿ã€‚")])]),t._v(" "),s("p",[t._v("åŸºæœ¬çš„è°ƒä¼˜æ€è·¯å¯ä»¥æ€»ç»“ä¸ºï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ç†è§£åº”ç”¨éœ€æ±‚å’Œé—®é¢˜ï¼Œç¡®å®šè°ƒä¼˜ç›®æ ‡ã€‚å‡è®¾ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªåº”ç”¨æœåŠ¡ï¼Œä½†å‘ç°å¶å°”ä¼šå‡ºç°æ€§èƒ½æŠ–åŠ¨ï¼Œå‡ºç°è¾ƒé•¿çš„æœåŠ¡åœé¡¿ã€‚è¯„ä¼°ç”¨æˆ·å¯æ¥å—çš„å“åº”æ—¶é—´å’Œä¸šåŠ¡é‡ï¼Œå°†ç›®æ ‡ç®€åŒ–ä¸ºï¼Œå¸Œæœ› GC æš‚åœå°½é‡æ§åˆ¶åœ¨ 200ms ä»¥å†…ï¼Œå¹¶ä¸”ä¿è¯ä¸€å®šæ ‡å‡†çš„ååé‡ã€‚")]),t._v(" "),s("li",[t._v("æŒæ¡ JVM å’Œ GC çš„çŠ¶æ€ï¼Œå®šä½å…·ä½“çš„é—®é¢˜ï¼Œç¡®å®šçœŸçš„æœ‰ GC è°ƒä¼˜çš„å¿…è¦ã€‚å…·ä½“æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚ï¼Œé€šè¿‡ jstat ç­‰å·¥å…·æŸ¥çœ‹ GC ç­‰ç›¸å…³çŠ¶æ€ï¼Œå¯ä»¥å¼€å¯ GC æ—¥å¿—ï¼Œæˆ–è€…æ˜¯åˆ©ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„è¯Šæ–­å·¥å…·ç­‰ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡è¿½è¸ª GC æ—¥å¿—ï¼Œå°±å¯ä»¥æŸ¥æ‰¾æ˜¯ä¸æ˜¯ GC åœ¨ç‰¹å®šæ—¶é—´å‘ç”Ÿäº†é•¿æ—¶é—´çš„æš‚åœï¼Œè¿›è€Œå¯¼è‡´äº†åº”ç”¨å“åº”ä¸åŠæ—¶ã€‚")]),t._v(" "),s("li",[t._v("è¿™é‡Œéœ€è¦æ€è€ƒï¼Œé€‰æ‹©çš„ GC ç±»å‹æ˜¯å¦ç¬¦åˆæˆ‘ä»¬çš„åº”ç”¨ç‰¹å¾ï¼Œå¦‚æœæ˜¯ï¼Œå…·ä½“é—®é¢˜è¡¨ç°åœ¨å“ªé‡Œï¼Œæ˜¯ Minor GC è¿‡é•¿ï¼Œè¿˜æ˜¯ Mixed GC ç­‰å‡ºç°å¼‚å¸¸åœé¡¿æƒ…å†µï¼›å¦‚æœä¸æ˜¯ï¼Œè€ƒè™‘åˆ‡æ¢åˆ°ä»€ä¹ˆç±»å‹ï¼Œå¦‚ CMS å’Œ G1 éƒ½æ˜¯æ›´ä¾§é‡äºä½å»¶è¿Ÿçš„ GC é€‰é¡¹ã€‚")]),t._v(" "),s("li",[t._v("é€šè¿‡åˆ†æç¡®å®šå…·ä½“è°ƒæ•´çš„å‚æ•°æˆ–è€…è½¯ç¡¬ä»¶é…ç½®ã€‚")]),t._v(" "),s("li",[t._v("éªŒè¯æ˜¯å¦è¾¾åˆ°è°ƒä¼˜ç›®æ ‡ï¼Œå¦‚æœè¾¾åˆ°ç›®æ ‡ï¼Œå³å¯ä»¥è€ƒè™‘ç»“æŸè°ƒä¼˜ï¼›å¦åˆ™ï¼Œé‡å¤å®Œæˆåˆ†æã€è°ƒæ•´ã€éªŒè¯è¿™ä¸ªè¿‡ç¨‹ã€‚")])])]),t._v(" "),s("p",[t._v("ä¸€ã€è°ƒä¼˜æ ¸å¿ƒç›®æ ‡ä¸åŸºæœ¬åŸåˆ™")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("æ ¸å¿ƒç›®æ ‡")]),t._v(" "),s("ul",[s("li",[t._v("å»¶è¿Ÿä¼˜åŒ–ï¼šå‡å°‘GCå¯¼è‡´çš„STWæ—¶é—´ï¼ˆå¦‚Young GC < 50msï¼ŒFull GC < 1sï¼‰")]),t._v(" "),s("li",[t._v("ååé‡æå‡ï¼šç¡®ä¿GCæ—¶é—´å æ¯”ä½äº5%ï¼ˆå¦‚GCååé‡ > 95%ï¼‰")]),t._v(" "),s("li",[s("strong",[t._v("å†…å­˜åˆ©ç”¨ç‡")]),t._v("ï¼šå‡å°‘å†…å­˜ç¢ç‰‡ï¼Œé¿å…OOMå’Œé¢‘ç¹æ‰©å®¹")])])]),t._v(" "),s("li",[s("strong",[t._v("åŸºæœ¬åŸåˆ™")]),t._v(" "),s("ul",[s("li",[t._v("å…ˆè¯Šæ–­åè°ƒä¼˜ï¼šé€šè¿‡GCæ—¥å¿—å’Œç›‘æ§å·¥å…·å®šä½é—®é¢˜ï¼Œé¿å…ç›²ç›®è°ƒæ•´å‚æ•°")]),t._v(" "),s("li",[t._v("ä»£ç ä¼˜å…ˆåŸåˆ™ï¼šä¼˜åŒ–å¯¹è±¡åˆ†é…æ¨¡å¼ï¼ˆå¦‚å‡å°‘å¤§å¯¹è±¡ã€é¿å…å†…å­˜æ³„æ¼ï¼‰æ¯”å‚æ•°è°ƒæ•´æ›´æœ‰æ•ˆ")]),t._v(" "),s("li",[t._v("åœºæ™¯é€‚é…ï¼šæ ¹æ®åº”ç”¨ç±»å‹é€‰æ‹©GCç®—æ³•ï¼ˆä½å»¶è¿Ÿé€‰G1/ZGCï¼Œé«˜ååé€‰Parallel GCï¼‰")])])])]),t._v(" "),s("p",[t._v("äºŒã€è°ƒä¼˜æ–¹æ³•è®ºä¸å®æ–½æ­¥éª¤")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("æ•°æ®é‡‡é›†ä¸é—®é¢˜å®šä½")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ç›‘æ§å·¥å…·ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("jstat -gcutil <pid>")]),t._v("ï¼šå®æ—¶æŸ¥çœ‹å„ä»£å†…å­˜ä½¿ç”¨ç‡åŠGCæ¬¡æ•°/è€—æ—¶")]),t._v(" "),s("li",[s("code",[t._v("jmap -histo")]),t._v("ï¼šåˆ†æå †å†…å­˜å¯¹è±¡åˆ†å¸ƒï¼Œå®šä½å¤§å¯¹è±¡æˆ–å†…å­˜æ³„æ¼")]),t._v(" "),s("li",[t._v("GCæ—¥å¿—åˆ†æï¼šé€šè¿‡ "),s("code",[t._v("-Xlog:gc*")]),t._v(" ç”Ÿæˆæ—¥å¿—ï¼Œä½¿ç”¨GCeasyæˆ–G1Viewerè§£æ")])])]),t._v(" "),s("li",[s("p",[t._v("å…³é”®æŒ‡æ ‡ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("Young GCé¢‘ç‡ï¼šé«˜äº10ç§’/æ¬¡éœ€ä¼˜åŒ–æ–°ç”Ÿä»£åˆ†é…")]),t._v(" "),s("li",[t._v("æ™‹å‡é€Ÿç‡ï¼šè‹¥å•æ¬¡Young GCåè€å¹´ä»£å¢é•¿>5%ï¼Œéœ€è°ƒæ•´å¹´é¾„é˜ˆå€¼")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å†…å­˜æ¨¡å‹ä¼˜åŒ–")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("åˆ†ä»£ç­–ç•¥è°ƒæ•´ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æ–°ç”Ÿä»£æ‰©å®¹ï¼šè‹¥Young GCé¢‘ç¹ï¼ˆå¦‚<30ç§’/æ¬¡ï¼‰ï¼Œå¢å¤§ "),s("code",[t._v("-Xmn")]),t._v("ï¼ˆä¸è¶…è¿‡å †çš„60%ï¼‰")]),t._v(" "),s("li",[t._v("SurvivoråŒºå¹³è¡¡ï¼šé€šè¿‡ "),s("code",[t._v("-XX:SurvivorRatio")]),t._v(" è°ƒæ•´Edenä¸Survivoræ¯”ä¾‹ï¼ˆé»˜è®¤8:1:1ï¼‰ï¼Œé¿å…åŠ¨æ€å¹´é¾„åˆ¤å®šè¿‡æ—©è§¦å‘")])])]),t._v(" "),s("li",[s("p",[t._v("å¤§å¯¹è±¡æ§åˆ¶ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("è®¾ç½® "),s("code",[t._v("-XX:PretenureSizeThreshold=4M")]),t._v("ï¼Œé¿å…å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£å¼•å‘ç¢ç‰‡")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("GCç®—æ³•é€‰æ‹©ä¸å‚æ•°è°ƒä¼˜")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("GCç±»å‹")])]),t._v(" "),s("th",[s("strong",[t._v("é€‚ç”¨åœºæ™¯")])]),t._v(" "),s("th",[s("strong",[t._v("è°ƒä¼˜å‚æ•°ç¤ºä¾‹")])]),t._v(" "),s("th",[s("strong",[t._v("ä¼˜åŒ–ç›®æ ‡")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("G1")])]),t._v(" "),s("td",[t._v("ä½å»¶è¿Ÿã€å¤§å †å†…å­˜ï¼ˆ>8Gï¼‰")]),t._v(" "),s("td",[s("code",[t._v("-XX:MaxGCPauseMillis=200")]),t._v("ï¼ˆç›®æ ‡åœé¡¿æ—¶é—´ï¼‰"),s("code",[t._v("-XX:InitiatingHeapOccupancyPercent=45")]),t._v("ï¼ˆå¹¶å‘æ ‡è®°é˜ˆå€¼ï¼‰ 5")]),t._v(" "),s("td",[t._v("å‡å°‘Mixed GCé¢‘ç‡")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Parallel")])]),t._v(" "),s("td",[t._v("æ‰¹å¤„ç†ã€é«˜ååé‡")]),t._v(" "),s("td",[s("code",[t._v("-XX:ParallelGCThreads=CPUæ ¸æ•°")]),t._v("ï¼ˆå¹¶è¡Œçº¿ç¨‹æ•°ï¼‰"),s("code",[t._v("-XX:GCTimeRatio=9")]),t._v("ï¼ˆGC/åº”ç”¨æ—¶é—´æ¯”ï¼‰ 5")]),t._v(" "),s("td",[t._v("æœ€å¤§åŒ–ååé‡")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("ZGC")])]),t._v(" "),s("td",[t._v("è¶…ä½å»¶è¿Ÿï¼ˆ<10msï¼‰")]),t._v(" "),s("td",[s("code",[t._v("-XX:ZAllocationSpikeTolerance=5")]),t._v("ï¼ˆåˆ†é…é€Ÿç‡å®¹å¿åº¦ï¼‰"),s("code",[t._v("-Xmx32G")]),t._v("ï¼ˆå †â‰¤32Gï¼‰")]),t._v(" "),s("td",[t._v("äºšç§’çº§åœé¡¿")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å…³é”®å‚æ•°è°ƒä¼˜ç­–ç•¥")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("æ™‹å‡é˜ˆå€¼ä¼˜åŒ–ï¼šé™ä½ "),s("code",[t._v("-XX:MaxTenuringThreshold")]),t._v(" ï¼ˆé»˜è®¤15â†’5ï¼‰ï¼ŒåŠ é€Ÿé•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡è¿›å…¥è€å¹´ä»£")])]),t._v(" "),s("li",[s("p",[t._v("å †ç¨³å®šæ€§ä¿éšœï¼šè®¾ç½® "),s("code",[t._v("-Xms=-Xmx")]),t._v(" é¿å…å †åŠ¨æ€æ‰©å®¹ï¼Œé…åˆ "),s("code",[t._v("-XX:+AlwaysPreTouch")]),t._v(" é¢„åˆ†é…ç‰©ç†å†…å­˜")])]),t._v(" "),s("li",[s("p",[t._v("å…ƒç©ºé—´æ§åˆ¶ï¼š é™åˆ¶ "),s("code",[t._v("-XX:MaxMetaspaceSize=512M")]),t._v(" ï¼Œé˜²æ­¢ç±»åŠ è½½å™¨æ³„æ¼å¯¼è‡´Full GC")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ä»£ç çº§ä¼˜åŒ–")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("å¯¹è±¡æ± åŒ–")]),t._v("ï¼šå¤ç”¨é«˜é¢‘ç‡åˆ›å»ºå¯¹è±¡ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ã€çº¿ç¨‹ï¼‰")])]),t._v(" "),s("li",[s("p",[t._v("è½¯å¼•ç”¨æ§åˆ¶ï¼šé€šè¿‡ SoftReference ç¼“å­˜å¤§å¯¹è±¡ï¼Œåœ¨å†…å­˜ç´§å¼ æ—¶ä¼˜å…ˆé‡Šæ”¾")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å¹¶å‘æ•°æ®ç»“æ„")]),t._v("ï¼šä½¿ç”¨"),s("code",[t._v("ConcurrentHashMap")]),t._v("æ›¿ä»£"),s("code",[t._v("synchronized")]),t._v("é›†åˆï¼Œå‡å°‘é”ç«äº‰å¯¼è‡´çš„ä¸´æ—¶å¯¹è±¡æ¿€å¢")])])])])]),t._v(" "),s("p",[t._v("ä¸‰ã€è°ƒä¼˜æ•ˆæœéªŒè¯ä¸æŒç»­ç›‘æ§")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("ABæµ‹è¯•éªŒè¯ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("å¯¹æ¯”è°ƒä¼˜å‰åçš„GCæš‚åœæ—¶é—´åˆ†å¸ƒï¼ˆå¦‚P99å»¶è¿Ÿä¸‹é™30%ï¼‰")])]),t._v(" "),s("li",[s("p",[t._v("ç›‘æ§ååé‡å˜åŒ–ï¼ˆå¦‚QPSæå‡20%+ï¼‰")])])])]),t._v(" "),s("li",[s("p",[t._v("ç›‘æ§ä½“ç³»æ„å»ºï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("æ—¶åºæ•°æ®åº“")]),t._v("ï¼šPrometheusé‡‡é›†"),s("code",[t._v("jvm_gc_pause_seconds")]),t._v("æŒ‡æ ‡")])]),t._v(" "),s("li",[s("p",[t._v("å‘Šè­¦è§„åˆ™ï¼šFull GCæ¬¡æ•°>1æ¬¡/å°æ—¶æˆ–STWæ—¶é—´>1ç§’è§¦å‘å‘Šè­¦")])])])])]),t._v(" "),s("p",[t._v("å››ã€å…¸å‹åœºæ™¯è°ƒä¼˜æ¡ˆä¾‹")]),t._v(" "),s("blockquote",[s("p",[t._v("æ¡ˆä¾‹1ï¼šç”µå•†ç§’æ€ç³»ç»Ÿï¼ˆä½å»¶è¿Ÿåœºæ™¯ï¼‰")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("é—®é¢˜")]),t._v("ï¼šé«˜å³°æœŸYoung GCæš‚åœæ—¶é—´ä»50msé£™å‡è‡³200ms")])]),t._v(" "),s("li",[s("p",[t._v("è°ƒä¼˜ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("åˆ‡æ¢è‡³G1å›æ”¶å™¨ï¼Œè®¾ç½®"),s("code",[t._v("MaxGCPauseMillis=100")])]),t._v(" "),s("li",[t._v("å¢å¤§EdenåŒºï¼ˆ"),s("code",[t._v("-Xmn=4G")]),t._v("ï¼‰ï¼Œé™ä½åŠ¨æ€å¹´é¾„åˆ¤å®šè§¦å‘é¢‘ç‡")]),t._v(" "),s("li",[t._v("ä»£ç ä¼˜åŒ–ï¼šé¢„åŠ è½½çƒ­ç‚¹å•†å“æ•°æ®è‡³å †å¤–ç¼“å­˜")])])]),t._v(" "),s("li",[s("p",[t._v("æ•ˆæœï¼šYoung GCå¹³å‡æš‚åœæ—¶é—´é™è‡³80msï¼ŒFull GCå®Œå…¨æ¶ˆé™¤")])])]),t._v(" "),s("p",[t._v("æ¡ˆä¾‹2ï¼šå¤§æ•°æ®è®¡ç®—å¼•æ“ï¼ˆé«˜åååœºæ™¯ï¼‰")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é—®é¢˜")]),t._v("ï¼šFull GCå¯¼è‡´æ¯å°æ—¶ä»»åŠ¡è¶…æ—¶")]),t._v(" "),s("li",[t._v("è°ƒä¼˜ï¼š\n"),s("ol",[s("li",[t._v("é‡‡ç”¨Parallel GCï¼Œè®¾ç½®"),s("code",[t._v("-XX:GCTimeRatio=19")]),t._v("ï¼ˆGCæ—¶é—´å æ¯”â‰¤5%ï¼‰")]),t._v(" "),s("li",[t._v("é™åˆ¶å¤§å¯¹è±¡åˆ†é…ï¼š"),s("code",[t._v("PretenureSizeThreshold=8M")])]),t._v(" "),s("li",[t._v("å¯ç”¨"),s("code",[t._v("-XX:+UseLargePages")]),t._v("å‡å°‘TLBç¼ºå¤±")])])]),t._v(" "),s("li",[t._v("æ•ˆæœï¼šä»»åŠ¡å®Œæˆæ—¶é—´ç¼©çŸ­40%ï¼ŒCPUåˆ©ç”¨ç‡æå‡15%")])])]),t._v(" "),s("p",[t._v("äº”ã€è°ƒä¼˜å·¥å…·æ¨è")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("å·¥å…·ç±»å‹")])]),t._v(" "),s("th",[s("strong",[t._v("æ¨èå·¥å…·")])]),t._v(" "),s("th",[s("strong",[t._v("æ ¸å¿ƒåŠŸèƒ½")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("æ—¥å¿—åˆ†æ")]),t._v(" "),s("td",[t._v("GCeasyã€G1Viewer")]),t._v(" "),s("td",[t._v("å¯è§†åŒ–GCæš‚åœåˆ†å¸ƒã€å†…å­˜æ³„æ¼æ£€æµ‹ 9")])]),t._v(" "),s("tr",[s("td",[t._v("å®æ—¶ç›‘æ§")]),t._v(" "),s("td",[t._v("Prometheus + Grafana")]),t._v(" "),s("td",[t._v("å¯è§†åŒ–JVMå†…å­˜ã€GCé¢‘ç‡ä¸è€—æ—¶è¶‹åŠ¿ 8")])]),t._v(" "),s("tr",[s("td",[t._v("å †å†…å­˜åˆ†æ")]),t._v(" "),s("td",[t._v("Eclipse MAT")]),t._v(" "),s("td",[t._v("å¯¹è±¡å¼•ç”¨é“¾åˆ†æï¼Œå®šä½å†…å­˜æ³„æ¼ 7")])])])]),t._v(" "),s("p",[t._v("æ€»ç»“ï¼šè°ƒä¼˜éœ€é¿å…çš„è¯¯åŒº")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("å‚æ•°è¿‡åº¦è°ƒæ•´")]),t._v("ï¼šå¦‚ç›²ç›®è®¾ç½®"),s("code",[t._v("-Xmx=ç‰©ç†å†…å­˜80%")]),t._v("å¯¼è‡´ç³»ç»ŸSwap")]),t._v(" "),s("li",[t._v("å¿½ç•¥ä»£ç ä¼˜åŒ–ï¼š90%çš„GCé—®é¢˜æºäºä»£ç ç¼ºé™·è€Œéå‚æ•°é…ç½®")]),t._v(" "),s("li",[t._v("ç®—æ³•é€‰æ‹©é”™é…ï¼šåœ¨32Gä»¥ä¸Šå †å†…å­˜ä½¿ç”¨CMSå¯¼è‡´å¹¶å‘æ¨¡å¼å¤±è´¥")])]),t._v(" "),s("p",[t._v("é€šè¿‡ç³»ç»ŸåŒ–çš„æ•°æ®é‡‡é›†ã€åœºæ™¯åŒ–å‚æ•°è°ƒæ•´å’Œä»£ç çº§ä¼˜åŒ–ï¼Œå¯æ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½ã€‚å»ºè®®ç»“åˆå…·ä½“ä¸šåŠ¡ç‰¹å¾é€‰æ‹©è°ƒä¼˜è·¯å¾„ï¼Œå¹¶é€šè¿‡æŒç»­ç›‘æ§éªŒè¯é•¿æœŸæ•ˆæœã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-æ€ä¹ˆæ‰“å‡ºçº¿ç¨‹æ ˆä¿¡æ¯ã€‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æ€ä¹ˆæ‰“å‡ºçº¿ç¨‹æ ˆä¿¡æ¯ã€‚"}},[t._v("#")]),t._v(" ğŸ¯ æ€ä¹ˆæ‰“å‡ºçº¿ç¨‹æ ˆä¿¡æ¯ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("æ€è·¯ï¼š")]),t._v(" å¯ä»¥è¯´ä¸€ä¸‹ jpsï¼Œtop ï¼Œjstackè¿™å‡ ä¸ªå‘½ä»¤ï¼Œå†é…åˆä¸€æ¬¡æ’æŸ¥çº¿ä¸Šé—®é¢˜è¿›è¡Œè§£ç­”ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("è¾“å…¥ jpsï¼Œè·å¾—è¿›ç¨‹å·ã€‚")]),t._v(" "),s("li",[t._v("top -Hp pid è·å–æœ¬è¿›ç¨‹ä¸­æ‰€æœ‰çº¿ç¨‹çš„CPUè€—æ—¶æ€§èƒ½")]),t._v(" "),s("li",[t._v("jstack pidå‘½ä»¤æŸ¥çœ‹å½“å‰javaè¿›ç¨‹çš„å †æ ˆçŠ¶æ€")]),t._v(" "),s("li",[t._v("æˆ–è€… jstack -l  > /tmp/output.txt æŠŠå †æ ˆä¿¡æ¯æ‰“åˆ°ä¸€ä¸ªtxtæ–‡ä»¶ã€‚")]),t._v(" "),s("li",[t._v("å¯ä»¥ä½¿ç”¨ fastthread å †æ ˆå®šä½ï¼Œ"),s("a",{attrs:{href:"http://fastthread.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("fastthread.io/"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å¦‚ä½•æŸ¥çœ‹jvmçš„å†…å­˜ä½¿ç”¨æƒ…å†µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¦‚ä½•æŸ¥çœ‹jvmçš„å†…å­˜ä½¿ç”¨æƒ…å†µ"}},[t._v("#")]),t._v(" ğŸ¯ å¦‚ä½•æŸ¥çœ‹JVMçš„å†…å­˜ä½¿ç”¨æƒ…å†µ?")]),t._v(" "),s("blockquote",[s("p",[t._v("JVM å†…å­˜å¯ä»¥é€šè¿‡ JDK è‡ªå¸¦å·¥å…·ï¼ˆjstatã€jmapã€jcmdï¼‰åœ¨å‘½ä»¤è¡ŒæŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥ç”¨ jconsoleã€visualvm å›¾å½¢åŒ–åˆ†æã€‚å¦‚æœçº¿ä¸Šç³»ç»Ÿï¼Œæˆ‘ä¼šç”¨ Arthas æˆ–ç»“åˆ Prometheus + Grafana åšå®æ—¶ç›‘æ§ã€‚åœ¨ä»£ç é‡Œï¼Œè¿˜å¯ä»¥é€šè¿‡ JMX çš„ MemoryMXBean è·å–å †å†…å­˜ä½¿ç”¨æƒ…å†µã€‚")])]),t._v(" "),s("p",[t._v("ä¸€ã€å‘½ä»¤è¡Œå·¥å…·")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[s("code",[t._v("jps")]),t._v(" + "),s("code",[t._v("jstat")]),t._v(" ç»„åˆ")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åŠŸèƒ½")]),t._v("ï¼šå¿«é€Ÿå®šä½ Java è¿›ç¨‹å¹¶ç›‘æ§å†…å­˜ä¸ GC çŠ¶æ€ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ“ä½œæ­¥éª¤")]),t._v("ï¼š\n"),s("ol",[s("li",[t._v("æŸ¥çœ‹ Java è¿›ç¨‹ IDï¼š"),s("code",[t._v("jps -l")])]),t._v(" "),s("li",[t._v("ç›‘æ§å †å†…å­˜ä½¿ç”¨ï¼ˆç¤ºä¾‹ PID=1234ï¼‰ï¼š"),s("code",[t._v("jstat -gc 1234 1s 5 # æ¯1ç§’åˆ·æ–°ï¼Œå…±5æ¬¡")])])])]),t._v(" "),s("li",[t._v("è¾“å‡ºå…³é”®å­—æ®µï¼š\n"),s("ul",[s("li",[s("code",[t._v("EC/EU")]),t._v("ï¼šEden åŒºå®¹é‡/ä½¿ç”¨é‡")]),t._v(" "),s("li",[s("code",[t._v("OC/OU")]),t._v("ï¼šè€å¹´ä»£å®¹é‡/ä½¿ç”¨é‡")]),t._v(" "),s("li",[s("code",[t._v("YGC/YGCT")]),t._v("ï¼šYoung GC æ¬¡æ•°/è€—æ—¶")]),t._v(" "),s("li",[s("code",[t._v("FGC/FGCT")]),t._v("ï¼šFull GC æ¬¡æ•°/è€—æ—¶")])])]),t._v(" "),s("li",[s("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šå®æ—¶ç›‘æ§å†…å­˜åˆ†é…ä¸å›æ”¶æ•ˆç‡")])])]),t._v(" "),s("li",[s("p",[s("strong",[s("code",[t._v("jmap")]),t._v(" å †å†…å­˜åˆ†æ")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("åŠŸèƒ½")]),t._v("ï¼šç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶æˆ–ç›´æ¥æŸ¥çœ‹å†…å­˜åˆ†å¸ƒã€‚")])]),t._v(" "),s("li",[s("p",[t._v("å¸¸ç”¨å‘½ä»¤ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æŸ¥çœ‹å †å†…å­˜é…ç½®ï¼š"),s("code",[t._v("jmap -heap 1234")])]),t._v(" "),s("li",[t._v("ç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶ï¼ˆç”¨äºåç»­åˆ†æå†…å­˜æ³„æ¼ï¼‰ï¼š"),s("code",[t._v("jmap -dump:format=b,file=heap.hprof 1234")])]),t._v(" "),s("li",[t._v("ç»Ÿè®¡å¯¹è±¡ç›´æ–¹å›¾ï¼š"),s("code",[t._v("jmap -histo 1234 | head -20 # æ˜¾ç¤ºå‰20ä¸ªå ç”¨å†…å­˜æœ€å¤šçš„ç±»")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šæ’æŸ¥å†…å­˜æº¢å‡ºæˆ–å¯¹è±¡åˆ†å¸ƒå¼‚å¸¸")])])])]),t._v(" "),s("li",[s("p",[s("strong",[s("code",[t._v("jinfo")]),t._v(" å‚æ•°æŸ¥çœ‹")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("åŠŸèƒ½")]),t._v("ï¼šæŸ¥çœ‹æˆ–ä¿®æ”¹è¿è¡Œä¸­ JVM çš„å‚æ•°ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("ç¤ºä¾‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("jinfo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-flags")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ˜¾ç¤ºæ‰€æœ‰å‚æ•°")]),t._v("\njinfo "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-flag")]),t._v(" MaxHeapSize "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æŸ¥çœ‹å †æœ€å¤§å†…å­˜")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼šéªŒè¯å†…å­˜å‚æ•°é…ç½®æ˜¯å¦ç”Ÿæ•ˆ")])])])])]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-æ€ä¹ˆæŸ¥çœ‹æœåŠ¡å™¨é»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨æ˜¯å“ªä¸ª-ç”Ÿäº§ä¸Šå¦‚ä½•é…ç½®åƒåœ¾æ”¶é›†å™¨-è°ˆè°ˆä½ å¯¹åƒåœ¾æ”¶é›†å™¨çš„ç†è§£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æ€ä¹ˆæŸ¥çœ‹æœåŠ¡å™¨é»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨æ˜¯å“ªä¸ª-ç”Ÿäº§ä¸Šå¦‚ä½•é…ç½®åƒåœ¾æ”¶é›†å™¨-è°ˆè°ˆä½ å¯¹åƒåœ¾æ”¶é›†å™¨çš„ç†è§£"}},[t._v("#")]),t._v(" ğŸ¯ æ€ä¹ˆæŸ¥çœ‹æœåŠ¡å™¨é»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨æ˜¯å“ªä¸ªï¼Ÿç”Ÿäº§ä¸Šå¦‚ä½•é…ç½®åƒåœ¾æ”¶é›†å™¨ï¼Ÿè°ˆè°ˆä½ å¯¹åƒåœ¾æ”¶é›†å™¨çš„ç†è§£ï¼Ÿ")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:+PrintCommandLineFlags")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-version")]),t._v("\n")])])]),s("p",[t._v("ä½¿ç”¨ G1 åƒåœ¾æ”¶é›†")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:+UseG1GC")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-jar")]),t._v(" yourapp.jar\n")])])]),s("p",[t._v("åƒåœ¾æ”¶é›†å™¨æ˜¯JVMç”¨æ¥è‡ªåŠ¨ç®¡ç†å†…å­˜çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚å®ƒä»¬çš„ä¸»è¦ä»»åŠ¡æ˜¯è¯†åˆ«å’Œå›æ”¶ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œé‡Šæ”¾å†…å­˜èµ„æºã€‚ä»¥ä¸‹æ˜¯å¯¹åƒåœ¾æ”¶é›†å™¨çš„ä¸€äº›å…³é”®ç†è§£ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("è‡ªåŠ¨åŒ–å†…å­˜ç®¡ç†")]),t._v("ï¼šè‡ªåŠ¨åŒ–å†…å­˜ç®¡ç†å‡å°‘äº†å†…å­˜æ³„æ¼å’Œé‡æŒ‡é’ˆçš„é£é™©ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ€§èƒ½å½±å“")]),t._v("ï¼šä¸åŒçš„åƒåœ¾æ”¶é›†å™¨å¯¹åº”ç”¨ç¨‹åºæ€§èƒ½çš„å½±å“ä¸åŒã€‚é€‰æ‹©åˆé€‚çš„åƒåœ¾æ”¶é›†å™¨å¯ä»¥æ˜¾è‘—æé«˜åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç®—æ³•å¤šæ ·æ€§")]),t._v("ï¼šå­˜åœ¨å¤šç§åƒåœ¾æ”¶é›†ç®—æ³•ï¼Œæ¯ç§ç®—æ³•éƒ½æœ‰å…¶ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯å’Œä¼˜ç¼ºç‚¹ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ä¸åº”ç”¨ç¨‹åºç‰¹æ€§åŒ¹é…")]),t._v("ï¼šé€‰æ‹©åƒåœ¾æ”¶é›†å™¨æ—¶ï¼Œéœ€è¦è€ƒè™‘åº”ç”¨ç¨‹åºçš„ç‰¹æ€§ï¼Œå¦‚å¯¹è±¡ç”Ÿå‘½å‘¨æœŸã€å“åº”æ—¶é—´è¦æ±‚ã€ååé‡éœ€æ±‚ç­‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("èµ„æºæ¶ˆè€—")]),t._v("ï¼šåƒåœ¾æ”¶é›†å™¨å¯èƒ½ä¼šæ¶ˆè€—é¢å¤–çš„CPUèµ„æºæ¥æ‰§è¡Œåƒåœ¾å›æ”¶ä»»åŠ¡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å†…å­˜åˆ†é…ç­–ç•¥")]),t._v("ï¼šåƒåœ¾æ”¶é›†å™¨é€šå¸¸ä¸ç‰¹å®šçš„å†…å­˜åˆ†é…ç­–ç•¥ï¼ˆå¦‚TLABï¼‰ç»“åˆä½¿ç”¨ï¼Œä»¥ä¼˜åŒ–å†…å­˜åˆ†é…æ€§èƒ½ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¹¶å‘ä¸å¢é‡æ”¶é›†")]),t._v("ï¼šç°ä»£åƒåœ¾æ”¶é›†å™¨é€šå¸¸æ”¯æŒå¹¶å‘æˆ–å¢é‡æ”¶é›†ï¼Œä»¥å‡å°‘GCå¼•èµ·çš„åº”ç”¨ç¨‹åºåœé¡¿ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¯é…ç½®æ€§")]),t._v("ï¼šå¤§å¤šæ•°åƒåœ¾æ”¶é›†å™¨éƒ½å¯ä»¥é€šè¿‡JVMå‚æ•°è¿›è¡Œé…ç½®ï¼Œä»¥é€‚åº”ä¸åŒçš„æ€§èƒ½éœ€æ±‚ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æŒç»­å‘å±•")]),t._v("ï¼šåƒåœ¾æ”¶é›†å™¨å’Œç®—æ³•éšç€JVMçš„æ›´æ–°è€Œä¸æ–­å‘å±•ï¼Œæ–°çš„åƒåœ¾æ”¶é›†å™¨ï¼ˆå¦‚ZGCã€Shenandoahç­‰ï¼‰æä¾›äº†æ›´ä½çš„å»¶è¿Ÿå’Œæ›´å¥½çš„æ€§èƒ½ã€‚")])]),t._v(" "),s("p",[t._v("é€šè¿‡åˆç†é€‰æ‹©å’Œé…ç½®åƒåœ¾æ”¶é›†å™¨ï¼Œå¯ä»¥æ˜¾è‘—æé«˜Javaåº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨å˜æ…¢-è¯Šæ–­æ€è·¯å’Œæ€§èƒ½è¯„ä¼°è°ˆè°ˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨å˜æ…¢-è¯Šæ–­æ€è·¯å’Œæ€§èƒ½è¯„ä¼°è°ˆè°ˆ"}},[t._v("#")]),t._v(" ğŸ¯ ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨å˜æ…¢ï¼Œè¯Šæ–­æ€è·¯å’Œæ€§èƒ½è¯„ä¼°è°ˆè°ˆï¼Ÿ")]),t._v(" "),s("p",[t._v("è¯Šæ–­æ€è·¯")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("åˆæ­¥æ’æŸ¥")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç¡®è®¤é—®é¢˜")]),t._v("ï¼šç¡®è®¤é—®é¢˜çš„å­˜åœ¨å’ŒèŒƒå›´ã€‚æ£€æŸ¥æ˜¯å¦æ‰€æœ‰æœåŠ¡å˜æ…¢è¿˜æ˜¯åªæœ‰ç‰¹å®šçš„æœåŠ¡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ”¶é›†ä¿¡æ¯")]),t._v("ï¼šä»ç”¨æˆ·åé¦ˆã€æ—¥å¿—ã€ç›‘æ§ç³»ç»Ÿä¸­æ”¶é›†è¯¦ç»†çš„ç—‡çŠ¶æè¿°å’Œæ—¶é—´ä¿¡æ¯ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("ç¡¬ä»¶èµ„æºæ£€æŸ¥")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("CPU ä½¿ç”¨ç‡")]),t._v("ï¼šæ£€æŸ¥ CPU ä½¿ç”¨ç‡æ˜¯å¦è¿‡é«˜ï¼Œæ˜¯å¦å­˜åœ¨ CPU ç“¶é¢ˆã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å†…å­˜ä½¿ç”¨")]),t._v("ï¼šæ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œæ˜¯å¦å­˜åœ¨å†…å­˜æ³„æ¼æˆ–ä¸åˆç†çš„å†…å­˜å ç”¨ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç£ç›˜ I/O")]),t._v("ï¼šæ£€æŸ¥ç£ç›˜ I/O æ˜¯å¦æˆä¸ºç“¶é¢ˆï¼Œæ˜¯å¦æœ‰å¤§é‡çš„è¯»å†™æ“ä½œã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç½‘ç»œæµé‡")]),t._v("ï¼šæ£€æŸ¥ç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿï¼Œæ˜¯å¦å­˜åœ¨ç½‘ç»œç“¶é¢ˆã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("ç³»ç»Ÿçº§åˆ«æ£€æŸ¥")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç³»ç»Ÿæ—¥å¿—")]),t._v("ï¼šæŸ¥çœ‹æ“ä½œç³»ç»Ÿæ—¥å¿—ï¼ˆå¦‚ "),s("code",[t._v("/var/log/syslog")]),t._v(" æˆ– "),s("code",[t._v("/var/log/messages")]),t._v("ï¼‰ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç¡¬ä»¶æ•…éšœã€é©±åŠ¨é—®é¢˜ç­‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("èµ„æºä½¿ç”¨")]),t._v("ï¼šä½¿ç”¨ "),s("code",[t._v("top")]),t._v("ã€"),s("code",[t._v("htop")]),t._v("ã€"),s("code",[t._v("vmstat")]),t._v("ã€"),s("code",[t._v("iostat")]),t._v(" ç­‰å·¥å…·æŸ¥çœ‹å®æ—¶èµ„æºä½¿ç”¨æƒ…å†µã€‚")]),t._v(" "),s("li",[s("strong",[t._v("è¿›ç¨‹æ£€æŸ¥")]),t._v("ï¼šæŸ¥çœ‹æ˜¯å¦æœ‰å¼‚å¸¸è¿›ç¨‹å ç”¨å¤§é‡èµ„æºã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("åº”ç”¨çº§åˆ«æ£€æŸ¥")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åº”ç”¨æ—¥å¿—")]),t._v("ï¼šæ£€æŸ¥åº”ç”¨æ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰å¼‚å¸¸é”™è¯¯ã€è¶…æ—¶æˆ–å…¶ä»–æç¤ºä¿¡æ¯ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("çº¿ç¨‹å’Œå †æ ˆ")]),t._v("ï¼šæ£€æŸ¥åº”ç”¨çš„çº¿ç¨‹å’Œå †æ ˆä¿¡æ¯ï¼Œä½¿ç”¨å·¥å…·å¦‚ "),s("code",[t._v("jstack")]),t._v(" æŸ¥çœ‹ Java åº”ç”¨çš„çº¿ç¨‹çŠ¶æ€ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åƒåœ¾å›æ”¶")]),t._v("ï¼šå¦‚æœæ˜¯ Java åº”ç”¨ï¼Œæ£€æŸ¥åƒåœ¾å›æ”¶æ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨é¢‘ç¹çš„ GC åœé¡¿ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ•°æ®åº“æ€§èƒ½")]),t._v("ï¼šæ£€æŸ¥æ•°æ®åº“æ€§èƒ½ï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨æ…¢æŸ¥è¯¢ã€å¤§é‡é”ç­‰å¾…ç­‰é—®é¢˜ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("ç½‘ç»œæ£€æŸ¥")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç½‘ç»œå»¶è¿Ÿ")]),t._v("ï¼šä½¿ç”¨ "),s("code",[t._v("ping")]),t._v("ã€"),s("code",[t._v("traceroute")]),t._v(" ç­‰å·¥å…·æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿå’Œè·¯å¾„ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¸¦å®½å ç”¨")]),t._v("ï¼šä½¿ç”¨ "),s("code",[t._v("iftop")]),t._v("ã€"),s("code",[t._v("netstat")]),t._v(" ç­‰å·¥å…·æŸ¥çœ‹ç½‘ç»œå¸¦å®½å ç”¨æƒ…å†µã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("å¤–éƒ¨ä¾èµ–")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç¬¬ä¸‰æ–¹æœåŠ¡")]),t._v("ï¼šæ£€æŸ¥ä¾èµ–çš„ç¬¬ä¸‰æ–¹æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œæ˜¯å¦å­˜åœ¨å“åº”ç¼“æ…¢çš„é—®é¢˜ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("API è°ƒç”¨")]),t._v("ï¼šæ£€æŸ¥å¤–éƒ¨ API è°ƒç”¨çš„å“åº”æ—¶é—´ï¼Œæ˜¯å¦å­˜åœ¨å»¶è¿Ÿã€‚")])])])]),t._v(" "),s("p",[s("strong",[t._v("æ€§èƒ½è¯„ä¼°")])]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("åŸºå‡†æµ‹è¯•")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("è´Ÿè½½æµ‹è¯•")]),t._v("ï¼šä½¿ç”¨å·¥å…·å¦‚ "),s("code",[t._v("JMeter")]),t._v("ã€"),s("code",[t._v("Gatling")]),t._v(" å¯¹åº”ç”¨è¿›è¡Œè´Ÿè½½æµ‹è¯•ï¼Œè¯„ä¼°å…¶åœ¨é«˜è´Ÿè½½ä¸‹çš„è¡¨ç°ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å‹åŠ›æµ‹è¯•")]),t._v("ï¼šæ¨¡æ‹Ÿé«˜å¹¶å‘ç”¨æˆ·è®¿é—®ï¼Œè¯„ä¼°åº”ç”¨çš„æœ€å¤§æ‰¿è½½èƒ½åŠ›ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("æ€§èƒ½ç›‘æ§")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç›‘æ§å·¥å…·")]),t._v("ï¼šä½¿ç”¨ç›‘æ§å·¥å…·å¦‚ Prometheusã€Grafanaã€Nagiosã€Zabbix ç­‰ï¼Œå¯¹æœåŠ¡å™¨çš„ CPUã€å†…å­˜ã€ç£ç›˜ I/Oã€ç½‘ç»œç­‰è¿›è¡ŒæŒç»­ç›‘æ§ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åº”ç”¨æ€§èƒ½ç›‘æ§")]),t._v("ï¼šä½¿ç”¨ APM å·¥å…·å¦‚ New Relicã€AppDynamicsã€Dynatrace ç­‰ï¼Œç›‘æ§åº”ç”¨çš„æ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚å“åº”æ—¶é—´ã€é”™è¯¯ç‡ã€ååé‡ç­‰ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("æ—¥å¿—åˆ†æ")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é›†ä¸­æ—¥å¿—ç®¡ç†")]),t._v("ï¼šä½¿ç”¨ ELKï¼ˆElasticsearch, Logstash, Kibanaï¼‰æˆ– Splunk ç­‰å·¥å…·é›†ä¸­ç®¡ç†å’Œåˆ†ææ—¥å¿—ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ—¥å¿—åˆ†æ")]),t._v("ï¼šåˆ†æåº”ç”¨æ—¥å¿—å’Œç³»ç»Ÿæ—¥å¿—ï¼ŒæŸ¥æ‰¾å¼‚å¸¸å’Œé”™è¯¯ä¿¡æ¯ã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("æ€§èƒ½ä¼˜åŒ–")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ä»£ç ä¼˜åŒ–")]),t._v("ï¼šåˆ†æåº”ç”¨ä»£ç ï¼ŒæŸ¥æ‰¾æ€§èƒ½ç“¶é¢ˆï¼Œå¦‚ä½æ•ˆç®—æ³•ã€é¢‘ç¹çš„ I/O æ“ä½œç­‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ•°æ®åº“ä¼˜åŒ–")]),t._v("ï¼šä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢ï¼Œæ·»åŠ ç´¢å¼•ã€ä¼˜åŒ– SQL è¯­å¥ã€è°ƒæ•´æ•°æ®åº“é…ç½®ç­‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç¼“å­˜ç­–ç•¥")]),t._v("ï¼šä½¿ç”¨ç¼“å­˜ï¼ˆå¦‚ Redisã€Memcachedï¼‰å‡è½»æ•°æ®åº“å‹åŠ›ï¼Œæå‡å“åº”é€Ÿåº¦ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("è´Ÿè½½å‡è¡¡")]),t._v("ï¼šä½¿ç”¨è´Ÿè½½å‡è¡¡ï¼ˆå¦‚ Nginxã€HAProxyï¼‰åˆ†å‘æµé‡ï¼Œå‡è½»å•ç‚¹å‹åŠ›ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("é›†ç¾¤å’Œåˆ†å¸ƒå¼")]),t._v("ï¼šå°†åº”ç”¨éƒ¨ç½²åœ¨é›†ç¾¤æˆ–åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œæé«˜ç³»ç»Ÿçš„æ‰©å±•æ€§å’Œå¯é æ€§ã€‚")])])])]),t._v(" "),s("p",[t._v("è¯Šæ–­æœåŠ¡å™¨å˜æ…¢éœ€è¦ç³»ç»Ÿçš„æ–¹æ³•ï¼Œä»ç¡¬ä»¶èµ„æºã€ç³»ç»Ÿçº§åˆ«ã€åº”ç”¨çº§åˆ«ã€ç½‘ç»œå’Œå¤–éƒ¨ä¾èµ–ç­‰å¤šä¸ªæ–¹é¢è¿›è¡Œæ’æŸ¥ã€‚æ€§èƒ½è¯„ä¼°åˆ™éœ€è¦é€šè¿‡åŸºå‡†æµ‹è¯•ã€æ€§èƒ½ç›‘æ§ã€æ—¥å¿—åˆ†æç­‰æ‰‹æ®µå…¨é¢äº†è§£ç³»ç»Ÿæ€§èƒ½ï¼Œå¹¶é€šè¿‡ä¼˜åŒ–ä»£ç ã€æ•°æ®åº“ã€ç¼“å­˜ç­–ç•¥ç­‰æªæ–½æå‡ç³»ç»Ÿæ€§èƒ½ã€‚å®šæœŸçš„æ€§èƒ½è¯„ä¼°å’Œä¼˜åŒ–å¯ä»¥å¸®åŠ©ç»´æŠ¤ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œé«˜æ•ˆæ€§ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å‡è®¾ç”Ÿäº§ç¯å¢ƒå‡ºç°-cpuå ç”¨è¿‡é«˜-è¯·è°ˆè°ˆä½ çš„åˆ†ææ€è·¯å’Œå®šä½"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å‡è®¾ç”Ÿäº§ç¯å¢ƒå‡ºç°-cpuå ç”¨è¿‡é«˜-è¯·è°ˆè°ˆä½ çš„åˆ†ææ€è·¯å’Œå®šä½"}},[t._v("#")]),t._v(" ğŸ¯ å‡è®¾ç”Ÿäº§ç¯å¢ƒå‡ºç° CPUå ç”¨è¿‡é«˜ï¼Œè¯·è°ˆè°ˆä½ çš„åˆ†ææ€è·¯å’Œå®šä½")]),t._v(" "),s("p",[t._v("ç”Ÿäº§ç¯å¢ƒå‡ºç° CPU å ç”¨è¿‡é«˜çš„æƒ…å†µå¯èƒ½å½±å“åº”ç”¨çš„æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚ä¸‹é¢æ˜¯è¯¦ç»†çš„åˆ†ææ€è·¯å’Œå®šä½æ­¥éª¤ï¼š")]),t._v(" "),s("p",[s("strong",[t._v("åˆ†ææ€è·¯å’Œå®šä½æ­¥éª¤")])]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("ç¡®è®¤é—®é¢˜")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ç›‘æ§ç³»ç»Ÿ")]),t._v("ï¼šæ£€æŸ¥ç›‘æ§ç³»ç»Ÿï¼ˆå¦‚ Prometheusã€Grafanaï¼‰ä¸Šçš„ CPU ä½¿ç”¨ç‡å›¾è¡¨ï¼Œç¡®è®¤ CPU ä½¿ç”¨ç‡è¿‡é«˜çš„æ—¶é—´æ®µå’Œè¶‹åŠ¿ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("èŒƒå›´ç¡®è®¤")]),t._v("ï¼šç¡®å®šæ˜¯å•ä¸ªæœåŠ¡å™¨è¿˜æ˜¯æ•´ä¸ªé›†ç¾¤çš„ CPU å ç”¨éƒ½å¾ˆé«˜ã€‚")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ£€æŸ¥æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶èµ„æº")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("ç³»ç»Ÿæ—¥å¿—")]),t._v("ï¼šæŸ¥çœ‹æ“ä½œç³»ç»Ÿæ—¥å¿—ï¼ˆå¦‚ "),s("code",[t._v("/var/log/syslog")]),t._v(" æˆ– "),s("code",[t._v("/var/log/messages")]),t._v("ï¼‰ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ç¡¬ä»¶æ•…éšœã€é©±åŠ¨é—®é¢˜ç­‰ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("èµ„æºä½¿ç”¨å·¥å…·")]),t._v("ï¼šä½¿ç”¨ "),s("code",[t._v("top")]),t._v("ã€"),s("code",[t._v("htop")]),t._v("ã€"),s("code",[t._v("vmstat")]),t._v("ã€"),s("code",[t._v("iostat")]),t._v(" ç­‰å·¥å…·å®æ—¶æŸ¥çœ‹ CPU ä½¿ç”¨æƒ…å†µï¼Œè¯†åˆ«å ç”¨ CPU æœ€é«˜çš„è¿›ç¨‹ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("è¿›ç¨‹æ£€æŸ¥ï¼šä½¿ç”¨  "),s("code",[t._v("ps")]),t._v(" å‘½ä»¤åˆ—å‡ºæ‰€æœ‰è¿›ç¨‹åŠå…¶ CPU ä½¿ç”¨æƒ…å†µï¼Œä¾‹å¦‚ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" aux "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--sort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("-%cpu\n")])])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("åº”ç”¨å±‚é¢åˆ†æ")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åº”ç”¨æ—¥å¿—")]),t._v("ï¼šæ£€æŸ¥åº”ç”¨æ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰å¼‚å¸¸é”™è¯¯ã€è¶…æ—¶æˆ–å…¶ä»–æç¤ºä¿¡æ¯ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("çº¿ç¨‹åˆ†æ")]),t._v("ï¼šå¦‚æœæ˜¯ Java åº”ç”¨ï¼Œä½¿ç”¨ "),s("code",[t._v("jstack")]),t._v(" æˆ–å…¶ä»–çº¿ç¨‹åˆ†æå·¥å…·ç”Ÿæˆçº¿ç¨‹å †æ ˆä¿¡æ¯ï¼ŒæŸ¥çœ‹å“ªäº›çº¿ç¨‹åœ¨å ç”¨å¤§é‡ CPUã€‚")]),t._v(" "),s("li",[s("strong",[t._v("çƒ­ç‚¹åˆ†æ")]),t._v("ï¼šä½¿ç”¨ "),s("code",[t._v("perf")]),t._v("ã€"),s("code",[t._v("flame graph")]),t._v("ï¼ˆç«ç„°å›¾ï¼‰ç­‰æ€§èƒ½åˆ†æå·¥å…·è¿›è¡Œçƒ­ç‚¹åˆ†æï¼ŒæŸ¥çœ‹å…·ä½“å“ªäº›ä»£ç æˆ–æ–¹æ³•åœ¨æ¶ˆè€— CPUã€‚")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ•°æ®åº“å’Œå¤–éƒ¨æœåŠ¡")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ•°æ®åº“æ€§èƒ½")]),t._v("ï¼šæ£€æŸ¥æ•°æ®åº“æ€§èƒ½ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æ…¢æŸ¥è¯¢ã€å¤§é‡é”ç­‰å¾…ç­‰é—®é¢˜ã€‚ä½¿ç”¨å·¥å…·å¦‚ "),s("code",[t._v("slow query log")]),t._v("ã€"),s("code",[t._v("explain")]),t._v(" åˆ†æ SQL è¯­å¥ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¤–éƒ¨ä¾èµ–")]),t._v("ï¼šæ£€æŸ¥ä¾èµ–çš„ç¬¬ä¸‰æ–¹æœåŠ¡æˆ– API è°ƒç”¨æ˜¯å¦å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œå¯¼è‡´åº”ç”¨åœ¨ç­‰å¾…å“åº”æ—¶å ç”¨ CPUã€‚")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("å†…å­˜å’Œåƒåœ¾å›æ”¶")])]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("å†…å­˜ä½¿ç”¨")]),t._v("ï¼šæ£€æŸ¥å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œæ˜¯å¦æœ‰å†…å­˜æ³„æ¼å¯¼è‡´é¢‘ç¹çš„åƒåœ¾å›æ”¶ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("åƒåœ¾å›æ”¶æ—¥å¿—ï¼šå¦‚æœæ˜¯ Java åº”ç”¨ï¼Œæ£€æŸ¥åƒåœ¾å›æ”¶æ—¥å¿—ï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨é¢‘ç¹çš„ Full GCã€‚ä½¿ç”¨ "),s("code",[t._v("jstat")]),t._v(" å·¥å…·æŸ¥çœ‹ GC æ´»åŠ¨ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("jstat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-gcutil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("pid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ä»£ç å’Œé…ç½®ä¼˜åŒ–")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ä»£ç æ£€æŸ¥")]),t._v("ï¼šæ£€æŸ¥ä»£ç æ˜¯å¦å­˜åœ¨æ•ˆç‡ä½ä¸‹çš„ç®—æ³•æˆ–å¾ªç¯ï¼Œç‰¹åˆ«æ˜¯é«˜é¢‘è°ƒç”¨çš„éƒ¨åˆ†ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("é…ç½®è°ƒæ•´")]),t._v("ï¼šè°ƒæ•´åº”ç”¨å’ŒæœåŠ¡å™¨çš„é…ç½®ï¼Œä¾‹å¦‚çº¿ç¨‹æ± å¤§å°ã€æ•°æ®åº“è¿æ¥æ± é…ç½®ç­‰ï¼Œä»¥ä¼˜åŒ–æ€§èƒ½ã€‚")])])])]),t._v(" "),s("p",[s("strong",[t._v("å…·ä½“æ­¥éª¤å’Œå·¥å…·ç¤ºä¾‹")])]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("ä½¿ç”¨ "),s("code",[t._v("top")]),t._v(" æˆ– "),s("code",[t._v("htop")]),t._v(" æŸ¥çœ‹ CPU ä½¿ç”¨æƒ…å†µ")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("top")]),t._v("\n")])])]),s("p",[t._v("è§‚å¯Ÿå“ªä¸ªè¿›ç¨‹å ç”¨ CPU æœ€é«˜ï¼Œè®°ä¸‹ PIDã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ä½¿ç”¨ "),s("code",[t._v("ps")]),t._v(" æŸ¥çœ‹è¯¦ç»†è¿›ç¨‹ä¿¡æ¯")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" aux "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--sort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("-%cpu "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("head")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])])]),s("p",[t._v("æŸ¥çœ‹å ç”¨ CPU å‰ 10 çš„è¿›ç¨‹ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ç”Ÿæˆçº¿ç¨‹å †æ ˆä¿¡æ¯ï¼ˆé’ˆå¯¹ Java åº”ç”¨ï¼‰")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("jstack "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("pid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" thread_dump.txt\n")])])]),s("p",[t._v("åˆ†æ "),s("code",[t._v("thread_dump.txt")]),t._v(" æ–‡ä»¶ï¼ŒæŸ¥çœ‹å“ªäº›çº¿ç¨‹åœ¨å ç”¨å¤§é‡ CPUã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ä½¿ç”¨ "),s("code",[t._v("perf")]),t._v(" å·¥å…·è¿›è¡Œæ€§èƒ½åˆ†æ")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("perf record "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-F")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("pid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-g")]),t._v(" -- "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\nperf script "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" out.perf\n")])])]),s("p",[t._v("ç„¶åä½¿ç”¨ "),s("code",[t._v("FlameGraph")]),t._v(" å·¥å…·ç”Ÿæˆç«ç„°å›¾ï¼Œåˆ†æçƒ­ç‚¹ä»£ç ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("æ£€æŸ¥å’Œè°ƒæ•´åƒåœ¾å›æ”¶é…ç½®")]),t._v(" æŸ¥çœ‹åƒåœ¾å›æ”¶æ—¥å¿—ï¼Œåˆ†ææ˜¯å¦æœ‰é¢‘ç¹çš„ Full GCï¼Œå¯ä»¥å°è¯•è°ƒæ•´å †å¤§å°æˆ–æ›´æ¢åƒåœ¾å›æ”¶å™¨ã€‚")])])]),t._v(" "),s("p",[t._v("é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œå¯ä»¥ç³»ç»Ÿåœ°åˆ†æå’Œå®šä½ç”Ÿäº§ç¯å¢ƒä¸­ CPU å ç”¨è¿‡é«˜çš„é—®é¢˜ã€‚é¦–å…ˆç¡®è®¤é—®é¢˜èŒƒå›´ï¼Œç„¶åæ£€æŸ¥ç³»ç»Ÿå’Œåº”ç”¨å±‚é¢ï¼Œä½¿ç”¨åˆé€‚çš„å·¥å…·å’Œæ–¹æ³•è¿›è¡Œæ·±å…¥åˆ†æï¼Œæœ€ç»ˆæ ¹æ®åˆ†æç»“æœè¿›è¡Œä»£ç å’Œé…ç½®ä¼˜åŒ–ã€‚å®šæœŸçš„æ€§èƒ½ç›‘æ§å’Œåˆ†æå¯ä»¥é¢„é˜²å’ŒåŠæ—¶è§£å†³ç±»ä¼¼é—®é¢˜ï¼Œä¿è¯ç³»ç»Ÿçš„ç¨³å®šè¿è¡Œã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸ¯-å¦‚ä½•æ£€æµ‹-jvm-çš„å„é¡¹æŒ‡æ ‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¦‚ä½•æ£€æµ‹-jvm-çš„å„é¡¹æŒ‡æ ‡"}},[t._v("#")]),t._v(" ğŸ¯ å¦‚ä½•æ£€æµ‹ jvm çš„å„é¡¹æŒ‡æ ‡ï¼Ÿ")]),t._v(" "),s("blockquote",[s("p",[t._v("å¯¹äºJDK è‡ªå¸¦çš„JVM ç›‘æ§å’Œæ€§èƒ½åˆ†æå·¥å…·ç”¨è¿‡å“ªäº›ï¼Ÿä½ æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ")])]),t._v(" "),s("p",[s("strong",[t._v("1ã€JMXï¼ˆJava Management Extensionsï¼‰")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("JMXæ˜¯Javaå¹³å°çš„å†…ç½®ç®¡ç†æ¡†æ¶ï¼Œç”¨äºç›‘æ§å’Œç®¡ç†Javaåº”ç”¨ç¨‹åºã€‚é€šè¿‡JMXï¼Œå¯ä»¥è·å–JVMçš„è¿è¡Œæ—¶æ•°æ®ï¼ŒåŒ…æ‹¬å†…å­˜ä½¿ç”¨æƒ…å†µã€çº¿ç¨‹ä¿¡æ¯ã€åƒåœ¾å›æ”¶ç»Ÿè®¡ç­‰ã€‚")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("ä½¿ç”¨ JConsole ç›‘æ§ JVM")])]),t._v(" "),s("ol",[s("li",[t._v("å¯åŠ¨ JConsoleï¼š\n"),s("ul",[s("li",[t._v("JConsole æ˜¯ JDK è‡ªå¸¦çš„å›¾å½¢åŒ–å·¥å…·ï¼Œç”¨äºç›‘æ§ JVM çš„å„ç§æŒ‡æ ‡ã€‚")]),t._v(" "),s("li",[t._v("ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ "),s("code",[t._v("jconsole")]),t._v(" å¯åŠ¨ JConsoleã€‚")])])]),t._v(" "),s("li",[t._v("è¿æ¥åˆ° JVMï¼š\n"),s("ul",[s("li",[t._v("åœ¨ JConsole çš„è¿æ¥çª—å£ä¸­é€‰æ‹©æœ¬åœ°è¿›ç¨‹æˆ–è¿œç¨‹è¿›ç¨‹ï¼Œç„¶åç‚¹å‡»è¿æ¥ã€‚")])])]),t._v(" "),s("li",[t._v("æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡ï¼š\n"),s("ul",[s("li",[t._v("åœ¨ JConsole ä¸­ï¼Œä½ å¯ä»¥æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µã€çº¿ç¨‹æ´»åŠ¨ã€ç±»åŠ è½½ã€MBean ç­‰")])])])]),t._v(" "),s("p",[t._v("ä¹Ÿå¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼ä½¿ç”¨ JMX è®¿é—® JVM çš„æ€§èƒ½æŒ‡æ ‡")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JMXExample")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MBeanServerConnection")]),t._v(" mBeanServer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ManagementFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPlatformMBeanServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjectName")]),t._v(" memoryMXBeanName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjectName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ManagementFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MEMORY_MXBEAN_NAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MemoryMXBean")]),t._v(" memoryMXBean "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ManagementFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("newPlatformMXBeanProxy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mBeanServer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" memoryMXBeanName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MemoryMXBean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–å †å†…å­˜ä½¿ç”¨æƒ…å†µ")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MemoryUsage")]),t._v(" heapMemoryUsage "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" memoryMXBean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeapMemoryUsage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Heap Memory Usage: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" heapMemoryUsage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–éå †å†…å­˜ä½¿ç”¨æƒ…å†µ")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MemoryUsage")]),t._v(" nonHeapMemoryUsage "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" memoryMXBean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getNonHeapMemoryUsage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Non-Heap Memory Usage: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" nonHeapMemoryUsage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),s("li",[s("p",[t._v("å¯ä»¥ä½¿ç”¨JMX Exporterå°†JVMçš„ç›‘æ§æŒ‡æ ‡æš´éœ²ç»™Prometheusè¿›è¡Œé‡‡é›†å’Œç›‘æ§")])])]),t._v(" "),s("p",[s("strong",[t._v("2ã€ä½¿ç”¨ Java å‘½ä»¤è¡Œå·¥å…·")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("jstat")]),t._v(" æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç›‘æ§ JVM çš„å„ç§æ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚åƒåœ¾å›æ”¶ã€ç±»åŠ è½½ç­‰")]),t._v(" "),s("li",[s("code",[t._v("jmap")]),t._v(" ç”¨äºç”Ÿæˆå †è½¬å‚¨æ–‡ä»¶ï¼ˆheap dumpï¼‰å’ŒæŸ¥çœ‹å †å†…å­˜çš„è¯¦ç»†ä¿¡æ¯")]),t._v(" "),s("li",[s("code",[t._v("jstack")]),t._v(" ç”¨äºç”Ÿæˆçº¿ç¨‹å¿«ç…§ï¼ˆthread dumpï¼‰ï¼Œå¯ä»¥å¸®åŠ©è¯Šæ–­çº¿ç¨‹æ­»é”å’Œé«˜ CPU ä½¿ç”¨é—®é¢˜")])]),t._v(" "),s("p",[s("strong",[t._v("3ã€ä½¿ç”¨ç¬¬ä¸‰æ–¹ç›‘æ§å·¥å…·")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("VisualVM æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å›¾å½¢åŒ–å·¥å…·ï¼Œç”¨äºç›‘æ§å’Œåˆ†æ JVM çš„æ€§èƒ½ã€‚å®ƒå¯ä»¥ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µã€çº¿ç¨‹æ´»åŠ¨ã€åƒåœ¾å›æ”¶ç­‰")])]),t._v(" "),s("li",[s("p",[t._v("Prometheus æ˜¯ä¸€ä¸ªå¼€æºç›‘æ§ç³»ç»Ÿï¼ŒGrafana æ˜¯ä¸€ä¸ªå¼€æºçš„æ—¶åºæ•°æ®å¯è§†åŒ–å·¥å…·ã€‚ç»“åˆä½¿ç”¨è¿™ä¸¤ä¸ªå·¥å…·å¯ä»¥å®ç°å¯¹ JVM çš„é«˜çº§ç›‘æ§å’Œå¯è§†åŒ–ã€‚")])])]),t._v(" "),s("p",[t._v("4ã€ä½¿ç”¨ Spring Boot Actuator (å¦‚æœä½¿ç”¨ Spring Boot)")]),t._v(" "),s("h2",{attrs:{id:"ğŸ¯-é«˜é¢‘é¢è¯•é¢˜æ±‡æ€»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-é«˜é¢‘é¢è¯•é¢˜æ±‡æ€»"}},[t._v("#")]),t._v(" ğŸ¯ é«˜é¢‘é¢è¯•é¢˜æ±‡æ€»")]),t._v(" "),s("h3",{attrs:{id:"æ ¸å¿ƒå¿…è€ƒé¢˜-â­â­â­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ ¸å¿ƒå¿…è€ƒé¢˜-â­â­â­"}},[t._v("#")]),t._v(" æ ¸å¿ƒå¿…è€ƒé¢˜ï¼ˆâ­â­â­ï¼‰")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("è¯´è¯´JVMçš„å†…å­˜ç»“æ„ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("å †å†…å­˜çš„ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶ï¼Ÿä¸ºä»€ä¹ˆè¦è¿›è¡Œåƒåœ¾å›æ”¶ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("å¦‚ä½•åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("å¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰å“ªäº›ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("åˆ†ä»£åƒåœ¾å›æ”¶æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("ç±»åŠ è½½çš„å®Œæ•´è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨åŒäº²å§”æ´¾ï¼Ÿ")])])]),t._v(" "),s("h3",{attrs:{id:"è¿›é˜¶æ·±å…¥é¢˜-â­â­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿›é˜¶æ·±å…¥é¢˜-â­â­"}},[t._v("#")]),t._v(" è¿›é˜¶æ·±å…¥é¢˜ï¼ˆâ­â­ï¼‰")]),t._v(" "),s("ol",{attrs:{start:"9"}},[s("li",[s("strong",[t._v("å¯¹è±¡åœ¨å †å†…å­˜ä¸­æ˜¯å¦‚ä½•åˆ†é…çš„ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("ä»€ä¹ˆæ˜¯å†…å­˜æº¢å‡ºï¼Ÿå¸¸è§çš„OOMæœ‰å“ªäº›ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼Ÿå¦‚ä½•æ’æŸ¥ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("å¸¸è§çš„åƒåœ¾æ”¶é›†å™¨æœ‰å“ªäº›ï¼Ÿå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("å¦‚ä½•è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("å¸¸ç”¨çš„JVMå‚æ•°æœ‰å“ªäº›ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("å¦‚ä½•ç›‘æ§JVMæ€§èƒ½ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("JVMè°ƒä¼˜çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è°ƒä¼˜ï¼Ÿ")])])]),t._v(" "),s("h3",{attrs:{id:"åº”ç”¨å®è·µé¢˜-â­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åº”ç”¨å®è·µé¢˜-â­"}},[t._v("#")]),t._v(" åº”ç”¨å®è·µé¢˜ï¼ˆâ­ï¼‰")]),t._v(" "),s("ol",{attrs:{start:"17"}},[s("li",[s("strong",[t._v("å¦‚ä½•ä¼˜åŒ–JVMå†…å­˜ä½¿ç”¨ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("å¦‚ä½•ä¼˜åŒ–åƒåœ¾å›æ”¶æ€§èƒ½ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("å¦‚ä½•æ’æŸ¥JVMæ€§èƒ½é—®é¢˜ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("ç”Ÿäº§ç¯å¢ƒJVMè°ƒä¼˜çš„æœ€ä½³å®è·µï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("JVMå†…å­˜æ¨¡å‹ä¸Javaå†…å­˜æ¨¡å‹çš„åŒºåˆ«ï¼Ÿ")])]),t._v(" "),s("li",[s("strong",[t._v("å¦‚ä½•åˆ†æå †è½¬å‚¨æ–‡ä»¶ï¼Ÿ")])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"ğŸ“-é¢è¯•è¯æœ¯æ¨¡æ¿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“-é¢è¯•è¯æœ¯æ¨¡æ¿"}},[t._v("#")]),t._v(" ğŸ“ é¢è¯•è¯æœ¯æ¨¡æ¿")]),t._v(" "),s("h3",{attrs:{id:"å›ç­”æ¡†æ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å›ç­”æ¡†æ¶"}},[t._v("#")]),t._v(" å›ç­”æ¡†æ¶")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("1. æ¦‚å¿µå®šä¹‰ï¼ˆ30ç§’ï¼‰\n   - ç®€è¦è¯´æ˜æ˜¯ä»€ä¹ˆ\n\n2. æ ¸å¿ƒåŸç†ï¼ˆ60ç§’ï¼‰\n   - åº•å±‚å®ç°æœºåˆ¶\n   - å…³é”®æ•°æ®ç»“æ„\n\n3. ç‰¹æ€§åˆ†æï¼ˆ30ç§’ï¼‰\n   - ä¼˜ç¼ºç‚¹å¯¹æ¯”\n   - ä½¿ç”¨åœºæ™¯\n\n4. å®æˆ˜åº”ç”¨ï¼ˆ30ç§’ï¼‰\n   - ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨\n   - æ³¨æ„äº‹é¡¹\n\n5. æ·±å…¥æ‰©å±•ï¼ˆå¯é€‰ï¼‰\n   - æºç ç»†èŠ‚\n   - æ€§èƒ½ä¼˜åŒ–\n   - æœ€ä½³å®è·µ\n")])])]),s("h3",{attrs:{id:"å…³é”®è¯æœ¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…³é”®è¯æœ¯"}},[t._v("#")]),t._v(" å…³é”®è¯æœ¯")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("JVMå†…å­˜ç»“æ„")]),t._v('ï¼š"JVMå†…å­˜ä¸»è¦åˆ†ä¸ºå †å†…å­˜ã€æ–¹æ³•åŒºã€è™šæ‹Ÿæœºæ ˆç­‰ï¼Œå…¶ä¸­å †å†…å­˜æ˜¯GCçš„ä¸»è¦åŒºåŸŸ..."')]),t._v(" "),s("li",[s("strong",[t._v("åƒåœ¾å›æ”¶")]),t._v('ï¼š"åƒåœ¾å›æ”¶é€šè¿‡å¯è¾¾æ€§åˆ†æç®—æ³•åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»ï¼Œä½¿ç”¨åˆ†ä»£æ”¶é›†ç®—æ³•æé«˜æ•ˆç‡..."')]),t._v(" "),s("li",[s("strong",[t._v("ç±»åŠ è½½")]),t._v('ï¼š"ç±»åŠ è½½åˆ†ä¸ºåŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–äº”ä¸ªé˜¶æ®µï¼Œä½¿ç”¨åŒäº²å§”æ´¾æ¨¡å‹ä¿è¯å®‰å…¨æ€§..."')]),t._v(" "),s("li",[s("strong",[t._v("æ€§èƒ½è°ƒä¼˜")]),t._v('ï¼š"JVMè°ƒä¼˜éœ€è¦å…ˆåˆ†ææ€§èƒ½ç“¶é¢ˆï¼Œç„¶åé€‰æ‹©åˆé€‚çš„åƒåœ¾æ”¶é›†å™¨å’Œå‚æ•°ï¼Œæœ€åéªŒè¯è°ƒä¼˜æ•ˆæœ..."')])])])}),[],!1,null,null,null);a.default=n.exports}}]);