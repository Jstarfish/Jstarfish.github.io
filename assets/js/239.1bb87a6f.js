(window.webpackJsonp=window.webpackJsonp||[]).push([[239],{730:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("img",{attrs:{src:"https://img.starfish.ink/common/faq-banner.png",alt:""}})]),t._v(" "),a("blockquote",[a("p",[t._v("Springæ¡†æ¶ä½œä¸ºJavaç”Ÿæ€ç³»ç»Ÿçš„"),a("strong",[t._v("æ ¸å¿ƒåŸºç¡€è®¾æ–½")]),t._v("ï¼Œæ˜¯æ¯ä¸ªJavaå¼€å‘è€…å¿…é¡»æŒæ¡çš„æŠ€æœ¯æ ˆã€‚ä»ç®€å•çš„IOCå®¹å™¨åˆ°å¤æ‚çš„å¾®æœåŠ¡æ¶æ„ï¼Œä»ä¼ ç»Ÿçš„SSMåˆ°ç°ä»£çš„å“åº”å¼ç¼–ç¨‹ï¼ŒSpringæŠ€æœ¯æ ˆçš„æ·±åº¦å’Œå¹¿åº¦å†³å®šäº†å¼€å‘è€…çš„èŒä¸šé«˜åº¦ã€‚æœ¬æ–‡æ¡£ç³»ç»Ÿæ¢³ç†Springé¢è¯•ä¸­çš„"),a("strong",[t._v("é«˜é¢‘è€ƒç‚¹")]),t._v("ï¼Œä¸ä»…æä¾›æ ‡å‡†ç­”æ¡ˆï¼Œæ›´æ³¨é‡"),a("strong",[t._v("åŸç†è§£æ")]),t._v("å’Œ"),a("strong",[t._v("å®æˆ˜åº”ç”¨")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("Spring é¢è¯•ï¼Œå›´ç»•ç€è¿™ä¹ˆå‡ ä¸ªæ ¸å¿ƒæ–¹å‘å‡†å¤‡ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Spring Frameworkæ ¸å¿ƒ")]),t._v("ï¼ˆIOCå®¹å™¨ã€ä¾èµ–æ³¨å…¥ã€Beanç”Ÿå‘½å‘¨æœŸã€AOPç¼–ç¨‹ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("Spring Bootè‡ªåŠ¨é…ç½®")]),t._v("ï¼ˆStarteræœºåˆ¶ã€æ¡ä»¶è£…é…ã€å¤–éƒ¨åŒ–é…ç½®ã€Actuatorç›‘æ§ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("Spring MVCè¯·æ±‚å¤„ç†")]),t._v("ï¼ˆDispatcherServletã€HandlerMappingã€è§†å›¾è§£æã€å¼‚å¸¸å¤„ç†ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("Springäº‹åŠ¡ç®¡ç†")]),t._v("ï¼ˆå£°æ˜å¼äº‹åŠ¡ã€ä¼ æ’­è¡Œä¸ºã€éš”ç¦»çº§åˆ«ã€äº‹åŠ¡å¤±æ•ˆé—®é¢˜ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("Spring Dataæ•°æ®è®¿é—®")]),t._v("ï¼ˆRepositoryæ¨¡å¼ã€åˆ†é¡µæŸ¥è¯¢ã€äº‹åŠ¡ç®¡ç†ã€å¤šæ•°æ®æºï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("Spring Securityå®‰å…¨æ¡†æ¶")]),t._v("ï¼ˆè®¤è¯æˆæƒã€JWTé›†æˆã€CSRFé˜²æŠ¤ã€æ–¹æ³•çº§å®‰å…¨ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("Spring Cloudå¾®æœåŠ¡")]),t._v("ï¼ˆæœåŠ¡æ³¨å†Œå‘ç°ã€é…ç½®ä¸­å¿ƒã€ç†”æ–­é™çº§ã€ç½‘å…³è·¯ç”±ï¼‰")])])]),t._v(" "),a("h2",{attrs:{id:"ğŸ—ºï¸-çŸ¥è¯†å¯¼èˆª"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ—ºï¸-çŸ¥è¯†å¯¼èˆª"}},[t._v("#")]),t._v(" ğŸ—ºï¸ çŸ¥è¯†å¯¼èˆª")]),t._v(" "),a("h3",{attrs:{id:"ğŸ·ï¸-æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ·ï¸-æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»"}},[t._v("#")]),t._v(" ğŸ·ï¸ æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ğŸ—ï¸ Spring Frameworkæ ¸å¿ƒ")]),t._v("ï¼šIOCå®¹å™¨ã€ä¾èµ–æ³¨å…¥ã€Beanç”Ÿå‘½å‘¨æœŸã€ä½œç”¨åŸŸã€å¾ªç¯ä¾èµ–ã€BeanFactory vs ApplicationContext")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ¯ AOPé¢å‘åˆ‡é¢ç¼–ç¨‹")]),t._v("ï¼šAOPæ¦‚å¿µã€ä»£ç†æ¨¡å¼ã€é€šçŸ¥ç±»å‹ã€åˆ‡ç‚¹è¡¨è¾¾å¼ã€AspectJé›†æˆã€åŠ¨æ€ä»£ç† vs CGLIB")]),t._v(" "),a("li",[a("strong",[t._v("ğŸŒ Spring MVCæ¶æ„")]),t._v("ï¼šè¯·æ±‚å¤„ç†æµç¨‹ã€DispatcherServletã€HandlerMappingã€è§†å›¾è§£æã€å‚æ•°ç»‘å®šã€å¼‚å¸¸å¤„ç†")]),t._v(" "),a("li",[a("strong",[t._v("ğŸš€ Spring Bootæ ¸å¿ƒç‰¹æ€§")]),t._v("ï¼šè‡ªåŠ¨é…ç½®åŸç†ã€Starteræœºåˆ¶ã€æ¡ä»¶è£…é…ã€å¤–éƒ¨åŒ–é…ç½®ã€Actuatorç›‘æ§ã€æ‰“åŒ…éƒ¨ç½²")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ’¾ æ•°æ®è®¿é—®ä¸äº‹åŠ¡")]),t._v("ï¼šSpring Dataã€äº‹åŠ¡ç®¡ç†ã€ä¼ æ’­è¡Œä¸ºã€éš”ç¦»çº§åˆ«ã€äº‹åŠ¡å¤±æ•ˆã€å¤šæ•°æ®æºã€åˆ†é¡µæŸ¥è¯¢")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ”’ Spring Securityå®‰å…¨")]),t._v("ï¼šè®¤è¯æˆæƒæµç¨‹ã€SecurityContextã€JWTé›†æˆã€CSRFé˜²æŠ¤ã€æ–¹æ³•çº§å®‰å…¨ã€OAuth2é›†æˆ")]),t._v(" "),a("li",[a("strong",[t._v("â˜ï¸ Spring Cloudå¾®æœåŠ¡")]),t._v("ï¼šæœåŠ¡æ³¨å†Œå‘ç°ã€é…ç½®ä¸­å¿ƒã€ç†”æ–­é™çº§ã€APIç½‘å…³ã€é“¾è·¯è¿½è¸ªã€åˆ†å¸ƒå¼äº‹åŠ¡")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ“ æ³¨è§£ä¸é…ç½®")]),t._v("ï¼šå¸¸ç”¨æ³¨è§£ã€JavaConfigã€Profileç®¡ç†ã€å±æ€§æ³¨å…¥ã€æ¡ä»¶è£…é…ã€è‡ªå®šä¹‰æ³¨è§£")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ”§ é«˜çº§ç‰¹æ€§ä¸å®è·µ")]),t._v("ï¼šäº‹ä»¶æœºåˆ¶ã€å›½é™…åŒ–ã€ç¼“å­˜æŠ½è±¡ã€ä»»åŠ¡è°ƒåº¦ã€WebSocketã€å“åº”å¼ç¼–ç¨‹")]),t._v(" "),a("li",[a("strong",[t._v("ğŸ¯ é¢è¯•é‡ç‚¹ä¸å®è·µ")]),t._v("ï¼šè®¾è®¡æ¨¡å¼ã€æ€§èƒ½ä¼˜åŒ–ã€æœ€ä½³å®è·µã€å¸¸è§é™·é˜±ã€Spring vs SpringBootã€æ•´ä½“æ¶æ„è®¾è®¡")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ”‘-é¢è¯•è¯æœ¯æ¨¡æ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”‘-é¢è¯•è¯æœ¯æ¨¡æ¿"}},[t._v("#")]),t._v(" ğŸ”‘ é¢è¯•è¯æœ¯æ¨¡æ¿")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[t._v("é—®é¢˜ç±»å‹")])]),t._v(" "),a("th",[a("strong",[t._v("å›ç­”æ¡†æ¶")])]),t._v(" "),a("th",[a("strong",[t._v("å…³é”®è¦ç‚¹")])]),t._v(" "),a("th",[a("strong",[t._v("æ·±å…¥æ‰©å±•")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("æ¦‚å¿µè§£é‡Š")])]),t._v(" "),a("td",[t._v("å®šä¹‰â†’æ ¸å¿ƒç‰¹æ€§â†’å·¥ä½œåŸç†â†’åº”ç”¨åœºæ™¯")]),t._v(" "),a("td",[t._v("å‡†ç¡®å®šä¹‰ï¼Œçªå‡ºæ ¸å¿ƒä»·å€¼")]),t._v(" "),a("td",[t._v("æºç åˆ†æï¼Œè®¾è®¡æ€æƒ³ï¼Œæœ€ä½³å®è·µ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("åŸç†åˆ†æ")])]),t._v(" "),a("td",[t._v("èƒŒæ™¯é—®é¢˜â†’è§£å†³æ–¹æ¡ˆâ†’å®ç°æœºåˆ¶â†’ä¼˜åŠ¿åŠ£åŠ¿")]),t._v(" "),a("td",[t._v("å›¾è§£æµç¨‹ï¼Œå…³é”®æ­¥éª¤")]),t._v(" "),a("td",[t._v("åº•å±‚å®ç°ï¼Œæ€§èƒ½è€ƒé‡ï¼Œæ‰©å±•æœºåˆ¶")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æŠ€æœ¯å¯¹æ¯”")])]),t._v(" "),a("td",[t._v("ç›¸åŒç‚¹â†’å·®å¼‚ç‚¹â†’é€‚ç”¨åœºæ™¯â†’é€‰æ‹©å»ºè®®")]),t._v(" "),a("td",[t._v("å¤šç»´åº¦å¯¹æ¯”ï¼Œå®é™…åœºæ™¯")]),t._v(" "),a("td",[t._v("æ€§èƒ½å·®å¼‚ï¼Œå®ç°å¤æ‚åº¦ï¼Œç»´æŠ¤æˆæœ¬")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å®è·µåº”ç”¨")])]),t._v(" "),a("td",[t._v("ä¸šåŠ¡åœºæ™¯â†’æŠ€æœ¯é€‰å‹â†’å…·ä½“å®ç°â†’è¸©å‘ç»éªŒ")]),t._v(" "),a("td",[t._v("å®é™…é¡¹ç›®æ¡ˆä¾‹ï¼Œä»£ç ç¤ºä¾‹")]),t._v(" "),a("td",[t._v("æ€§èƒ½ä¼˜åŒ–ï¼Œç›‘æ§è¿ç»´ï¼Œæ•…éšœå¤„ç†")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ¶æ„è®¾è®¡")])]),t._v(" "),a("td",[t._v("éœ€æ±‚åˆ†æâ†’æŠ€æœ¯é€‰å‹â†’æ¶æ„è®¾è®¡â†’å®æ–½æ–¹æ¡ˆ")]),t._v(" "),a("td",[t._v("ç³»ç»Ÿæ€è€ƒï¼Œå…¨å±€è§†è§’")]),t._v(" "),a("td",[t._v("å¯æ‰©å±•æ€§ï¼Œé«˜å¯ç”¨ï¼Œä¸€è‡´æ€§ä¿è¯")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ—ï¸-ä¸€ã€spring-frameworkæ ¸å¿ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ—ï¸-ä¸€ã€spring-frameworkæ ¸å¿ƒ"}},[t._v("#")]),t._v(" ğŸ—ï¸ ä¸€ã€Spring Frameworkæ ¸å¿ƒ")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç†å¿µ")]),t._v("ï¼šé€šè¿‡IOCæ§åˆ¶åè½¬å’ŒAOPé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå®ç°æ¾è€¦åˆã€é«˜å†…èšçš„ä¼ä¸šçº§åº”ç”¨å¼€å‘æ¡†æ¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-ä½¿ç”¨-spring-æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä½¿ç”¨-spring-æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„"}},[t._v("#")]),t._v(" ğŸ¯ ä½¿ç”¨ "),a("strong",[t._v("Spring")]),t._v(" æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„?")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("ç®€åŒ–å¼€å‘")]),t._v("ï¼šSpring æ¡†æ¶é€šè¿‡é«˜åº¦çš„ "),a("strong",[t._v("æŠ½è±¡")]),t._v(" å’Œ "),a("strong",[t._v("è‡ªåŠ¨åŒ–é…ç½®")]),t._v("ï¼Œå¤§å¤§ç®€åŒ–äº† Java å¼€å‘ï¼Œå‡å°‘äº†å¼€å‘è€…æ‰‹åŠ¨ç¼–å†™å¤§é‡é…ç½®ä»£ç çš„éœ€è¦ã€‚")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰")]),t._v("ï¼šSpring æä¾›äº† "),a("strong",[t._v("ä¾èµ–æ³¨å…¥")]),t._v("ï¼ˆDIï¼‰æœºåˆ¶ï¼Œé€šè¿‡ "),a("code",[t._v("@Autowired")]),t._v(" æˆ–æ„é€ å™¨æ³¨å…¥ï¼Œè‡ªåŠ¨ç®¡ç†ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå‡å°‘äº†ä»£ç çš„è€¦åˆæ€§ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰")]),t._v("ï¼šSpring æä¾›äº† "),a("strong",[t._v("AOP")]),t._v(" åŠŸèƒ½ï¼Œä½¿å¾—æ—¥å¿—è®°å½•ã€å®‰å…¨æ§åˆ¶ã€äº‹åŠ¡ç®¡ç†ç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹çš„ä»£ç èƒ½å¤Ÿä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œé™ä½äº†ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æ¾è€¦åˆæ¶æ„")]),t._v("ï¼šSpring æä¾›äº† "),a("strong",[t._v("æ¾è€¦åˆçš„æ¶æ„")]),t._v("ï¼Œé€šè¿‡ "),a("strong",[t._v("ä¾èµ–æ³¨å…¥")]),t._v(" å’Œ "),a("strong",[t._v("æ¥å£/æŠ½è±¡ç±»")]),t._v("ï¼Œè®©ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»æ¾æ•£ï¼Œæ–¹ä¾¿äº†æ¨¡å—çš„è§£è€¦å’Œæ‰©å±•ã€‚")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("é€šè¿‡ "),a("strong",[t._v("ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰")]),t._v("ï¼Œç»„ä»¶ä¹‹é—´çš„ä¾èµ–ä¸å†é€šè¿‡ç¡¬ç¼–ç è¿æ¥ï¼Œè€Œæ˜¯ç”± Spring å®¹å™¨ç®¡ç†ï¼Œä¾èµ–å…³ç³»åœ¨è¿è¡Œæ—¶é€šè¿‡é…ç½®æ³¨å…¥ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("Spring æä¾›äº†ä¸°å¯Œçš„ "),a("strong",[t._v("æ¥å£")]),t._v(" å’Œ "),a("strong",[t._v("æŠ½è±¡")]),t._v("ï¼Œè®©å¼€å‘è€…å¯ä»¥è½»æ¾æ›¿æ¢å’Œæ‰©å±•åŠŸèƒ½ã€‚")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æ›´å¥½çš„å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("ä¾èµ–æ³¨å…¥")]),t._v("ï¼šä½¿å¾—ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»é€šè¿‡å®¹å™¨è¿›è¡Œç®¡ç†ï¼Œä»è€Œæ›´å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚å¯ä»¥é€šè¿‡ "),a("strong",[t._v("Mocking")]),t._v(" æˆ– "),a("strong",[t._v("Stubbing")]),t._v(" æ¥æ¨¡æ‹Ÿä¾èµ–é¡¹ï¼Œæ–¹ä¾¿è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("åˆ†å±‚æ¶æ„æ”¯æŒ")]),t._v("ï¼šSpring æä¾›çš„æœåŠ¡å’Œ DAO å±‚å¯ä»¥æ›´åŠ æ¸…æ™°åœ°è¿›è¡Œåˆ†å±‚ï¼Œä½¿å¾—ç³»ç»Ÿç»“æ„æ›´åŠ æ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("äº‹åŠ¡ç®¡ç†")]),t._v("ï¼šSpring æä¾›äº†å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œæ–¹ä¾¿è¿›è¡Œæ•°æ®åº“æ“ä½œçš„äº‹åŠ¡æ§åˆ¶ï¼Œé™ä½äº†ç¼–ç å¤æ‚åº¦ï¼ŒåŒæ—¶æé«˜äº†äº‹åŠ¡ç®¡ç†çš„çµæ´»æ€§ã€‚")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("é›†æˆæ€§å¼º")]),t._v("ï¼šSpring çš„å¦ä¸€ä¸ªå…³é”®ä¼˜åŠ¿æ˜¯å…¶ "),a("strong",[t._v("è‰¯å¥½çš„é›†æˆèƒ½åŠ›")]),t._v("ã€‚Spring æä¾›äº†è®¸å¤šä¸å¸¸è§æŠ€æœ¯æ¡†æ¶çš„é›†æˆï¼ŒåŒ…æ‹¬ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("JPAã€Hibernateã€MyBatis")]),t._v(" ç­‰æŒä¹…åŒ–æ¡†æ¶çš„é›†æˆã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Spring Security")]),t._v("ï¼šæä¾›å¼ºå¤§çš„å®‰å…¨æ¡†æ¶ï¼Œæ”¯æŒèº«ä»½éªŒè¯ã€æˆæƒæ§åˆ¶ç­‰åŠŸèƒ½ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Spring MVC")]),t._v("ï¼šå¯ä»¥ä¸ä¸åŒçš„ Web æ¡†æ¶ï¼ˆå¦‚ JSPã€Freemarkerã€Thymeleafï¼‰ä»¥åŠ RESTful é£æ ¼çš„æ¥å£è¿›è¡Œé›†æˆã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Spring Boot")]),t._v("ï¼šè®©æ„å»ºã€éƒ¨ç½² Spring åº”ç”¨æ›´åŠ ä¾¿æ·ï¼Œç®€åŒ–äº† Spring é¡¹ç›®çš„é…ç½®å’Œå¯åŠ¨ã€‚")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("äº‹åŠ¡ç®¡ç†")]),t._v("ï¼šSpring æä¾›äº† "),a("strong",[t._v("å£°æ˜å¼äº‹åŠ¡ç®¡ç†")]),t._v("ï¼Œå¯ä»¥é€šè¿‡ "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£æ¥å®ç°äº‹åŠ¡çš„ç®¡ç†ï¼Œé¿å…äº†æ‰‹åŠ¨ç®¡ç†äº‹åŠ¡çš„éº»çƒ¦ï¼Œå¹¶ä¸”æ”¯æŒå¤šç§äº‹åŠ¡ä¼ æ’­æœºåˆ¶å’Œéš”ç¦»çº§åˆ«ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Spring Boot æå‡å¼€å‘æ•ˆç‡")]),t._v("ï¼šSpring Boot æ˜¯ Spring çš„å­é¡¹ç›®ï¼Œæ—¨åœ¨ç®€åŒ– Spring åº”ç”¨çš„é…ç½®å’Œéƒ¨ç½²ã€‚å®ƒæä¾›äº†ä»¥ä¸‹ä¼˜ç‚¹ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("è‡ªåŠ¨é…ç½®")]),t._v("ï¼šSpring Boot è‡ªåŠ¨é…ç½®äº†å¾ˆå¤šå¸¸è§çš„åŠŸèƒ½ï¼Œå¦‚æ•°æ®åº“è¿æ¥ã€Web é…ç½®ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼Œå‡å°‘äº†æ‰‹åŠ¨é…ç½®çš„å·¥ä½œé‡ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å†…åµŒ Web å®¹å™¨")]),t._v("ï¼šSpring Boot æä¾›äº†å†…åµŒçš„ Tomcatã€Jetty ç­‰ Web å®¹å™¨ï¼Œå¯ä»¥å°†åº”ç”¨æ‰“åŒ…æˆç‹¬ç«‹çš„ JAR æˆ– WAR æ–‡ä»¶ï¼Œä¾¿äºéƒ¨ç½²å’Œè¿è¡Œã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å¿«é€Ÿå¼€å‘")]),t._v("ï¼šSpring Boot æä¾›äº†å¤§é‡çš„é»˜è®¤é…ç½®å’Œå¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œå¯ä»¥å¿«é€Ÿå¯åŠ¨é¡¹ç›®ï¼Œå¹¶å‡å°‘äº†é…ç½®å’Œå¼€å‘çš„æ—¶é—´ã€‚")])])])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-springæœ‰å“ªäº›ä¼˜ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springæœ‰å“ªäº›ä¼˜ç‚¹"}},[t._v("#")]),t._v(" ğŸ¯ Springæœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("è½»é‡çº§")]),t._v("ï¼šSpringåœ¨å¤§å°å’Œé€æ˜æ€§æ–¹é¢ç»å¯¹å±äºè½»é‡çº§çš„ï¼ŒåŸºç¡€ç‰ˆæœ¬çš„Springæ¡†æ¶å¤§çº¦åªæœ‰2MBã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æ§åˆ¶åè½¬(IOC)")]),t._v("ï¼šSpringä½¿ç”¨æ§åˆ¶åè½¬æŠ€æœ¯å®ç°äº†æ¾è€¦åˆã€‚ä¾èµ–è¢«æ³¨å…¥åˆ°å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ›å»ºæˆ–å¯»æ‰¾ä¾èµ–å¯¹è±¡ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)")]),t._v("ï¼šSpringæ”¯æŒé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ŒåŒæ—¶æŠŠåº”ç”¨çš„ä¸šåŠ¡é€»è¾‘ä¸ç³»ç»Ÿçš„æœåŠ¡åˆ†ç¦»å¼€æ¥ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å®¹å™¨")]),t._v("ï¼šSpringåŒ…å«å¹¶ç®¡ç†åº”ç”¨ç¨‹åºå¯¹è±¡çš„é…ç½®åŠç”Ÿå‘½å‘¨æœŸã€‚")]),t._v(" "),a("li",[a("strong",[t._v("MVCæ¡†æ¶")]),t._v("ï¼šSpringçš„webæ¡†æ¶æ˜¯ä¸€ä¸ªè®¾è®¡ä¼˜è‰¯çš„web MVCæ¡†æ¶ï¼Œå¾ˆå¥½çš„å–ä»£äº†ä¸€äº›webæ¡†æ¶ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("äº‹åŠ¡ç®¡ç†")]),t._v("ï¼šSpringå¯¹ä¸‹è‡³æœ¬åœ°ä¸šåŠ¡ä¸Šè‡³å…¨å±€ä¸šåŠ¡(JAT)æä¾›äº†ç»Ÿä¸€çš„äº‹åŠ¡ç®¡ç†æ¥å£ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å¼‚å¸¸å¤„ç†")]),t._v("ï¼šSpringæä¾›ä¸€ä¸ªæ–¹ä¾¿çš„APIå°†ç‰¹å®šæŠ€æœ¯çš„å¼‚å¸¸(ç”±JDBC, Hibernate, æˆ–JDOæŠ›å‡º)è½¬åŒ–ä¸ºä¸€è‡´çš„ã€Uncheckedå¼‚å¸¸ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯springæ¡†æ¶-æ ¸å¿ƒç‰¹æ€§æœ‰å“ªäº›"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯springæ¡†æ¶-æ ¸å¿ƒç‰¹æ€§æœ‰å“ªäº›"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯Springæ¡†æ¶ï¼Ÿæ ¸å¿ƒç‰¹æ€§æœ‰å“ªäº›ï¼Ÿ")]),t._v(" "),a("p",[t._v("Springæ˜¯ä¸€ä¸ªå¼€æºçš„ä¼ä¸šçº§Javaåº”ç”¨å¼€å‘æ¡†æ¶ï¼Œç”±Rod Johnsonåˆ›å»ºï¼Œç›®æ ‡æ˜¯ç®€åŒ–ä¼ä¸šçº§åº”ç”¨å¼€å‘ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. IOCæ§åˆ¶åè½¬")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å¯¹è±¡åˆ›å»ºå’Œä¾èµ–å…³ç³»ç®¡ç†äº¤ç»™Springå®¹å™¨")]),t._v(" "),a("li",[t._v("é€šè¿‡ä¾èµ–æ³¨å…¥å®ç°æ¾è€¦åˆæ¶æ„")]),t._v(" "),a("li",[t._v("æé«˜äº†ä»£ç çš„å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("2. AOPé¢å‘åˆ‡é¢ç¼–ç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»")]),t._v(" "),a("li",[t._v("æ”¯æŒå£°æ˜å¼äº‹åŠ¡ã€æ—¥å¿—ã€å®‰å…¨ç­‰")]),t._v(" "),a("li",[t._v("åŸºäºåŠ¨æ€ä»£ç†å’ŒCGLIBå®ç°")])]),t._v(" "),a("p",[a("strong",[t._v("3. è½»é‡çº§å®¹å™¨")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("éä¾µå…¥å¼è®¾è®¡ï¼ŒPOJOå³å¯")]),t._v(" "),a("li",[t._v("å®¹å™¨å¯åŠ¨å¿«ï¼Œå†…å­˜å ç”¨å°‘")]),t._v(" "),a("li",[t._v("å¯ä»¥é€‰æ‹©æ€§ä½¿ç”¨æ¡†æ¶åŠŸèƒ½")])]),t._v(" "),a("p",[a("strong",[t._v("4. ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æä¾›å®Œæ•´çš„ä¼ä¸šçº§æŠ€æœ¯æ ˆ")]),t._v(" "),a("li",[t._v("è‰¯å¥½çš„æ¡†æ¶é›†æˆèƒ½åŠ›")]),t._v(" "),a("li",[t._v("Spring Bootã€Spring Cloudç­‰ç”Ÿæ€ä¸°å¯Œ")])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// IOCå®¹å™¨åŸºæœ¬ä½¿ç”¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserRepository")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// AOPåˆ‡é¢ç¤ºä¾‹  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Aspect")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggingAspect")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Around")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@annotation(Log)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logExecutionTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProceedingJoinPoint")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" start "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("proceed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" executionTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Method executed in: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" executionTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ms"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯ioc-ä¾èµ–æ³¨å…¥çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯ioc-ä¾èµ–æ³¨å…¥çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯IOCï¼Ÿä¾èµ–æ³¨å…¥çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("p",[t._v("IoCï¼ˆInverse of Control:æ§åˆ¶åè½¬ï¼‰æ˜¯ä¸€ç§"),a("strong",[t._v("è®¾è®¡æ€æƒ³")]),t._v("ï¼Œå°±æ˜¯ "),a("strong",[t._v("å°†åŸæœ¬åœ¨ç¨‹åºä¸­æ‰‹åŠ¨åˆ›å»ºå¯¹è±¡çš„æ§åˆ¶æƒï¼Œäº¤ç”±Springæ¡†æ¶æ¥ç®¡ç†ã€‚")]),t._v(" IoC åœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿæœ‰åº”ç”¨ï¼Œå¹¶é Spring ç‰¹æœ‰ã€‚ "),a("strong",[t._v("IoC å®¹å™¨æ˜¯ Spring ç”¨æ¥å®ç° IoC çš„è½½ä½“ï¼Œ IoC å®¹å™¨å®é™…ä¸Šå°±æ˜¯ä¸ªMapï¼ˆkeyï¼Œvalueï¼‰,Map ä¸­å­˜æ”¾çš„æ˜¯å„ç§å¯¹è±¡ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("IoC çš„æ ¸å¿ƒæ€æƒ³")])]),t._v(" "),a("p",[t._v("åœ¨ä¼ ç»Ÿçš„ç¼–ç¨‹ä¸­ï¼Œç¨‹åºä¸­ä¼šæœ‰æ˜¾å¼çš„ä»£ç æ¥åˆ›å»ºå¯¹è±¡å¹¶ç®¡ç†å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸã€‚IoC åˆ™é€šè¿‡å°†è¿™äº›æ§åˆ¶æƒäº¤ç»™å®¹å™¨ï¼Œè®©å®¹å™¨åœ¨é€‚å½“çš„æ—¶æœºåˆ›å»ºå¯¹è±¡ï¼Œå¹¶æ ¹æ®éœ€è¦æ³¨å…¥å¯¹è±¡çš„ä¾èµ–é¡¹ã€‚")]),t._v(" "),a("p",[t._v("å°†å¯¹è±¡ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»äº¤ç»™ IoC å®¹å™¨æ¥ç®¡ç†ï¼Œå¹¶ç”± IoC å®¹å™¨å®Œæˆå¯¹è±¡çš„æ³¨å…¥ã€‚è¿™æ ·å¯ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šç®€åŒ–åº”ç”¨çš„å¼€å‘ï¼ŒæŠŠåº”ç”¨ä»å¤æ‚çš„ä¾èµ–å…³ç³»ä¸­è§£æ”¾å‡ºæ¥ã€‚ "),a("strong",[t._v("IoC å®¹å™¨å°±åƒæ˜¯ä¸€ä¸ªå·¥å‚ä¸€æ ·ï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œåªéœ€è¦é…ç½®å¥½é…ç½®æ–‡ä»¶/æ³¨è§£å³å¯ï¼Œå®Œå…¨ä¸ç”¨è€ƒè™‘å¯¹è±¡æ˜¯å¦‚ä½•è¢«åˆ›å»ºå‡ºæ¥çš„ã€‚")]),t._v(" åœ¨å®é™…é¡¹ç›®ä¸­ä¸€ä¸ª Service ç±»å¯èƒ½æœ‰å‡ ç™¾ç”šè‡³ä¸Šåƒä¸ªç±»ä½œä¸ºå®ƒçš„åº•å±‚ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦å®ä¾‹åŒ–è¿™ä¸ª Serviceï¼Œä½ å¯èƒ½è¦æ¯æ¬¡éƒ½è¦ææ¸…è¿™ä¸ª Service æ‰€æœ‰åº•å±‚ç±»çš„æ„é€ å‡½æ•°ï¼Œè¿™å¯èƒ½ä¼šæŠŠäººé€¼ç–¯ã€‚å¦‚æœåˆ©ç”¨ IoC çš„è¯ï¼Œä½ åªéœ€è¦é…ç½®å¥½ï¼Œç„¶ååœ¨éœ€è¦çš„åœ°æ–¹å¼•ç”¨å°±è¡Œäº†ï¼Œè¿™å¤§å¤§å¢åŠ äº†é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ä¸”é™ä½äº†å¼€å‘éš¾åº¦ã€‚")]),t._v(" "),a("p",[t._v('"IOCå…¨ç§°Inversion of Controlï¼Œå³æ§åˆ¶åè½¬ï¼Œæ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒæ€æƒ³ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("ä¼ ç»Ÿæ¨¡å¼ vs IOCæ¨¡å¼")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("ä¼ ç»Ÿæ¨¡å¼")]),t._v("ï¼šå¯¹è±¡ä¸»åŠ¨åˆ›å»ºå’Œç®¡ç†ä¾èµ–å¯¹è±¡ï¼ˆæˆ‘æ‰¾ä½ ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("IOCæ¨¡å¼")]),t._v("ï¼šå¯¹è±¡è¢«åŠ¨æ¥å—å¤–éƒ¨æ³¨å…¥çš„ä¾èµ–ï¼ˆä½ æ‰¾æˆ‘ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("æ§åˆ¶æƒåè½¬")]),t._v("ï¼šä»å¯¹è±¡å†…éƒ¨è½¬ç§»åˆ°å¤–éƒ¨å®¹å™¨")])]),t._v(" "),a("p",[a("strong",[t._v("IoC çš„å®ç°åŸç†")])]),t._v(" "),a("p",[t._v("IoC çš„å®ç°æ–¹å¼é€šå¸¸æœ‰å‡ ç§ï¼Œå…¶ä¸­æœ€å¸¸è§çš„æ˜¯ "),a("strong",[t._v("ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰")]),t._v("ã€‚")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰")]),t._v("ï¼šIoC çš„å®ç°é€šå¸¸æ˜¯é€šè¿‡ä¾èµ–æ³¨å…¥æ¥å®Œæˆçš„ã€‚ä¾èµ–æ³¨å…¥æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œç”¨äºå°†å¯¹è±¡çš„ä¾èµ–å…³ç³»ä»å¤–éƒ¨ä¼ å…¥ï¼Œè€Œä¸æ˜¯ç”±å¯¹è±¡æœ¬èº«æ¥åˆ›å»ºæˆ–æŸ¥æ‰¾ä¾èµ–çš„å¯¹è±¡ã€‚")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æ„é€ å™¨æ³¨å…¥")]),t._v("ï¼šé€šè¿‡æ„é€ å‡½æ•°å°†ä¾èµ–é¡¹ä¼ é€’ç»™å¯¹è±¡ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("Setter æ³¨å…¥")]),t._v("ï¼šé€šè¿‡è®¾ç½®å™¨æ–¹æ³•ä¼ é€’ä¾èµ–é¡¹ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æ¥å£æ³¨å…¥")]),t._v("ï¼šå¯¹è±¡å®ç°æŸä¸ªæ¥å£ï¼Œå®¹å™¨é€šè¿‡è¯¥æ¥å£æä¾›ä¾èµ–é¡¹ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("ä¾èµ–æ³¨å…¥ï¼ˆDI,Dependency Injectionï¼‰æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µå°šæœªçŸ¥æ‰€éœ€çš„åŠŸèƒ½æ˜¯æ¥è‡ªå“ªä¸ªçš„ç±»çš„æƒ…å†µä¸‹ï¼Œå°†å…¶ä»–å¯¹è±¡æ‰€ä¾èµ–çš„åŠŸèƒ½å¯¹è±¡å®ä¾‹åŒ–çš„æ¨¡å¼")]),t._v("ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æ§åˆ¶åè½¬å®¹å™¨")]),t._v("ï¼šIoC é€šå¸¸é€šè¿‡å®¹å™¨æ¥å®ç°ï¼Œå®¹å™¨è´Ÿè´£å¯¹è±¡çš„åˆ›å»ºã€åˆå§‹åŒ–ã€ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶åœ¨éœ€è¦æ—¶æ³¨å…¥ä¾èµ–é¡¹ã€‚å¸¸è§çš„ IoC å®¹å™¨æœ‰ Springï¼ˆJavaï¼‰ã€Unityï¼ˆ.NETï¼‰ã€Guiceï¼ˆJavaï¼‰ã€Daggerï¼ˆJava/Kotlinï¼‰ç­‰ã€‚")])])]),t._v(" "),a("p",[a("strong",[t._v("IoC çš„å¥½å¤„")]),t._v("ã€Œåˆ—ä¸¾ IoC çš„ä¸€äº›å¥½å¤„ã€")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("è§£è€¦")]),t._v("ï¼šå¯¹è±¡ä¹‹é—´ä¸éœ€è¦ç›´æ¥ä¾èµ–ï¼Œå¯ä»¥è®©ç³»ç»Ÿæ›´å®¹æ˜“æ‰©å±•å’Œç»´æŠ¤ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æ˜“äºæµ‹è¯•")]),t._v("ï¼šé€šè¿‡å®¹å™¨ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æ›¿æ¢ä¾èµ–é¡¹ï¼Œè¿›è¡Œå•å…ƒæµ‹è¯•æ—¶å¯ä»¥ä½¿ç”¨æ¨¡æ‹Ÿå¯¹è±¡ï¼ˆMock Objectï¼‰æ¥æ›¿ä»£çœŸå®å¯¹è±¡ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("çµæ´»æ€§")]),t._v("ï¼šIoC å®¹å™¨æä¾›äº†é…ç½®å’Œç®¡ç†å¯¹è±¡ä¾èµ–å…³ç³»çš„èƒ½åŠ›ï¼Œå¯ä»¥çµæ´»é…ç½®ä¾èµ–é¡¹ï¼Œè€Œä¸éœ€è¦æ”¹å˜ä»£ç ã€‚")])]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("IoCï¼ˆæ§åˆ¶åè½¬ï¼‰")]),t._v(" æ˜¯ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†å¯¹è±¡åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„ç®¡ç†äº¤ç»™å¤–éƒ¨å®¹å™¨æ¥æ§åˆ¶ï¼Œé¿å…ç¨‹åºå†…éƒ¨ç›´æ¥åˆ›å»ºå’Œç®¡ç†ä¾èµ–å¯¹è±¡ï¼Œä»è€Œè§£è€¦ç³»ç»Ÿä¸­çš„å„ä¸ªç»„ä»¶ã€‚å¸¸è§çš„ IoC å®ç°æ–¹å¼æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ï¼Œé€šè¿‡æ„é€ å™¨æ³¨å…¥ã€Setter æ³¨å…¥æˆ–æ¥å£æ³¨å…¥ç­‰æ–¹å¼æ¥å®ç°å¯¹è±¡çš„ä¾èµ–å…³ç³»æ³¨å…¥ã€‚IoC å®¹å™¨è´Ÿè´£ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–æ³¨å…¥ï¼Œå¸¸è§çš„æ¡†æ¶å¦‚ Spring åœ¨ Java ä¸­å°±ä½¿ç”¨äº† IoC åŸç†æ¥å®ç°æ¾è€¦åˆçš„ç³»ç»Ÿè®¾è®¡ã€‚IoC å¯ä»¥æé«˜ç³»ç»Ÿçš„å¯æµ‹è¯•æ€§ã€å¯ç»´æŠ¤æ€§å’Œçµæ´»æ€§ï¼Œæ˜¯ç°ä»£è½¯ä»¶æ¶æ„ä¸­å¸¸ç”¨çš„è®¾è®¡æ€æƒ³ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ„é€ å™¨æ³¨å…¥ï¼ˆæ¨èï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PaymentService")]),t._v(" paymentService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InventoryService")]),t._v(" inventoryService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PaymentService")]),t._v(" paymentService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                       "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InventoryService")]),t._v(" inventoryService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("paymentService "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" paymentService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inventoryService "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" inventoryService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Setteræ³¨å…¥")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EmailService")]),t._v(" emailService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEmailService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EmailService")]),t._v(" emailService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("emailService "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" emailService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯-spring-ioc-å®¹å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯-spring-ioc-å®¹å™¨"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯ Spring IOC å®¹å™¨ï¼Ÿ")]),t._v(" "),a("p",[t._v("Spring IoCï¼ˆInverse of Controlï¼Œæ§åˆ¶åè½¬ï¼‰å®¹å™¨æ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒè´Ÿè´£ç®¡ç†åº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡ï¼ˆç§°ä¸ºBeanï¼‰ã€‚IoCå®¹å™¨é€šè¿‡æ§åˆ¶åè½¬çš„æ–¹å¼ï¼Œå°†ç»„ä»¶çš„åˆ›å»ºã€é…ç½®å’Œä¾èµ–å…³ç³»ç®¡ç†ä»åº”ç”¨ç¨‹åºä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œç”±å®¹å™¨æ¥å¤„ç†ã€‚")]),t._v(" "),a("p",[t._v("IoCå®¹å™¨çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰")]),t._v("ï¼šIoCå®¹å™¨èƒ½å¤Ÿè‡ªåŠ¨æ³¨å…¥Beançš„ä¾èµ–é¡¹ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºæˆ–æŸ¥æ‰¾è¿™äº›ä¾èµ–é¡¹ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("é…ç½®ç®¡ç†")]),t._v("ï¼šIoCå®¹å™¨ä½¿ç”¨é…ç½®å…ƒæ•°æ®ï¼ˆå¦‚XMLã€æ³¨è§£æˆ–Javaé…ç½®ç±»ï¼‰æ¥åˆ›å»ºå’Œç®¡ç†Beanã€‚")]),t._v(" "),a("li",[a("strong",[t._v("Beanç”Ÿå‘½å‘¨æœŸç®¡ç†")]),t._v("ï¼šIoCå®¹å™¨ç®¡ç†Beançš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬å®ä¾‹åŒ–ã€åˆå§‹åŒ–ã€ä½¿ç”¨å’Œé”€æ¯ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ä½œç”¨åŸŸæ§åˆ¶")]),t._v("ï¼šIoCå®¹å™¨æ”¯æŒä¸åŒçš„Beanä½œç”¨åŸŸï¼Œå¦‚å•ä¾‹ï¼ˆSingletonï¼‰ã€åŸå‹ï¼ˆPrototypeï¼‰ã€è¯·æ±‚ï¼ˆRequestï¼‰ã€ä¼šè¯ï¼ˆSessionï¼‰ç­‰ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ä¾èµ–å…³ç³»è§£æ")]),t._v("ï¼šIoCå®¹å™¨èƒ½å¤Ÿè§£æBeanä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶æ ¹æ®é…ç½®è‡ªåŠ¨ç»„è£…è¿™äº›Beanã€‚")]),t._v(" "),a("li",[a("strong",[t._v("äº‹ä»¶å‘å¸ƒå’Œç›‘å¬")]),t._v("ï¼šIoCå®¹å™¨æ”¯æŒäº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå…è®¸Beanå‘å¸ƒäº‹ä»¶å’Œç›‘å¬å…¶ä»–Beançš„äº‹ä»¶ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ç±»å‹è½¬æ¢å’Œæ•°æ®ç»‘å®š")]),t._v("ï¼šIoCå®¹å™¨æä¾›ç±»å‹è½¬æ¢æœåŠ¡ï¼Œèƒ½å¤Ÿå°†é…ç½®æ•°æ®ç»‘å®šåˆ°Beançš„å±æ€§ä¸Šã€‚")]),t._v(" "),a("li",[a("strong",[t._v("è‡ªåŠ¨è£…é…")]),t._v("ï¼šIoCå®¹å™¨èƒ½å¤Ÿæ ¹æ®Beançš„ç±»å‹å’Œåç§°è‡ªåŠ¨è£…é…ä¾èµ–å…³ç³»ï¼Œå‡å°‘æ˜¾å¼é…ç½®çš„éœ€è¦ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æ‰©å±•ç‚¹")]),t._v("ï¼šIoCå®¹å™¨æä¾›äº†å¤šä¸ªæ‰©å±•ç‚¹ï¼Œå¦‚BeanFactoryPostProcessorå’ŒBeanPostProcessorï¼Œå…è®¸å¼€å‘è€…è‡ªå®šä¹‰å®¹å™¨çš„è¡Œä¸ºã€‚")])]),t._v(" "),a("p",[t._v("é€šè¿‡ä½¿ç”¨Spring IoCå®¹å™¨ï¼Œå¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œè€Œä¸å¿…å…³å¿ƒå¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–ç®¡ç†ï¼Œä»è€Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯æµ‹è¯•æ€§å’Œçµæ´»æ€§ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("â€œSpring IoC å®¹å™¨çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬å¯¹è±¡çš„åˆ›å»ºä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰ã€è‡ªåŠ¨è£…é…ã€bean çš„ä½œç”¨åŸŸç®¡ç†ã€AOP æ”¯æŒã€äº‹ä»¶æœºåˆ¶ã€èµ„æºç®¡ç†ä¸å¤–éƒ¨é…ç½®é›†æˆç­‰ã€‚é€šè¿‡è¿™äº›åŠŸèƒ½ï¼ŒSpring IoC å®¹å™¨ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´åŠ çµæ´»ã€é«˜æ•ˆåœ°ç®¡ç†åº”ç”¨ä¸­çš„å¯¹è±¡å’Œå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»è€Œå®ç°è§£è€¦ã€æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚â€")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-ä¸­æœ‰å¤šå°‘ç§-ioc-å®¹å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-ä¸­æœ‰å¤šå°‘ç§-ioc-å®¹å™¨"}},[t._v("#")]),t._v(" ğŸ¯ Spring ä¸­æœ‰å¤šå°‘ç§ IOC å®¹å™¨ï¼Ÿ")]),t._v(" "),a("p",[t._v("Spring ä¸­çš„ org.springframework.beans åŒ…å’Œ org.springframework.context åŒ…æ„æˆäº† Spring æ¡†æ¶ IoC å®¹å™¨çš„åŸºç¡€ã€‚")]),t._v(" "),a("p",[t._v("åœ¨ Spring IOC å®¹å™¨è¯»å– Bean é…ç½®åˆ›å»º Bean å®ä¾‹ä¹‹å‰ï¼Œå¿…é¡»å¯¹å®ƒè¿›è¡Œå®ä¾‹åŒ–ã€‚åªæœ‰åœ¨å®¹å™¨å®ä¾‹åŒ–åï¼Œ æ‰å¯ä»¥ä» IOC å®¹å™¨é‡Œè·å– Bean å®ä¾‹å¹¶ä½¿ç”¨")]),t._v(" "),a("p",[t._v("Spring æä¾›äº†ä¸¤ç§ç±»å‹çš„ IOC å®¹å™¨å®ç°")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("BeanFactoryï¼šIOC å®¹å™¨çš„åŸºæœ¬å®ç°")])]),t._v(" "),a("li",[a("p",[t._v("ApplicationContextï¼šæä¾›äº†æ›´å¤šçš„é«˜çº§ç‰¹æ€§ï¼Œæ˜¯ BeanFactory çš„å­æ¥å£")])])]),t._v(" "),a("p",[t._v("BeanFactory æ˜¯ Spring æ¡†æ¶çš„åŸºç¡€è®¾æ–½ï¼Œé¢å‘ Spring æœ¬èº«ï¼›ApplicationContext é¢å‘ä½¿ç”¨ Spring æ¡†æ¶çš„å¼€å‘è€…ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨åœºåˆéƒ½ç›´æ¥ä½¿ç”¨ ApplicationContext è€Œéåº•å±‚çš„ BeanFactoryï¼›")]),t._v(" "),a("p",[t._v("æ— è®ºä½¿ç”¨ä½•ç§æ–¹å¼, é…ç½®æ–‡ä»¶æ˜¯ç›¸åŒçš„ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-beanfactory-å’Œ-applicationcontext-åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-beanfactory-å’Œ-applicationcontext-åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ BeanFactory å’Œ ApplicationContext åŒºåˆ«ï¼Ÿ")]),t._v(" "),a("p",[t._v("åœ¨ Spring æ¡†æ¶ä¸­ï¼Œ"),a("code",[t._v("BeanFactory")]),t._v(" å’Œ "),a("code",[t._v("ApplicationContext")]),t._v(" éƒ½æ˜¯ IoC å®¹å™¨çš„æ ¸å¿ƒæ¥å£ï¼Œå®ƒä»¬éƒ½è´Ÿè´£ç®¡ç†å’Œåˆ›å»º Beanï¼Œä½†å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å…³é”®çš„åŒºåˆ«ã€‚äº†è§£è¿™äº›åŒºåˆ«å¯ä»¥å¸®åŠ©ä½ é€‰æ‹©åˆé€‚çš„å®¹å™¨ç±»å‹ï¼Œå¹¶æ­£ç¡®ä½¿ç”¨å®ƒä»¬ã€‚")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("BeanFactory")]),t._v("ï¼šæ˜¯ Spring æœ€åŸºç¡€çš„å®¹å™¨ï¼Œè´Ÿè´£ç®¡ç† Bean çš„ç”Ÿå‘½å‘¨æœŸä»¥åŠä¾èµ–æ³¨å…¥ã€‚å®ƒæä¾›äº†æœ€åŸºç¡€çš„åŠŸèƒ½ï¼Œé€šå¸¸ç”¨äºå†…å­˜æˆ–èµ„æºè¾ƒä¸ºæœ‰é™çš„ç¯å¢ƒä¸­ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ApplicationContext")]),t._v("ï¼šæ˜¯ "),a("code",[t._v("BeanFactory")]),t._v(" çš„ä¸€ä¸ªå­æ¥å£ï¼Œæ‰©å±•äº† "),a("code",[t._v("BeanFactory")]),t._v(" çš„åŠŸèƒ½ï¼Œæä¾›äº†æ›´å¤šçš„ä¼ä¸šçº§ç‰¹æ€§ï¼Œå¦‚äº‹ä»¶å‘å¸ƒã€å›½é™…åŒ–æ”¯æŒã€AOP æ”¯æŒç­‰ã€‚"),a("code",[t._v("ApplicationContext")]),t._v(" æ˜¯ä¸€ä¸ªåŠŸèƒ½æ›´ä¸ºä¸°å¯Œçš„å®¹å™¨ï¼Œé€šå¸¸åœ¨å¤§å¤šæ•° Spring åº”ç”¨ä¸­ä½¿ç”¨ã€‚")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("åŠŸèƒ½/ç‰¹æ€§")]),t._v(" "),a("th",[a("strong",[t._v("BeanFactory")])]),t._v(" "),a("th",[a("strong",[t._v("ApplicationContext")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("ç»§æ‰¿å…³ç³»")])]),t._v(" "),a("td",[a("code",[t._v("BeanFactory")]),t._v(" æ˜¯æœ€åŸºæœ¬çš„å®¹å™¨æ¥å£ã€‚")]),t._v(" "),a("td",[a("code",[t._v("ApplicationContext")]),t._v(" ç»§æ‰¿è‡ª "),a("code",[t._v("BeanFactory")]),t._v("ï¼Œå¹¶æ‰©å±•äº†æ›´å¤šåŠŸèƒ½ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰")])]),t._v(" "),a("td",[t._v("é»˜è®¤æ‡’åŠ è½½")]),t._v(" "),a("td",[t._v("æ”¯æŒæ‡’åŠ è½½ï¼Œå®¹å™¨å¯åŠ¨æ—¶ä¸ä¼šç«‹å³åˆå§‹åŒ–æ‰€æœ‰çš„ Beanï¼Œç›´åˆ°çœŸæ­£éœ€è¦å®ƒä»¬æ—¶æ‰åˆå§‹åŒ–ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å›½é™…åŒ–æ”¯æŒ")])]),t._v(" "),a("td",[t._v("ä¸æ”¯æŒå›½é™…åŒ–ã€‚")]),t._v(" "),a("td",[t._v("æä¾›å›½é™…åŒ–æ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨ "),a("code",[t._v("MessageSource")]),t._v(" è¿›è¡Œæ¶ˆæ¯çš„æœ¬åœ°åŒ–ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("äº‹ä»¶æœºåˆ¶")])]),t._v(" "),a("td",[t._v("ä¸æ”¯æŒäº‹ä»¶å‘å¸ƒä¸ç›‘å¬ã€‚")]),t._v(" "),a("td",[t._v("æä¾›äº‹ä»¶å‘å¸ƒä¸ç›‘å¬æœºåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ "),a("code",[t._v("ApplicationEventPublisher")]),t._v(" å‘å¸ƒå’Œç›‘å¬äº‹ä»¶ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("AOP æ”¯æŒ")])]),t._v(" "),a("td",[t._v("ä¸æ”¯æŒ AOP")]),t._v(" "),a("td",[t._v("æ”¯æŒ AOPï¼ˆå¦‚äº‹åŠ¡ç®¡ç†ã€æ—¥å¿—è®°å½•ç­‰ï¼‰ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ³¨è§£é©±åŠ¨é…ç½®")])]),t._v(" "),a("td",[t._v("ä¸æ”¯æŒè‡ªåŠ¨æ‰«æå’Œæ³¨è§£é©±åŠ¨é…ç½®")]),t._v(" "),a("td",[t._v("æ”¯æŒæ³¨è§£é©±åŠ¨é…ç½®ï¼Œæ”¯æŒ "),a("code",[t._v("@ComponentScan")]),t._v(" è‡ªåŠ¨æ‰«æç»„ä»¶ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Bean å®šä¹‰çš„é…ç½®")])]),t._v(" "),a("td",[t._v("ä»…æ”¯æŒé€šè¿‡ XML æˆ– Java é…ç½®æ¥å®šä¹‰ Bean")]),t._v(" "),a("td",[t._v("æ”¯æŒé€šè¿‡ XMLã€JavaConfig æˆ–æ³¨è§£é…ç½®æ¥å®šä¹‰ Beanã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("åˆ·æ–°å®¹å™¨åŠŸèƒ½")])]),t._v(" "),a("td",[t._v("æ²¡æœ‰åˆ·æ–°å®¹å™¨çš„åŠŸèƒ½")]),t._v(" "),a("td",[t._v("æä¾› "),a("code",[t._v("refresh()")]),t._v(" æ–¹æ³•ï¼Œå¯ä»¥åˆ·æ–°å®¹å™¨ï¼Œé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶å’Œ Beanã€‚")])])])]),t._v(" "),a("p",[a("strong",[t._v("å¸¸ç”¨çš„å®ç°ç±»")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("BeanFactory çš„å®ç°ç±»")]),t._v("ï¼š\n"),a("ul",[a("li",[a("code",[t._v("XmlBeanFactory")]),t._v("ï¼ˆå·²åºŸå¼ƒï¼‰")]),t._v(" "),a("li",[a("code",[t._v("SimpleBeanFactory")])]),t._v(" "),a("li",[a("code",[t._v("DefaultListableBeanFactory")]),t._v("ï¼ˆæœ€å¸¸ç”¨ï¼‰")])])]),t._v(" "),a("li",[a("strong",[t._v("ApplicationContext çš„å®ç°ç±»")]),t._v("ï¼š\n"),a("ul",[a("li",[a("code",[t._v("ClassPathXmlApplicationContext")]),t._v("ï¼šåŸºäº XML é…ç½®æ–‡ä»¶çš„ä¸Šä¸‹æ–‡ã€‚")]),t._v(" "),a("li",[a("code",[t._v("AnnotationConfigApplicationContext")]),t._v("ï¼šåŸºäºæ³¨è§£é…ç½®çš„ä¸Šä¸‹æ–‡ã€‚")]),t._v(" "),a("li",[a("code",[t._v("GenericWebApplicationContext")]),t._v("ï¼šé€‚ç”¨äº Web åº”ç”¨çš„ä¸Šä¸‹æ–‡ã€‚")])])])]),t._v(" "),a("blockquote",[a("p",[t._v("â€œ"),a("code",[t._v("BeanFactory")]),t._v(" æ˜¯ Spring æœ€åŸºæœ¬çš„å®¹å™¨æ¥å£ï¼Œè´Ÿè´£åˆ›å»ºå’Œç®¡ç† Beanï¼Œä½†å®ƒåŠŸèƒ½è¾ƒä¸ºç®€æ´ï¼Œé€šå¸¸ç”¨äºèµ„æºæœ‰é™çš„ç¯å¢ƒã€‚è€Œ "),a("code",[t._v("ApplicationContext")]),t._v(" ç»§æ‰¿äº† "),a("code",[t._v("BeanFactory")]),t._v("ï¼Œå¹¶æä¾›äº†æ›´å¤šä¼ä¸šçº§åŠŸèƒ½ï¼Œå¦‚å›½é™…åŒ–æ”¯æŒã€äº‹ä»¶æœºåˆ¶å’Œ AOP ç­‰ã€‚"),a("code",[t._v("ApplicationContext")]),t._v(" æ˜¯å¤§å¤šæ•° Spring åº”ç”¨ä¸­ä½¿ç”¨çš„å®¹å™¨ï¼Œå®ƒå…·æœ‰æ›´å¼ºçš„åŠŸèƒ½å’Œçµæ´»æ€§ã€‚é€šå¸¸æ¨èä½¿ç”¨ "),a("code",[t._v("ApplicationContext")]),t._v("ï¼Œé™¤éä½ æœ‰ç‰¹å®šçš„æ€§èƒ½æˆ–èµ„æºè¦æ±‚ã€‚â€")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// BeanFactoryåŸºç¡€ç”¨æ³•")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultListableBeanFactory")]),t._v(" beanFactory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultListableBeanFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XmlBeanDefinitionReader")]),t._v(" reader "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XmlBeanDefinitionReader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadBeanDefinitions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"applicationContext.xml"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" userService "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" beanFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ApplicationContextç”¨æ³•ï¼ˆæ¨èï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationContext")]),t._v(" context "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnnotationConfigApplicationContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppConfig")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" userService "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ©ç”¨ApplicationContextçš„é«˜çº§ç‰¹æ€§")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EventPublisher")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationContextAware")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationContext")]),t._v(" applicationContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setApplicationContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationContext")]),t._v(" applicationContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("applicationContext "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" applicationContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("publishEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        applicationContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("publishEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-ioc-çš„å®ç°æœºåˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-ioc-çš„å®ç°æœºåˆ¶"}},[t._v("#")]),t._v(" ğŸ¯ Spring IoC çš„å®ç°æœºåˆ¶")]),t._v(" "),a("p",[t._v("Spring ä¸­çš„ IoC çš„å®ç°åŸç†å°±æ˜¯å·¥å‚æ¨¡å¼åŠ åå°„æœºåˆ¶ï¼Œç¤ºä¾‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fruit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Apple")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fruit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Apple"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Orange")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fruit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Orange"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Factory")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fruit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fruit")]),t._v(" f "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            f"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fruit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Client")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Fruit")]),t._v(" f"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Factory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"priv.starfish.spring.Apple"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("f"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯-javaconfig"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯-javaconfig"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯ JavaConfigï¼Ÿ")]),t._v(" "),a("p",[t._v("â€œJavaConfig æ˜¯ Spring æä¾›çš„ä¸€ç§åŸºäº Java ç±»çš„é…ç½®æ–¹å¼ï¼Œå®ƒé€šè¿‡ "),a("code",[t._v("@Configuration")]),t._v(" æ³¨è§£æ ‡è¯†é…ç½®ç±»ï¼Œé€šè¿‡ "),a("code",[t._v("@Bean")]),t._v(" æ³¨è§£å£°æ˜ Beanã€‚ç›¸è¾ƒäºä¼ ç»Ÿçš„ XML é…ç½®ï¼ŒJavaConfig æä¾›äº†ç±»å‹å®‰å…¨ã€çµæ´»çš„é…ç½®æ–¹å¼ï¼Œæ”¯æŒæ³¨è§£å’Œ Java è¯­è¨€çš„ä¼˜åŠ¿ï¼Œä½¿å¾—é…ç½®æ›´åŠ ç®€æ´ã€å¯ç»´æŠ¤ï¼Œå¹¶ä¸”ä¸å…¶ä»–æ¡†æ¶é›†æˆæ›´åŠ æ–¹ä¾¿ã€‚â€")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨-spring-ä¸­æ³¨å…¥ä¸€ä¸ª-java-collection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨-spring-ä¸­æ³¨å…¥ä¸€ä¸ª-java-collection"}},[t._v("#")]),t._v(" ğŸ¯ è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨ "),a("strong",[t._v("Spring")]),t._v(" ä¸­æ³¨å…¥ä¸€ä¸ª "),a("strong",[t._v("Java Collection")]),t._v("?")]),t._v(" "),a("p",[t._v("Spring æä¾›äº†ä»¥ä¸‹å››ç§é›†åˆç±»çš„é…ç½®å…ƒç´ :")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("<list>")]),t._v(" : è¯¥æ ‡ç­¾ç”¨æ¥è£…é…å¯é‡å¤çš„ list å€¼ã€‚")]),t._v(" "),a("li",[a("code",[t._v("<set>")]),t._v(" : è¯¥æ ‡ç­¾ç”¨æ¥è£…é…æ²¡æœ‰é‡å¤çš„ set å€¼ã€‚")]),t._v(" "),a("li",[a("code",[t._v("<map>")]),t._v(": è¯¥æ ‡ç­¾å¯ç”¨æ¥æ³¨å…¥é”®å’Œå€¼å¯ä»¥ä¸ºä»»ä½•ç±»å‹çš„é”®å€¼å¯¹ã€‚")]),t._v(" "),a("li",[a("code",[t._v("<props>")]),t._v(" : è¯¥æ ‡ç­¾æ”¯æŒæ³¨å…¥é”®å’Œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„é”®å€¼å¯¹ã€‚")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("beans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- Definition for javaCollection --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("javaCollection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.howtodoinjava.JavaCollection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- java.util.List --\x3e")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("customList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("list")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("INDIA"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Pakistan"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("USA"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UK"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("list")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- java.util.Set --\x3e")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("customSet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("INDIA"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Pakistan"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("USA"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("UK"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- java.util.Map --\x3e")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("customMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("entry")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("INDIA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("entry")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Pakistan"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("entry")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("USA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("entry")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("map")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- java.util.Properties --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("customProperies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("prop")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("admin@nospam.com"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("prop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("prop")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("support@nospam.com"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("prop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("beans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯-spring-beans"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯-spring-beans"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯ Spring Beansï¼Ÿ")]),t._v(" "),a("ul",[a("li",[t._v("å®ƒä»¬æ˜¯æ„æˆç”¨æˆ·åº”ç”¨ç¨‹åºä¸»å¹²çš„å¯¹è±¡")]),t._v(" "),a("li",[t._v("Bean ç”± Spring IoC å®¹å™¨ç®¡ç†")]),t._v(" "),a("li",[t._v("å®ƒä»¬ç”± Spring IoC å®¹å™¨å®ä¾‹åŒ–ï¼Œé…ç½®ï¼Œè£…é…å’Œç®¡ç†")]),t._v(" "),a("li",[t._v("Bean æ˜¯åŸºäºç”¨æˆ·æä¾›ç»™å®¹å™¨çš„é…ç½®å…ƒæ•°æ®åˆ›å»º")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-æä¾›äº†å“ªäº›é…ç½®æ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-æä¾›äº†å“ªäº›é…ç½®æ–¹å¼"}},[t._v("#")]),t._v(" ğŸ¯ Spring æä¾›äº†å“ªäº›é…ç½®æ–¹å¼ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("åŸºäº xml é…ç½®")]),t._v(" "),a("p",[t._v("bean æ‰€éœ€çš„ä¾èµ–é¡¹å’ŒæœåŠ¡åœ¨ XML æ ¼å¼çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šã€‚è¿™äº›é…ç½®æ–‡ä»¶é€šå¸¸åŒ…å«è®¸å¤š bean å®šä¹‰å’Œç‰¹å®šäºåº”ç”¨ç¨‹åºçš„é…ç½®é€‰é¡¹ã€‚å®ƒä»¬é€šå¸¸ä»¥ bean æ ‡ç­¾å¼€å¤´ã€‚ä¾‹å¦‚ï¼š")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("studentbean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.edureka.firstSpring.StudentBean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Edureka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("åŸºäºæ³¨è§£é…ç½®")]),t._v(" "),a("p",[t._v("æ‚¨å¯ä»¥é€šè¿‡åœ¨ç›¸å…³çš„ç±»ï¼Œæ–¹æ³•æˆ–å­—æ®µå£°æ˜ä¸Šä½¿ç”¨æ³¨è§£ï¼Œå°† bean é…ç½®ä¸ºç»„ä»¶ç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ XML æ¥æè¿° bean è£…é…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å®¹å™¨ä¸­æœªæ‰“å¼€æ³¨è§£è£…é…ã€‚å› æ­¤ï¼Œæ‚¨éœ€è¦åœ¨ä½¿ç”¨å®ƒä¹‹å‰åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å¯ç”¨å®ƒã€‚ä¾‹å¦‚ï¼š")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("beans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("context:")]),t._v("annotation-config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- bean definitions go here --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("beans")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("åŸºäº Java API é…ç½®")]),t._v(" "),a("p",[t._v("Spring çš„ Java é…ç½®æ˜¯é€šè¿‡ä½¿ç”¨ @Bean å’Œ @Configuration æ¥å®ç°ã€‚")]),t._v(" "),a("ol",[a("li",[t._v("@Bean æ³¨è§£æ‰®æ¼”ä¸ "),a("code",[t._v("<bean/>")]),t._v(" å…ƒç´ ç›¸åŒçš„è§’è‰²ã€‚")]),t._v(" "),a("li",[t._v("@Configuration ç±»å…è®¸é€šè¿‡ç®€å•åœ°è°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„å…¶ä»– @Bean æ–¹æ³•æ¥å®šä¹‰ bean é—´ä¾èµ–å…³ç³»ã€‚")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StudentConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StudentBean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myStudent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StudentBean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-é€šè¿‡æ³¨è§£çš„æ–¹å¼é…ç½®bean-ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-é€šè¿‡æ³¨è§£çš„æ–¹å¼é…ç½®bean-ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®"}},[t._v("#")]),t._v(" ğŸ¯ é€šè¿‡æ³¨è§£çš„æ–¹å¼é…ç½®bean | ä»€ä¹ˆæ˜¯åŸºäºæ³¨è§£çš„å®¹å™¨é…ç½®")]),t._v(" "),a("p",[a("strong",[t._v("ç»„ä»¶æ‰«æ")]),t._v("(component scanning): Spring èƒ½å¤Ÿä» classpathä¸‹è‡ªåŠ¨æ‰«æ, ä¾¦æµ‹å’Œå®ä¾‹åŒ–å…·æœ‰ç‰¹å®šæ³¨è§£çš„ç»„ä»¶ã€‚")]),t._v(" "),a("p",[t._v("ç‰¹å®šç»„ä»¶åŒ…æ‹¬:")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("@Component")]),t._v("ï¼šåŸºæœ¬æ³¨è§£ï¼Œæ ‡è¯†äº†ä¸€ä¸ªå— Spring ç®¡ç†çš„ç»„ä»¶")]),t._v(" "),a("li",[a("strong",[t._v("@Respository")]),t._v("ï¼šæ ‡è¯†æŒä¹…å±‚ç»„ä»¶")]),t._v(" "),a("li",[a("strong",[t._v("@Service")]),t._v("ï¼šæ ‡è¯†æœåŠ¡å±‚(ä¸šåŠ¡å±‚)ç»„ä»¶")]),t._v(" "),a("li",[a("strong",[t._v("@Controller")]),t._v("ï¼š æ ‡è¯†è¡¨ç°å±‚ç»„ä»¶")])]),t._v(" "),a("p",[t._v("å¯¹äºæ‰«æåˆ°çš„ç»„ä»¶ï¼ŒSpring æœ‰é»˜è®¤çš„å‘½åç­–ç•¥ï¼šä½¿ç”¨éé™å®šç±»åï¼Œç¬¬ä¸€ä¸ªå­—æ¯å°å†™ã€‚ä¹Ÿå¯ä»¥åœ¨æ³¨è§£ä¸­é€šè¿‡ value å±æ€§å€¼æ ‡è¯†ç»„ä»¶çš„åç§°ã€‚")]),t._v(" "),a("p",[t._v("å½“åœ¨ç»„ä»¶ç±»ä¸Šä½¿ç”¨äº†ç‰¹å®šçš„æ³¨è§£ä¹‹åï¼Œè¿˜éœ€è¦åœ¨ Spring çš„é…ç½®æ–‡ä»¶ä¸­å£°æ˜ "),a("code",[t._v("<context:component-scan>")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("base-package")]),t._v(" å±æ€§æŒ‡å®šä¸€ä¸ªéœ€è¦æ‰«æçš„åŸºç±»åŒ…ï¼ŒSpring å®¹å™¨å°†ä¼šæ‰«æè¿™ä¸ªåŸºç±»åŒ…é‡ŒåŠå…¶å­åŒ…ä¸­çš„æ‰€æœ‰ç±»")])]),t._v(" "),a("li",[a("p",[t._v("å½“éœ€è¦æ‰«æå¤šä¸ªåŒ…æ—¶, å¯ä»¥ä½¿ç”¨é€—å·åˆ†éš”")])]),t._v(" "),a("li",[a("p",[t._v("å¦‚æœä»…å¸Œæœ›æ‰«æç‰¹å®šçš„ç±»è€ŒéåŸºåŒ…ä¸‹çš„æ‰€æœ‰ç±»ï¼Œå¯ä½¿ç”¨ "),a("code",[t._v("resource-pattern")]),t._v(" å±æ€§è¿‡æ»¤ç‰¹å®šçš„ç±»ï¼Œç¤ºä¾‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("context:")]),t._v("component-scan")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("base-package")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("priv.starfish.front.web.controller"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("annotation-config")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resource-pattern")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("autowire/*.class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-beançš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ€æ ·çš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-beançš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ€æ ·çš„"}},[t._v("#")]),t._v(" ğŸ¯ Spring Beançš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ€æ ·çš„ï¼Ÿ")]),t._v(" "),a("p",[t._v("Springçš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€æ˜¯"),a("strong",[t._v("ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection, DIï¼‰å’Œæ§åˆ¶åè½¬ï¼ˆInversion of Control, IoCï¼‰")]),t._v("ï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µå¸®åŠ©ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–å…³ç³»ã€‚")]),t._v(" "),a("p",[t._v("åœ¨Springä¸­ï¼Œ"),a("strong",[t._v("Bean")]),t._v("æŒ‡çš„æ˜¯ç”±Spring IoCå®¹å™¨ç®¡ç†çš„å¯¹è±¡ã€‚Beançš„ç”Ÿå‘½å‘¨æœŸä¸»è¦ç”±ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µæ„æˆï¼š")]),t._v(" "),a("ol",[a("li",[t._v("**å®ä¾‹åŒ–ï¼ˆInstantiationï¼‰ï¼š**Springå®¹å™¨é¦–å…ˆæ ¹æ®Beanå®šä¹‰åˆ›å»ºBeançš„å®ä¾‹ã€‚è¿™ä¸ªå®ä¾‹å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°ã€å·¥å‚æ–¹æ³•ç­‰æ–¹å¼åˆ›å»ºã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å±æ€§èµ‹å€¼ï¼ˆPopulating Propertiesï¼‰ï¼š"),a("strong",[t._v("åœ¨Beanå®ä¾‹åŒ–åï¼ŒSpringä¼šè¿›è¡Œ")]),t._v("ä¾èµ–æ³¨å…¥")]),t._v("ã€‚Springæ ¹æ®Beançš„å®šä¹‰ï¼Œä¸ºè¿™ä¸ªå®ä¾‹æ³¨å…¥æ‰€éœ€çš„ä¾èµ–ï¼Œä¾‹å¦‚ä¸ºå±æ€§èµ‹å€¼ã€è°ƒç”¨"),a("code",[t._v("@Autowired")]),t._v("æ³¨è§£çš„æ–¹æ³•ç­‰ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("åˆå§‹åŒ–ï¼ˆInitializationï¼‰ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åœ¨å®Œæˆå±æ€§èµ‹å€¼åï¼ŒSpringä¼šè°ƒç”¨Beançš„åˆå§‹åŒ–æ–¹æ³•ã€‚å¦‚æœBeanå®ç°äº†"),a("code",[t._v("InitializingBean")]),t._v("æ¥å£ï¼ŒSpringä¼šè°ƒç”¨å…¶"),a("code",[t._v("afterPropertiesSet()")]),t._v("æ–¹æ³•ã€‚æ­¤å¤–ï¼Œå¦‚æœåœ¨Beanå®šä¹‰ä¸­æŒ‡å®šäº†"),a("code",[t._v("init-method")]),t._v("ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚")]),t._v(" "),a("li",[t._v("æ­¤å¤–ï¼Œå¦‚æœBeanè¢«å£°æ˜ä¸ºéœ€è¦æŸä¸ªç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•ï¼Œæ¯”å¦‚"),a("code",[t._v("@PostConstruct")]),t._v("æ³¨è§£çš„å›è°ƒæ–¹æ³•ï¼Œä¹Ÿä¼šåœ¨æ­¤é˜¶æ®µæ‰§è¡Œã€‚")])])]),t._v(" "),a("li",[t._v("**ä½¿ç”¨ï¼ˆUsing the Beanï¼‰ï¼š**åœ¨Beanå®Œæˆåˆå§‹åŒ–åï¼Œå®ƒå¯ä»¥è¢«åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚æ­¤æ—¶ï¼ŒBeanå¤„äºSpringå®¹å™¨çš„æ§åˆ¶ä¸‹ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥è·å–å¹¶ä½¿ç”¨è¯¥Beanã€‚")]),t._v(" "),a("li",[a("strong",[t._v("é”€æ¯ï¼ˆDestructionï¼‰ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å½“Springå®¹å™¨å…³é—­æ—¶ï¼ˆä¾‹å¦‚åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡è¢«å…³é—­ï¼‰ï¼ŒSpringä¼šé”€æ¯Beanã€‚å¦‚æœBeanå®ç°äº†"),a("code",[t._v("DisposableBean")]),t._v("æ¥å£ï¼ŒSpringä¼šè°ƒç”¨å…¶"),a("code",[t._v("destroy()")]),t._v("æ–¹æ³•ã€‚æ­¤å¤–ï¼Œå¦‚æœåœ¨Beanå®šä¹‰ä¸­æŒ‡å®šäº†"),a("code",[t._v("destroy-method")]),t._v("ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚")]),t._v(" "),a("li",[t._v("å¦‚æœBeanä½¿ç”¨äº†"),a("code",[t._v("@PreDestroy")]),t._v("æ³¨è§£ï¼ŒSpringä¹Ÿä¼šåœ¨æ­¤é˜¶æ®µæ‰§è¡Œç›¸åº”çš„æ–¹æ³•ã€‚")])])])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LifecycleDemo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeanNameAware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InitializingBean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DisposableBean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LifecycleDemo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1. æ„é€ å™¨æ‰§è¡Œ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SomeDependency")]),t._v(" dependency"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2. å±æ€§æ³¨å…¥"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBeanName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("beanName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3. BeanNameAwareå›è°ƒï¼š"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostConstruct")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postConstruct")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4. @PostConstructæ‰§è¡Œ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterPropertiesSet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5. InitializingBean.afterPropertiesSet()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PreDestroy")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("preDestroy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6. @PreDestroyæ‰§è¡Œ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7. DisposableBean.destroy()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯-spring-è£…é…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯-spring-è£…é…"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯ Spring è£…é…?")]),t._v(" "),a("p",[t._v("åœ¨ Spring æ¡†æ¶ä¸­ï¼Œ**è£…é…ï¼ˆWiringï¼‰**æ˜¯æŒ‡å°†ä¸€ä¸ªå¯¹è±¡çš„ä¾èµ–å…³ç³»æ³¨å…¥åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„è¿‡ç¨‹ã€‚é€šè¿‡è£…é…ï¼ŒSpring å®¹å™¨èƒ½å¤Ÿè‡ªåŠ¨ç®¡ç†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»è€Œå‡å°‘äº†åº”ç”¨ç¨‹åºä¸­æ˜¾å¼åœ°åˆ›å»ºå’Œç®¡ç†å¯¹è±¡çš„ä»£ç ã€‚è£…é…æ˜¯ Spring IoCï¼ˆæ§åˆ¶åè½¬ï¼‰å®¹å™¨çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œå®ƒä½¿å¾— Spring åº”ç”¨èƒ½å¤Ÿè½»æ¾åœ°å°†ä¸åŒçš„ç»„ä»¶è¿æ¥åœ¨ä¸€èµ·ï¼Œå½¢æˆå®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚")]),t._v(" "),a("p",[a("strong",[t._v("Spring è£…é…çš„ç±»å‹")])]),t._v(" "),a("p",[t._v("Spring æä¾›äº†å‡ ç§ä¸åŒçš„æ–¹å¼æ¥è£…é… Beanï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("æ„é€ å™¨æ³¨å…¥ï¼ˆConstructor Injectionï¼‰")])]),t._v(" "),a("li",[a("strong",[t._v("Setter æ³¨å…¥ï¼ˆSetter Injectionï¼‰")])]),t._v(" "),a("li",[a("strong",[t._v("å­—æ®µæ³¨å…¥ï¼ˆField Injectionï¼‰")])]),t._v(" "),a("li",[a("strong",[t._v("è‡ªåŠ¨è£…é…ï¼ˆAutowiringï¼‰")])]),t._v(" "),a("li",[a("strong",[t._v("åŸºäº XML é…ç½®çš„è£…é…")])])]),t._v(" "),a("blockquote",[a("p",[t._v("ä¾èµ–æ³¨å…¥çš„æœ¬è´¨å°±æ˜¯è£…é…ï¼Œè£…é…æ˜¯ä¾èµ–æ³¨å…¥çš„å…·ä½“è¡Œä¸ºã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯beanè‡ªåŠ¨è£…é…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯beanè‡ªåŠ¨è£…é…"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯beanè‡ªåŠ¨è£…é…ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("Bean è‡ªåŠ¨è£…é…ï¼ˆBean Autowiringï¼‰")]),t._v(" æ˜¯ Spring æ¡†æ¶ä¸­çš„ä¸€é¡¹é‡è¦åŠŸèƒ½ï¼Œç”¨äºè‡ªåŠ¨æ»¡è¶³ä¸€ä¸ªå¯¹è±¡å¯¹å…¶ä»–å¯¹è±¡çš„ä¾èµ–ã€‚é€šè¿‡è‡ªåŠ¨è£…é…ï¼ŒSpring å®¹å™¨èƒ½å¤Ÿæ ¹æ®é…ç½®çš„è§„åˆ™ï¼Œå°†æ‰€éœ€çš„ä¾èµ–å¯¹è±¡è‡ªåŠ¨æ³¨å…¥åˆ°ç›®æ ‡ Bean ä¸­ï¼Œè€Œæ— éœ€æ‰‹åŠ¨æ˜¾å¼å®šä¹‰ä¾èµ–å…³ç³»ã€‚è¿™ç§æœºåˆ¶æå¤§åœ°ç®€åŒ–äº†ä¾èµ–æ³¨å…¥çš„è¿‡ç¨‹ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚")]),t._v(" "),a("p",[t._v("åœ¨Springæ¡†æ¶æœ‰å¤šç§è‡ªåŠ¨è£…é…ï¼Œè®©æˆ‘ä»¬é€ä¸€åˆ†æ")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("no")]),t._v("ï¼šè¿™æ˜¯Springæ¡†æ¶çš„é»˜è®¤è®¾ç½®ï¼Œåœ¨è¯¥è®¾ç½®ä¸‹è‡ªåŠ¨è£…é…æ˜¯å…³é—­çš„ï¼Œå¼€å‘è€…éœ€è¦è‡ªè¡Œåœ¨beanautowireå±æ€§é‡ŒæŒ‡å®šè‡ªåŠ¨è£…é…çš„æ¨¡å¼")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("byName")]),t._v("ï¼š**æŒ‰åç§°è‡ªåŠ¨è£…é…ï¼ˆç»“åˆ "),a("code",[t._v("@Qualifier")]),t._v(" æ³¨è§£ï¼‰**å¦‚æœå®¹å™¨ä¸­æœ‰å¤šä¸ªç›¸åŒç±»å‹çš„ Beanï¼Œå¯ä»¥ä½¿ç”¨ "),a("code",[t._v("@Qualifier")]),t._v(" æ³¨è§£ç»“åˆ "),a("code",[t._v("@Autowired")]),t._v(" æ¥æŒ‰åç§°æŒ‡å®šå…·ä½“çš„ Beanã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("byType")]),t._v("ï¼šæŒ‰ç±»å‹è‡ªåŠ¨è£…é… ("),a("code",[t._v("@Autowired")]),t._v(" é»˜è®¤æ–¹å¼)")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("constructor")]),t._v("ï¼šé€šè¿‡åœ¨æ„é€ å™¨ä¸Šæ·»åŠ  "),a("code",[t._v("@Autowired")]),t._v(" æ³¨è§£ï¼ŒSpring ä¼šæ ¹æ®æ„é€ å™¨å‚æ•°çš„ç±»å‹è‡ªåŠ¨æ³¨å…¥å¯¹åº”çš„ Beanã€‚è¿™ç§æ–¹å¼å¯ä»¥ç¡®ä¿åœ¨å¯¹è±¡åˆ›å»ºæ—¶ï¼Œæ‰€æœ‰ä¾èµ–é¡¹éƒ½å·²å®Œå…¨æ³¨å…¥ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("autodetect")]),t._v("ï¼šSpringé¦–å…ˆå°è¯•é€šè¿‡ "),a("em",[t._v("constructor")]),t._v(" ä½¿ç”¨è‡ªåŠ¨è£…é…æ¥è¿æ¥ï¼Œå¦‚æœå®ƒä¸æ‰§è¡Œï¼ŒSpring å°è¯•é€šè¿‡ "),a("em",[t._v("byType")]),t._v(" æ¥è‡ªåŠ¨è£…é…ã€Spring 4.x ä¸­å·²ç»è¢«åºŸå¼ƒã€‘")])])]),t._v(" "),a("p",[t._v("åœ¨è‡ªåŠ¨è£…é…æ—¶ï¼ŒSpring ä¼šæ£€æŸ¥å®¹å™¨ä¸­çš„æ‰€æœ‰ Beanï¼Œå¹¶æ ¹æ®è§„åˆ™é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ Bean æ¥æ»¡è¶³ä¾èµ–ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„ Bean æˆ–æ‰¾åˆ°å¤šä¸ªå€™é€‰ Beanï¼Œå¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-è‡ªåŠ¨è£…é…æœ‰ä»€ä¹ˆå±€é™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è‡ªåŠ¨è£…é…æœ‰ä»€ä¹ˆå±€é™"}},[t._v("#")]),t._v(" ğŸ¯ è‡ªåŠ¨è£…é…æœ‰ä»€ä¹ˆå±€é™ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[t._v("åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ã€å­—ç¬¦ä¸²å­—é¢é‡ã€ç±»å­—é¢é‡æ— æ³•ä½¿ç”¨è‡ªåŠ¨è£…é…æ¥æ³¨å…¥ã€‚")]),t._v(" "),a("li",[t._v("è£…é…ä¾èµ–ä¸­è‹¥æ˜¯å‡ºç°åŒ¹é…åˆ°å¤šä¸ªbeanï¼ˆå‡ºç°æ­§ä¹‰æ€§ï¼‰ï¼Œè£…é…å°†ä¼šå¤±è´¥")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-beançš„ä½œç”¨åŸŸæœ‰å“ªäº›-å¦‚ä½•é€‰æ‹©"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-beançš„ä½œç”¨åŸŸæœ‰å“ªäº›-å¦‚ä½•é€‰æ‹©"}},[t._v("#")]),t._v(" ğŸ¯ Spring Beançš„ä½œç”¨åŸŸæœ‰å“ªäº›ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Springæ”¯æŒå¤šç§Beanä½œç”¨åŸŸï¼Œç”¨äºæ§åˆ¶Beançš„åˆ›å»ºç­–ç•¥å’Œç”Ÿå‘½å‘¨æœŸï¼š')]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒä½œç”¨åŸŸ")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. singletonï¼ˆå•ä¾‹ï¼Œé»˜è®¤ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ•´ä¸ªSpringå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªBeanå®ä¾‹")]),t._v(" "),a("li",[t._v("çº¿ç¨‹ä¸å®‰å…¨ï¼Œéœ€æ³¨æ„å¹¶å‘è®¿é—®")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºæ— çŠ¶æ€çš„æœåŠ¡å±‚ç»„ä»¶")])]),t._v(" "),a("p",[a("strong",[t._v("2. prototypeï¼ˆåŸå‹ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ¯æ¬¡getBean()éƒ½åˆ›å»ºæ–°å®ä¾‹")]),t._v(" "),a("li",[t._v("Springä¸ç®¡ç†prototype Beançš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºæœ‰çŠ¶æ€çš„Bean")])]),t._v(" "),a("p",[a("strong",[t._v("Webç¯å¢ƒä½œç”¨åŸŸ")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("3. requestï¼ˆè¯·æ±‚ä½œç”¨åŸŸï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ¯ä¸ªHTTPè¯·æ±‚åˆ›å»ºä¸€ä¸ªBeanå®ä¾‹")]),t._v(" "),a("li",[t._v("è¯·æ±‚ç»“æŸåå®ä¾‹è¢«é”€æ¯")]),t._v(" "),a("li",[t._v("ç”¨äºå­˜å‚¨è¯·æ±‚ç›¸å…³æ•°æ®")])]),t._v(" "),a("p",[a("strong",[t._v("4. sessionï¼ˆä¼šè¯ä½œç”¨åŸŸï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ¯ä¸ªHTTP Sessionåˆ›å»ºä¸€ä¸ªå®ä¾‹")]),t._v(" "),a("li",[t._v("Sessionå¤±æ•ˆåå®ä¾‹è¢«é”€æ¯")]),t._v(" "),a("li",[t._v("ç”¨äºå­˜å‚¨ç”¨æˆ·ä¼šè¯æ•°æ®")])]),t._v(" "),a("p",[a("strong",[t._v("5. applicationï¼ˆåº”ç”¨ä½œç”¨åŸŸï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ•´ä¸ªWebåº”ç”¨åªæœ‰ä¸€ä¸ªå®ä¾‹")]),t._v(" "),a("li",[t._v("ç»‘å®šåˆ°ServletContextç”Ÿå‘½å‘¨æœŸ")])]),t._v(" "),a("p",[a("strong",[t._v("é€‰æ‹©åŸåˆ™")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ— çŠ¶æ€Bean â†’ singleton")]),t._v(" "),a("li",[t._v("æœ‰çŠ¶æ€Bean â†’ prototype")]),t._v(" "),a("li",[t._v("Webæ•°æ® â†’ request/session")]),t._v(" "),a("li",[t._v('å…¨å±€å…±äº« â†’ application"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å•ä¾‹Beanï¼ˆé»˜è®¤ï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SingletonService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// çº¿ç¨‹ä¸å®‰å…¨ï¼")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        counter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŸå‹Bean")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Scope")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prototype"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PrototypeBean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¯ä¸ªå®ä¾‹ç‹¬ç«‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯·æ±‚ä½œç”¨åŸŸ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestScope")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestBean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" requestId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UUID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomUUID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼šè¯ä½œç”¨åŸŸ  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SessionScope")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserSession")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" attributes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-æ¡†æ¶ä¸­çš„å•ä¾‹-beans-æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-æ¡†æ¶ä¸­çš„å•ä¾‹-beans-æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ Spring æ¡†æ¶ä¸­çš„å•ä¾‹ "),a("strong",[t._v("Beans")]),t._v(" æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆ?")]),t._v(" "),a("blockquote",[a("p",[t._v("Spring å®¹å™¨ä¸­çš„Beanæ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Œå®¹å™¨æœ¬èº«å¹¶æ²¡æœ‰æä¾›Beançš„çº¿ç¨‹å®‰å…¨ç­–ç•¥ï¼Œå› æ­¤å¯ä»¥è¯´Springå®¹å™¨ä¸­çš„Beanæœ¬èº«ä¸å…·å¤‡çº¿ç¨‹å®‰å…¨çš„ç‰¹æ€§ï¼Œä½†æ˜¯å…·ä½“è¿˜æ˜¯è¦ç»“åˆå…·ä½“scopeçš„Beanå»ç ”ç©¶ã€‚")]),t._v(" "),a("p",[t._v("çº¿ç¨‹å®‰å…¨è¿™ä¸ªé—®é¢˜ï¼Œè¦ä»å•ä¾‹ä¸åŸå‹Beanåˆ†åˆ«è¿›è¡Œè¯´æ˜ã€‚")]),t._v(" "),a("p",[t._v("**ã€ŒåŸå‹Beanã€**å¯¹äºåŸå‹Bean,æ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹ä¹‹é—´å¹¶ä¸å­˜åœ¨Beanå…±äº«ï¼Œè‡ªç„¶æ˜¯ä¸ä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚")]),t._v(" "),a("p",[t._v("**ã€Œå•ä¾‹Beanã€**å¯¹äºå•ä¾‹Bean,æ‰€æœ‰çº¿ç¨‹éƒ½å…±äº«ä¸€ä¸ªå•ä¾‹å®ä¾‹Bean,å› æ­¤æ˜¯å­˜åœ¨èµ„æºçš„ç«äº‰ã€‚")])]),t._v(" "),a("p",[t._v("åœ¨ Spring æ¡†æ¶ä¸­ï¼Œå•ä¾‹ï¼ˆ"),a("strong",[t._v("Singleton")]),t._v("ï¼‰Beans é»˜è®¤æ˜¯"),a("strong",[t._v("çº¿ç¨‹ä¸å®‰å…¨çš„")]),t._v("ï¼Œè¿™å–å†³äº Bean çš„å†…éƒ¨çŠ¶æ€ä»¥åŠæ˜¯å¦å¯¹å…¶è¿›è¡Œäº†é€‚å½“çš„åŒæ­¥å’Œç®¡ç†ã€‚å…·ä½“æ¥è¯´ï¼ŒSpring çš„ "),a("strong",[t._v("å•ä¾‹ä½œç”¨åŸŸ")]),t._v(" è¡¨ç¤ºå®¹å™¨åªä¼šåˆ›å»ºè¯¥ Bean çš„å•ä¸€å®ä¾‹å¹¶å…±äº«ï¼Œä½†å®ƒå¹¶æ²¡æœ‰è‡ªåŠ¨ä¿è¯ Bean å®ä¾‹æœ¬èº«çš„çº¿ç¨‹å®‰å…¨æ€§ã€‚")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("å•ä¾‹ Bean çº¿ç¨‹å®‰å…¨é—®é¢˜çš„åŸå› ")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("å•ä¾‹æ¨¡å¼")]),t._v("æ„å‘³ç€ Spring å®¹å™¨ä¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶åˆ›å»ºè¯¥ Bean çš„å”¯ä¸€å®ä¾‹ï¼Œå¹¶ä¸”æ•´ä¸ªåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸå†…éƒ½ä¼šä½¿ç”¨è¿™ä¸ªå®ä¾‹ã€‚å› æ­¤ï¼Œå¦‚æœè¯¥ Bean è¢«å¤šä¸ªçº¿ç¨‹å…±äº«å¹¶ä¸”å†…éƒ¨çŠ¶æ€æ˜¯å¯å˜çš„ï¼ˆå³ Bean çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜ï¼‰ï¼Œåˆ™å¿…é¡»å°å¿ƒå¤„ç†ï¼Œä»¥é¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("çº¿ç¨‹ä¸å®‰å…¨çš„å®ä¾‹")]),t._v("ï¼šå¦‚æœå•ä¾‹ Bean ä¸­çš„å­—æ®µæ˜¯å¯å˜çš„ä¸”æ²¡æœ‰æ­£ç¡®åŒæ­¥ï¼Œé‚£ä¹ˆå¤šä¸ªçº¿ç¨‹è®¿é—®è¯¥ Bean æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°ç«æ€æ¡ä»¶ã€è„è¯»ã€å†™å†²çªç­‰é—®é¢˜ã€‚")])])])]),t._v(" "),a("li",[a("p",[t._v("å•ä¾‹ Bean çº¿ç¨‹å®‰å…¨çš„å‡ ç§æƒ…å†µ")])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("æ— çŠ¶æ€çš„å•ä¾‹ Beanï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰")]),t._v(" "),a("p",[t._v("å¦‚æœå•ä¾‹ Bean æ²¡æœ‰ä»»ä½•å¯å˜çš„æˆå‘˜å˜é‡ï¼Œæˆ–è€…æ‰€æœ‰æˆå‘˜å˜é‡éƒ½æ˜¯ä¸å¯å˜çš„ï¼ˆä¾‹å¦‚ "),a("code",[t._v("final")]),t._v(" ç±»å‹æˆ– "),a("code",[t._v("@Value")]),t._v(" æ³¨å…¥çš„å¸¸é‡ï¼‰ï¼Œåˆ™å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºä¸åŒçº¿ç¨‹åœ¨è®¿é—®è¯¥ Bean æ—¶ä¸ä¼šä¿®æ”¹å…¶çŠ¶æ€ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("greet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ"),a("code",[t._v("MyService")]),t._v(" æ˜¯æ— çŠ¶æ€çš„ï¼Œæ–¹æ³•å†…éƒ¨æ²¡æœ‰ä»»ä½•æˆå‘˜å˜é‡ï¼Œå› æ­¤å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è°ƒç”¨è¯¥æ–¹æ³•ï¼Œè€Œä¸ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("æœ‰çŠ¶æ€çš„å•ä¾‹ Beanï¼ˆéçº¿ç¨‹å®‰å…¨ï¼‰")]),t._v(" "),a("p",[t._v("å¦‚æœå•ä¾‹ Bean çš„æŸäº›å­—æ®µæ˜¯å¯å˜çš„ï¼Œæˆ–è€…å®ƒä»¬ä¼šéšç€æ–¹æ³•è°ƒç”¨è€Œå˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œå®ä¾‹å˜é‡ä¾èµ–äºè¯·æ±‚å‚æ•°æˆ–å…¶ä»–å¤–éƒ¨å› ç´ ï¼‰ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½ä¼šå˜å¾—çº¿ç¨‹ä¸å®‰å…¨ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CounterService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        counter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éçº¿ç¨‹å®‰å…¨æ“ä½œ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCounter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ"),a("code",[t._v("CounterService")]),t._v(" æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå› ä¸º "),a("code",[t._v("counter")]),t._v(" å­—æ®µçš„å€¼ä¼šæ ¹æ® "),a("code",[t._v("increment()")]),t._v(" æ–¹æ³•çš„è°ƒç”¨è€Œå˜åŒ–ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨ "),a("code",[t._v("increment()")]),t._v(" æ–¹æ³•ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç«æ€æ¡ä»¶ï¼ˆrace conditionï¼‰ï¼Œä»è€Œå¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("æœ‰çŠ¶æ€çš„å•ä¾‹ Bean çš„çº¿ç¨‹å®‰å…¨å¤„ç†")]),t._v(" "),a("p",[t._v("å¦‚æœä½ çš„å•ä¾‹ Bean æ˜¯æœ‰çŠ¶æ€çš„ï¼Œä¸”ä½ éœ€è¦åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå¯ä»¥è‡ªå·±æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼šæ¯”å¦‚åŒæ­¥æ–¹æ³•ã€åŸå­ç±»ç­‰")])])]),t._v(" "),a("blockquote",[a("ul",[a("li",[a("strong",[t._v("æ— çŠ¶æ€çš„å•ä¾‹ Bean")]),t._v("ï¼šå¦‚æœå•ä¾‹ Bean æ²¡æœ‰å¯å˜çŠ¶æ€ï¼ˆå³æ²¡æœ‰å®ä¾‹å­—æ®µæˆ–è€…æ‰€æœ‰å­—æ®µéƒ½æ˜¯ "),a("code",[t._v("final")]),t._v(" çš„ï¼‰ï¼Œé‚£ä¹ˆå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æœ‰çŠ¶æ€çš„å•ä¾‹ Bean")]),t._v("ï¼šå¦‚æœå•ä¾‹ Bean çš„å­—æ®µæ˜¯å¯å˜çš„ï¼Œä¸”åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å¯èƒ½ä¼šè¢«åŒæ—¶è®¿é—®ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒæ˜¯"),a("strong",[t._v("çº¿ç¨‹ä¸å®‰å…¨çš„")]),t._v("ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»é€šè¿‡åŒæ­¥ã€åŸå­ç±»ã€æˆ–è€… "),a("code",[t._v("ThreadLocal")]),t._v(" ç­‰æŠ€æœ¯æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("Spring ä¸ä¼šè‡ªåŠ¨ä¸ºå•ä¾‹ Bean æä¾›çº¿ç¨‹å®‰å…¨æœºåˆ¶")]),t._v("ï¼Œå¼€å‘è€…éœ€è¦æ ¹æ®å®é™…æƒ…å†µæ¥ä¿è¯çº¿ç¨‹å®‰å…¨æ€§ã€‚")])])]),t._v(" "),a("blockquote",[a("p",[t._v("â€œSpring æ¡†æ¶ä¸­çš„å•ä¾‹ Bean é»˜è®¤æƒ…å†µä¸‹å¹¶ä¸ä¿è¯çº¿ç¨‹å®‰å…¨æ€§ã€‚å•ä¾‹æ¨¡å¼æ„å‘³ç€åŒä¸€ä¸ª Bean å®ä¾‹ä¼šè¢«å¤šä¸ªçº¿ç¨‹å…±äº«ï¼Œå› æ­¤å¦‚æœ Bean æœ‰å¯å˜çš„çŠ¶æ€ï¼ˆä¾‹å¦‚æˆå‘˜å˜é‡ä¼šåœ¨æ–¹æ³•è°ƒç”¨ä¸­å‘ç”Ÿå˜åŒ–ï¼‰ï¼Œå°±å¯èƒ½å¯¼è‡´çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ä¸ºäº†ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæ­¥æœºåˆ¶ã€åŸå­ç±»æˆ–è€… "),a("code",[t._v("ThreadLocal")]),t._v(" æ¥ä¿è¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­çš„å®‰å…¨è®¿é—®ã€‚å¦‚æœ Bean æ˜¯æ— çŠ¶æ€çš„ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚â€")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–-springå¦‚ä½•è§£å†³"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–-springå¦‚ä½•è§£å†³"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼ŸSpringå¦‚ä½•è§£å†³ï¼Ÿ")]),t._v(" "),a("blockquote",[a("p",[t._v("å¾ªç¯ä¾èµ–æ˜¯æŒ‡ Bean ä¹‹é—´çš„ç›¸äº’ä¾èµ–å¯¼è‡´çš„åˆ›å»ºæ­»å¾ªç¯ã€‚Spring é€šè¿‡ "),a("strong",[t._v("ä¸‰çº§ç¼“å­˜")]),t._v(" æå‰æš´éœ²åŠæˆå“ Bean çš„å¼•ç”¨æ¥è§£å†³å•ä¾‹ Bean çš„å¾ªç¯ä¾èµ–ï¼Œæ”¯æŒ setter/field æ³¨å…¥ã€‚ä½†æ„é€ å™¨æ³¨å…¥å’Œ prototype Bean çš„å¾ªç¯ä¾èµ–æ— æ³•è§£å†³ï¼Œä¼šæŠ¥é”™ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("å¾ªç¯ä¾èµ–")]),t._v("ï¼š ä¸¤ä¸ªæˆ–å¤šä¸ª Bean ä¹‹é—´ç›¸äº’ä¾èµ–ï¼Œå½¢æˆä¸€ä¸ªç¯ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("ä¾‹å¦‚ï¼š"),a("code",[t._v("A")]),t._v(" ä¾èµ– "),a("code",[t._v("B")]),t._v(",  "),a("code",[t._v("B")]),t._v(" åˆä¾èµ– "),a("code",[t._v("A")])])]),t._v(" "),a("p",[t._v("å¦‚æœ Spring ä¸å¤„ç†ï¼Œå°±ä¼šåœ¨ Bean åˆ›å»ºè¿‡ç¨‹ä¸­æ­»å¾ªç¯ï¼Œå¯¼è‡´å¯åŠ¨å¤±è´¥ã€‚")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("Spring è§£å†³å¾ªç¯ä¾èµ–çš„æœºåˆ¶")])]),t._v(" "),a("p",[t._v("Spring é»˜è®¤æ”¯æŒ "),a("strong",[t._v("å•ä¾‹ Bean çš„å¾ªç¯ä¾èµ–")]),t._v("ï¼ˆæ„é€ å™¨æ³¨å…¥é™¤å¤–ï¼‰ã€‚æ ¸å¿ƒä¾èµ– "),a("strong",[t._v("ä¸‰çº§ç¼“å­˜æœºåˆ¶")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("singletonObjects")]),t._v("ï¼ˆä¸€çº§ç¼“å­˜ï¼‰ï¼šå®Œæˆåˆå§‹åŒ–çš„å•ä¾‹å¯¹è±¡çš„ cacheï¼Œè¿™é‡Œçš„ bean ç»å†è¿‡ "),a("code",[t._v("å®ä¾‹åŒ–->å±æ€§å¡«å……->åˆå§‹åŒ–")]),t._v(" ä»¥åŠå„ç§åç½®å¤„ç†")]),t._v(" "),a("li",[a("strong",[t._v("earlySingletonObjects")]),t._v("ï¼ˆäºŒçº§ç¼“å­˜ï¼‰ï¼šå­˜æ”¾æå‰æ›å…‰çš„â€œåŠæˆå“â€ Beanï¼ˆ"),a("strong",[t._v("å®Œæˆå®ä¾‹åŒ–ä½†æ˜¯å°šæœªå¡«å……å±æ€§å’Œåˆå§‹åŒ–")]),t._v("ï¼‰ï¼Œä»…ä»…èƒ½ä½œä¸ºæŒ‡é’ˆæå‰æ›å…‰ï¼Œè¢«å…¶ä»– bean æ‰€å¼•ç”¨ï¼Œç”¨äºè§£å†³å¾ªç¯ä¾èµ–çš„")]),t._v(" "),a("li",[a("strong",[t._v("singletonFactories")]),t._v("ï¼ˆä¸‰çº§ç¼“å­˜ï¼‰ï¼šå­˜æ”¾å¯¹è±¡å·¥å‚ï¼ˆä¸»è¦ç”¨äº AOP ä»£ç†æå‰æš´éœ²ï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("è§£å†³æµç¨‹ï¼š")])]),t._v(" "),a("ol",[a("li",[t._v("Spring åˆ›å»º Bean "),a("code",[t._v("A")]),t._v(" â†’ å®ä¾‹åŒ– "),a("code",[t._v("A")]),t._v("ï¼Œä½†å±æ€§æœªæ³¨å…¥\n"),a("ul",[a("li",[t._v("æŠŠ "),a("code",[t._v("A")]),t._v(" çš„ "),a("strong",[t._v("å·¥å‚å¯¹è±¡ï¼ˆObjectFactoryï¼‰")]),t._v(" æ”¾å…¥ "),a("strong",[t._v("ä¸‰çº§ç¼“å­˜")])])])]),t._v(" "),a("li",[a("code",[t._v("A")]),t._v(" éœ€è¦æ³¨å…¥ "),a("code",[t._v("B")]),t._v(" â†’ åˆ›å»º "),a("code",[t._v("B")])]),t._v(" "),a("li",[a("code",[t._v("B")]),t._v(" åˆéœ€è¦ "),a("code",[t._v("A")]),t._v(" â†’ ä»ä¸‰çº§ç¼“å­˜æ‰¾åˆ° "),a("code",[t._v("A")]),t._v(" çš„å·¥å‚ï¼Œæ‹¿åˆ° "),a("code",[t._v("A")]),t._v(" çš„å¼•ç”¨ï¼ˆå¯èƒ½æ˜¯ä»£ç†å¯¹è±¡ï¼‰ï¼Œæ”¾å…¥äºŒçº§ç¼“å­˜")]),t._v(" "),a("li",[a("code",[t._v("B")]),t._v(" å®Œæˆåˆ›å»º â†’ æ³¨å…¥åˆ° "),a("code",[t._v("A")])]),t._v(" "),a("li",[a("code",[t._v("A")]),t._v(" å®Œæˆå±æ€§æ³¨å…¥ â†’ ç§»åˆ°ä¸€çº§ç¼“å­˜ï¼Œåˆ é™¤äºŒä¸‰çº§ç¼“å­˜ä¸­çš„å¼•ç”¨")])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("æ³¨æ„ç‚¹")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æ”¯æŒçš„æƒ…å†µ")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("å•ä¾‹ Bean + setter æ³¨å…¥ / field æ³¨å…¥ï¼ˆå¯ä»¥å…ˆå®ä¾‹åŒ–å†å¡«å……å±æ€§ï¼‰")])])]),t._v(" "),a("li",[a("strong",[t._v("ä¸æ”¯æŒçš„æƒ…å†µ")]),t._v("ï¼š\n"),a("ul",[a("li",[a("strong",[t._v("æ„é€ å™¨æ³¨å…¥")]),t._v("å¾ªç¯ä¾èµ–ï¼ˆå› ä¸ºå¯¹è±¡è¿˜æ²¡å®ä¾‹åŒ–å°±è¦å½¼æ­¤ä¾èµ–ï¼Œæ²¡æ³•æå‰æš´éœ²ï¼‰")]),t._v(" "),a("li",[a("strong",[t._v("prototype Bean")]),t._v("ï¼ˆå› ä¸ºåŸå‹ Bean ä¸èµ°å•ä¾‹ç¼“å­˜æœºåˆ¶ï¼‰")])])])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSingleton")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" allowEarlyReference"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä» singletonObjects è·å–å®ä¾‹ï¼ŒsingletonObjects ä¸­çš„å®ä¾‹éƒ½æ˜¯å‡†å¤‡å¥½çš„ bean å®ä¾‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" singletonObject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("singletonObjects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//isSingletonCurrentlyInCreation() åˆ¤æ–­å½“å‰å•ä¾‹beanæ˜¯å¦æ­£åœ¨åˆ›å»ºä¸­")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singletonObject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isSingletonCurrentlyInCreation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("singletonObjects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€çº§ç¼“å­˜æ²¡æœ‰ï¼Œå°±å»äºŒçº§ç¼“å­˜æ‰¾")]),t._v("\n            singletonObject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("earlySingletonObjects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singletonObject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" allowEarlyReference"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// äºŒçº§ç¼“å­˜ä¹Ÿæ²¡æœ‰ï¼Œå°±å»ä¸‰çº§ç¼“å­˜æ‰¾")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjectFactory")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" singletonFactory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("singletonFactories"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singletonFactory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸‰çº§ç¼“å­˜æœ‰çš„è¯ï¼Œå°±æŠŠä»–ç§»åŠ¨åˆ°äºŒçº§ç¼“å­˜,.getObject() åç»­ä¼šè®²åˆ°")]),t._v("\n                    singletonObject "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" singletonFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("earlySingletonObjects"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" singletonObject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("singletonFactories"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" singletonObject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-ä¸ºä»€ä¹ˆ-spring-è¦ç”¨ä¸‰çº§ç¼“å­˜-äºŒçº§ç¼“å­˜æ˜¯ä¸æ˜¯å°±å¤Ÿäº†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä¸ºä»€ä¹ˆ-spring-è¦ç”¨ä¸‰çº§ç¼“å­˜-äºŒçº§ç¼“å­˜æ˜¯ä¸æ˜¯å°±å¤Ÿäº†"}},[t._v("#")]),t._v(" ğŸ¯ ä¸ºä»€ä¹ˆ Spring è¦ç”¨ä¸‰çº§ç¼“å­˜ï¼ŸäºŒçº§ç¼“å­˜æ˜¯ä¸æ˜¯å°±å¤Ÿäº†ï¼Ÿ")]),t._v(" "),a("blockquote",[a("p",[t._v("å¦‚æœåªè€ƒè™‘å¾ªç¯ä¾èµ–ï¼Œ"),a("strong",[t._v("äºŒçº§ç¼“å­˜å°±èƒ½è§£å†³")]),t._v("ï¼›")]),t._v(" "),a("p",[t._v("Spring ä½¿ç”¨ "),a("strong",[t._v("ä¸‰çº§ç¼“å­˜")]),t._v(" æ˜¯ä¸ºäº†å…¼é¡¾ "),a("strong",[t._v("AOP ä»£ç†åœºæ™¯")]),t._v("ï¼Œç¡®ä¿å³ä½¿ Bean è¢«ä»£ç†ï¼Œä¾èµ–æ³¨å…¥çš„ä¹Ÿæ˜¯åŒä¸€ä¸ªæœ€ç»ˆå¯¹è±¡ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("äºŒçº§ç¼“å­˜èƒ½è§£å†³å—ï¼Ÿ")])]),t._v(" "),a("p",[t._v("ä»â€œè§£å†³å¾ªç¯ä¾èµ–â€çš„è§’åº¦çœ‹ï¼Œå…¶å® "),a("strong",[t._v("äºŒçº§ç¼“å­˜å°±å¤Ÿäº†")]),t._v("ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("å½“ "),a("code",[t._v("A")]),t._v(" éœ€è¦ "),a("code",[t._v("B")]),t._v("ï¼Œ"),a("code",[t._v("B")]),t._v(" åˆéœ€è¦ "),a("code",[t._v("A")]),t._v("ï¼ŒSpring å¯ä»¥æŠŠ "),a("code",[t._v("A")]),t._v(" çš„â€œåŠæˆå“å¯¹è±¡â€ç›´æ¥æ”¾åˆ°äºŒçº§ç¼“å­˜é‡Œï¼ˆ"),a("code",[t._v("earlySingletonObjects")]),t._v("ï¼‰ï¼Œè¿™æ · "),a("code",[t._v("B")]),t._v(" åœ¨åˆ›å»ºæ—¶å°±èƒ½æ‹¿åˆ° "),a("code",[t._v("A")]),t._v(" çš„å¼•ç”¨ï¼Œä»è€Œè§£å†³å¾ªç¯ä¾èµ–ã€‚")])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜ï¼Ÿ")])]),t._v(" "),a("p",[t._v("ä¸‰çº§ç¼“å­˜çš„ä½œç”¨æ˜¯ä¸ºäº† "),a("strong",[t._v("æ”¯æŒ AOP ä»£ç†ç­‰åœºæ™¯")]),t._v("ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("å‡å¦‚ "),a("code",[t._v("A")]),t._v(" æ˜¯ä¸€ä¸ªéœ€è¦è¢«ä»£ç†çš„ Beanï¼ˆæ¯”å¦‚åŠ äº† "),a("code",[t._v("@Transactional")]),t._v("ï¼‰ï¼Œå¦‚æœåªç”¨äºŒçº§ç¼“å­˜ï¼š\n"),a("ul",[a("li",[a("code",[t._v("B")]),t._v(" æ³¨å…¥çš„æ˜¯åŸå§‹çš„ "),a("code",[t._v("A")]),t._v(" å¯¹è±¡ï¼ˆè¿˜æ²¡ç”Ÿæˆä»£ç†ï¼‰")]),t._v(" "),a("li",[t._v("ä¹‹å "),a("code",[t._v("A")]),t._v(" åœ¨ BeanPostProcessor é‡Œç”Ÿæˆäº†ä»£ç†å¯¹è±¡ï¼Œä½† "),a("code",[t._v("B")]),t._v(" å·²ç»æŒæœ‰äº†åŸå§‹å¯¹è±¡ï¼Œæœ€ç»ˆå¯¼è‡´ä¾èµ–çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼ˆä»£ç†å¤±æ•ˆï¼‰")])])]),t._v(" "),a("li",[t._v("æ‰€ä»¥ Spring åœ¨ä¸‰çº§ç¼“å­˜ä¸­æ”¾çš„ä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯ä¸€ä¸ª "),a("strong",[t._v("ObjectFactory")]),t._v("ï¼Œå¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™è¿”å›çœŸæ­£çš„å¯¹è±¡ï¼ˆåŸå§‹çš„æˆ–è€…ä»£ç†è¿‡çš„ï¼‰ã€‚\n"),a("ul",[a("li",[a("code",[t._v("getEarlyBeanReference()")]),t._v(" ä¼šåœ¨ BeanPostProcessor ä¸­æ‰§è¡Œï¼ŒæŠŠåŸå§‹å¯¹è±¡åŒ…è£…æˆä»£ç†å¯¹è±¡ã€‚")]),t._v(" "),a("li",[t._v("è¿™æ ·ä¿è¯äº† "),a("code",[t._v("A")]),t._v(" å’Œ "),a("code",[t._v("B")]),t._v(" æ‹¿åˆ°çš„éƒ½æ˜¯æœ€ç»ˆçš„ä»£ç†å¯¹è±¡ï¼Œè€Œä¸æ˜¯åŠæˆå“ã€‚")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ¯-äºŒã€aopé¢å‘åˆ‡é¢ç¼–ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-äºŒã€aopé¢å‘åˆ‡é¢ç¼–ç¨‹"}},[t._v("#")]),t._v(" ğŸ¯ äºŒã€AOPé¢å‘åˆ‡é¢ç¼–ç¨‹")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç†å¿µ")]),t._v("ï¼šå°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»ï¼Œå®ç°å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œæé«˜ä»£ç çš„æ¨¡å—åŒ–ç¨‹åº¦ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯aop-æ ¸å¿ƒæ¦‚å¿µæœ‰å“ªäº›"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯aop-æ ¸å¿ƒæ¦‚å¿µæœ‰å“ªäº›"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯AOPï¼Ÿæ ¸å¿ƒæ¦‚å¿µæœ‰å“ªäº›ï¼Ÿ")]),t._v(" "),a("p",[t._v('"AOPå…¨ç§°Aspect Oriented Programmingï¼Œå³é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯å¯¹OOPçš„è¡¥å……å’Œæ‰©å±•ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("AOPæ ¸å¿ƒæ€æƒ³")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨ï¼‰ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»")]),t._v(" "),a("li",[t._v("é€šè¿‡åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°æ–¹æ³•å¢å¼º")]),t._v(" "),a("li",[t._v("æé«˜ä»£ç çš„æ¨¡å—åŒ–ç¨‹åº¦å’Œå¯ç»´æŠ¤æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒæ¦‚å¿µ")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. åˆ‡é¢ï¼ˆAspectï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–å°è£…")]),t._v(" "),a("li",[t._v("åŒ…å«åˆ‡ç‚¹å’Œé€šçŸ¥çš„ç»„åˆ")]),t._v(" "),a("li",[t._v("ä½¿ç”¨@Aspectæ³¨è§£å®šä¹‰")])]),t._v(" "),a("p",[a("strong",[t._v("2. è¿æ¥ç‚¹ï¼ˆJoinPointï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­èƒ½æ’å…¥åˆ‡é¢çš„ç‚¹")]),t._v(" "),a("li",[t._v("Spring AOPä¸­ç‰¹æŒ‡æ–¹æ³•æ‰§è¡Œç‚¹")]),t._v(" "),a("li",[t._v("åŒ…å«æ–¹æ³•ä¿¡æ¯ã€å‚æ•°ã€ç›®æ ‡å¯¹è±¡ç­‰")])]),t._v(" "),a("p",[a("strong",[t._v("3. åˆ‡ç‚¹ï¼ˆPointcutï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŒ¹é…è¿æ¥ç‚¹çš„è¡¨è¾¾å¼")]),t._v(" "),a("li",[t._v("å®šä¹‰åœ¨å“ªäº›æ–¹æ³•ä¸Šåº”ç”¨é€šçŸ¥")]),t._v(" "),a("li",[t._v("ä½¿ç”¨AspectJè¡¨è¾¾å¼è¯­è¨€")])]),t._v(" "),a("p",[a("strong",[t._v("4. é€šçŸ¥ï¼ˆAdviceï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åœ¨ç‰¹å®šè¿æ¥ç‚¹æ‰§è¡Œçš„ä»£ç ")]),t._v(" "),a("li",[t._v("åŒ…å«å‰ç½®ã€åç½®ã€ç¯ç»•ã€å¼‚å¸¸ã€æœ€ç»ˆé€šçŸ¥")])]),t._v(" "),a("p",[a("strong",[t._v("5. ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("è¢«é€šçŸ¥çš„å¯¹è±¡ï¼Œé€šå¸¸æ˜¯ä¸šåŠ¡é€»è¾‘å¯¹è±¡")])]),t._v(" "),a("p",[a("strong",[t._v("6. ç»‡å…¥ï¼ˆWeavingï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å°†åˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡åˆ›å»ºä»£ç†çš„è¿‡ç¨‹")]),t._v(" "),a("li",[t._v('Springé‡‡ç”¨è¿è¡Œæ—¶ç»‡å…¥"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Aspect")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggingAspect")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å®šä¹‰åˆ‡ç‚¹")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"execution(* com.example.service.*.*(..))"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("serviceLayer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@annotation(com.example.annotation.Log)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logAnnotation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‰ç½®é€šçŸ¥")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Before")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"serviceLayer()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeAdvice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JoinPoint")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" methodName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSignature")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getArgs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ–¹æ³•æ‰§è¡Œå‰: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" methodName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", å‚æ•°: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¯ç»•é€šçŸ¥")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Around")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"logAnnotation()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("aroundAdvice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProceedingJoinPoint")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" startTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("proceed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" endTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ–¹æ³•æ‰§è¡Œè€—æ—¶: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("endTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" startTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ms"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼‚å¸¸é€šçŸ¥")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@AfterThrowing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pointcut "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"serviceLayer()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" throwing "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ex"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterThrowingAdvice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JoinPoint")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" ex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ–¹æ³•æ‰§è¡Œå¼‚å¸¸: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" ex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-aop-æœ‰å“ªäº›å®ç°æ–¹å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-aop-æœ‰å“ªäº›å®ç°æ–¹å¼"}},[t._v("#")]),t._v(" ğŸ¯ AOP æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ")]),t._v(" "),a("p",[t._v("å®ç° AOP çš„æŠ€æœ¯ï¼Œä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é™æ€ä»£ç† - æŒ‡ä½¿ç”¨ AOP æ¡†æ¶æä¾›çš„å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œä»è€Œåœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ç”Ÿæˆ AOP ä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºç¼–è¯‘æ—¶å¢å¼ºï¼›\n"),a("ul",[a("li",[t._v("ç¼–è¯‘æ—¶ç¼–ç»‡ï¼ˆç‰¹æ®Šç¼–è¯‘å™¨å®ç°ï¼‰")]),t._v(" "),a("li",[t._v("ç±»åŠ è½½æ—¶ç¼–ç»‡ï¼ˆç‰¹æ®Šçš„ç±»åŠ è½½å™¨å®ç°ï¼‰ã€‚")])])]),t._v(" "),a("li",[t._v("åŠ¨æ€ä»£ç† - åœ¨è¿è¡Œæ—¶åœ¨å†…å­˜ä¸­â€œä¸´æ—¶â€ç”Ÿæˆ AOP åŠ¨æ€ä»£ç†ç±»ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¸ºè¿è¡Œæ—¶å¢å¼ºã€‚\n"),a("ul",[a("li",[t._v("JDK åŠ¨æ€ä»£ç†")]),t._v(" "),a("li",[t._v("CGLIB")])])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-aop-å®ç°åŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-aop-å®ç°åŸç†"}},[t._v("#")]),t._v(" ğŸ¯ Spring AOP å®ç°åŸç†?")]),t._v(" "),a("p",[t._v("Spring AOP çš„å®ç°åŸç†åŸºäº"),a("strong",[t._v("åŠ¨æ€ä»£ç†")]),t._v("å’Œ"),a("strong",[t._v("å­—èŠ‚ç å¢å¼º")]),t._v("ï¼Œå…¶æ ¸å¿ƒæ˜¯é€šè¿‡åœ¨è¿è¡Œæ—¶ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå°†æ¨ªåˆ‡é€»è¾‘ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ï¼‰ç»‡å…¥ç›®æ ‡æ–¹æ³•ä¸­ã€‚ä»¥ä¸‹æ˜¯å…¶å®ç°åŸç†çš„è¯¦ç»†è§£æï¼š")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("Spring")]),t._v("çš„"),a("code",[t._v("AOP")]),t._v("å®ç°åŸç†å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯é€šè¿‡"),a("strong",[t._v("åŠ¨æ€ä»£ç†")]),t._v("å®ç°çš„ã€‚å¦‚æœæˆ‘ä»¬ä¸º"),a("code",[t._v("Spring")]),t._v("çš„æŸä¸ª"),a("code",[t._v("bean")]),t._v("é…ç½®äº†åˆ‡é¢ï¼Œé‚£ä¹ˆ"),a("code",[t._v("Spring")]),t._v("åœ¨åˆ›å»ºè¿™ä¸ª"),a("code",[t._v("bean")]),t._v("çš„æ—¶å€™ï¼Œå®é™…ä¸Šåˆ›å»ºçš„æ˜¯è¿™ä¸ª"),a("code",[t._v("bean")]),t._v("çš„ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œæˆ‘ä»¬åç»­å¯¹"),a("code",[t._v("bean")]),t._v("ä¸­æ–¹æ³•çš„è°ƒç”¨ï¼Œå®é™…ä¸Šè°ƒç”¨çš„æ˜¯ä»£ç†ç±»é‡å†™çš„ä»£ç†æ–¹æ³•ã€‚è€Œ"),a("code",[t._v("Spring")]),t._v("çš„"),a("code",[t._v("AOP")]),t._v("ä½¿ç”¨äº†ä¸¤ç§åŠ¨æ€ä»£ç†ï¼Œåˆ†åˆ«æ˜¯"),a("strong",[t._v("JDKçš„åŠ¨æ€ä»£ç†")]),t._v("ï¼Œä»¥åŠ"),a("strong",[t._v("CGLibçš„åŠ¨æ€ä»£ç†")]),t._v("ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-aopçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-aopçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ Spring AOPçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring AOPåŸºäºåŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°ï¼Œæ ¹æ®ç›®æ ‡å¯¹è±¡çš„ä¸åŒé‡‡ç”¨ä¸åŒçš„ä»£ç†ç­–ç•¥ï¼š')]),t._v(" "),a("p",[t._v("ä¸€ã€"),a("strong",[t._v("æ ¸å¿ƒå®ç°æœºåˆ¶ï¼šåŠ¨æ€ä»£ç†")])]),t._v(" "),a("p",[t._v("Spring AOP é€šè¿‡ä¸¤ç§åŠ¨æ€ä»£ç†æŠ€æœ¯å®ç°åˆ‡é¢é€»è¾‘çš„ç»‡å…¥ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("JDK åŠ¨æ€ä»£ç†")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("é€‚ç”¨æ¡ä»¶")]),t._v("ï¼šç›®æ ‡å¯¹è±¡å®ç°äº†è‡³å°‘ä¸€ä¸ªæ¥å£ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("é€‚ç”¨æ¡ä»¶")]),t._v("ï¼šç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å®ç°åŸç†")]),t._v("ï¼šåŸºäº "),a("code",[t._v("java.lang.reflect.Proxy")]),t._v(" ç±»ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œä»£ç†ç±»å®ç°ç›®æ ‡æ¥å£å¹¶é‡å†™æ–¹æ³•ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("å…³é”®æºç ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Proxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newProxyInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" interfaces"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InvocationHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("åœ¨  "),a("code",[t._v("InvocationHandler#invoke()")]),t._v(" æ–¹æ³•ä¸­æ‹¦æˆªç›®æ ‡æ–¹æ³•ï¼Œæ‰§è¡Œåˆ‡é¢é€»è¾‘ï¼ˆå¦‚å‰ç½®é€šçŸ¥ã€åç½®é€šçŸ¥ï¼‰ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("ä»£ç†æ–¹å¼")]),t._v("ï¼šç”Ÿæˆæ¥å£çš„å®ç°ç±»ä½œä¸ºä»£ç†")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("ä¼˜ç‚¹")]),t._v("ï¼šJDKå†…ç½®ï¼Œæ— éœ€é¢å¤–ä¾èµ–")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("ç¼ºç‚¹")]),t._v("ï¼šåªèƒ½ä»£ç†æ¥å£æ–¹æ³•")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("CGLIB åŠ¨æ€ä»£ç†")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("é€‚ç”¨æ¡ä»¶")]),t._v("ï¼šç›®æ ‡å¯¹è±¡æœªå®ç°æ¥å£ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å®ç°åŸç†")]),t._v("ï¼šåŸºäºASMå­—èŠ‚ç æ“ä½œï¼Œé€šè¿‡ç»§æ‰¿ç›®æ ‡ç±»ç”Ÿæˆå­ç±»ä»£ç†ï¼Œè¦†ç›–çˆ¶ç±»æ–¹æ³•å¹¶æ’å…¥åˆ‡é¢é€»è¾‘ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("å…³é”®æºç ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Enhancer")]),t._v(" enhancer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Enhancer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenhancer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSuperclass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("targetClass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nenhancer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCallback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodInterceptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("åœ¨ "),a("code",[t._v("MethodInterceptor#intercept()")]),t._v(" æ–¹æ³•ä¸­å®ç°æ–¹æ³•æ‹¦æˆª")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("ä»£ç†æ–¹å¼")]),t._v("ï¼šç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ä½œä¸ºä»£ç†")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("ä¼˜ç‚¹")]),t._v("ï¼šå¯ä»¥ä»£ç†æ™®é€šç±»")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("ç¼ºç‚¹")]),t._v("ï¼šæ— æ³•ä»£ç†finalç±»å’Œæ–¹æ³•")])])])])]),t._v(" "),a("p",[t._v("ä»£ç†åˆ›å»ºæµç¨‹**ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("Springæ£€æŸ¥ç›®æ ‡å¯¹è±¡æ˜¯å¦å®ç°æ¥å£")]),t._v(" "),a("li",[t._v("æœ‰æ¥å£â†’JDKåŠ¨æ€ä»£ç†ï¼Œæ— æ¥å£â†’CGLIBä»£ç†")]),t._v(" "),a("li",[t._v("åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œç»‡å…¥åˆ‡é¢é€»è¾‘")]),t._v(" "),a("li",[t._v("è¿”å›ä»£ç†å¯¹è±¡ä¾›å®¢æˆ·ç«¯ä½¿ç”¨")])]),t._v(" "),a("p",[a("strong",[t._v("æ–¹æ³•è°ƒç”¨æµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("å®¢æˆ·ç«¯è°ƒç”¨ä»£ç†å¯¹è±¡æ–¹æ³•")]),t._v(" "),a("li",[t._v("ä»£ç†æ‹¦æˆªæ–¹æ³•è°ƒç”¨")]),t._v(" "),a("li",[t._v("æ‰§è¡Œå‰ç½®é€šçŸ¥")]),t._v(" "),a("li",[t._v("è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•")]),t._v(" "),a("li",[t._v("æ‰§è¡Œåç½®é€šçŸ¥")]),t._v(" "),a("li",[t._v("è¿”å›ç»“æœç»™å®¢æˆ·ç«¯")])]),t._v(" "),a("p",[a("strong",[t._v("å¼ºåˆ¶ä½¿ç”¨CGLIB")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@EnableAspectJAutoProxy(proxyTargetClass=true)")]),t._v(" "),a("li",[t._v('æˆ–é…ç½®spring.aop.proxy-target-class=true"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç›®æ ‡æ¥å£å’Œå®ç°ï¼ˆä¼šä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceImpl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä¿å­˜ç”¨æˆ·: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ— æ¥å£çš„ç±»ï¼ˆä¼šä½¿ç”¨CGLIBä»£ç†ï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" orderId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åˆ›å»ºè®¢å•: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" orderId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼ºåˆ¶ä½¿ç”¨CGLIB")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableAspectJAutoProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proxyTargetClass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AopConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»£ç†å·¥å‚ä½¿ç”¨ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProxyFactoryDemo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("testProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProxyFactory")]),t._v(" factory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProxyFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        factory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTarget")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        factory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAdvice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodInterceptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("invoke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodInvocation")]),t._v(" invocation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ–¹æ³•è°ƒç”¨å‰"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" invocation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("proceed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ–¹æ³•è°ƒç”¨å"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" proxy "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" factory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å¼ ä¸‰"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("table",[a("thead",[a("tr",[a("th",[a("strong",[t._v("ç‰¹æ€§")])]),t._v(" "),a("th",[a("strong",[t._v("JDK åŠ¨æ€ä»£ç†")])]),t._v(" "),a("th",[a("strong",[t._v("CGLIB åŠ¨æ€ä»£ç†")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("åº•å±‚æŠ€æœ¯")])]),t._v(" "),a("td",[t._v("åŸºäº Java åå°„æœºåˆ¶ï¼Œé€šè¿‡ "),a("code",[t._v("Proxy")]),t._v(" ç±»å’Œ "),a("code",[t._v("InvocationHandler")]),t._v(" æ¥å£ç”Ÿæˆä»£ç†ç±»ã€‚")]),t._v(" "),a("td",[t._v("åŸºäº "),a("strong",[t._v("ASM å­—èŠ‚ç æ¡†æ¶")]),t._v("ï¼Œé€šè¿‡ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»å®ç°ä»£ç†ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("ä»£ç†æ–¹å¼")])]),t._v(" "),a("td",[t._v("åªèƒ½ä»£ç†å®ç°äº†æ¥å£çš„ç±»ï¼Œç”Ÿæˆæ¥å£çš„ä»£ç†ç±»ã€‚")]),t._v(" "),a("td",[t._v("å¯ä»£ç†æ™®é€šç±»ï¼ˆæ— éœ€æ¥å£ï¼‰ï¼Œç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»è¦†ç›–æ–¹æ³•ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ€§èƒ½")])]),t._v(" "),a("td",[t._v("æ–¹æ³•è°ƒç”¨é€šè¿‡åå°„å®ç°ï¼Œæ€§èƒ½è¾ƒä½ã€‚")]),t._v(" "),a("td",[t._v("é€šè¿‡ "),a("strong",[t._v("FastClass æœºåˆ¶")]),t._v(" ç›´æ¥è°ƒç”¨æ–¹æ³•ï¼Œæ€§èƒ½æ›´é«˜ï¼ˆä»¥ç©ºé—´æ¢æ—¶é—´ï¼‰ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("ä»£ç ç”Ÿæˆ")])]),t._v(" "),a("td",[t._v("è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆä»£ç†ç±»çš„å­—èŠ‚ç ã€‚")]),t._v(" "),a("td",[t._v("ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»å­—èŠ‚ç ï¼Œä¿®æ”¹åŸå§‹ç±»ç»“æ„ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("é€‚ç”¨åœºæ™¯")])]),t._v(" "),a("td",[t._v("ä»£ç†æ¥å£å®ç°ç±»ï¼Œé€‚ç”¨äºè½»é‡çº§åº”ç”¨ã€‚")]),t._v(" "),a("td",[t._v("ä»£ç†æ— æ¥å£çš„ç±»ï¼Œé€‚ç”¨äºé«˜æ€§èƒ½éœ€æ±‚åœºæ™¯ï¼ˆå¦‚ Spring AOPï¼‰ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("ä¼˜ç‚¹")])]),t._v(" "),a("td",[t._v("1. æ— éœ€ç¬¬ä¸‰æ–¹åº“ä¾èµ–ï¼›2. ä»£ç ç®€å•æ˜“ç”¨ã€‚")]),t._v(" "),a("td",[t._v("1. æ”¯æŒä»£ç†æ™®é€šç±»å’Œ final æ–¹æ³•ï¼›2. æ€§èƒ½æ›´é«˜ï¼ˆFastClass æœºåˆ¶ï¼‰ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("ç¼ºç‚¹")])]),t._v(" "),a("td",[t._v("1. åªèƒ½ä»£ç†æ¥å£ï¼›2. åå°„è°ƒç”¨æ€§èƒ½è¾ƒä½ã€‚")]),t._v(" "),a("td",[t._v("1. ç”Ÿæˆä»£ç†ç±»è€—æ—¶è¾ƒé•¿ï¼›2. å¯èƒ½ç ´åç±»å°è£…æ€§ï¼ˆå¦‚ä»£ç† final æ–¹æ³•éœ€ç‰¹æ®Šå¤„ç†ï¼‰ã€‚")])])])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-aopçš„é€šçŸ¥ç±»å‹æœ‰å“ªäº›"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-aopçš„é€šçŸ¥ç±»å‹æœ‰å“ªäº›"}},[t._v("#")]),t._v(" ğŸ¯ Spring AOPçš„é€šçŸ¥ç±»å‹æœ‰å“ªäº›ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring AOPæä¾›äº†äº”ç§é€šçŸ¥ç±»å‹ï¼Œåˆ†åˆ«åœ¨æ–¹æ³•æ‰§è¡Œçš„ä¸åŒæ—¶æœºç”Ÿæ•ˆï¼š')]),t._v(" "),a("p",[a("strong",[t._v("é€šçŸ¥ç±»å‹è¯¦è§£")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. @Before å‰ç½®é€šçŸ¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œ")]),t._v(" "),a("li",[t._v("ä¸èƒ½é˜»æ­¢ç›®æ ‡æ–¹æ³•æ‰§è¡Œ")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºå‚æ•°æ ¡éªŒã€æƒé™æ£€æŸ¥")])]),t._v(" "),a("p",[a("strong",[t._v("2. @AfterReturning è¿”å›åé€šçŸ¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åœ¨ç›®æ ‡æ–¹æ³•æ­£å¸¸è¿”å›åæ‰§è¡Œ")]),t._v(" "),a("li",[t._v("å¯ä»¥è®¿é—®æ–¹æ³•è¿”å›å€¼")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºç»“æœå¤„ç†ã€ç¼“å­˜æ›´æ–°")])]),t._v(" "),a("p",[a("strong",[t._v("3. @AfterThrowing å¼‚å¸¸é€šçŸ¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œ")]),t._v(" "),a("li",[t._v("å¯ä»¥è®¿é—®å¼‚å¸¸ä¿¡æ¯")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºå¼‚å¸¸å¤„ç†ã€é”™è¯¯è®°å½•")])]),t._v(" "),a("p",[a("strong",[t._v("4. @After æœ€ç»ˆé€šçŸ¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ— è®ºæ–¹æ³•æ­£å¸¸è¿˜æ˜¯å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ")]),t._v(" "),a("li",[t._v("ç±»ä¼¼finallyå—çš„ä½œç”¨")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºèµ„æºæ¸…ç†")])]),t._v(" "),a("p",[a("strong",[t._v("5. @Around ç¯ç»•é€šçŸ¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŒ…å›´ç›®æ ‡æ–¹æ³•æ‰§è¡Œ")]),t._v(" "),a("li",[t._v("åŠŸèƒ½æœ€å¼ºå¤§ï¼Œå¯æ§åˆ¶æ˜¯å¦æ‰§è¡Œç›®æ ‡æ–¹æ³•")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºæ€§èƒ½ç›‘æ§ã€äº‹åŠ¡æ§åˆ¶")])]),t._v(" "),a("p",[a("strong",[t._v("æ‰§è¡Œé¡ºåº")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ­£å¸¸æµç¨‹ï¼š@Aroundå‰ â†’ @Before â†’ ç›®æ ‡æ–¹æ³• â†’ @AfterReturning â†’ @After â†’ @Aroundå")]),t._v(" "),a("li",[t._v('å¼‚å¸¸æµç¨‹ï¼š@Aroundå‰ â†’ @Before â†’ ç›®æ ‡æ–¹æ³• â†’ @AfterThrowing â†’ @After â†’ @Aroundå"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Aspect")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AdviceTypeDemo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"execution(* com.example.service.*.*(..))"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("serviceLayer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Before")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"serviceLayer()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeAdvice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JoinPoint")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1. å‰ç½®é€šçŸ¥ï¼šæ–¹æ³•æ‰§è¡Œå‰"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@AfterReturning")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pointcut "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"serviceLayer()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" returning "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterReturningAdvice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JoinPoint")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2. è¿”å›åé€šçŸ¥ï¼šæ–¹æ³•æ­£å¸¸è¿”å›ï¼Œç»“æœ="')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@AfterThrowing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pointcut "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"serviceLayer()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" throwing "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ex"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterThrowingAdvice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JoinPoint")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" ex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3. å¼‚å¸¸é€šçŸ¥ï¼šæ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œå¼‚å¸¸="')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" ex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@After")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"serviceLayer()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterAdvice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JoinPoint")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4. æœ€ç»ˆé€šçŸ¥ï¼šæ— è®ºæ­£å¸¸è¿˜æ˜¯å¼‚å¸¸éƒ½æ‰§è¡Œ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Around")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"serviceLayer()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("aroundAdvice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProceedingJoinPoint")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5. ç¯ç»•é€šçŸ¥ï¼šæ–¹æ³•æ‰§è¡Œå‰"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" joinPoint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("proceed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨ç›®æ ‡æ–¹æ³•")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6. ç¯ç»•é€šçŸ¥ï¼šæ–¹æ³•æ‰§è¡Œå"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7. ç¯ç»•é€šçŸ¥ï¼šæ•è·å¼‚å¸¸"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-åˆ‡ç‚¹è¡¨è¾¾å¼æ€ä¹ˆå†™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-åˆ‡ç‚¹è¡¨è¾¾å¼æ€ä¹ˆå†™"}},[t._v("#")]),t._v(" ğŸ¯ åˆ‡ç‚¹è¡¨è¾¾å¼æ€ä¹ˆå†™ï¼Ÿ")]),t._v(" "),a("p",[t._v('"åˆ‡ç‚¹è¡¨è¾¾å¼ä½¿ç”¨AspectJè¯­æ³•ï¼Œç”¨äºç²¾ç¡®åŒ¹é…è¿æ¥ç‚¹ï¼ŒSpring AOPä¸»è¦æ”¯æŒexecutionè¡¨è¾¾å¼ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("executionè¡¨è¾¾å¼è¯­æ³•")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("execution([ä¿®é¥°ç¬¦] è¿”å›å€¼ç±»å‹ [ç±»å].æ–¹æ³•å(å‚æ•°åˆ—è¡¨) [throws å¼‚å¸¸])\n")])])]),a("p",[a("strong",[t._v("é€šé…ç¬¦è¯´æ˜")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("*")]),t._v("ï¼šåŒ¹é…ä»»æ„å­—ç¬¦ï¼ˆé™¤äº†åŒ…åˆ†éš”ç¬¦.ï¼‰")]),t._v(" "),a("li",[a("code",[t._v("..")]),t._v("ï¼šåŒ¹é…ä»»æ„æ•°é‡çš„å‚æ•°æˆ–åŒ…å±‚çº§")]),t._v(" "),a("li",[a("code",[t._v("+")]),t._v("ï¼šåŒ¹é…å­ç±»å‹")])]),t._v(" "),a("p",[a("strong",[t._v("å¸¸ç”¨è¡¨è¾¾å¼æ¨¡å¼")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. æ–¹æ³•çº§åˆ«åŒ¹é…")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("execution(* com.example.service.UserService.findById(..))")])]),t._v(" "),a("li",[t._v("åŒ¹é…UserServiceç±»çš„findByIdæ–¹æ³•")])]),t._v(" "),a("p",[a("strong",[t._v("2. ç±»çº§åˆ«åŒ¹é…")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("execution(* com.example.service.UserService.*(..))")])]),t._v(" "),a("li",[t._v("åŒ¹é…UserServiceç±»çš„æ‰€æœ‰æ–¹æ³•")])]),t._v(" "),a("p",[a("strong",[t._v("3. åŒ…çº§åˆ«åŒ¹é…")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("execution(* com.example.service.*.*(..))")])]),t._v(" "),a("li",[t._v("åŒ¹é…serviceåŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•")])]),t._v(" "),a("p",[a("strong",[t._v("4. é€’å½’åŒ…åŒ¹é…")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("execution(* com.example.service..*.*(..))")])]),t._v(" "),a("li",[t._v("åŒ¹é…serviceåŒ…åŠå­åŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•")])]),t._v(" "),a("p",[a("strong",[t._v("å…¶ä»–åˆ‡ç‚¹æŒ‡ç¤ºç¬¦")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("@annotation")]),t._v("ï¼šåŒ¹é…æ ‡æ³¨äº†æŒ‡å®šæ³¨è§£çš„æ–¹æ³•")]),t._v(" "),a("li",[a("code",[t._v("@within")]),t._v("ï¼šåŒ¹é…æ ‡æ³¨äº†æŒ‡å®šæ³¨è§£çš„ç±»")]),t._v(" "),a("li",[a("code",[t._v("args")]),t._v("ï¼šåŒ¹é…å‚æ•°ç±»å‹")]),t._v(" "),a("li",[a("code",[t._v("target")]),t._v("ï¼šåŒ¹é…ç›®æ ‡å¯¹è±¡ç±»å‹")]),t._v(" "),a("li",[a("code",[t._v("this")]),t._v('ï¼šåŒ¹é…ä»£ç†å¯¹è±¡ç±»å‹"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Aspect")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PointcutExpressionDemo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒ¹é…æ‰€æœ‰publicæ–¹æ³•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"execution(public * *(..))"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("publicMethods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒ¹é…Serviceå±‚æ‰€æœ‰æ–¹æ³•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"execution(* com.example.service.*.*(..))"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("serviceLayer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒ¹é…è¿”å›å€¼ä¸ºStringçš„æ–¹æ³•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"execution(String com.example..*.*(..))"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringMethods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒ¹é…å•ä¸ªå‚æ•°ä¸ºStringçš„æ–¹æ³•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"execution(* com.example..*.*(String))"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringParameterMethods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒ¹é…ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºStringçš„æ–¹æ³•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"execution(* com.example..*.*(String,..))"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("firstStringParameterMethods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒ¹é…æ ‡æ³¨äº†@Transactionalçš„æ–¹æ³•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@annotation(org.springframework.transaction.annotation.Transactional)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transactionalMethods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŒ¹é…Controllerç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@within(org.springframework.stereotype.Controller)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("controllerMethods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„åˆåˆ‡ç‚¹è¡¨è¾¾å¼")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Pointcut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"serviceLayer() && !stringMethods()"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("serviceLayerExceptString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Before")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"publicMethods() && args(username)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforePublicMethodWithUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è°ƒç”¨publicæ–¹æ³•ï¼Œç”¨æˆ·åå‚æ•°: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰æ³¨è§£ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Target")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ElementType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("METHOD")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Retention")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RetentionPolicy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUNTIME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Log")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æŸ¥è¯¢ç”¨æˆ·"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-aop-and-aspectj-aop-æœ‰ä»€ä¹ˆåŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-aop-and-aspectj-aop-æœ‰ä»€ä¹ˆåŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ Spring AOP and AspectJ AOP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[t._v("Spring AOP åŸºäºåŠ¨æ€ä»£ç†æ–¹å¼å®ç°ï¼ŒAspectJ åŸºäºé™æ€ä»£ç†æ–¹å¼å®ç°ã€‚")]),t._v(" "),a("li",[t._v("Spring AOP ä»…æ”¯æŒæ–¹æ³•çº§åˆ«çš„ PointCutï¼›æä¾›äº†å®Œå…¨çš„ AOP æ”¯æŒï¼Œå®ƒè¿˜æ”¯æŒå±æ€§çº§åˆ«çš„ PointCutã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-ä½ æœ‰æ²¡æœ‰ç”¨è¿‡springçš„aop-æ˜¯ç”¨æ¥å¹²å˜›çš„-å¤§æ¦‚ä¼šæ€ä¹ˆä½¿ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä½ æœ‰æ²¡æœ‰ç”¨è¿‡springçš„aop-æ˜¯ç”¨æ¥å¹²å˜›çš„-å¤§æ¦‚ä¼šæ€ä¹ˆä½¿ç”¨"}},[t._v("#")]),t._v(" ğŸ¯ ä½ æœ‰æ²¡æœ‰â½¤è¿‡Springçš„AOP? æ˜¯â½¤æ¥â¼²å˜›çš„? â¼¤æ¦‚ä¼šæ€ä¹ˆä½¿â½¤ï¼Ÿ")]),t._v(" "),a("p",[t._v("Spring AOP ä¸»è¦ç”¨äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("æ—¥å¿—è®°å½•")]),t._v("ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰åè‡ªåŠ¨è®°å½•æ—¥å¿—ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æ€§èƒ½ç›‘æ§")]),t._v("ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰åè®°å½•æ—¶é—´ï¼Œç›‘æ§æ€§èƒ½ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("äº‹åŠ¡ç®¡ç†")]),t._v("ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰åè‡ªåŠ¨ç®¡ç†äº‹åŠ¡ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å®‰å…¨æ£€æŸ¥")]),t._v("ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰æ£€æŸ¥ç”¨æˆ·æƒé™ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ç¼“å­˜")]),t._v("ï¼šåœ¨æ–¹æ³•æ‰§è¡Œåç¼“å­˜ç»“æœä»¥æé«˜æ€§èƒ½ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å¼‚å¸¸å¤„ç†")]),t._v("ï¼šåœ¨æ–¹æ³•æ‰§è¡Œæ—¶ç»Ÿä¸€å¤„ç†å¼‚å¸¸ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨çš„åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨çš„åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨çš„åŒºåˆ«ï¼Ÿ")]),t._v(" "),a("p",[a("strong",[t._v("è¿‡æ»¤å™¨ï¼ˆFilterï¼‰")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ä½œç”¨ï¼šè¿‡æ»¤å™¨ä¸»è¦ç”¨äºå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚å®ƒå¯ä»¥åœ¨è¯·æ±‚åˆ°è¾¾ Servlet ä¹‹å‰å’Œå“åº”è¿”å›å®¢æˆ·ç«¯ä¹‹å‰å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œä¿®æ”¹ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("ä½¿ç”¨åœºæ™¯")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("è¯·æ±‚å’Œå“åº”çš„ç¼–ç è½¬æ¢")]),t._v("ï¼šä¾‹å¦‚ï¼Œå°†æ‰€æœ‰è¯·æ±‚å’Œå“åº”çš„ç¼–ç è®¾ç½®ä¸º UTF-8ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æƒé™æ£€æŸ¥")]),t._v("ï¼šä¾‹å¦‚ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•ï¼Œå¦‚æœæ²¡æœ‰ç™»å½•ï¼Œåˆ™é‡å®šå‘åˆ°ç™»å½•é¡µé¢ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æ—¥å¿—è®°å½•")]),t._v("ï¼šè®°å½•æ¯ä¸ªè¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("è¿‡æ»¤éæ³•è¯·æ±‚")]),t._v("ï¼šä¾‹å¦‚ï¼Œè¿‡æ»¤æ‰ä¸€äº›æ¶æ„çš„è¯·æ±‚ã€‚")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å®ç°æ–¹å¼")])]),t._v(" "),a("p",[t._v("è¿‡æ»¤å™¨æ˜¯åŸºäº Servlet API çš„ï¼Œé€šå¸¸éœ€è¦å®ç° "),a("code",[t._v("javax.servlet.Filter")]),t._v(" æ¥å£ï¼Œå¹¶åœ¨ web.xml æ–‡ä»¶ä¸­é…ç½®æˆ–ä½¿ç”¨æ³¨è§£è¿›è¡Œé…ç½®ã€‚")])])]),t._v(" "),a("p",[a("strong",[t._v("æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("ä½œç”¨")]),t._v("ï¼šæ‹¦æˆªå™¨ç”¨äºåœ¨è¯·æ±‚è¿›å…¥æ§åˆ¶å™¨ï¼ˆControllerï¼‰ä¹‹å‰å’Œç¦»å¼€æ§åˆ¶å™¨ä¹‹åè¿›è¡Œå¤„ç†ã€‚å®ƒä¸»è¦ç”¨äºå¤„ç†æ§åˆ¶å™¨å±‚é¢çš„é€»è¾‘ï¼Œå¦‚æ–¹æ³•è°ƒç”¨ä¹‹å‰çš„éªŒè¯ã€æ–¹æ³•è°ƒç”¨ä¹‹åçš„æ—¥å¿—è®°å½•ç­‰ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("ä½¿ç”¨åœºæ™¯")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("æƒé™éªŒè¯")]),t._v("ï¼šä¾‹å¦‚ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å…·æœ‰è®¿é—®æŸä¸ªæ§åˆ¶å™¨æ–¹æ³•çš„æƒé™ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æ—¥å¿—è®°å½•")]),t._v("ï¼šè®°å½•æ¯ä¸ªæ–¹æ³•è°ƒç”¨çš„è¯¦ç»†ä¿¡æ¯ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("äº‹åŠ¡ç®¡ç†")]),t._v("ï¼šåœ¨æ–¹æ³•è°ƒç”¨ä¹‹å‰å¼€å¯äº‹åŠ¡ï¼Œæ–¹æ³•è°ƒç”¨ä¹‹åæäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æ•°æ®é¢„å¤„ç†")]),t._v("ï¼šåœ¨æ–¹æ³•è°ƒç”¨ä¹‹å‰å‡†å¤‡æ•°æ®ï¼Œåœ¨æ–¹æ³•è°ƒç”¨ä¹‹åå¤„ç†è¿”å›çš„æ•°æ®ã€‚")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å®ç°æ–¹å¼")])]),t._v(" "),a("p",[t._v("æ‹¦æˆªå™¨é€šå¸¸ä¸æ¡†æ¶ï¼ˆå¦‚ Spring MVCï¼‰é›†æˆï¼Œä½¿ç”¨æ¡†æ¶æä¾›çš„æ¥å£è¿›è¡Œé…ç½®å’Œå®ç°ã€‚ä¾‹å¦‚ï¼Œåœ¨ Spring MVC ä¸­ï¼Œæ‹¦æˆªå™¨éœ€è¦å®ç° "),a("code",[t._v("HandlerInterceptor")]),t._v(" æ¥å£ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶æˆ–æ³¨è§£ä¸­è¿›è¡Œé…ç½®ã€‚")])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("ç‰¹ç‚¹")]),t._v(" "),a("th",[t._v("è¿‡æ»¤å™¨ï¼ˆFilterï¼‰")]),t._v(" "),a("th",[t._v("æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("ä½œç”¨èŒƒå›´")]),t._v(" "),a("td",[t._v("å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†")]),t._v(" "),a("td",[t._v("å¯¹æ§åˆ¶å™¨æ–¹æ³•çš„è°ƒç”¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†")])]),t._v(" "),a("tr",[a("td",[t._v("ä½¿ç”¨åœºæ™¯")]),t._v(" "),a("td",[t._v("è¯·æ±‚å’Œå“åº”çš„ç¼–ç è½¬æ¢ã€æƒé™æ£€æŸ¥ã€æ—¥å¿—è®°å½•ç­‰")]),t._v(" "),a("td",[t._v("æƒé™éªŒè¯ã€æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ç­‰")])]),t._v(" "),a("tr",[a("td",[t._v("å®ç°æ–¹å¼")]),t._v(" "),a("td",[t._v("å®ç° "),a("code",[t._v("javax.servlet.Filter")]),t._v(" æ¥å£")]),t._v(" "),a("td",[t._v("å®ç°æ¡†æ¶æä¾›çš„æ‹¦æˆªå™¨æ¥å£ï¼ˆå¦‚ Spring çš„ "),a("code",[t._v("HandlerInterceptor")]),t._v("ï¼‰")])]),t._v(" "),a("tr",[a("td",[t._v("é…ç½®æ–¹å¼")]),t._v(" "),a("td",[t._v("é…ç½®åœ¨ web.xml æ–‡ä»¶ä¸­æˆ–ä½¿ç”¨æ³¨è§£")]),t._v(" "),a("td",[t._v("é…ç½®åœ¨æ¡†æ¶çš„é…ç½®æ–‡ä»¶æˆ–ä½¿ç”¨æ³¨è§£")])]),t._v(" "),a("tr",[a("td",[t._v("æ‰§è¡Œæ—¶æœº")]),t._v(" "),a("td",[t._v("åœ¨è¯·æ±‚åˆ°è¾¾ Servlet ä¹‹å‰å’Œå“åº”è¿”å›å®¢æˆ·ç«¯ä¹‹å‰")]),t._v(" "),a("td",[t._v("åœ¨æ§åˆ¶å™¨æ–¹æ³•è°ƒç”¨ä¹‹å‰å’Œä¹‹å")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸŒ-ä¸‰ã€spring-mvcæ¶æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ-ä¸‰ã€spring-mvcæ¶æ„"}},[t._v("#")]),t._v(" ğŸŒ ä¸‰ã€Spring MVCæ¶æ„")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç†å¿µ")]),t._v("ï¼šåŸºäºMVCè®¾è®¡æ¨¡å¼çš„Webæ¡†æ¶ï¼Œæä¾›çµæ´»çš„è¯·æ±‚å¤„ç†å’Œè§†å›¾æ¸²æŸ“æœºåˆ¶ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-mvc-æ¡†æ¶æœ‰ä»€ä¹ˆç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-mvc-æ¡†æ¶æœ‰ä»€ä¹ˆç”¨"}},[t._v("#")]),t._v(" ğŸ¯ Spring MVC æ¡†æ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿ")]),t._v(" "),a("p",[t._v("Spring Web MVC æ¡†æ¶æä¾› "),a("strong",[t._v("æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨")]),t._v(" æ¶æ„å’Œéšæ—¶å¯ç”¨çš„ç»„ä»¶ï¼Œç”¨äºå¼€å‘çµæ´»ä¸”æ¾æ•£è€¦åˆçš„ Web åº”ç”¨ç¨‹åºã€‚ MVC æ¨¡å¼æœ‰åŠ©äºåˆ†ç¦»åº”ç”¨ç¨‹åºçš„ä¸åŒæ–¹é¢ï¼Œå¦‚è¾“å…¥é€»è¾‘ï¼Œä¸šåŠ¡é€»è¾‘å’Œ UI é€»è¾‘ï¼ŒåŒæ—¶åœ¨æ‰€æœ‰è¿™äº›å…ƒç´ ä¹‹é—´æä¾›æ¾æ•£è€¦åˆã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-mvcçš„ä¼˜ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-mvcçš„ä¼˜ç‚¹"}},[t._v("#")]),t._v(" ğŸ¯ Spring MVCçš„ä¼˜ç‚¹")]),t._v(" "),a("ul",[a("li",[t._v("å¯ä»¥æ”¯æŒå„ç§è§†å›¾æŠ€æœ¯ï¼Œè€Œä¸ä»…ä»…å±€é™äºJSP")]),t._v(" "),a("li",[t._v("ä¸Springæ¡†æ¶é›†æˆï¼ˆå¦‚IoCå®¹å™¨ã€AOPç­‰ï¼‰")]),t._v(" "),a("li",[t._v("æ¸…æ™°çš„è§’è‰²åˆ†é…ï¼šå‰ç«¯æ§åˆ¶å™¨(dispatcherServlet) ï¼Œè¯·æ±‚åˆ°å¤„ç†å™¨æ˜ å°„ï¼ˆhandlerMapping)ï¼Œå¤„ç†å™¨é€‚é…å™¨ï¼ˆHandlerAdapter)ï¼Œ è§†å›¾è§£æå™¨ï¼ˆViewResolverï¼‰")]),t._v(" "),a("li",[t._v("æ”¯æŒå„ç§è¯·æ±‚èµ„æºçš„æ˜ å°„ç­–ç•¥")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-mvc-çš„æ•´ä½“æ¶æ„å’Œæ ¸å¿ƒç»„ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-mvc-çš„æ•´ä½“æ¶æ„å’Œæ ¸å¿ƒç»„ä»¶"}},[t._v("#")]),t._v(" ğŸ¯ Spring MVC çš„æ•´ä½“æ¶æ„å’Œæ ¸å¿ƒç»„ä»¶ï¼Ÿ")]),t._v(" "),a("blockquote",[a("p",[t._v("Spring MVC çš„æ¶æ„ä»¥ "),a("code",[t._v("DispatcherServlet")]),t._v(" ä¸ºæ ¸å¿ƒï¼Œè´Ÿè´£è¯·æ±‚çš„è°ƒåº¦å’Œåˆ†å‘ï¼Œé€šè¿‡ "),a("code",[t._v("HandlerMapping")]),t._v(" æ‰¾åˆ°å…·ä½“çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œåè¿”å› "),a("code",[t._v("ModelAndView")]),t._v("ï¼Œå¹¶é€šè¿‡ "),a("code",[t._v("ViewResolver")]),t._v(" æ¸²æŸ“è§†å›¾ã€‚è¿™æ ·çš„æ¶æ„ä½¿å¾— Web åº”ç”¨ä¸­çš„è¯·æ±‚å¤„ç†è¿‡ç¨‹æ›´åŠ æ¸…æ™°å’Œæ¨¡å—åŒ–ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("Spring MVC")]),t._v(" æ˜¯ä¸€ä¸ªåŸºäº Servlet çš„ Web æ¡†æ¶ï¼Œå®ƒéµå¾ªäº† "),a("strong",[t._v("MVCï¼ˆModel-View-Controllerï¼‰è®¾è®¡æ¨¡å¼")]),t._v("ï¼Œå°†åº”ç”¨ç¨‹åºçš„ä¸åŒåŠŸèƒ½åˆ†ç¦»ï¼Œå¢å¼ºäº†åº”ç”¨çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œè§£è€¦æ€§ã€‚Spring MVC æ˜¯ Spring Framework ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†ä¸€ä¸ªçµæ´»çš„è¯·æ±‚å¤„ç†æµç¨‹å’Œ Web å±‚çš„è§£å†³æ–¹æ¡ˆã€‚")]),t._v(" "),a("p",[a("strong",[t._v("Spring MVC çš„æ•´ä½“æ¶æ„")])]),t._v(" "),a("p",[t._v("Spring MVC æ¶æ„æ˜¯åŸºäºè¯·æ±‚é©±åŠ¨çš„æ¨¡å¼ï¼Œå¤„ç†è¯·æ±‚çš„è¿‡ç¨‹åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("DispatcherServletï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("Spring MVC çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œæ‰€æœ‰çš„ HTTP è¯·æ±‚éƒ½é¦–å…ˆä¼šè¿›å…¥ "),a("code",[t._v("DispatcherServlet")]),t._v("ã€‚å®ƒä½œä¸ºå‰ç«¯æ§åˆ¶å™¨ï¼ˆFront Controllerï¼‰ï¼Œæ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚å¹¶å°†è¯·æ±‚åˆ†å‘ç»™åˆé€‚çš„å¤„ç†å™¨ã€‚")]),t._v(" "),a("li",[a("code",[t._v("DispatcherServlet")]),t._v(" ä» web.xml ä¸­è¿›è¡Œé…ç½®ï¼Œé€šå¸¸æ˜¯ Web åº”ç”¨çš„å…¥å£ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("HandlerMappingï¼ˆå¤„ç†å™¨æ˜ å°„å™¨ï¼‰")]),t._v("ï¼š\n"),a("ul",[a("li",[a("code",[t._v("HandlerMapping")]),t._v(" çš„ä½œç”¨æ˜¯æ ¹æ®è¯·æ±‚çš„ URL æ‰¾åˆ°ç›¸åº”çš„å¤„ç†å™¨ï¼ˆControllerï¼‰ã€‚")]),t._v(" "),a("li",[t._v("å®ƒä¼šå°† URL æ˜ å°„åˆ°ç›¸åº”çš„å¤„ç†æ–¹æ³•ä¸Šï¼Œ"),a("code",[t._v("HandlerMapping")]),t._v(" é€šè¿‡æŸ¥æ‰¾é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„æ˜ å°„å…³ç³»æ¥å†³å®šå“ªä¸ªæ§åˆ¶å™¨æ–¹æ³•åº”è¯¥å¤„ç†å½“å‰è¯·æ±‚ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("Controllerï¼ˆæ§åˆ¶å™¨ï¼‰")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("æ§åˆ¶å™¨æ˜¯ä¸šåŠ¡é€»è¾‘çš„æ ¸å¿ƒï¼Œè´Ÿè´£å¤„ç†å…·ä½“çš„è¯·æ±‚å¹¶è¿”å›ä¸€ä¸ªè§†å›¾ã€‚")]),t._v(" "),a("li",[a("code",[t._v("@Controller")]),t._v(" æ³¨è§£å®šä¹‰äº†ä¸€ä¸ªæ§åˆ¶å™¨ç±»ï¼Œè€Œæ–¹æ³•ä¸Šé€šå¸¸ä½¿ç”¨ "),a("code",[t._v("@RequestMapping")]),t._v(" æˆ–è€…æ›´ç»†ç²’åº¦çš„æ³¨è§£ï¼ˆå¦‚ "),a("code",[t._v("@GetMapping")]),t._v("ã€"),a("code",[t._v("@PostMapping")]),t._v("ï¼‰æ¥æ˜ å°„è¯·æ±‚ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("HandlerAdapterï¼ˆå¤„ç†å™¨é€‚é…å™¨ï¼‰")]),t._v("ï¼š\n"),a("ul",[a("li",[a("code",[t._v("HandlerAdapter")]),t._v(" çš„ä½œç”¨æ˜¯æ ¹æ® "),a("code",[t._v("HandlerMapping")]),t._v(" è¿”å›çš„æ§åˆ¶å™¨å’Œæ–¹æ³•ï¼Œé€‰æ‹©åˆé€‚çš„é€‚é…å™¨æ¥è°ƒç”¨ç›¸åº”çš„ä¸šåŠ¡é€»è¾‘ã€‚")]),t._v(" "),a("li",[t._v("å®ƒæ˜¯ä¸ºäº†æ”¯æŒä¸åŒç±»å‹çš„æ§åˆ¶å™¨è€Œè®¾è®¡çš„ï¼Œé€šå¸¸ä¼šé€‰æ‹©å…·ä½“çš„é€‚é…å™¨ï¼Œå¦‚ "),a("code",[t._v("HttpRequestHandlerAdapter")]),t._v(" æˆ– "),a("code",[t._v("AnnotationMethodHandlerAdapter")]),t._v("ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("ViewResolverï¼ˆè§†å›¾è§£æå™¨ï¼‰")]),t._v("ï¼š\n"),a("ul",[a("li",[a("code",[t._v("ViewResolver")]),t._v(" è´Ÿè´£æ ¹æ®æ§åˆ¶å™¨è¿”å›çš„è§†å›¾åï¼ˆä¾‹å¦‚ JSP æ–‡ä»¶åï¼‰è§£æå‡ºå…·ä½“çš„è§†å›¾å¯¹è±¡ï¼ˆå¦‚ "),a("code",[t._v("InternalResourceViewResolver")]),t._v("ï¼‰ã€‚")]),t._v(" "),a("li",[t._v("å®ƒæ ¹æ®è§†å›¾åç§°å°†å…¶è§£æä¸ºä¸€ä¸ªå®é™…çš„è§†å›¾ï¼Œæ¯”å¦‚ JSP æˆ– Thymeleaf æ¨¡æ¿ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("ModelAndViewï¼ˆæ¨¡å‹ä¸è§†å›¾ï¼‰")]),t._v("ï¼š\n"),a("ul",[a("li",[a("code",[t._v("ModelAndView")]),t._v(" æ˜¯æ§åˆ¶å™¨æ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†æ¨¡å‹æ•°æ®å’Œè§†å›¾åç§°ã€‚")]),t._v(" "),a("li",[a("code",[t._v("Model")]),t._v(" å­˜å‚¨æ§åˆ¶å™¨æ‰§è¡Œåçš„æ•°æ®ï¼Œ"),a("code",[t._v("View")]),t._v(" åˆ™æŒ‡å‘å…·ä½“çš„è§†å›¾æ¨¡æ¿ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("Viewï¼ˆè§†å›¾ï¼‰")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("è§†å›¾ç»„ä»¶è´Ÿè´£å°†æ¨¡å‹æ•°æ®æ¸²æŸ“æˆç”¨æˆ·å¯ä»¥æŸ¥çœ‹çš„é¡µé¢ï¼Œå¸¸è§çš„è§†å›¾æŠ€æœ¯åŒ…æ‹¬ JSPã€Thymeleafã€FreeMarker ç­‰ã€‚")])])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-mvc-çš„è¿è¡Œæµç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-mvc-çš„è¿è¡Œæµç¨‹"}},[t._v("#")]),t._v(" ğŸ¯ Spring MVC çš„è¿è¡Œæµç¨‹?")]),t._v(" "),a("p",[t._v("åœ¨æ•´ä¸ª Spring MVC æ¡†æ¶ä¸­ï¼Œ DispatcherServlet å¤„äºæ ¸å¿ƒä½ç½®ï¼Œè´Ÿè´£åè°ƒå’Œç»„ç»‡ä¸åŒç»„ä»¶ä»¥å®Œæˆè¯·æ±‚å¤„ç†å¹¶è¿”å›å“åº”çš„å·¥ä½œ")]),t._v(" "),a("p",[t._v("SpringMVC å¤„ç†è¯·æ±‚è¿‡ç¨‹ï¼š")]),t._v(" "),a("blockquote",[a("ol",[a("li",[a("strong",[t._v("DispatcherServlet")]),t._v("æ¥æ”¶è¯·æ±‚ï¼Œå§”æ‰˜ç»™ HandlerMappingï¼›")]),t._v(" "),a("li",[t._v("HandlerMapping åŒ¹é…å¤„ç†å™¨ï¼ˆControllerï¼‰ï¼Œè¿”å› HandlerExecutionChainï¼›")]),t._v(" "),a("li",[t._v("è°ƒç”¨ HandlerAdapter æ‰§è¡Œ Controller æ–¹æ³•ï¼Œè¿”å› ModelAndViewï¼›")]),t._v(" "),a("li",[t._v("ViewResolver è§£æè§†å›¾ï¼Œæ¸²æŸ“å“åº”ç»“æœã€‚")])])]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("è¯·æ±‚æ¥æ”¶ä¸åˆ†å‘")]),t._v(" "),a("ul",[a("li",[t._v("å…¥å£ï¼šç”¨æˆ·é€šè¿‡æµè§ˆå™¨å‘é€ HTTP è¯·æ±‚ï¼Œæ‰€æœ‰è¯·æ±‚é¦–å…ˆåˆ°è¾¾ "),a("code",[t._v("DispatcherServlet")]),t._v("ï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰ï¼Œå®ƒæ˜¯æ•´ä¸ªæµç¨‹çš„ç»Ÿä¸€å…¥å£ã€‚")]),t._v(" "),a("li",[t._v("æ ¸å¿ƒä½œç”¨ï¼š"),a("code",[t._v("DispatcherServlet")]),t._v(" è´Ÿè´£æ¥æ”¶è¯·æ±‚å¹¶åè°ƒåç»­å¤„ç†æµç¨‹ï¼Œç±»ä¼¼â€œè°ƒåº¦ä¸­å¿ƒâ€ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("å¤„ç†å™¨æ˜ å°„ï¼ˆHandlerMappingï¼‰")]),t._v(" "),a("ul",[a("li",[t._v("æŸ¥æ‰¾å¤„ç†å™¨ï¼š"),a("code",[t._v("DispatcherServlet")]),t._v(" è°ƒç”¨ "),a("code",[t._v("HandlerMapping")]),t._v(" ç»„ä»¶ï¼Œæ ¹æ®è¯·æ±‚çš„ URL è·¯å¾„åŒ¹é…å¯¹åº”çš„å¤„ç†å™¨ï¼ˆController æˆ–å…¶æ–¹æ³•ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¸¦æœ‰ "),a("code",[t._v("@RequestMapping")]),t._v("æ³¨è§£çš„æ–¹æ³•ä¼šè¢«è¯†åˆ«ä¸º Handlerã€‚")]),t._v(" "),a("li",[t._v("è¿”å›æ‰§è¡Œé“¾ï¼š"),a("code",[t._v("HandlerMapping")]),t._v(" è¿”å› "),a("code",[t._v("HandlerExecutionChain")]),t._v("ï¼ŒåŒ…å«ç›®æ ‡å¤„ç†å™¨åŠå…³è”çš„æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("å¤„ç†å™¨é€‚é…ï¼ˆHandlerAdapterï¼‰")]),t._v(" "),a("ul",[a("li",[t._v("é€‚é…è°ƒç”¨ï¼š"),a("code",[t._v("DispatcherServlet")]),t._v(" é€šè¿‡ "),a("code",[t._v("HandlerAdapter")]),t._v(" è°ƒç”¨å¤„ç†å™¨æ–¹æ³•ã€‚HandlerAdapter è´Ÿè´£å°† Servlet çš„è¯·æ±‚å‚æ•°è½¬æ¢ä¸ºå¤„ç†å™¨æ–¹æ³•çš„è¾“å…¥ï¼Œå¹¶æ‰§è¡Œå…·ä½“ä¸šåŠ¡é€»è¾‘ã€‚")]),t._v(" "),a("li",[t._v("è¿”å›å€¼å¤„ç†ï¼šå¤„ç†å™¨è¿”å› "),a("code",[t._v("ModelAndView")]),t._v(" å¯¹è±¡ï¼ŒåŒ…å«æ¨¡å‹æ•°æ®ï¼ˆModelï¼‰å’Œè§†å›¾åç§°ï¼ˆViewï¼‰ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("è§†å›¾è§£æä¸æ¸²æŸ“")]),t._v(" "),a("ul",[a("li",[t._v("è§†å›¾è§£æå™¨ï¼š"),a("code",[t._v("DispatcherServlet")]),t._v(" å°†é€»è¾‘è§†å›¾åä¼ é€’ç»™ "),a("code",[t._v("ViewResolver")]),t._v("ï¼Œè§£æä¸ºå…·ä½“çš„è§†å›¾å¯¹è±¡ï¼ˆå¦‚ JSPã€Thymeleaf æ¨¡æ¿ï¼‰ã€‚")]),t._v(" "),a("li",[t._v("æ•°æ®æ¸²æŸ“ï¼šè§†å›¾å¯¹è±¡å°†æ¨¡å‹æ•°æ®å¡«å……åˆ°è¯·æ±‚åŸŸï¼Œç”Ÿæˆå“åº”å†…å®¹ï¼ˆå¦‚ HTMLï¼‰ï¼Œæœ€ç»ˆç”± DispatcherServlet è¿”å›å®¢æˆ·ç«¯ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("å¼‚å¸¸å¤„ç†")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å¼‚å¸¸æ•è·")]),t._v("ï¼šè‹¥å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸ï¼ŒDispatcherServlet è°ƒç”¨ "),a("strong",[t._v("HandlerExceptionResolver")]),t._v(" ç»„ä»¶å¤„ç†ï¼Œç”Ÿæˆé”™è¯¯è§†å›¾æˆ– JSON å“åº”")])])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-çš„-controller-æ˜¯å•ä¾‹çš„å—-å¤šçº¿ç¨‹æƒ…å†µä¸‹-controller-æ˜¯çº¿ç¨‹å®‰å…¨å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-çš„-controller-æ˜¯å•ä¾‹çš„å—-å¤šçº¿ç¨‹æƒ…å†µä¸‹-controller-æ˜¯çº¿ç¨‹å®‰å…¨å—"}},[t._v("#")]),t._v(" ğŸ¯ Spring çš„ Controller æ˜¯å•ä¾‹çš„å—ï¼Ÿå¤šçº¿ç¨‹æƒ…å†µä¸‹ Controller æ˜¯çº¿ç¨‹å®‰å…¨å—ï¼Ÿ")]),t._v(" "),a("p",[t._v("controlleré»˜è®¤æ˜¯å•ä¾‹çš„ï¼Œä¸è¦ä½¿ç”¨éé™æ€çš„æˆå‘˜å˜é‡ï¼Œå¦åˆ™ä¼šå‘ç”Ÿæ•°æ®é€»è¾‘æ··ä¹±ã€‚æ­£å› ä¸ºå•ä¾‹æ‰€ä»¥ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//@Scope("prototype")')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ScopeTestController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" num "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/testScope"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("testScope")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/testScope2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("testScope2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æˆ‘ä»¬é¦–å…ˆè®¿é—® "),a("code",[t._v("http://localhost:8080/testScope")]),t._v("ï¼Œå¾—åˆ°çš„ç­”æ¡ˆæ˜¯"),a("code",[t._v("1")]),t._v("ï¼›\nç„¶åæˆ‘ä»¬å†è®¿é—® "),a("code",[t._v("http://localhost:8080/testScope2")]),t._v("ï¼Œå¾—åˆ°çš„ç­”æ¡ˆæ˜¯ "),a("code",[t._v("2")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥ç»™"),a("code",[t._v("controller")]),t._v("å¢åŠ ä½œç”¨å¤šä¾‹ "),a("code",[t._v('@Scope("prototype")')])]),t._v(" "),a("p",[t._v("æˆ‘ä»¬ä¾æ—§é¦–å…ˆè®¿é—® "),a("code",[t._v("http://localhost:8080/testScope")]),t._v("ï¼Œå¾—åˆ°çš„ç­”æ¡ˆæ˜¯"),a("code",[t._v("1")]),t._v("ï¼›\nç„¶åæˆ‘ä»¬å†è®¿é—® "),a("code",[t._v("http://localhost:8080/testScope2")]),t._v("ï¼Œå¾—åˆ°çš„ç­”æ¡ˆè¿˜æ˜¯ "),a("code",[t._v("1")]),t._v("ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("å•ä¾‹æ˜¯ä¸å®‰å…¨çš„ï¼Œä¼šå¯¼è‡´å±æ€§é‡å¤ä½¿ç”¨")]),t._v("ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("è§£å†³æ–¹æ¡ˆ")])]),t._v(" "),a("ol",[a("li",[t._v("ä¸è¦åœ¨controllerä¸­å®šä¹‰æˆå‘˜å˜é‡")]),t._v(" "),a("li",[t._v("ä¸‡ä¸€å¿…é¡»è¦å®šä¹‰ä¸€ä¸ªéé™æ€æˆå‘˜å˜é‡æ—¶å€™ï¼Œåˆ™é€šè¿‡æ³¨è§£@Scope(â€œprototypeâ€)ï¼Œå°†å…¶è®¾ç½®ä¸ºå¤šä¾‹æ¨¡å¼ã€‚")]),t._v(" "),a("li",[t._v("åœ¨Controllerä¸­ä½¿ç”¨ThreadLocalå˜é‡")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-mvcçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-mvcçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ Spring MVCçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring MVCåŸºäºå‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼Œä»¥DispatcherServletä¸ºæ ¸å¿ƒåè°ƒå„ç»„ä»¶å®Œæˆè¯·æ±‚å¤„ç†ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("å®Œæ•´è¯·æ±‚å¤„ç†æµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. è¯·æ±‚æ¥æ”¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç”¨æˆ·å‘é€HTTPè¯·æ±‚åˆ°DispatcherServlet")]),t._v(" "),a("li",[t._v("DispatcherServletä½œä¸ºå‰ç«¯æ§åˆ¶å™¨æ¥æ”¶æ‰€æœ‰è¯·æ±‚")]),t._v(" "),a("li",[t._v("è¿™æ˜¯æ•´ä¸ªMVCæµç¨‹çš„ç»Ÿä¸€å…¥å£")])]),t._v(" "),a("p",[a("strong",[t._v("2. å¤„ç†å™¨æ˜ å°„")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("DispatcherServletæŸ¥è¯¢HandlerMapping")]),t._v(" "),a("li",[t._v("HandlerMappingæ ¹æ®URLæ‰¾åˆ°å¯¹åº”çš„Handler")]),t._v(" "),a("li",[t._v("è¿”å›HandlerExecutionChainï¼ˆHandler + æ‹¦æˆªå™¨é“¾ï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("3. å¤„ç†å™¨é€‚é…")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("DispatcherServleté€šè¿‡HandlerAdapterè°ƒç”¨Handler")]),t._v(" "),a("li",[t._v("HandlerAdapteré€‚é…ä¸åŒç±»å‹çš„å¤„ç†å™¨")]),t._v(" "),a("li",[t._v("æ”¯æŒ@Controllerã€Controlleræ¥å£ç­‰å¤šç§å¤„ç†å™¨")])]),t._v(" "),a("p",[a("strong",[t._v("4. ä¸šåŠ¡å¤„ç†")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("HandlerAdapterè°ƒç”¨å…·ä½“çš„Controlleræ–¹æ³•")]),t._v(" "),a("li",[t._v("Controlleræ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œè°ƒç”¨Serviceå±‚")]),t._v(" "),a("li",[t._v("è¿”å›ModelAndViewæˆ–@ResponseBodyæ•°æ®")])]),t._v(" "),a("p",[a("strong",[t._v("5. å¼‚å¸¸å¤„ç†")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å¦‚æœå¤„ç†è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸")]),t._v(" "),a("li",[t._v("HandlerExceptionResolverè¿›è¡Œå¼‚å¸¸å¤„ç†")]),t._v(" "),a("li",[t._v("è¿”å›é”™è¯¯è§†å›¾æˆ–é”™è¯¯å“åº”")])]),t._v(" "),a("p",[a("strong",[t._v("6. è§†å›¾è§£æ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ViewResolverè§£æé€»è¾‘è§†å›¾ååˆ°å…·ä½“è§†å›¾")]),t._v(" "),a("li",[t._v("åˆ›å»ºViewå¯¹è±¡ç”¨äºæ¸²æŸ“")]),t._v(" "),a("li",[t._v("å¯¹äº@ResponseBodyç›´æ¥è¿”å›ï¼Œè·³è¿‡è§†å›¾è§£æ")])]),t._v(" "),a("p",[a("strong",[t._v("7. è§†å›¾æ¸²æŸ“")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Viewæ¸²æŸ“æ¨¡å‹æ•°æ®ç”Ÿæˆå“åº”å†…å®¹")]),t._v(" "),a("li",[t._v("å°†æœ€ç»ˆå“åº”è¿”å›ç»™å®¢æˆ·ç«¯")])]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç»„ä»¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨")]),t._v(" "),a("li",[t._v("HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„å™¨")]),t._v(" "),a("li",[t._v("HandlerAdapterï¼šå¤„ç†å™¨é€‚é…å™¨")]),t._v(" "),a("li",[t._v("Controllerï¼šæ§åˆ¶å™¨")]),t._v(" "),a("li",[t._v("ViewResolverï¼šè§†å›¾è§£æå™¨")]),t._v(" "),a("li",[t._v('Viewï¼šè§†å›¾"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. æ§åˆ¶å™¨ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›è§†å›¾")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" users "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user/list"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€»è¾‘è§†å›¾å")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›JSONæ•°æ®")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseBody")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†è¡¨å•æäº¤")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ModelAttribute")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                           "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedirectAttributes")]),t._v(" redirectAttributes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        redirectAttributes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addFlashAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç”¨æˆ·åˆ›å»ºæˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redirect:/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. è‡ªå®šä¹‰HandlerMapping")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomHandlerMapping")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AbstractHandlerMapping")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHandlerInternal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequestURI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/custom/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. è‡ªå®šä¹‰HandlerAdapter")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomHandlerAdapter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HandlerAdapter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("supports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" handler "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModelAndView")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                              "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                              "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomHandler")]),t._v(" customHandler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" customHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModelAndView")]),t._v(" mv "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModelAndView")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        mv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        mv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setViewName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"custom/result"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" mv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. é…ç½®ç±»")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableWebMvc")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.example.controller"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebMvcConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebMvcConfigurer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®è§†å›¾è§£æå™¨")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InternalResourceViewResolver")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("viewResolver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InternalResourceViewResolver")]),t._v(" resolver "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InternalResourceViewResolver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        resolver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPrefix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/WEB-INF/views/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        resolver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSuffix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".jsp"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" resolver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®æ‹¦æˆªå™¨")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addInterceptors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterceptorRegistry")]),t._v(" registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addInterceptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggingInterceptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addPathPatterns")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("excludePathPatterns")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/static/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®é™æ€èµ„æº")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addResourceHandlers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceHandlerRegistry")]),t._v(" registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addResourceHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/static/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addResourceLocations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"classpath:/static/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5. æ‹¦æˆªå™¨ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggingInterceptor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HandlerInterceptor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("preHandle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                           "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                           "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¯·æ±‚å‰ç½®å¤„ç†: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequestURI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postHandle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                          "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                          "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                          "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ModelAndView")]),t._v(" modelAndView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¯·æ±‚åç½®å¤„ç†"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterCompletion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                               "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" ex"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¯·æ±‚å®Œæˆå¤„ç†"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-requestmappingæ³¨è§£æœ‰å“ªäº›å±æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-requestmappingæ³¨è§£æœ‰å“ªäº›å±æ€§"}},[t._v("#")]),t._v(" ğŸ¯ @RequestMappingæ³¨è§£æœ‰å“ªäº›å±æ€§ï¼Ÿ")]),t._v(" "),a("p",[t._v('"@RequestMappingæ˜¯Spring MVCæœ€æ ¸å¿ƒçš„æ³¨è§£ï¼Œç”¨äºæ˜ å°„HTTPè¯·æ±‚åˆ°å¤„ç†æ–¹æ³•ï¼š')]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("å±æ€§")]),t._v(" "),a("th",[t._v("ç±»å‹")]),t._v(" "),a("th",[t._v("ä½œç”¨")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("value / path")])]),t._v(" "),a("td",[a("code",[t._v("String[]")])]),t._v(" "),a("td",[t._v("æŒ‡å®šè¯·æ±‚çš„ URL è·¯å¾„ï¼ˆåˆ«åå…³ç³»ï¼Œå¸¸ç”¨ "),a("code",[t._v("value")]),t._v("ï¼‰ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("method")])]),t._v(" "),a("td",[a("code",[t._v("RequestMethod[]")])]),t._v(" "),a("td",[t._v("é™å®šè¯·æ±‚æ–¹å¼ï¼Œå¦‚ "),a("code",[t._v("GET")]),t._v("ã€"),a("code",[t._v("POST")]),t._v("ã€"),a("code",[t._v("PUT")]),t._v("ã€"),a("code",[t._v("DELETE")]),t._v(" ç­‰ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("params")])]),t._v(" "),a("td",[a("code",[t._v("String[]")])]),t._v(" "),a("td",[t._v("è¯·æ±‚å¿…é¡»åŒ…å«çš„å‚æ•°æ¡ä»¶ï¼ˆæˆ–ä¸èƒ½åŒ…å«ï¼‰ï¼Œå¦‚ "),a("code",[t._v('params="id=1"')]),t._v("ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("headers")])]),t._v(" "),a("td",[a("code",[t._v("String[]")])]),t._v(" "),a("td",[t._v("è¯·æ±‚å¿…é¡»åŒ…å«çš„ Header æ¡ä»¶ï¼Œå¦‚ "),a("code",[t._v('headers="Content-Type=application/json"')]),t._v("ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("consumes")])]),t._v(" "),a("td",[a("code",[t._v("String[]")])]),t._v(" "),a("td",[t._v("é™å®šè¯·æ±‚ä½“ï¼ˆContent-Typeï¼‰ï¼Œå¦‚ "),a("code",[t._v('consumes="application/json"')]),t._v("ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("produces")])]),t._v(" "),a("td",[a("code",[t._v("String[]")])]),t._v(" "),a("td",[t._v("é™å®šå“åº”ä½“ç±»å‹ï¼ˆAcceptï¼‰ï¼Œå¦‚ "),a("code",[t._v('produces="application/json"')]),t._v("ã€‚")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("name")])]),t._v(" "),a("td",[a("code",[t._v("String")])]),t._v(" "),a("td",[t._v("ä¸ºæ˜ å°„èµ·ä¸ªåå­—ï¼Œæ–¹ä¾¿åœ¨å·¥å…·æˆ–æ—¥å¿—ä¸­åŒºåˆ†ã€‚")])])])]),t._v(" "),a("p",[a("strong",[t._v("ç®€åŒ–æ³¨è§£")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@GetMapping = @RequestMapping(method = GET)")]),t._v(" "),a("li",[t._v("@PostMapping = @RequestMapping(method = POST)")]),t._v(" "),a("li",[t._v("@PutMapping = @RequestMapping(method = PUT)")]),t._v(" "),a("li",[t._v("@DeleteMapping = @RequestMapping(method = DELETE)")]),t._v(" "),a("li",[t._v('@PatchMapping = @RequestMapping(method = PATCH)"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŸºæœ¬æ˜ å°„")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/list"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users/list"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å®šè¯·æ±‚æ–¹æ³•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/save"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redirect:/api/users/list"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·¯å¾„å˜é‡")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/detail/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserDetail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userId"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users/detail"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‚æ•°é™å®š")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/search"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"age"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("searchUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestParam")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                             "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestParam")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users/search-result"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯·æ±‚å¤´é™å®š")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                   headers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Accept=application/json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"X-API-Version=1.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseBody")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getApiData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Content-Typeé™å®š")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                   method "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                   consumes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                   produces "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseBody")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ç®€åŒ–æ³¨è§£")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseBody")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                consumes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MediaType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("APPLICATION_JSON_VALUE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                produces "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MediaType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("APPLICATION_JSON_VALUE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseBody")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUserRest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Valid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" savedUser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CREATED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PutMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseBody")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                          "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Valid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" updatedUser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("updatedUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@DeleteMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseBody")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Void")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("noContent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤æ‚è·¯å¾„åŒ¹é…")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/files/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Resource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" filePath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequestURI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/files/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Resource")]),t._v(" resource "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" resourceLoader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"classpath:static/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" filePath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ­£åˆ™è¡¨è¾¾å¼è·¯å¾„")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/{id:[0-9]+}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseBody")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserByNumericId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// çŸ©é˜µå˜é‡")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/{id}/books/{isbn}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseBody")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Book")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBook")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                       "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" isbn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                       "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@MatrixVariable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"edition"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pathVar "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"isbn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" edition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" bookService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByIsbnAndEdition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isbn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" edition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-mvc-å¦‚ä½•å¤„ç†è·¨åŸŸè¯·æ±‚-cors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-mvc-å¦‚ä½•å¤„ç†è·¨åŸŸè¯·æ±‚-cors"}},[t._v("#")]),t._v(" ğŸ¯ Spring MVC å¦‚ä½•å¤„ç†è·¨åŸŸè¯·æ±‚ï¼ˆCORSï¼‰ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("é…ç½® "),a("code",[t._v("@CrossOrigin")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@CrossOrigin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("origins "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:8080"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" maxAge "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApiController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("æˆ–é€šè¿‡ "),a("code",[t._v("WebMvcConfigurer")]),t._v("å…¨å±€é…ç½®ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebMvcConfigurer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addCorsMappings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CorsRegistry")]),t._v(" registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowedOrigins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸš€-å››ã€spring-bootæ ¸å¿ƒç‰¹æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš€-å››ã€spring-bootæ ¸å¿ƒç‰¹æ€§"}},[t._v("#")]),t._v(" ğŸš€ å››ã€Spring Bootæ ¸å¿ƒç‰¹æ€§")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç†å¿µ")]),t._v("ï¼šçº¦å®šå¤§äºé…ç½®ï¼Œæä¾›å¼€ç®±å³ç”¨çš„å¿«é€Ÿå¼€å‘ä½“éªŒï¼Œç®€åŒ–Springåº”ç”¨çš„æ­å»ºå’Œéƒ¨ç½²ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯spring-boot-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯spring-boot-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯Spring Bootï¼Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring Bootæ˜¯Springå›¢é˜Ÿæä¾›çš„å¿«é€Ÿå¼€å‘æ¡†æ¶ï¼Œæ—¨åœ¨ç®€åŒ–Springåº”ç”¨çš„åˆå§‹æ­å»ºå’Œå¼€å‘è¿‡ç¨‹ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("Spring Boot çš„ç‰¹ç‚¹ï¼ˆç›¸æ¯” Springï¼‰")])]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("å¼€ç®±å³ç”¨")]),t._v("ï¼šå‡ ä¹é›¶é…ç½®ï¼Œèƒ½å¿«é€Ÿå¯åŠ¨åº”ç”¨ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å†…åµŒæœåŠ¡å™¨")]),t._v("ï¼šå†…ç½® Tomcat/Jetty/Undertowï¼Œä¸éœ€è¦å•ç‹¬éƒ¨ç½² WAR åŒ…ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("è‡ªåŠ¨è£…é…")]),t._v("ï¼šé€šè¿‡æ¡ä»¶æ³¨è§£è‡ªåŠ¨é…ç½®å¸¸ç”¨çš„ Beanï¼Œå‡å°‘ XML é…ç½®ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("çº¦å®šå¤§äºé…ç½®")]),t._v("ï¼šåˆç†çš„é»˜è®¤å€¼ï¼Œé…ç½®é‡å¤§å¹…å‡å°‘ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å¤–éƒ¨åŒ–é…ç½®")]),t._v("ï¼šæ”¯æŒå¤šç¯å¢ƒï¼ˆapplication-dev.ymlã€application-prod.ymlï¼‰ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ä¸å¾®æœåŠ¡å¤©ç„¶ç»“åˆ")]),t._v("ï¼šä¸ Spring Cloud æ— ç¼å¯¹æ¥ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ä¾èµ–ç®¡ç†é—®é¢˜")]),t._v("ï¼šSpring Bootæä¾›starterä¾èµ–ï¼Œä¸€é”®è§£å†³åœºæ™¯ã€‚å†…ç½®ç‰ˆæœ¬ä»²è£ï¼Œé¿å…ä¾èµ–å†²çª")])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¼ ç»ŸSpringé…ç½®ï¼ˆå¤æ‚ï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableWebMvc")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableTransactionManagement")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.example"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebMvcConfigurer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HikariDataSource")]),t._v(" dataSource "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HikariDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setJdbcUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jdbc:mysql://localhost:3306/test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JdbcTemplate")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jdbcTemplate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JdbcTemplate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿˜éœ€è¦é…ç½®è§†å›¾è§£æå™¨ã€äº‹åŠ¡ç®¡ç†å™¨ç­‰...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Spring Bootæ–¹å¼ï¼ˆç®€æ´ï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootApplication")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Application")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Application")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// application.ymlé…ç½®å³å¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\nspring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/test\n    username: root\n    password: password\n*/")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯è¯´è¯´-spring-boot-å’Œ-spring-çš„å…³ç³»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯è¯´è¯´-spring-boot-å’Œ-spring-çš„å…³ç³»"}},[t._v("#")]),t._v(" ğŸ¯è¯´è¯´ Spring Boot å’Œ Spring çš„å…³ç³»ï¼Ÿ")]),t._v(" "),a("p",[t._v("Spring Boot æ˜¯ Spring å¼€æºç»„ç»‡ä¸‹çš„å­é¡¹ç›®ï¼Œæ˜¯ Spring ç»„ä»¶ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦æ˜¯ç®€åŒ–äº†ä½¿ç”¨ Spring çš„éš¾åº¦ï¼Œç®€çœäº†ç¹é‡çš„é…ç½®ï¼Œæä¾›äº†å„ç§å¯åŠ¨å™¨ï¼Œå¼€å‘è€…èƒ½å¿«é€Ÿä¸Šæ‰‹ã€‚")]),t._v(" "),a("p",[t._v("Spring Boot ä¸»è¦æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("å®¹æ˜“ä¸Šæ‰‹ï¼Œæå‡å¼€å‘æ•ˆç‡ï¼Œä¸º Spring å¼€å‘æä¾›ä¸€ä¸ªæ›´å¿«ã€æ›´å¹¿æ³›çš„å…¥é—¨ä½“éªŒã€‚")]),t._v(" "),a("li",[t._v("å¼€ç®±å³ç”¨ï¼Œè¿œç¦»ç¹ççš„é…ç½®ã€‚")]),t._v(" "),a("li",[t._v("æä¾›äº†ä¸€ç³»åˆ—å¤§å‹é¡¹ç›®é€šç”¨çš„éä¸šåŠ¡æ€§åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šå†…åµŒæœåŠ¡å™¨ã€å®‰å…¨ç®¡ç†ã€è¿è¡Œæ•°æ®ç›‘æ§ã€è¿è¡ŒçŠ¶å†µæ£€æŸ¥å’Œå¤–éƒ¨åŒ–é…ç½®ç­‰ã€‚")]),t._v(" "),a("li",[t._v("æ²¡æœ‰ä»£ç ç”Ÿæˆï¼Œä¹Ÿä¸éœ€è¦XMLé…ç½®ã€‚")]),t._v(" "),a("li",[t._v("é¿å…å¤§é‡çš„ Maven å¯¼å…¥å’Œå„ç§ç‰ˆæœ¬å†²çªã€‚")])]),t._v(" "),a("blockquote",[a("p",[t._v("Spring Boot æˆ‘ç†è§£å°±æ˜¯æŠŠ spring spring mvc spring data jpa ç­‰ç­‰çš„ä¸€äº›å¸¸ç”¨çš„å¸¸ç”¨çš„åŸºç¡€æ¡†æ¶ç»„åˆèµ·æ¥ï¼Œæä¾›é»˜è®¤çš„é…ç½®ï¼Œç„¶åæä¾›å¯æ’æ‹”çš„è®¾è®¡ï¼Œå°±æ˜¯å„ç§ starter ï¼Œæ¥æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨è¿™ä¸€ç³»åˆ—çš„æŠ€æœ¯ï¼Œå¥—ç”¨å®˜æ–¹çš„ä¸€å¥è¯ï¼Œ spring å®¶æ—å‘å±•åˆ°ä»Šå¤©ï¼Œå·²ç»å¾ˆåºå¤§äº†ï¼Œä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨ spring å®¶æ—ä¸€ç³»åˆ—çš„æŠ€æœ¯ï¼Œéœ€è¦ä¸€ä¸ªä¸€ä¸ªçš„æé…ç½®ï¼Œç„¶åè¿˜æœ‰ä¸ªç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼Œå…¶å®æŒºéº»çƒ¦çš„ï¼Œå¶å°”ä¹Ÿä¼šæœ‰å°å‘å‡ºç°ï¼Œå…¶å®æŒºå½±å“å¼€å‘è¿›åº¦ï¼Œ spring boot å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆå§ï¼Œå¯ä»¥å…ˆä¸å…³å¿ƒå¦‚ä½•é…ç½®ï¼Œå¯ä»¥å¿«é€Ÿçš„å¯åŠ¨å¼€å‘ï¼Œè¿›è¡Œä¸šåŠ¡é€»è¾‘ç¼–å†™ï¼Œå„ç§éœ€è¦çš„æŠ€æœ¯ï¼ŒåŠ å…¥ starter å°±é…ç½®å¥½äº†ï¼Œç›´æ¥ä½¿ç”¨ï¼Œå¯ä»¥è¯´è¿½æ±‚å¼€ç®±å³ç”¨çš„æ•ˆæœå§.")])]),t._v(" "),a("blockquote",[a("p",[t._v("å¦‚æœè¯´ Spring æ˜¯ä¸€ä¸ªå®¶æ—ï¼Œå…¶å®å°±æ˜¯ï¼›å®ƒåŒ…å« spring core, spring mvcï¼Œspring bootä¸spring Cloud ç­‰ç­‰ï¼›")]),t._v(" "),a("p",[t._v("é‚£ spring boot å°±åƒæ˜¯è¿™ä¸ªå®¶æ—ä¸­çš„å¤§ç®¡å®¶")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-boot-å¯åŠ¨æµç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-boot-å¯åŠ¨æµç¨‹"}},[t._v("#")]),t._v(" ğŸ¯ Spring Boot å¯åŠ¨æµç¨‹ï¼Ÿ")]),t._v(" "),a("p",[t._v("Spring Boot çš„å¯åŠ¨æµç¨‹å›´ç»• "),a("code",[t._v("SpringApplication.run()")]),t._v(" æ–¹æ³•å±•å¼€ï¼Œåˆ†ä¸º "),a("strong",[t._v("åˆå§‹åŒ–é˜¶æ®µã€ç¯å¢ƒå‡†å¤‡ã€ä¸Šä¸‹æ–‡åˆ›å»ºä¸åˆ·æ–°ã€è‡ªåŠ¨é…ç½®")]),t._v(" ç­‰æ­¥éª¤ã€‚æ•´ä½“æµç¨‹å¯æ¦‚æ‹¬ä¸ºï¼š")]),t._v(" "),a("div",{staticClass:"language-wiki extra-class"},[a("pre",{pre:!0,attrs:{class:"language-wiki"}},[a("code",[t._v("å¯åŠ¨ç±» main() â†’ SpringApplication.run()\nâ”œâ”€ åˆå§‹åŒ–é˜¶æ®µï¼šæ¨æ–­åº”ç”¨ç±»å‹ã€åŠ è½½åˆå§‹åŒ–å™¨/ç›‘å¬å™¨\nâ”œâ”€ ç¯å¢ƒå‡†å¤‡ï¼šåŠ è½½é…ç½®ã€åˆ›å»ºç›‘å¬å™¨é›†åˆ\nâ”œâ”€ ä¸Šä¸‹æ–‡åˆ›å»ºï¼šå®ä¾‹åŒ– ApplicationContext\nâ”œâ”€ ä¸Šä¸‹æ–‡åˆ·æ–°ï¼šåŠ è½½ Beanã€è‡ªåŠ¨é…ç½®ã€å¯åŠ¨å®¹å™¨\nâ””â”€ åç½®å¤„ç†ï¼šæ‰§è¡Œ Runnerã€å‘å¸ƒå®Œæˆäº‹ä»¶\n")])])]),a("p",[a("strong",[t._v("1. åˆå§‹åŒ–é˜¶æ®µï¼ˆSpringApplication æ„é€ ï¼‰")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("æ¨æ–­åº”ç”¨ç±»å‹ï¼šé€šè¿‡ç±»è·¯å¾„åˆ¤æ–­æ˜¯ Webï¼ˆServlet/Reactiveï¼‰æˆ–é Web åº”ç”¨ï¼Œå†³å®šåç»­åˆ›å»ºå“ªç§ "),a("code",[t._v("ApplicationContext")])]),t._v(" "),a("p",[t._v("ï¼ˆå¦‚ "),a("code",[t._v("AnnotationConfigServletWebServerApplicationContext")]),t._v("ï¼‰ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("åŠ è½½åˆå§‹åŒ–å™¨ä¸ç›‘å¬å™¨ï¼šä» "),a("code",[t._v("META-INF/spring.factories")]),t._v(" åŠ è½½ "),a("code",[t._v("ApplicationContextInitializer")]),t._v("ï¼ˆç”¨äºè‡ªå®šä¹‰ä¸Šä¸‹æ–‡åˆå§‹åŒ–é€»è¾‘ï¼‰å’Œ "),a("code",[t._v("ApplicationListener")]),t._v("ï¼ˆç›‘å¬å¯åŠ¨äº‹ä»¶ï¼Œå¦‚ "),a("code",[t._v("ConfigFileApplicationListener")]),t._v(" åŠ è½½é…ç½®æ–‡ä»¶ï¼‰ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("ç¡®å®šä¸»ç±»ï¼šé€šè¿‡å †æ ˆä¿¡æ¯è§£æåŒ…å« "),a("code",[t._v("main()")]),t._v("çš„å¯åŠ¨ç±»ï¼Œç”¨äºç»„ä»¶æ‰«æã€‚")])])]),t._v(" "),a("p",[a("strong",[t._v("2. ç¯å¢ƒå‡†å¤‡ï¼ˆ"),a("code",[t._v("run()")]),t._v(" æ–¹æ³•å‰åŠæ®µï¼‰")])]),t._v(" "),a("ul",[a("li",[t._v("åˆ›å»ºç›‘å¬å™¨é›†åˆï¼šåˆå§‹åŒ– "),a("code",[t._v("SpringApplicationRunListeners")]),t._v("ï¼ˆå¦‚ "),a("code",[t._v("EventPublishingRunListener")]),t._v("ï¼‰ï¼Œå‘å¸ƒ "),a("code",[t._v("ApplicationStartingEvent")]),t._v("äº‹ä»¶ã€‚")]),t._v(" "),a("li",[t._v("åŠ è½½é…ç½®ç¯å¢ƒï¼š\n"),a("ul",[a("li",[t._v("æ„å»º "),a("code",[t._v("ConfigurableEnvironment")]),t._v("ï¼Œè§£æå‘½ä»¤è¡Œå‚æ•°å’Œ "),a("code",[t._v("application.properties/yml")]),t._v("æ–‡ä»¶ã€‚")]),t._v(" "),a("li",[t._v("é€šè¿‡ "),a("code",[t._v("EnvironmentPostProcessor")]),t._v(" æ‰©å±•ç¯å¢ƒå˜é‡ï¼ˆå¦‚ "),a("code",[t._v("RandomValuePropertySource")]),t._v(" æ”¯æŒéšæœºå€¼ï¼‰ã€‚")])])]),t._v(" "),a("li",[t._v("æ‰“å° Bannerï¼šåŠ è½½å¹¶æ˜¾ç¤ºå¯åŠ¨ Bannerï¼Œæ”¯æŒè‡ªå®šä¹‰æ–‡æœ¬æˆ–å›¾ç‰‡ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("3. ä¸Šä¸‹æ–‡åˆ›å»ºä¸åˆ·æ–°ï¼ˆæ ¸å¿ƒé˜¶æ®µï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("è°ƒç”¨ "),a("code",[t._v("SpringApplication.run()")]),t._v(" æ–¹æ³•")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ï¼šæ ¹æ®åº”ç”¨ç±»å‹å®ä¾‹åŒ– "),a("code",[t._v("ApplicationContext")]),t._v("ï¼ˆå¦‚ Web åº”ç”¨ä½¿ç”¨ "),a("code",[t._v("AnnotationConfigServletWebServerApplicationContext")]),t._v("ï¼‰ã€‚")]),t._v(" "),a("li",[t._v("å‡†å¤‡ä¸Šä¸‹æ–‡ï¼šå…³è”ç¯å¢ƒå˜é‡ã€æ³¨å†Œåˆå§‹ Beanï¼ˆå¦‚ "),a("code",[t._v("BeanDefinitionLoader")]),t._v(" åŠ è½½å¯åŠ¨ç±»ï¼‰ã€‚")]),t._v(" "),a("li",[t._v("åˆ·æ–°ä¸Šä¸‹æ–‡ï¼ˆ"),a("code",[t._v("ApplicationContext.refresh()")]),t._v(" æ–¹æ³•ï¼‰ï¼š\n"),a("ol",[a("li",[t._v("åŠ è½½ Bean å®šä¹‰ï¼šæ‰«æ "),a("code",[t._v("@Component")]),t._v("ã€"),a("code",[t._v("@Configuration")]),t._v(" ç­‰æ³¨è§£ï¼Œæ³¨å†Œ Beanã€‚")]),t._v(" "),a("li",[t._v("æ‰§è¡Œè‡ªåŠ¨é…ç½®ï¼šé€šè¿‡ "),a("code",[t._v("@EnableAutoConfiguration")]),t._v(" åŠ è½½ "),a("code",[t._v("spring.factories")]),t._v(" ä¸­çš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆå¦‚ "),a("code",[t._v("DataSourceAutoConfiguration")]),t._v("ï¼‰ï¼Œç»“åˆæ¡ä»¶æ³¨è§£ï¼ˆ"),a("code",[t._v("@ConditionalOnClass")]),t._v("ï¼‰æŒ‰éœ€åŠ è½½ã€‚")]),t._v(" "),a("li",[t._v("å¯åŠ¨å†…åµŒå®¹å™¨ï¼šWeb åº”ç”¨åˆå§‹åŒ– Tomcat/Jetty æœåŠ¡å™¨ï¼Œç›‘å¬ç«¯å£")]),t._v(" "),a("li",[t._v("å®Œæˆå•ä¾‹ Bean åˆå§‹åŒ–ï¼šè°ƒç”¨ "),a("code",[t._v("finishBeanFactoryInitialization()")]),t._v(" å®ä¾‹åŒ–æ‰€æœ‰éæ‡’åŠ è½½çš„å•ä¾‹ Bean")])])])]),t._v(" "),a("p",[a("strong",[t._v("4. åç½®å¤„ç†ä¸å¯åŠ¨å®Œæˆ")])]),t._v(" "),a("ul",[a("li",[t._v("æ‰§è¡Œ Runner æ¥å£ï¼šè°ƒç”¨æ‰€æœ‰ "),a("code",[t._v("CommandLineRunner")]),t._v(" å’Œ "),a("code",[t._v("ApplicationListener")]),t._v(" ï¼Œæ‰§è¡Œå¯åŠ¨åè‡ªå®šä¹‰é€»è¾‘ï¼ˆå¦‚åˆå§‹åŒ–æ•°æ®ï¼‰ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å‘å¸ƒå®Œæˆäº‹ä»¶")]),t._v("ï¼šè§¦å‘ "),a("code",[t._v("ApplicationReadyEvent")]),t._v("ï¼Œé€šçŸ¥åº”ç”¨å·²å°±ç»ª")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-commandlinerunner-æˆ–-applicationrunneræ¥å£åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-commandlinerunner-æˆ–-applicationrunneræ¥å£åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ "),a("code",[t._v("CommandLineRunner")]),t._v(" æˆ– "),a("code",[t._v("ApplicationRunner")]),t._v("æ¥å£åŒºåˆ«")]),t._v(" "),a("p",[a("code",[t._v("CommandLineRunner")]),t._v(" å’Œ "),a("code",[t._v("ApplicationRunner")]),t._v(" æ˜¯ Spring Boot æä¾›çš„ä¸¤ä¸ªæ¥å£ï¼Œç”¨äºåœ¨ Spring Boot åº”ç”¨å¯åŠ¨å®Œæˆåè¿è¡Œç‰¹å®šä»£ç ã€‚è¿™ä¸¤ä¸ªæ¥å£çš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬çš„ "),a("code",[t._v("run")]),t._v(" æ–¹æ³•çš„å‚æ•°ç±»å‹ã€‚")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("CommandLineRunner")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("CommandLineRunner")]),t._v("æ¥å£åŒ…å«ä¸€ä¸ª"),a("code",[t._v("run")]),t._v("æ–¹æ³•ï¼Œå…¶å‚æ•°æ˜¯"),a("code",[t._v("String... args")]),t._v("ï¼Œå³å‘½ä»¤è¡Œå‚æ•°çš„æ•°ç»„ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("è¿™ä¸ªæ¥å£é€‚åˆäºå‘½ä»¤è¡Œå·¥å…·æˆ–éœ€è¦è®¿é—®å‘½ä»¤è¡Œå‚æ•°çš„åº”ç”¨åœºæ™¯ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyCommandLineRunner")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CommandLineRunner")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ä»¥è®¿é—®å‘½ä»¤è¡Œå‚æ•°args")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("ApplicationRunner")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("ApplicationRunner")]),t._v("æ¥å£åŒæ ·åŒ…å«ä¸€ä¸ª"),a("code",[t._v("run")]),t._v("æ–¹æ³•ï¼Œä½†å…¶å‚æ•°æ˜¯"),a("code",[t._v("ApplicationArguments")]),t._v("ç±»å‹çš„å®ä¾‹ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("ApplicationArguments")]),t._v("æä¾›äº†æ›´å¤šå…³äºå‘½ä»¤è¡Œå‚æ•°çš„é«˜çº§å¤„ç†èƒ½åŠ›ï¼Œä¾‹å¦‚èƒ½å¤ŸåŒºåˆ†é€‰é¡¹å’Œéé€‰é¡¹å‚æ•°ï¼Œæˆ–è€…è·å–æ‰€æœ‰çš„é€‰é¡¹å€¼ç­‰ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("è¿™ä¸ªæ¥å£é€‚åˆäºéœ€è¦æ›´ç»†è‡´æ§åˆ¶å‘½ä»¤è¡Œå‚æ•°è§£æçš„åº”ç”¨åœºæ™¯ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyApplicationRunner")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationRunner")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationArguments")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ApplicationArgumentsæ¥å¤„ç†å‘½ä»¤è¡Œå‚æ•°")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])]),t._v(" "),a("p",[t._v("ä¸¤è€…éƒ½æ˜¯åœ¨Springåº”ç”¨çš„"),a("code",[t._v("ApplicationContext")]),t._v("å®Œå…¨åˆå§‹åŒ–ä¹‹åï¼Œä¸”æ‰€æœ‰çš„"),a("code",[t._v("@PostConstruct")]),t._v("æ³¨è§£çš„æ–¹æ³•æ‰§è¡Œå®Œæ¯•åè°ƒç”¨çš„ã€‚é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªæ¥å£å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼Œå¦‚æœä½ åªéœ€è¦ç®€å•çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œ"),a("code",[t._v("CommandLineRunner")]),t._v("å¯èƒ½å°±è¶³å¤Ÿäº†ã€‚å¦‚æœä½ éœ€è¦æ›´å¤æ‚çš„å‚æ•°è§£æåŠŸèƒ½ï¼Œé‚£ä¹ˆ"),a("code",[t._v("ApplicationRunner")]),t._v("ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚åœ¨Spring Bootåº”ç”¨ä¸­ï¼Œä½ å¯ä»¥åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªæ¥å£ï¼Œå®ƒä»¬å¹¶ä¸äº’ç›¸æ’æ–¥ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-bootè‡ªåŠ¨é…ç½®åŸç†æ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-bootè‡ªåŠ¨é…ç½®åŸç†æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ Spring Bootè‡ªåŠ¨é…ç½®åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("blockquote",[a("p",[t._v("Spring Boot ç›¸æ¯” Spring çš„æœ€å¤§ç‰¹ç‚¹æ˜¯å¼€ç®±å³ç”¨ã€å†…åµŒæœåŠ¡å™¨å’Œè‡ªåŠ¨è£…é…ã€‚\nè‡ªåŠ¨è£…é…çš„åŸç†æ˜¯ï¼šå¯åŠ¨ç±»ä¸Šçš„ "),a("code",[t._v("@SpringBootApplication")]),t._v(" å¯åŠ¨äº† "),a("code",[t._v("@EnableAutoConfiguration")]),t._v("ï¼Œå®ƒé€šè¿‡ "),a("code",[t._v("AutoConfigurationImportSelector")]),t._v(" æ‰«æ "),a("code",[t._v("spring.factories")]),t._v(" æˆ– "),a("code",[t._v("spring-autoconfigure-metadata")]),t._v(" ä¸­çš„é…ç½®ç±»ï¼Œå¹¶ç»“åˆæ¡ä»¶æ³¨è§£ï¼ˆå¦‚ @ConditionalOnClassã€@ConditionalOnMissingBeanï¼‰æ¥å†³å®šå“ªäº› Bean æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œä»è€Œå®ç°æŒ‰éœ€è‡ªåŠ¨é…ç½®ã€‚")]),t._v(" "),a("p",[t._v("æ ¸å¿ƒæœºåˆ¶ï¼š")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("@SpringBootApplication")]),t._v("ç»„åˆ"),a("code",[t._v("@EnableAutoConfiguration")]),t._v("ï¼Œæ‰«æ"),a("code",[t._v("META-INF/spring.factories")]),t._v("æ–‡ä»¶ï¼›")]),t._v(" "),a("li",[t._v("æ ¹æ®ç±»è·¯å¾„ä¸­çš„ä¾èµ–ï¼ˆå¦‚"),a("code",[t._v("spring-boot-starter-web")]),t._v("ï¼‰è‡ªåŠ¨é…ç½® Beanï¼ˆå¦‚ Tomcatã€MVC ç»„ä»¶ï¼‰ï¼›")]),t._v(" "),a("li",[t._v("å¯é€šè¿‡"),a("code",[t._v("application.properties/yaml")]),t._v("æˆ–"),a("code",[t._v("@Conditional")]),t._v("æ³¨è§£è¦†ç›–é»˜è®¤é…ç½®ã€‚")])])]),t._v(" "),a("p",[t._v("Spring Boot è‡ªåŠ¨é…ç½®ï¼ˆAuto-Configurationï¼‰æ˜¯ Spring Boot çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œæ—¨åœ¨æ ¹æ®é¡¹ç›®ä¸­çš„ä¾èµ–è‡ªåŠ¨é…ç½® Spring åº”ç”¨ã€‚é€šè¿‡è‡ªåŠ¨é…ç½®ï¼Œå¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç¼–å†™å¤§é‡çš„é…ç½®ä»£ç ï¼Œå¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å¼€å‘ã€‚å…¶å®ç°åŸç†ä¸»è¦åŸºäºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("å¯åŠ¨ç±»æ³¨è§£çš„å¤åˆç»“æ„")])]),t._v(" "),a("p",[t._v("Spring Boot åº”ç”¨é€šå¸¸ä½¿ç”¨ "),a("code",[t._v("@SpringBootApplication")]),t._v(" æ³¨è§£æ¥å¯åŠ¨ï¼Œè¯¥æ³¨è§£æœ¬è´¨ä¸Šæ˜¯ä»¥ä¸‹ä¸‰ä¸ªæ³¨è§£çš„ç»„åˆï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("@SpringBootConfigurationï¼šæ ‡è¯†å½“å‰ç±»ä¸ºé…ç½®ç±»ï¼Œç»§æ‰¿è‡ª "),a("code",[t._v("@Configuration")]),t._v("ï¼Œæ”¯æŒ Java Config é…ç½®æ–¹å¼ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("@ComponentScanï¼šè‡ªåŠ¨æ‰«æå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç»„ä»¶ï¼ˆå¦‚ "),a("code",[t._v("@Controller")]),t._v("ã€"),a("code",[t._v("@Service")]),t._v("ç­‰ï¼‰ï¼Œå°†å…¶æ³¨å†Œä¸º Beanã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("@EnableAutoConfiguration")]),t._v("ï¼š"),a("strong",[t._v("è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒå…¥å£")]),t._v("ï¼Œé€šè¿‡ "),a("code",[t._v("@Import")]),t._v(" å¯¼å…¥ "),a("code",[t._v("AutoConfigurationImportSelector")]),t._v(" ç±»ï¼Œè§¦å‘è‡ªåŠ¨é…ç½®æµç¨‹")])])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootApplication")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyApplication")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Target")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ElementType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TYPE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Retention")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RetentionPolicy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUNTIME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Documented")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Inherited")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootConfiguration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableAutoConfiguration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringBootApplication")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("è‡ªåŠ¨é…ç½®çš„è§¦å‘æœºåˆ¶")])]),t._v(" "),a("p",[a("code",[t._v("@EnableAutoConfiguration")]),t._v(" é€šè¿‡ "),a("code",[t._v("AutoConfigurationImportSelector")]),t._v(" ç±»åŠ è½½é…ç½®ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("è¯»å– "),a("code",[t._v("spring.factories")]),t._v(" æ–‡ä»¶ï¼šä»æ‰€æœ‰ä¾èµ–çš„ "),a("code",[t._v("META-INF/spring.factories")]),t._v(" æ–‡ä»¶ä¸­ï¼ŒæŸ¥æ‰¾ "),a("code",[t._v("org.springframework.boot.autoconfigure.EnableAutoConfiguration")]),t._v(" é”®å€¼å¯¹åº”çš„å…¨ç±»ååˆ—è¡¨ã€‚")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# Auto Configure\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\norg.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\\\norg.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\\\norg.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\\\n...\n")])])])]),t._v(" "),a("li",[a("p",[t._v("æ¡ä»¶åŒ–ç­›é€‰é…ç½®ç±»ï¼šé€šè¿‡æ¡ä»¶æ³¨è§£ï¼ˆå¦‚ "),a("code",[t._v("@ConditionalOnClass")]),t._v("ã€"),a("code",[t._v("@ConditionalOnMissingBean")]),t._v("ï¼‰è¿‡æ»¤æ‰ä¸æ»¡è¶³å½“å‰ç¯å¢ƒçš„é…ç½®ç±»ï¼Œä¾‹å¦‚ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç±»è·¯å¾„ä¸­ç¼ºå°‘æŸä¸ªç±»æ—¶ç¦ç”¨ç›¸å…³é…ç½®ï¼ˆ"),a("code",[t._v("@ConditionalOnClass")]),t._v("ï¼‰ã€‚")]),t._v(" "),a("li",[t._v("å®¹å™¨ä¸­å·²å­˜åœ¨æŸä¸ª Bean æ—¶è·³è¿‡é‡å¤æ³¨å†Œï¼ˆ"),a("code",[t._v("@ConditionalOnMissingBean")]),t._v("ï¼‰ã€‚")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("åŠ è½½æœ‰æ•ˆé…ç½®ç±»")]),t._v("ï¼šç­›é€‰åçš„é…ç½®ç±»é€šè¿‡åå°„å®ä¾‹åŒ–ï¼Œå¹¶æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("è‡ªåŠ¨é…ç½®ç±»çš„å®ç°é€»è¾‘")])]),t._v(" "),a("p",[t._v("è‡ªåŠ¨é…ç½®ç±»é€šå¸¸åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("æ¡ä»¶æ³¨è§£æ§åˆ¶ï¼šä¾‹å¦‚ï¼Œ"),a("code",[t._v("DataSourceAutoConfiguration")]),t._v(" ä»…åœ¨ç±»è·¯å¾„å­˜åœ¨ "),a("code",[t._v("javax.sql.DataSource")]),t._v(" æ—¶ç”Ÿæ•ˆã€‚")])]),t._v(" "),a("li",[a("p",[t._v("é»˜è®¤ Bean å®šä¹‰ï¼šé€šè¿‡ "),a("code",[t._v("@Bean")]),t._v(" æ–¹æ³•å®šä¹‰é»˜è®¤ç»„ä»¶ï¼ˆå¦‚ "),a("code",[t._v("JdbcTemplate")]),t._v("ï¼‰ï¼Œå¼€å‘è€…å¯é€šè¿‡é…ç½®æ–‡ä»¶è¦†ç›–é»˜è®¤å€¼ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å¤–éƒ¨åŒ–é…ç½®æ”¯æŒ")]),t._v("ï¼šç»“åˆ "),a("code",[t._v("@ConfigurationProperties")]),t._v(" å°† "),a("code",[t._v("application.properties")]),t._v(" ä¸­çš„å±æ€§æ³¨å…¥åˆ° Bean ä¸­")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æ¡ä»¶æ³¨è§£çš„ä½œç”¨")])]),t._v(" "),a("p",[t._v("Spring Boot æä¾›ä¸°å¯Œçš„æ¡ä»¶æ³¨è§£ï¼Œç”¨äºåŠ¨æ€æ§åˆ¶é…ç½®ç±»çš„åŠ è½½å’Œ Bean çš„æ³¨å†Œï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("@ConditionalOnClassï¼šç±»è·¯å¾„å­˜åœ¨æŒ‡å®šç±»æ—¶ç”Ÿæ•ˆã€‚")])]),t._v(" "),a("li",[a("p",[t._v("@ConditionalOnMissingBeanï¼šå®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®š Bean æ—¶ç”Ÿæ•ˆã€‚")])]),t._v(" "),a("li",[a("p",[t._v("@ConditionalOnPropertyï¼šæ ¹æ®é…ç½®æ–‡ä»¶å±æ€§å€¼å†³å®šæ˜¯å¦åŠ è½½ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("@ConditionalOnWebApplication")]),t._v("ï¼šä»…åœ¨ Web åº”ç”¨ç¯å¢ƒä¸‹ç”Ÿæ•ˆ")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("è‡ªåŠ¨é…ç½®çš„ä¼˜åŒ–ä¸æ‰©å±•")])])])]),t._v(" "),a("ul",[a("li",[t._v("æŒ‰éœ€åŠ è½½ï¼šé€šè¿‡æ¡ä»¶ç­›é€‰é¿å…åŠ è½½æœªä½¿ç”¨çš„ç»„ä»¶ï¼Œå‡å°‘å†…å­˜å ç”¨ã€‚")]),t._v(" "),a("li",[t._v("è‡ªå®šä¹‰ Starterï¼šå¼€å‘è€…å¯å°è£…è‡ªå®šä¹‰ Starterï¼Œéµå¾ªç›¸åŒæœºåˆ¶ï¼ˆ"),a("code",[t._v("spring.factories")]),t._v(" + æ¡ä»¶æ³¨è§£ï¼‰å®ç°æ¨¡å—åŒ–è‡ªåŠ¨é…ç½®ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§")]),t._v("ï¼šé€šè¿‡ "),a("code",[t._v("spring.autoconfigure.exclude")]),t._v(" æ˜¾å¼æ’é™¤ä¸éœ€è¦çš„è‡ªåŠ¨é…ç½®ç±»")])]),t._v(" "),a("p",[t._v("Spring Boot çš„è‡ªåŠ¨é…ç½®æœ¬è´¨ä¸Šæ˜¯ "),a("strong",[t._v("åŸºäºçº¦å®šå’Œæ¡ä»¶åˆ¤æ–­çš„ Bean æ³¨å†Œæœºåˆ¶")]),t._v("ï¼Œé€šè¿‡ä»¥ä¸‹æµç¨‹å®ç°â€œå¼€ç®±å³ç”¨â€ï¼š")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("å¯åŠ¨ç±»æ³¨è§£ â†’ åŠ è½½ spring.factories â†’ æ¡ä»¶ç­›é€‰ â†’ æ³¨å†Œæœ‰æ•ˆ Bean\n")])])]),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªåŠ¨é…ç½®ç±»ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConditionalOnClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConditionalOnProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prefix "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"spring.datasource"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableConfigurationProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSourceProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSourceAutoConfiguration")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConditionalOnMissingBean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSourceProperties")]),t._v(" properties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HikariDataSource")]),t._v(" dataSource "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HikariDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setJdbcUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("properties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("properties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("properties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dataSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®å±æ€§ç±»")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConfigurationProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prefix "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"spring.datasource"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSourceProperties")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// getter/setter...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// spring.factoriesæ–‡ä»¶å†…å®¹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n# Auto Configure\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\ncom.example.autoconfigure.DataSourceAutoConfiguration,\\\ncom.example.autoconfigure.WebMvcAutoConfiguration\n*/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰æ¡ä»¶æ³¨è§£")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Target")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ElementType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TYPE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ElementType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("METHOD")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Retention")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RetentionPolicy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUNTIME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Conditional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OnRedisCondition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConditionalOnRedis")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OnRedisCondition")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Condition")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("matches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConditionContext")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnnotatedTypeMetadata")]),t._v(" metadata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redis.clients.jedis.Jedis"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEnvironment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"spring.redis.host"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassNotFoundException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-ä»€ä¹ˆæ˜¯starter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä»€ä¹ˆæ˜¯starter"}},[t._v("#")]),t._v(" ğŸ¯ ä»€ä¹ˆæ˜¯Starterï¼Ÿ")]),t._v(" "),a("blockquote",[a("p",[t._v("Starter å°±æ˜¯ Spring Boot çš„â€œåŠŸèƒ½æ’ä»¶â€ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä¾èµ–æ¨¡å—ï¼Œé‡Œé¢å°è£…äº†æŸç§åŠŸèƒ½æ‰€éœ€çš„ä¾èµ–å’Œè‡ªåŠ¨é…ç½®ç±»ã€‚Spring Boot é€šè¿‡ "),a("code",[t._v("@EnableAutoConfiguration")]),t._v(" æœºåˆ¶æ‰«æ Starter ä¸­çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œå¹¶ç»“åˆæ¡ä»¶æ³¨è§£ï¼Œæœ€ç»ˆæŠŠæ‰€éœ€çš„ Bean æ³¨å…¥åˆ°å®¹å™¨ä¸­ã€‚è¿™æ ·å¼€å‘è€…åªéœ€å¼•å…¥ Starter ä¾èµ–ï¼Œå°±èƒ½å¿«é€Ÿä½¿ç”¨å¯¹åº”åŠŸèƒ½ï¼Œæå¤§å‡å°‘äº†é…ç½®å·¥ä½œã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("Starter")]),t._v(" å°±æ˜¯ "),a("strong",[t._v("Spring Boot æä¾›çš„ä¾èµ–æ¨¡å—")]),t._v("ï¼Œå®ƒæŠŠæŸä¸ªåŠŸèƒ½æ‰€éœ€çš„ä¾èµ–ã€é…ç½®ã€è‡ªåŠ¨è£…é…ç±»éƒ½æ‰“åŒ…å¥½ï¼Œå¼€å‘è€…åªéœ€è¦å¼•å…¥ Starterï¼Œå°±èƒ½â€œå¼€ç®±å³ç”¨â€ã€‚")]),t._v(" "),a("p",[t._v("æ¢å¥è¯è¯´ï¼š"),a("strong",[t._v("Starter = ä¾èµ–ç®¡ç† + è‡ªåŠ¨é…ç½® + çº¦å®šé»˜è®¤å€¼")])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ›  Starter çš„ç»„æˆ")])]),t._v(" "),a("p",[t._v("ä¸€ä¸ª Starter ä¸€èˆ¬åŒ…å«ä¸‰éƒ¨åˆ†ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ä¾èµ–")]),t._v("ï¼šæŠŠå¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“ç»Ÿä¸€æ‰“åŒ…ï¼ˆæ¯”å¦‚ spring-boot-starter-web å°±æ‰“åŒ…äº† Spring MVCã€Jacksonã€Tomcat ç­‰ï¼‰ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("è‡ªåŠ¨é…ç½®ç±»")]),t._v("ï¼šåœ¨ "),a("code",[t._v("META-INF/spring.factories")]),t._v(" æˆ– "),a("code",[t._v("AutoConfiguration.imports")]),t._v(" ä¸­å£°æ˜ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æ¡ä»¶æ³¨è§£æ§åˆ¶")]),t._v("ï¼šå¦‚ "),a("code",[t._v("@ConditionalOnClass")]),t._v("ã€"),a("code",[t._v("@ConditionalOnMissingBean")]),t._v("ï¼Œä¿è¯çµæ´»æ€§ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("å¸¸è§å®˜æ–¹ Starter")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("spring-boot-starter-web")]),t._v("ï¼šWeb å¼€å‘ï¼ˆSpring MVCã€Tomcatï¼‰")]),t._v(" "),a("li",[a("code",[t._v("spring-boot-starter-data-jpa")]),t._v("ï¼šJPA å’Œ Hibernate")]),t._v(" "),a("li",[a("code",[t._v("spring-boot-starter-data-redis")]),t._v("ï¼šRedis é›†æˆ")]),t._v(" "),a("li",[a("code",[t._v("spring-boot-starter-security")]),t._v("ï¼šSpring Security")]),t._v(" "),a("li",[a("code",[t._v("spring-boot-starter-test")]),t._v("ï¼šæµ‹è¯•ä¾èµ–")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-è®©ä½ è®¾è®¡ä¸€ä¸ªspring-boot-starterä½ ä¼šæ€ä¹ˆè®¾è®¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è®©ä½ è®¾è®¡ä¸€ä¸ªspring-boot-starterä½ ä¼šæ€ä¹ˆè®¾è®¡"}},[t._v("#")]),t._v(" ğŸ¯ è®©ä½ è®¾è®¡ä¸€ä¸ªspring-boot-starterä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿ")]),t._v(" "),a("p",[t._v("è®¾è®¡ä¸€ä¸ª Spring Boot Starter éœ€è¦è€ƒè™‘å…¶ç›®çš„ã€åŠŸèƒ½ã€æ˜“ç”¨æ€§å’Œæ‰©å±•æ€§ã€‚ä»¥ä¸‹æ˜¯è®¾è®¡ä¸€ä¸ª Spring Boot Starter çš„ä¸€èˆ¬æ­¥éª¤ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("å®šä¹‰ Starter çš„ç›®çš„å’ŒåŠŸèƒ½")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("ç¡®å®š Starter è¦è§£å†³çš„é—®é¢˜æˆ–è¦æä¾›çš„åŠŸèƒ½ã€‚")]),t._v(" "),a("li",[t._v("ä¾‹å¦‚ï¼Œå¯èƒ½æ˜¯ä¸ºäº†ç®€åŒ–æ•°æ®åº“æ“ä½œã€æä¾›ç¼“å­˜è§£å†³æ–¹æ¡ˆã€å®ç°ç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½ç­‰ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("åˆ›å»º Maven é¡¹ç›®")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("ä½¿ç”¨ Spring Initializr æˆ–è€…æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ª Maven é¡¹ç›®ã€‚")]),t._v(" "),a("li",[t._v("åŒ…å«å¿…è¦çš„ä¾èµ–ï¼Œå¦‚ Spring Boot å’Œå…¶ä»–ç›¸å…³åº“ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("è®¾è®¡è‡ªåŠ¨é…ç½®")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("åˆ›å»º "),a("code",[t._v("@Configuration")]),t._v(" ç±»æ¥å®šä¹‰è‡ªåŠ¨é…ç½®ã€‚")]),t._v(" "),a("li",[t._v("ä½¿ç”¨ "),a("code",[t._v("@EnableAutoConfiguration")]),t._v(" å’Œ "),a("code",[t._v("@ComponentScan")]),t._v(" æ³¨è§£æ¥å¯ç”¨è‡ªåŠ¨é…ç½®å’Œç»„ä»¶æ‰«æã€‚")]),t._v(" "),a("li",[t._v("é€šè¿‡ "),a("code",[t._v("@ConditionalOnClass")]),t._v("ã€"),a("code",[t._v("@ConditionalOnMissingBean")]),t._v(" ç­‰æ¡ä»¶æ³¨è§£æ¥æ§åˆ¶é…ç½®çš„ç”Ÿæ•ˆæ¡ä»¶ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("å®šä¹‰é»˜è®¤é…ç½®å±æ€§")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("åœ¨ "),a("code",[t._v("application.properties")]),t._v(" æˆ– "),a("code",[t._v("application.yml")]),t._v(" ä¸­å®šä¹‰é»˜è®¤é…ç½®å±æ€§ã€‚")]),t._v(" "),a("li",[t._v("åˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œä½¿ç”¨ "),a("code",[t._v("@ConfigurationProperties")]),t._v(" æ³¨è§£æ¥ç»‘å®šè¿™äº›å±æ€§ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£")]),t._v("ï¼šå¦‚æœéœ€è¦ï¼Œå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰æ³¨è§£æ¥è¿›ä¸€æ­¥ç®€åŒ–é…ç½®ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å®ç°ä¾èµ–ç®¡ç†")]),t._v("ï¼šåœ¨ "),a("code",[t._v("pom.xml")]),t._v(" ä¸­å®šä¹‰ "),a("code",[t._v("<dependencyManagement>")]),t._v(" æ ‡ç­¾ï¼Œç®¡ç† Starter ä¾èµ–çš„ç‰ˆæœ¬ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ç¼–å†™æ–‡æ¡£")]),t._v("ï¼šæä¾›æ¸…æ™°çš„æ–‡æ¡£è¯´æ˜å¦‚ä½•ä½¿ç”¨ Starterï¼ŒåŒ…æ‹¬é…ç½®å±æ€§çš„è¯¦ç»†è¯´æ˜ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æ‰“åŒ…å’Œå‘½å")]),t._v("ï¼š\n"),a("ul",[a("li",[t._v("æŒ‰ç…§ "),a("code",[t._v("spring-boot-starter-xxx")]),t._v(" çš„æ ¼å¼å‘½åä½ çš„ Starterã€‚")]),t._v(" "),a("li",[t._v("åœ¨ "),a("code",[t._v("pom.xml")]),t._v(" ä¸­é…ç½® "),a("code",[t._v("<groupId>")]),t._v("ã€"),a("code",[t._v("<artifactId>")]),t._v(" å’Œ "),a("code",[t._v("<version>")]),t._v("ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("æµ‹è¯•")]),t._v("ï¼šç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•æ¥éªŒè¯è‡ªåŠ¨é…ç½®çš„æ­£ç¡®æ€§ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å‘å¸ƒ")]),t._v("ï¼šå°† Starter å‘å¸ƒåˆ° Maven ä¸­å¤®ä»“åº“æˆ–ç§æœ‰ä»“åº“ï¼Œä»¥ä¾¿å…¶ä»–é¡¹ç›®å¯ä»¥ä¾èµ–ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æä¾›ç¤ºä¾‹")]),t._v("ï¼šæä¾›ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ä½ çš„ Starterã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. è‡ªåŠ¨é…ç½®ç±»")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConditionalOnClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConditionalOnProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prefix "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sms"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"enabled"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" havingValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableConfigurationProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsAutoConfiguration")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConditionalOnMissingBean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("smsService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsProperties")]),t._v(" properties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("properties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getApiKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" properties"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSecret")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. é…ç½®å±æ€§ç±»")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConfigurationProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prefix "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sms"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Data")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsProperties")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" enabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" apiKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" secret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" templateId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. æ ¸å¿ƒæœåŠ¡ç±»")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" apiKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" secret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" apiKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" secret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apiKey "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" apiKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("secret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" secret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendSms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" phone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€çŸ­ä¿¡çš„å…·ä½“å®ç°")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å‘é€çŸ­ä¿¡åˆ°: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" phone "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", å†…å®¹: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. META-INF/spring.factoriesæ–‡ä»¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\ncom.example.starter.SmsAutoConfiguration\n*/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5. pom.xmlä¾èµ–ç®¡ç†ï¼ˆStarteræ¨¡å—ï¼‰")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n<dependency>\n    <groupId>com.example</groupId>\n    <artifactId>sms-spring-boot-autoconfigure</artifactId>\n</dependency>\n*/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 6. ä½¿ç”¨è‡ªå®šä¹‰Starter")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsService")]),t._v(" smsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/send"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendSms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestParam")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" phone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestParam")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" success "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" smsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendSms")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("phone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" success "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å‘é€æˆåŠŸ"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å‘é€å¤±è´¥"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 7. application.ymlé…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\nsms:\n  enabled: true\n  api-key: your-api-key\n  secret: your-secret\n  template-id: SMS_001\n  timeout: 10000\n*/")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-bootçš„é…ç½®ä¼˜å…ˆçº§æ˜¯æ€æ ·çš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-bootçš„é…ç½®ä¼˜å…ˆçº§æ˜¯æ€æ ·çš„"}},[t._v("#")]),t._v(" ğŸ¯ Spring Bootçš„é…ç½®ä¼˜å…ˆçº§æ˜¯æ€æ ·çš„ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring Bootéµå¾ªçº¦å®šå¤§äºé…ç½®åŸåˆ™ï¼Œæ”¯æŒå¤šç§é…ç½®æ–¹å¼ï¼Œå…·æœ‰æ˜ç¡®çš„ä¼˜å…ˆçº§é¡ºåºï¼š')]),t._v(" "),a("p",[a("strong",[t._v("é…ç½®ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. å‘½ä»¤è¡Œå‚æ•°")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("java -jar app.jar --server.port=8081")]),t._v(" "),a("li",[t._v("ä¼˜å…ˆçº§æœ€é«˜ï¼Œå¯è¦†ç›–ä»»ä½•é…ç½®")])]),t._v(" "),a("p",[a("strong",[t._v("2. ç³»ç»Ÿç¯å¢ƒå˜é‡")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("export SERVER_PORT=8081")]),t._v(" "),a("li",[t._v("é€šè¿‡æ“ä½œç³»ç»Ÿè®¾ç½®çš„ç¯å¢ƒå˜é‡")])]),t._v(" "),a("p",[a("strong",[t._v("3. Javaç³»ç»Ÿå±æ€§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("-Dserver.port=8081")]),t._v(" "),a("li",[t._v("JVMå¯åŠ¨å‚æ•°è®¾ç½®çš„ç³»ç»Ÿå±æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("4. JNDIå±æ€§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("java:comp/env/server.port")]),t._v(" "),a("li",[t._v("ä»JNDIè·å–çš„å±æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("5. éšæœºå€¼å±æ€§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("RandomValuePropertySourceæ”¯æŒçš„å±æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("6. jaråŒ…å¤–çš„é…ç½®æ–‡ä»¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("application-{profile}.properties/yml")]),t._v(" "),a("li",[t._v("æ”¾åœ¨jaråŒ…åŒçº§ç›®å½•")])]),t._v(" "),a("p",[a("strong",[t._v("7. jaråŒ…å†…çš„é…ç½®æ–‡ä»¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("classpathä¸­çš„application-{profile}.properties/yml")])]),t._v(" "),a("p",[a("strong",[t._v("8. @PropertySourceæ³¨è§£")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é€šè¿‡@PropertySourceåŠ è½½çš„å±æ€§æ–‡ä»¶")])]),t._v(" "),a("p",[a("strong",[t._v("9. é»˜è®¤å±æ€§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("SpringApplication.setDefaultProperties()")])]),t._v(" "),a("p",[a("strong",[t._v("é…ç½®æ–‡ä»¶æœç´¢é¡ºåº")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("file:./config/ (å½“å‰ç›®å½•configå­ç›®å½•)")]),t._v(" "),a("li",[t._v("file:./ (å½“å‰ç›®å½•)")]),t._v(" "),a("li",[t._v("classpath:/config/ (classpath configç›®å½•)")]),t._v(" "),a("li",[t._v("classpath:/ (classpathæ ¹ç›®å½•)")])]),t._v(" "),a("p",[a("strong",[t._v("Profileé…ç½®")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("application.yml (é€šç”¨é…ç½®)")]),t._v(" "),a("li",[t._v("application-dev.yml (å¼€å‘ç¯å¢ƒ)")]),t._v(" "),a("li",[t._v('application-prod.yml (ç”Ÿäº§ç¯å¢ƒ)"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. é…ç½®ç±»è¯»å–ä¼˜å…ˆçº§ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConfigurationProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prefix "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Data")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppProperties")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" enabled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. å¤šç¯å¢ƒé…ç½®ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// application.yml (åŸºç¡€é…ç½®)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\napp:\n  name: MyApp\n  port: 8080\n  \nspring:\n  profiles:\n    active: dev\n*/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// application-dev.yml (å¼€å‘ç¯å¢ƒ)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\napp:\n  port: 8081\n  enabled: true\n  \nlogging:\n  level:\n    root: DEBUG\n*/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// application-prod.yml (ç”Ÿäº§ç¯å¢ƒ)  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\napp:\n  port: 8080\n  enabled: false\n  \nlogging:\n  level:\n    root: WARN\n*/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. @Valueæ³¨è§£è¯»å–é…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConfigController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${app.name:DefaultApp}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" appName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${server.port:8080}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" serverPort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/config"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConfig")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" appName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"serverPort"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" serverPort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. æ¡ä»¶é…ç½®ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConditionalConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ConditionalOnProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app.enabled"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" havingValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("devDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("H2DataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prod"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prodDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MySQLDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5. å¯åŠ¨æ—¶æŒ‡å®šé…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\nå‘½ä»¤è¡Œæ–¹å¼ï¼š\njava -jar app.jar --spring.profiles.active=prod --server.port=8081\n\nç¯å¢ƒå˜é‡æ–¹å¼ï¼š\nexport SPRING_PROFILES_ACTIVE=prod\nexport SERVER_PORT=8081\n\nIDEé…ç½®ï¼š\n-Dspring.profiles.active=dev\n*/")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-boot-starter-parent-æœ‰ä»€ä¹ˆç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-boot-starter-parent-æœ‰ä»€ä¹ˆç”¨"}},[t._v("#")]),t._v(" ğŸ¯ spring-boot-starter-parent æœ‰ä»€ä¹ˆç”¨ ?")]),t._v(" "),a("p",[a("code",[t._v("spring-boot-starter-parent")]),t._v(" æ˜¯ Spring Boot æä¾›çš„ä¸€ä¸ªçˆ¶ POMï¼ˆé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼‰ï¼Œç”¨äºç®€åŒ– Spring Boot é¡¹ç›®çš„æ„å»ºå’Œä¾èµ–ç®¡ç†ã€‚å®ƒä½œä¸ºçˆ¶çº§ POMï¼Œä¸»è¦æä¾›äº†è®¸å¤šæ–¹ä¾¿çš„é…ç½®ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬ç®¡ç†ã€æ’ä»¶é…ç½®ã€ä¾èµ–ç®¡ç†ç­‰ã€‚ä½¿ç”¨ "),a("code",[t._v("spring-boot-starter-parent")]),t._v(" å¯ä»¥å‡å°‘å¾ˆå¤šæ‰‹åŠ¨é…ç½®çš„å·¥ä½œï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„å¼€å‘è€Œéæ„å»ºè¿‡ç¨‹ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ä¾èµ–ç®¡ç†")]),t._v("ï¼š"),a("code",[t._v("spring-boot-starter-parent")]),t._v(" é¢„å®šä¹‰äº† Spring Boot ç›¸å…³ä¾èµ–çš„ç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€ä½ ä¸éœ€è¦åœ¨æ¯ä¸ªæ¨¡å—çš„ "),a("code",[t._v("pom.xml")]),t._v(" ä¸­æ˜¾å¼æŒ‡å®šç‰ˆæœ¬å·ï¼Œå¯ä»¥é¿å…ç‰ˆæœ¬å†²çªå’Œå…¼å®¹æ€§é—®é¢˜ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æ’ä»¶ç®¡ç†")]),t._v("ï¼šå®ƒæä¾›äº†ä¸€äº›é¢„å…ˆé…ç½®çš„ Maven æ’ä»¶ï¼Œä¾‹å¦‚ "),a("code",[t._v("maven-compiler-plugin")]),t._v("ï¼ˆç”¨äºJavaç¼–è¯‘ï¼‰ã€"),a("code",[t._v("maven-surefire-plugin")]),t._v("ï¼ˆç”¨äºå•å…ƒæµ‹è¯•ï¼‰ç­‰ï¼Œè¿™äº›æ’ä»¶éƒ½å·²ç»é…ç½®å¥½äº†é€‚åˆå¤§å¤šæ•°Spring Bootåº”ç”¨çš„å‚æ•°ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("èµ„æºè¿‡æ»¤å’Œå±æ€§æ›¿æ¢")]),t._v("ï¼šé€šè¿‡åœ¨çˆ¶ POM ä¸­å®šä¹‰èµ„æºè¿‡æ»¤å’Œå±æ€§æ›¿æ¢è§„åˆ™ï¼Œå¯ä»¥ç¡®ä¿åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚ "),a("code",[t._v("application.properties")]),t._v("ï¼‰åœ¨ä¸åŒç¯å¢ƒé—´æ­£ç¡®åˆ‡æ¢ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("Spring Boot åº”ç”¨çš„æ‰“åŒ…ä¼˜åŒ–")]),t._v("ï¼šå®ƒé…ç½®äº† "),a("code",[t._v("maven-war-plugin")]),t._v(" æ’ä»¶ï¼Œä½¿å¾—æ‰“åŒ…çš„ WAR æ–‡ä»¶ä¸­ä¸åŒ…å« "),a("code",[t._v("META-INF")]),t._v(" ç›®å½•ä¸‹çš„ "),a("code",[t._v("pom.xml")]),t._v(" å’Œ "),a("code",[t._v("pom.properties")]),t._v(" æ–‡ä»¶ï¼Œè¿™å¯¹äºéƒ¨ç½²åˆ° Servlet å®¹å™¨æ˜¯æœ‰ç›Šçš„ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("è‡ªåŠ¨é…ç½®çš„ä¾èµ–")]),t._v("ï¼šå¯ä»¥æ–¹ä¾¿åœ°å¼•å…¥ Spring Boot çš„è‡ªåŠ¨é…ç½®ä¾èµ–ï¼Œä¾‹å¦‚ "),a("code",[t._v("spring-boot-starter")]),t._v("ï¼Œè¿™å¯ä»¥è‡ªåŠ¨é…ç½®åº”ç”¨ç¨‹åºçš„å¤§éƒ¨åˆ†è®¾ç½®ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ç‰ˆæœ¬ä¸€è‡´æ€§")]),t._v("ï¼šç¡®ä¿æ‰€æœ‰ Spring Boot ç›¸å…³ä¾èµ–çš„ç‰ˆæœ¬ä¸€è‡´ï¼Œé¿å…ä¸åŒåº“ä¹‹é—´çš„ç‰ˆæœ¬å†²çªã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å¿«é€Ÿå¼€å§‹")]),t._v("ï¼šå¯¹äºæ–°é¡¹ç›®ï¼Œä½¿ç”¨ "),a("code",[t._v("spring-boot-starter-parent")]),t._v(" å¯ä»¥å¿«é€Ÿå¼€å§‹ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®å¤§é‡çš„ Maven è®¾ç½®ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ç»§æ‰¿å’Œè‡ªå®šä¹‰")]),t._v("ï¼šå¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥ç»§æ‰¿ "),a("code",[t._v("spring-boot-starter-parent")]),t._v(" å¹¶æ ¹æ®é¡¹ç›®éœ€æ±‚è¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-boot-æ‰“æˆçš„-jar-å’Œæ™®é€šçš„-jar-æœ‰ä»€ä¹ˆåŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-boot-æ‰“æˆçš„-jar-å’Œæ™®é€šçš„-jar-æœ‰ä»€ä¹ˆåŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ Spring Boot æ‰“æˆçš„ jar å’Œæ™®é€šçš„ jar æœ‰ä»€ä¹ˆåŒºåˆ« ?")]),t._v(" "),a("p",[t._v("Spring Boot é¡¹ç›®æœ€ç»ˆæ‰“åŒ…æˆçš„ jar æ˜¯å¯æ‰§è¡Œ jar ï¼Œè¿™ç§ jar å¯ä»¥ç›´æ¥é€šè¿‡ "),a("code",[t._v("java -jar xxx.jar")]),t._v(" å‘½ä»¤æ¥è¿è¡Œï¼Œè¿™ç§ jar ä¸å¯ä»¥ä½œä¸ºæ™®é€šçš„ jar è¢«å…¶ä»–é¡¹ç›®ä¾èµ–ï¼Œå³ä½¿ä¾èµ–äº†ä¹Ÿæ— æ³•ä½¿ç”¨å…¶ä¸­çš„ç±»ã€‚")]),t._v(" "),a("p",[t._v("Spring Boot çš„ jar æ— æ³•è¢«å…¶ä»–é¡¹ç›®ä¾èµ–ï¼Œä¸»è¦è¿˜æ˜¯ä»–å’Œæ™®é€š jar çš„ç»“æ„ä¸åŒã€‚æ™®é€šçš„ jar åŒ…ï¼Œè§£å‹åç›´æ¥å°±æ˜¯åŒ…åï¼ŒåŒ…é‡Œå°±æ˜¯æˆ‘ä»¬çš„ä»£ç ï¼Œè€Œ Spring Boot æ‰“åŒ…æˆçš„å¯æ‰§è¡Œ jar è§£å‹åï¼Œåœ¨ "),a("code",[t._v("\\BOOT-INF\\classes")]),t._v(" ç›®å½•ä¸‹æ‰æ˜¯æˆ‘ä»¬çš„ä»£ç ï¼Œå› æ­¤æ— æ³•è¢«ç›´æ¥å¼•ç”¨ã€‚å¦‚æœéè¦å¼•ç”¨ï¼Œå¯ä»¥åœ¨ pom.xml æ–‡ä»¶ä¸­å¢åŠ é…ç½®ï¼Œå°† Spring Boot é¡¹ç›®æ‰“åŒ…æˆä¸¤ä¸ª jar ï¼Œä¸€ä¸ªå¯æ‰§è¡Œï¼Œä¸€ä¸ªå¯å¼•ç”¨ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-å¦‚ä½•ä½¿ç”¨-spring-boot-å®ç°å¼‚å¸¸å¤„ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¦‚ä½•ä½¿ç”¨-spring-boot-å®ç°å¼‚å¸¸å¤„ç†"}},[t._v("#")]),t._v(" ğŸ¯ å¦‚ä½•ä½¿ç”¨ Spring Boot å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ")]),t._v(" "),a("p",[t._v("Spring Boot æä¾›äº†å¼‚å¸¸å¤„ç†çš„å¤šç§æ–¹å¼ï¼Œä¸»è¦é€šè¿‡ä»¥ä¸‹å‡ ç§æ‰‹æ®µå®ç°ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä½¿ç”¨å…¨å±€å¼‚å¸¸å¤„ç†ç±»ï¼ˆ"),a("code",[t._v("@ControllerAdvice")]),t._v(" å’Œ "),a("code",[t._v("@ExceptionHandler")]),t._v("ï¼‰ã€‚")]),t._v(" "),a("li",[t._v("é…ç½®è‡ªå®šä¹‰é”™è¯¯é¡µé¢æˆ–è¿”å›ç»Ÿä¸€çš„ JSON å“åº”ã€‚")]),t._v(" "),a("li",[t._v("åˆ©ç”¨ Spring Boot è‡ªå¸¦çš„ "),a("code",[t._v("ErrorController")]),t._v(" æ¥å£æ‰©å±•é»˜è®¤å¼‚å¸¸å¤„ç†é€»è¾‘ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-boot-actuatoræœ‰ä»€ä¹ˆç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-boot-actuatoræœ‰ä»€ä¹ˆç”¨"}},[t._v("#")]),t._v(" ğŸ¯ Spring Boot Actuatoræœ‰ä»€ä¹ˆç”¨ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring Boot Actuatoræä¾›äº†ç”Ÿäº§çº§åˆ«çš„ç›‘æ§å’Œç®¡ç†åŠŸèƒ½ï¼Œæ˜¯è¿ç»´å¿…å¤‡ç»„ä»¶ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒåŠŸèƒ½")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. å¥åº·æ£€æŸ¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("/healthç«¯ç‚¹æ˜¾ç¤ºåº”ç”¨å¥åº·çŠ¶æ€")]),t._v(" "),a("li",[t._v("æ”¯æŒè‡ªå®šä¹‰å¥åº·æŒ‡ç¤ºå™¨")]),t._v(" "),a("li",[t._v("å¯é›†æˆæ•°æ®åº“ã€Redisç­‰ç»„ä»¶æ£€æŸ¥")])]),t._v(" "),a("p",[a("strong",[t._v("2. æŒ‡æ ‡ç›‘æ§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("/metricsç«¯ç‚¹æä¾›JVMã€HTTPç­‰æŒ‡æ ‡")]),t._v(" "),a("li",[t._v("é›†æˆMicrometeræŒ‡æ ‡åº“")]),t._v(" "),a("li",[t._v("æ”¯æŒPrometheusã€InfluxDBç­‰ç›‘æ§ç³»ç»Ÿ")])]),t._v(" "),a("p",[a("strong",[t._v("3. åº”ç”¨ä¿¡æ¯")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("/infoç«¯ç‚¹æ˜¾ç¤ºåº”ç”¨ç‰ˆæœ¬ã€Gitä¿¡æ¯")]),t._v(" "),a("li",[t._v("/envç«¯ç‚¹æ˜¾ç¤ºç¯å¢ƒå˜é‡å’Œé…ç½®")]),t._v(" "),a("li",[t._v("/configpropsæ˜¾ç¤ºé…ç½®å±æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("4. è¿è¡Œæ—¶ç®¡ç†")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("/shutdownç«¯ç‚¹ä¼˜é›…å…³é—­åº”ç”¨")]),t._v(" "),a("li",[t._v("/loggersç«¯ç‚¹åŠ¨æ€ä¿®æ”¹æ—¥å¿—çº§åˆ«")]),t._v(" "),a("li",[t._v("/threaddumpè·å–çº¿ç¨‹è½¬å‚¨")])]),t._v(" "),a("p",[a("strong",[t._v("å¸¸ç”¨ç«¯ç‚¹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("/health - å¥åº·æ£€æŸ¥")]),t._v(" "),a("li",[t._v("/metrics - åº”ç”¨æŒ‡æ ‡")]),t._v(" "),a("li",[t._v("/info - åº”ç”¨ä¿¡æ¯")]),t._v(" "),a("li",[t._v("/env - ç¯å¢ƒå˜é‡")]),t._v(" "),a("li",[t._v("/loggers - æ—¥å¿—é…ç½®")]),t._v(" "),a("li",[t._v("/heapdump - å †è½¬å‚¨")]),t._v(" "),a("li",[t._v("/threaddump - çº¿ç¨‹è½¬å‚¨")]),t._v(" "),a("li",[t._v("/shutdown - å…³é—­åº”ç”¨")])]),t._v(" "),a("p",[a("strong",[t._v("å®‰å…¨é…ç½®")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é»˜è®¤æƒ…å†µä¸‹å¤§éƒ¨åˆ†ç«¯ç‚¹éœ€è¦è®¤è¯")]),t._v(" "),a("li",[t._v("å¯é€šè¿‡management.endpoints.web.exposure.includeé…ç½®æš´éœ²ç«¯ç‚¹")]),t._v(" "),a("li",[t._v('å»ºè®®ç”Ÿäº§ç¯å¢ƒé…ç½®å®‰å…¨è®¿é—®æ§åˆ¶"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. æ·»åŠ Actuatorä¾èµ–")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-actuator</artifactId>\n</dependency>\n*/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. Actuatoré…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// application.yml")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: health,metrics,info,env\n      base-path: /actuator\n  endpoint:\n    health:\n      show-details: always\n    shutdown:\n      enabled: true\n  server:\n    port: 8081  # ç®¡ç†ç«¯å£ä¸åº”ç”¨ç«¯å£åˆ†ç¦»\n    \ninfo:\n  app:\n    name: @project.name@\n    version: @project.version@\n    description: Demo Application\n*/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. è‡ªå®šä¹‰å¥åº·æ£€æŸ¥")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CustomHealthIndicator")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HealthIndicator")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Health")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("health")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰å¥åº·æ£€æŸ¥é€»è¾‘")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" isHealthy "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkExternalService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isHealthy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Health")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("up")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withDetail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"status"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡æ­£å¸¸"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withDetail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"timestamp"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Health")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("down")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withDetail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"status"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å¤–éƒ¨æœåŠ¡ä¸å¯ç”¨"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withDetail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¿æ¥è¶…æ—¶"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkExternalService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ£€æŸ¥å¤–éƒ¨æœåŠ¡çŠ¶æ€")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Math")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. è‡ªå®šä¹‰æŒ‡æ ‡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MetricsController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),t._v(" requestCounter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Timer")]),t._v(" requestTimer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MetricsController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MeterRegistry")]),t._v(" meterRegistry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requestCounter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http_requests_total"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Total HTTP requests"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tag")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"method"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GET"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("meterRegistry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("requestTimer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Timer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http_request_duration"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HTTP request duration"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("meterRegistry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" requestTimer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("recordCallable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            requestCounter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¨¡æ‹Ÿä¸šåŠ¡é€»è¾‘")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("interrupt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ•°æ®è¿”å›æˆåŠŸ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5. å®‰å…¨é…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ActuatorSecurityConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityFilterChain")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("actuatorSecurityFilterChain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpSecurity")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" http\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestMatcher")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EndpointRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toAnyEndpoint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authorizeHttpRequests")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("authz "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" authz\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestMatchers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EndpointRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"health"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("permitAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("anyRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasRole")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ADMIN"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("httpBasic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Customizer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withDefaults")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 6. ç›‘æ§é›†æˆç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Prometheusé…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\nmanagement:\n  metrics:\n    export:\n      prometheus:\n        enabled: true\n  endpoints:\n    web:\n      exposure:\n        include: prometheus\n*/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¿é—®ç›‘æ§ç«¯ç‚¹ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\ncurl http://localhost:8080/actuator/health\ncurl http://localhost:8080/actuator/metrics\ncurl http://localhost:8080/actuator/info\ncurl http://localhost:8080/actuator/env\n*/")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯spring-boot-æ ¸å¿ƒé…ç½®æ–‡ä»¶æ˜¯ä»€ä¹ˆ-bootstrap-properties-å’Œ-application-properties-æœ‰ä½•åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯spring-boot-æ ¸å¿ƒé…ç½®æ–‡ä»¶æ˜¯ä»€ä¹ˆ-bootstrap-properties-å’Œ-application-properties-æœ‰ä½•åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯spring boot æ ¸å¿ƒé…ç½®æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿbootstrap.properties å’Œ application.properties æœ‰ä½•åŒºåˆ« ?")]),t._v(" "),a("p",[t._v("å•çº¯åš Spring Boot å¼€å‘ï¼Œå¯èƒ½ä¸å¤ªå®¹æ˜“é‡åˆ° bootstrap.properties é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯åœ¨ç»“åˆ Spring Cloud æ—¶ï¼Œè¿™ä¸ªé…ç½®å°±ä¼šç»å¸¸é‡åˆ°äº†ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦åŠ è½½ä¸€äº›è¿œç¨‹é…ç½®æ–‡ä»¶çš„æ—¶ä¾¯ã€‚")]),t._v(" "),a("p",[t._v("spring boot æ ¸å¿ƒçš„ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("bootstrap (. yml æˆ–è€… . properties)ï¼šboostrap ç”±çˆ¶ ApplicationContext åŠ è½½çš„ï¼Œæ¯” applicaton ä¼˜å…ˆåŠ è½½ï¼Œé…ç½®åœ¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡çš„å¼•å¯¼é˜¶æ®µç”Ÿæ•ˆã€‚ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬åœ¨ Spring Cloud Config æˆ–è€… Nacos ä¸­ä¼šç”¨åˆ°å®ƒã€‚ä¸” boostrap é‡Œé¢çš„å±æ€§ä¸èƒ½è¢«è¦†ç›–ï¼›")]),t._v(" "),a("li",[t._v("application (. yml æˆ–è€… . properties)ï¼š ç”± ApplicatonContext åŠ è½½ï¼Œç”¨äº spring boot é¡¹ç›®çš„è‡ªåŠ¨åŒ–é…ç½®ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯spring-boot-çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ª-å®ƒä¸»è¦ç”±å“ªå‡ ä¸ªæ³¨è§£ç»„æˆçš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯spring-boot-çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ª-å®ƒä¸»è¦ç”±å“ªå‡ ä¸ªæ³¨è§£ç»„æˆçš„"}},[t._v("#")]),t._v(" ğŸ¯Spring Boot çš„æ ¸å¿ƒæ³¨è§£æ˜¯å“ªä¸ªï¼Ÿå®ƒä¸»è¦ç”±å“ªå‡ ä¸ªæ³¨è§£ç»„æˆçš„ï¼Ÿ")]),t._v(" "),a("p",[t._v("å¯åŠ¨ç±»ä¸Šé¢çš„æ³¨è§£æ˜¯@SpringBootApplicationï¼Œå®ƒä¹Ÿæ˜¯ Spring Boot çš„æ ¸å¿ƒæ³¨è§£ï¼Œä¸»è¦ç»„åˆåŒ…å«äº†ä»¥ä¸‹ 3 ä¸ªæ³¨è§£ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@SpringBootConfigurationï¼šç»„åˆäº† @Configuration æ³¨è§£ï¼Œå®ç°é…ç½®æ–‡ä»¶çš„åŠŸèƒ½ã€‚")]),t._v(" "),a("li",[t._v("@EnableAutoConfigurationï¼šæ‰“å¼€è‡ªåŠ¨é…ç½®çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å…³é—­æŸä¸ªè‡ªåŠ¨é…ç½®çš„é€‰é¡¹ï¼Œå¦‚å…³é—­æ•°æ®æºè‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼š @SpringBootApplication(exclude = { DataSourceAutoConfiguration.class })ã€‚")]),t._v(" "),a("li",[t._v("@ComponentScanï¼šSpringç»„ä»¶æ‰«æã€‚")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ’¾-äº”ã€æ•°æ®è®¿é—®ä¸äº‹åŠ¡-transactionæ ¸å¿ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’¾-äº”ã€æ•°æ®è®¿é—®ä¸äº‹åŠ¡-transactionæ ¸å¿ƒ"}},[t._v("#")]),t._v(" ğŸ’¾ äº”ã€æ•°æ®è®¿é—®ä¸äº‹åŠ¡ï¼ˆTransactionæ ¸å¿ƒï¼‰")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç†å¿µ")]),t._v("ï¼šSpringæä¾›ç»Ÿä¸€çš„äº‹åŠ¡ç®¡ç†æŠ½è±¡ï¼Œæ”¯æŒå£°æ˜å¼äº‹åŠ¡ï¼Œç®€åŒ–æ•°æ®è®¿é—®å±‚å¼€å‘ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-springäº‹åŠ¡ç®¡ç†æœºåˆ¶æ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springäº‹åŠ¡ç®¡ç†æœºåˆ¶æ˜¯ä»€ä¹ˆ"}},[t._v("#")]),t._v(" ğŸ¯ Springäº‹åŠ¡ç®¡ç†æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("p",[t._v("ä½œä¸ºä¼ä¸šçº§åº”ç”¨ç¨‹åºæ¡†æ¶,ï¼ŒSpring åœ¨ä¸åŒçš„äº‹åŠ¡ç®¡ç† API ä¹‹ä¸Šå®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œè€Œåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜ä¸å¿…äº†è§£åº•å±‚çš„äº‹åŠ¡ç®¡ç† APIï¼Œå°±å¯ä»¥ä½¿ç”¨ Spring çš„äº‹åŠ¡ç®¡ç†æœºåˆ¶")]),t._v(" "),a("p",[t._v("Spring æ—¢æ”¯æŒ"),a("strong",[t._v("ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†")]),t._v("ï¼Œä¹Ÿæ”¯æŒ"),a("strong",[t._v("å£°æ˜å¼çš„äº‹åŠ¡ç®¡ç†")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼šå°†äº‹åŠ¡ç®¡ç†ä»£ç åµŒå…¥åˆ°ä¸šåŠ¡æ–¹æ³•ä¸­æ¥æ§åˆ¶äº‹åŠ¡çš„æäº¤å’Œå›æ»šï¼Œåœ¨ç¼–ç¨‹å¼ç®¡ç†äº‹åŠ¡æ—¶ï¼Œå¿…é¡»åœ¨æ¯ä¸ªäº‹åŠ¡æ“ä½œä¸­åŒ…å«é¢å¤–çš„äº‹åŠ¡ç®¡ç†ä»£ç ï¼Œå±äºç¡¬ç¼–ç ")]),t._v(" "),a("ul",[a("li",[t._v("é€šè¿‡TransactionTemplateæˆ–PlatformTransactionManageræ‰‹åŠ¨ç®¡ç†")]),t._v(" "),a("li",[t._v("ä»£ç ä¾µå…¥æ€§å¼ºï¼Œä½†æ§åˆ¶ç²¾ç¡®")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºå¤æ‚çš„äº‹åŠ¡é€»è¾‘")])])]),t._v(" "),a("li",[a("p",[t._v("å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹æ¯”ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†æ›´å¥½ç”¨ã€‚å®ƒå°†äº‹åŠ¡ç®¡ç†ä»£ç ä»ä¸šåŠ¡æ–¹æ³•ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»¥å£°æ˜çš„æ–¹å¼æ¥å®ç°äº‹åŠ¡ç®¡ç†ã€‚äº‹åŠ¡ç®¡ç†ä½œä¸ºä¸€ç§æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œå¯ä»¥é€šè¿‡ AOP æ–¹æ³•æ¨¡å—åŒ–ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("åŸºäºAOPå®ç°ï¼Œä½¿ç”¨@Transactionalæ³¨è§£")]),t._v(" "),a("li",[t._v("ä»£ç æ— ä¾µå…¥ï¼Œé…ç½®ç®€å•")]),t._v(" "),a("li",[t._v("æ˜¯ä¼ä¸šå¼€å‘çš„é¦–é€‰æ–¹æ¡ˆ")])]),t._v(" "),a("p",[t._v("Spring é€šè¿‡ Spring AOP æ¡†æ¶æ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œ"),a("strong",[t._v("å£°æ˜å¼äº‹åŠ¡åˆåˆ†ä¸ºä¸¤ç§ï¼š")])]),t._v(" "),a("ul",[a("li",[t._v("åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡")]),t._v(" "),a("li",[t._v("åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡")])])])]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç»„ä»¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("PlatformTransactionManagerï¼šäº‹åŠ¡ç®¡ç†å™¨æ¥å£")]),t._v(" "),a("li",[t._v("TransactionDefinitionï¼šäº‹åŠ¡å®šä¹‰ä¿¡æ¯")]),t._v(" "),a("li",[t._v("TransactionStatusï¼šäº‹åŠ¡è¿è¡ŒçŠ¶æ€")]),t._v(" "),a("li",[t._v("TransactionTemplateï¼šç¼–ç¨‹å¼äº‹åŠ¡æ¨¡æ¿")])]),t._v(" "),a("p",[a("strong",[t._v("äº‹åŠ¡å±æ€§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä¼ æ’­è¡Œä¸ºï¼šå®šä¹‰äº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶çš„è¡Œä¸º")]),t._v(" "),a("li",[t._v("éš”ç¦»çº§åˆ«ï¼šæ§åˆ¶å¹¶å‘äº‹åŠ¡çš„éš”ç¦»ç¨‹åº¦")]),t._v(" "),a("li",[t._v("è¶…æ—¶æ—¶é—´ï¼šäº‹åŠ¡æ‰§è¡Œçš„æœ€å¤§æ—¶é—´")]),t._v(" "),a("li",[t._v("åªè¯»å±æ€§ï¼šä¼˜åŒ–åªè¯»æ“ä½œçš„æ€§èƒ½")]),t._v(" "),a("li",[t._v('å›æ»šè§„åˆ™ï¼šå®šä¹‰å“ªäº›å¼‚å¸¸å¯¼è‡´å›æ»š"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å£°æ˜å¼äº‹åŠ¡ - é»˜è®¤é…ç½®")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿è¡Œæ—¶å¼‚å¸¸è‡ªåŠ¨å›æ»š")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŒ‡å®šä¼ æ’­è¡Œä¸ºå’Œéš”ç¦»çº§åˆ«")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        propagation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Propagation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REQUIRES_NEW")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        isolation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Isolation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("READ_COMMITTED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        rollbackFor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("processOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        orderRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateInventory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åªè¯»äº‹åŠ¡ä¼˜åŒ–")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("readOnly "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findActiveUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ACTIVE"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-äº‹åŠ¡ç®¡ç†å™¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-äº‹åŠ¡ç®¡ç†å™¨"}},[t._v("#")]),t._v(" ğŸ¯ äº‹åŠ¡ç®¡ç†å™¨")]),t._v(" "),a("p",[t._v("Spring å¹¶ä¸ç›´æ¥ç®¡ç†äº‹åŠ¡ï¼Œè€Œæ˜¯æä¾›äº†å¤šç§äº‹åŠ¡ç®¡ç†å™¨ï¼Œä»–ä»¬å°†äº‹åŠ¡ç®¡ç†çš„èŒè´£å§”æ‰˜ç»™ Hibernate æˆ–è€… JTA ç­‰æŒä¹…åŒ–æœºåˆ¶æ‰€æä¾›çš„ç›¸å…³å¹³å°æ¡†æ¶çš„äº‹åŠ¡æ¥å®ç°ã€‚")]),t._v(" "),a("p",[t._v("Spring äº‹åŠ¡ç®¡ç†å™¨çš„æ¥å£æ˜¯ "),a("code",[t._v("org.springframework.transaction.PlatformTransactionManager")]),t._v("ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£ï¼ŒSpring ä¸ºå„ä¸ªå¹³å°å¦‚ JDBCã€Hibernate ç­‰éƒ½æä¾›äº†å¯¹åº”çš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œä½†æ˜¯å…·ä½“çš„å®ç°å°±æ˜¯å„ä¸ªå¹³å°è‡ªå·±çš„äº‹æƒ…äº†ã€‚")]),t._v(" "),a("h4",{attrs:{id:"spring-ä¸­çš„äº‹åŠ¡ç®¡ç†å™¨çš„ä¸åŒå®ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring-ä¸­çš„äº‹åŠ¡ç®¡ç†å™¨çš„ä¸åŒå®ç°"}},[t._v("#")]),t._v(" Spring ä¸­çš„äº‹åŠ¡ç®¡ç†å™¨çš„ä¸åŒå®ç°")]),t._v(" "),a("p",[a("strong",[t._v("äº‹åŠ¡ç®¡ç†å™¨ä»¥æ™®é€šçš„ Bean å½¢å¼å£°æ˜åœ¨ Spring IOC å®¹å™¨ä¸­")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("åœ¨åº”ç”¨ç¨‹åºä¸­åªéœ€è¦å¤„ç†ä¸€ä¸ªæ•°æ®æº, è€Œä¸”é€šè¿‡ JDBC å­˜å–")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jdbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("datasource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("DataSourceTransactionManager")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("åœ¨ JavaEE åº”ç”¨æœåŠ¡å™¨ä¸Šç”¨ JTA(Java Transaction API) è¿›è¡Œäº‹åŠ¡ç®¡ç†")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("org.springframework.transaction.jta.JtaTransactionManager\n")])])])]),t._v(" "),a("li",[a("p",[t._v("ç”¨ Hibernate æ¡†æ¶å­˜å–æ•°æ®åº“")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("org.springframework.orm.hibernate3.HibernateTransactionManager\n")])])])])]),t._v(" "),a("p",[a("strong",[t._v("äº‹åŠ¡ç®¡ç†å™¨ä»¥æ™®é€šçš„ Bean å½¢å¼å£°æ˜åœ¨ Spring IOC å®¹å™¨ä¸­")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-ç”¨äº‹åŠ¡é€šçŸ¥å£°æ˜å¼åœ°ç®¡ç†äº‹åŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ç”¨äº‹åŠ¡é€šçŸ¥å£°æ˜å¼åœ°ç®¡ç†äº‹åŠ¡"}},[t._v("#")]),t._v(" ğŸ¯ ç”¨äº‹åŠ¡é€šçŸ¥å£°æ˜å¼åœ°ç®¡ç†äº‹åŠ¡")]),t._v(" "),a("ul",[a("li",[t._v("äº‹åŠ¡ç®¡ç†æ˜¯ä¸€ç§æ¨ªåˆ‡å…³æ³¨ç‚¹")]),t._v(" "),a("li",[t._v("ä¸ºäº†åœ¨ Spring 2.x ä¸­å¯ç”¨å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œå¯ä»¥é€šè¿‡ tx Schema ä¸­å®šä¹‰çš„ <tx:advice> å…ƒç´ å£°æ˜äº‹åŠ¡é€šçŸ¥ï¼Œä¸ºæ­¤å¿…é¡»äº‹å…ˆå°†è¿™ä¸ª Schema å®šä¹‰æ·»åŠ åˆ° <beans> æ ¹å…ƒç´ ä¸­å»")]),t._v(" "),a("li",[t._v("å£°æ˜äº†äº‹åŠ¡é€šçŸ¥åï¼Œå°±éœ€è¦å°†å®ƒä¸åˆ‡å…¥ç‚¹å…³è”èµ·æ¥ã€‚ç”±äºäº‹åŠ¡é€šçŸ¥æ˜¯åœ¨ <aop:config> å…ƒç´ å¤–éƒ¨å£°æ˜çš„, æ‰€ä»¥å®ƒæ— æ³•ç›´æ¥ä¸åˆ‡å…¥ç‚¹äº§ç”Ÿå…³è”ï¼Œæ‰€ä»¥å¿…é¡»åœ¨ <aop:config> å…ƒç´ ä¸­å£°æ˜ä¸€ä¸ªå¢å¼ºå™¨é€šçŸ¥ä¸åˆ‡å…¥ç‚¹å…³è”èµ·æ¥.")]),t._v(" "),a("li",[t._v("ç”±äº Spring AOP æ˜¯åŸºäºä»£ç†çš„æ–¹æ³•ï¼Œæ‰€ä»¥åªèƒ½å¢å¼ºå…¬å…±æ–¹æ³•ã€‚å› æ­¤, åªæœ‰å…¬æœ‰æ–¹æ³•æ‰èƒ½é€šè¿‡ Spring AOP è¿›è¡Œäº‹åŠ¡ç®¡ç†ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-ç”¨-transactional-æ³¨è§£å£°æ˜å¼åœ°ç®¡ç†äº‹åŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ç”¨-transactional-æ³¨è§£å£°æ˜å¼åœ°ç®¡ç†äº‹åŠ¡"}},[t._v("#")]),t._v(" ğŸ¯ ç”¨ @Transactional æ³¨è§£å£°æ˜å¼åœ°ç®¡ç†äº‹åŠ¡")]),t._v(" "),a("ul",[a("li",[t._v("é™¤äº†åœ¨å¸¦æœ‰åˆ‡å…¥ç‚¹ï¼Œé€šçŸ¥å’Œå¢å¼ºå™¨çš„ Bean é…ç½®æ–‡ä»¶ä¸­å£°æ˜äº‹åŠ¡å¤–ï¼ŒSpring è¿˜å…è®¸ç®€å•åœ°ç”¨ @Transactional æ³¨è§£æ¥æ ‡æ³¨äº‹åŠ¡æ–¹æ³•")]),t._v(" "),a("li",[t._v("ä¸ºäº†å°†æ–¹æ³•å®šä¹‰ä¸ºæ”¯æŒäº‹åŠ¡å¤„ç†çš„ï¼Œå¯ä»¥ä¸ºæ–¹æ³•æ·»åŠ  @Transactional æ³¨è§£ï¼Œæ ¹æ® Spring AOP åŸºäºä»£ç†æœºåˆ¶ï¼Œ"),a("strong",[t._v("åªèƒ½æ ‡æ³¨å…¬æœ‰æ–¹æ³•.")])]),t._v(" "),a("li",[t._v("å¯ä»¥åœ¨æ–¹æ³•æˆ–è€…ç±»çº§åˆ«ä¸Šæ·»åŠ  @Transactional æ³¨è§£ã€‚å½“æŠŠè¿™ä¸ªæ³¨è§£åº”ç”¨åˆ°ç±»ä¸Šæ—¶ï¼Œ è¿™ä¸ªç±»ä¸­çš„æ‰€æœ‰å…¬å…±æ–¹æ³•éƒ½ä¼šè¢«å®šä¹‰æˆæ”¯æŒäº‹åŠ¡å¤„ç†çš„")]),t._v(" "),a("li",[t._v("åœ¨ Bean é…ç½®æ–‡ä»¶ä¸­åªéœ€è¦å¯ç”¨ "),a("code",[t._v("<tx:annotation-driven>")]),t._v("å…ƒç´ , å¹¶ä¸ºä¹‹æŒ‡å®šäº‹åŠ¡ç®¡ç†å™¨å°±å¯ä»¥äº†")]),t._v(" "),a("li",[t._v("å¦‚æœäº‹åŠ¡å¤„ç†å™¨çš„åç§°æ˜¯ transactionManager, å°±å¯ä»¥åœ¨ "),a("code",[t._v("<tx:annotation-driven>")]),t._v(" å…ƒç´ ä¸­çœç•¥ "),a("code",[t._v("transaction-manager")]),t._v(" å±æ€§ï¼Œè¿™ä¸ªå…ƒç´ ä¼šè‡ªåŠ¨æ£€æµ‹è¯¥åç§°çš„äº‹åŠ¡å¤„ç†å™¨")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-boot-çš„äº‹åŠ¡æ˜¯æ€ä¹ˆå®ç°çš„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-boot-çš„äº‹åŠ¡æ˜¯æ€ä¹ˆå®ç°çš„"}},[t._v("#")]),t._v(" ğŸ¯ Spring Boot çš„äº‹åŠ¡æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ")]),t._v(" "),a("p",[t._v("Spring Boot çš„äº‹åŠ¡ç®¡ç†æ˜¯åŸºäº "),a("strong",[t._v("Spring Framework")]),t._v(" çš„äº‹åŠ¡æŠ½è±¡å®ç°çš„ï¼Œåˆ©ç”¨äº† Spring çš„ "),a("strong",[t._v("å£°æ˜å¼äº‹åŠ¡")]),t._v("ï¼ˆåŸºäº AOPï¼‰å’Œ "),a("strong",[t._v("ç¼–ç¨‹å¼äº‹åŠ¡")]),t._v("ï¼ˆé€šè¿‡ "),a("code",[t._v("PlatformTransactionManager")]),t._v("ï¼‰æ¥è¿›è¡Œäº‹åŠ¡æ§åˆ¶ã€‚åœ¨ Spring Boot ä¸­ï¼Œäº‹åŠ¡çš„å®ç°æœ¬è´¨ä¸Šæ˜¯ Spring æä¾›çš„äº‹åŠ¡ç®¡ç†åŠŸèƒ½çš„è‡ªåŠ¨åŒ–é…ç½®ï¼Œé€šè¿‡è‡ªåŠ¨é…ç½®æœºåˆ¶æ¥ç®€åŒ–äº‹åŠ¡ç®¡ç†çš„é…ç½®ã€‚")]),t._v(" "),a("p",[t._v("ä¸‹é¢æˆ‘ä»¬è¯¦ç»†æ¢è®¨ Spring Boot å¦‚ä½•å®ç°äº‹åŠ¡ç®¡ç†ã€‚")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("Spring äº‹åŠ¡ç®¡ç†çš„æ ¸å¿ƒç»„ä»¶")])]),t._v(" "),a("p",[t._v("Spring çš„äº‹åŠ¡ç®¡ç†ä¸»è¦ä¾èµ–äºä»¥ä¸‹å‡ ä¸ªå…³é”®ç»„ä»¶ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[a("code",[t._v("PlatformTransactionManager")])]),t._v("ï¼šè¿™æ˜¯ Spring æä¾›çš„äº‹åŠ¡ç®¡ç†æ¥å£ï¼Œæ”¯æŒå„ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†ã€‚å¸¸ç”¨çš„å®ç°ç±»åŒ…æ‹¬ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("DataSourceTransactionManager")]),t._v("ï¼šç”¨äº JDBC æ•°æ®æºçš„äº‹åŠ¡ç®¡ç†ã€‚")]),t._v(" "),a("li",[a("code",[t._v("JpaTransactionManager")]),t._v("ï¼šç”¨äº JPAï¼ˆJava Persistence APIï¼‰æŒä¹…åŒ–æ¡†æ¶çš„äº‹åŠ¡ç®¡ç†ã€‚")]),t._v(" "),a("li",[a("code",[t._v("HibernateTransactionManager")]),t._v("ï¼šç”¨äº Hibernate çš„äº‹åŠ¡ç®¡ç†ã€‚")])])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("TransactionDefinition")])]),t._v("ï¼šå®šä¹‰äº†äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€éš”ç¦»çº§åˆ«ã€å›æ»šè§„åˆ™ç­‰äº‹åŠ¡å±æ€§ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("TransactionStatus")])]),t._v("ï¼šä»£è¡¨äº‹åŠ¡çš„çŠ¶æ€ï¼Œè®°å½•äº‹åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼Œå¯ä»¥æäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Spring Boot å¦‚ä½•è‡ªåŠ¨é…ç½®äº‹åŠ¡ç®¡ç†")])]),t._v(" "),a("p",[t._v("Spring Boot ä¼šè‡ªåŠ¨æ ¹æ®é¡¹ç›®ä¸­åŒ…å«çš„åº“æ¥é…ç½®åˆé€‚çš„äº‹åŠ¡ç®¡ç†å™¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯ "),a("strong",[t._v("JPA")]),t._v("ï¼ˆé€šè¿‡ "),a("code",[t._v("spring-boot-starter-data-jpa")]),t._v("ï¼‰ï¼ŒSpring Boot ä¼šè‡ªåŠ¨é…ç½® "),a("code",[t._v("JpaTransactionManager")]),t._v("ï¼›å¦‚æœä½¿ç”¨çš„æ˜¯ "),a("strong",[t._v("JDBC")]),t._v("ï¼Œåˆ™ä¼šè‡ªåŠ¨é…ç½® "),a("code",[t._v("DataSourceTransactionManager")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("Spring Boot çš„è‡ªåŠ¨é…ç½®åŸºäº "),a("strong",[t._v("Spring Framework")]),t._v(" çš„ "),a("code",[t._v("@EnableTransactionManagement")]),t._v(" å’Œ "),a("strong",[t._v("AOP")]),t._v("ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æœºåˆ¶ã€‚")])])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("è‡ªåŠ¨é…ç½®äº‹åŠ¡ç®¡ç†å™¨")])]),t._v(" "),a("p",[t._v("Spring Boot ä¼šæ ¹æ® "),a("code",[t._v("application.properties")]),t._v(" æˆ– "),a("code",[t._v("application.yml")]),t._v(" ä¸­çš„é…ç½®è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ "),a("code",[t._v("PlatformTransactionManager")]),t._v("ï¼Œå¹¶ä¸”ä¸ºä½ é…ç½®ä¸€ä¸ª "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£æ‰€éœ€çš„ä»£ç†ã€‚")]),t._v(" "),a("p",[t._v("ä¾‹å¦‚ï¼Œå¦‚æœä½ ä½¿ç”¨äº† JPA å’Œ Spring Data JPAï¼ŒSpring Boot ä¼šè‡ªåŠ¨é…ç½® "),a("code",[t._v("JpaTransactionManager")]),t._v("ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableTransactionManagement")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSourceConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®äº‹åŠ¡ç®¡ç†å™¨")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlatformTransactionManager")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transactionManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EntityManagerFactory")]),t._v(" entityManagerFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JpaTransactionManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entityManagerFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Spring Boot ä¼šæ ¹æ®è‡ªåŠ¨é…ç½®ä¸ºæˆ‘ä»¬ç”Ÿæˆè¿™ä¸ª "),a("code",[t._v("transactionManager")]),t._v("ï¼Œä»è€Œç®€åŒ–äº†é…ç½®è¿‡ç¨‹ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("äº‹åŠ¡ä»£ç†å’Œ AOP")])]),t._v(" "),a("p",[t._v("Spring Boot çš„äº‹åŠ¡ç®¡ç†åŸºäº "),a("strong",[t._v("AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰")]),t._v(" å®ç°çš„ã€‚å½“ä½ åœ¨æ–¹æ³•ä¸Šä½¿ç”¨ "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£æ—¶ï¼ŒSpring ä¼šåœ¨åº•å±‚åˆ›å»ºä¸€ä¸ªä»£ç†ï¼Œè¿™ä¸ªä»£ç†ä¼šæ‹¦æˆªæ–¹æ³•çš„è°ƒç”¨ï¼Œå¹¶åœ¨æ–¹æ³•æ‰§è¡Œå‰åæ‰§è¡Œäº‹åŠ¡ç›¸å…³çš„æ“ä½œï¼ˆå¦‚å¼€å¯ã€æäº¤ã€å›æ»šäº‹åŠ¡ï¼‰ã€‚")]),t._v(" "),a("p",[t._v("å…·ä½“æ¥è¯´ï¼ŒSpring é€šè¿‡ "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£åˆ›å»ºçš„ä»£ç†ç±»ä¼šé€šè¿‡ "),a("strong",[t._v("åŠ¨æ€ä»£ç†ï¼ˆJDK åŠ¨æ€ä»£ç†æˆ– CGLIB ä»£ç†ï¼‰")]),t._v(" æ¥æ‹¦æˆªç›®æ ‡æ–¹æ³•çš„è°ƒç”¨ï¼Œæ‰§è¡Œäº‹åŠ¡ç®¡ç†é€»è¾‘ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œä»£ç†ä¼šå…ˆå¼€å¯äº‹åŠ¡ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("åœ¨æ–¹æ³•æ‰§è¡Œåï¼Œä»£ç†ä¼šæ ¹æ®æ–¹æ³•æ‰§è¡Œçš„ç»“æœæ¥å†³å®šæ˜¯æäº¤äº‹åŠ¡è¿˜æ˜¯å›æ»šäº‹åŠ¡ï¼ˆå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼‰ã€‚")])])])])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("strong",[t._v("Spring Boot äº‹åŠ¡ç®¡ç†çš„å·¥ä½œåŸç†")])])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("å£°æ˜å¼äº‹åŠ¡ï¼ˆåŸºäº AOPï¼‰")])]),t._v(" "),a("p",[t._v("Spring Boot é»˜è®¤ä½¿ç”¨å£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚è¿™æ˜¯é€šè¿‡ "),a("strong",[a("code",[t._v("@Transactional")])]),t._v(" æ³¨è§£å®ç°çš„ã€‚Spring Boot çš„äº‹åŠ¡ç®¡ç†æ˜¯é€šè¿‡ AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æŠ€æœ¯æ¥åŠ¨æ€å¤„ç†äº‹åŠ¡çš„ã€‚")]),t._v(" "),a("p",[t._v("å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("æ–¹æ³•æ‰§è¡Œä¹‹å‰")]),t._v("ï¼šä»£ç†å¯¹è±¡ä¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰è°ƒç”¨ "),a("code",[t._v("PlatformTransactionManager")]),t._v(" çš„ "),a("code",[t._v("begin()")]),t._v(" æ–¹æ³•ï¼Œå¼€å¯äº‹åŠ¡ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("æ–¹æ³•æ‰§è¡Œä¹‹å")]),t._v("ï¼šæ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œä»£ç†å¯¹è±¡ä¼šæ ¹æ®æ–¹æ³•çš„è¿”å›å€¼å’ŒæŠ›å‡ºçš„å¼‚å¸¸æ¥åˆ¤æ–­æ˜¯æäº¤äº‹åŠ¡è¿˜æ˜¯å›æ»šäº‹åŠ¡ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("å¦‚æœæ–¹æ³•æ­£å¸¸æ‰§è¡Œå®Œæˆï¼Œäº‹åŠ¡ä¼šè¢«æäº¤ï¼ˆ"),a("code",[t._v("commit()")]),t._v("ï¼‰ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("å¦‚æœæ–¹æ³•æŠ›å‡º "),a("code",[t._v("RuntimeException")]),t._v(" æˆ–å…¶ä»–é…ç½®çš„å¼‚å¸¸ç±»å‹ï¼Œäº‹åŠ¡ä¼šè¢«å›æ»šï¼ˆ"),a("code",[t._v("rollback()")]),t._v("ï¼‰ã€‚")])])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºå’Œéš”ç¦»çº§åˆ«")])]),t._v(" "),a("p",[t._v("Spring äº‹åŠ¡è¿˜å¯ä»¥é€šè¿‡é…ç½® "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£çš„å±æ€§æ¥æŒ‡å®šäº‹åŠ¡çš„ "),a("strong",[t._v("ä¼ æ’­è¡Œä¸º")]),t._v(" å’Œ "),a("strong",[t._v("éš”ç¦»çº§åˆ«")]),t._v("ï¼Œè¿™ä¹Ÿæ˜¯ Spring äº‹åŠ¡ç®¡ç†çš„ä¸€å¤§ç‰¹ç‚¹ã€‚")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("ä¼ æ’­è¡Œä¸ºï¼ˆPropagationï¼‰")]),t._v("ï¼šæŒ‡å®šä¸€ä¸ªæ–¹æ³•å¦‚ä½•å‚ä¸å½“å‰äº‹åŠ¡çš„ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("REQUIRED")]),t._v("ï¼ˆé»˜è®¤ï¼‰ï¼šå¦‚æœå½“å‰æ–¹æ³•æœ‰äº‹åŠ¡ï¼ŒåŠ å…¥å½“å‰äº‹åŠ¡ï¼›å¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚")]),t._v(" "),a("li",[a("code",[t._v("REQUIRES_NEW")]),t._v("ï¼šæ€»æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼ŒæŒ‚èµ·å½“å‰äº‹åŠ¡ã€‚")]),t._v(" "),a("li",[a("code",[t._v("NESTED")]),t._v("ï¼šåœ¨å½“å‰äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œä½†æ”¯æŒäº‹åŠ¡åµŒå¥—ã€‚")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("éš”ç¦»çº§åˆ«ï¼ˆIsolationï¼‰")]),t._v("ï¼šæ§åˆ¶äº‹åŠ¡ä¹‹é—´çš„éš”ç¦»ç¨‹åº¦ã€‚ä¾‹å¦‚ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("READ_COMMITTED")]),t._v("ï¼šç¡®ä¿è¯»å–çš„æ•°æ®æ˜¯å·²æäº¤çš„æ•°æ®ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("READ_UNCOMMITTED")]),t._v("ï¼šå…è®¸è¯»å–æœªæäº¤çš„æ•°æ®ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("SERIALIZABLE")]),t._v("ï¼šæœ€ä¸¥æ ¼çš„éš”ç¦»çº§åˆ«ï¼Œä¿è¯äº‹åŠ¡å®Œå…¨éš”ç¦»ï¼Œé¿å…å¹¶å‘é—®é¢˜ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("propagation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Propagation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REQUIRES_NEW")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isolation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Isolation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("READ_COMMITTED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¯¥æ–¹æ³•ä¼šå¼€å¯æ–°çš„äº‹åŠ¡å¹¶è®¾ç½®éš”ç¦»çº§åˆ«")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("å›æ»šè§„åˆ™")])]),t._v(" "),a("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring çš„äº‹åŠ¡ç®¡ç†ä¼šåœ¨å‘ç”Ÿ "),a("strong",[t._v("è¿è¡Œæ—¶å¼‚å¸¸")]),t._v("ï¼ˆ"),a("code",[t._v("RuntimeException")]),t._v("ï¼‰æˆ– "),a("strong",[t._v("Error")]),t._v(" æ—¶è¿›è¡Œå›æ»šã€‚å¦‚æœæŠ›å‡ºçš„æ˜¯ "),a("strong",[t._v("æ£€æŸ¥å‹å¼‚å¸¸")]),t._v("ï¼ˆ"),a("code",[t._v("CheckedException")]),t._v("ï¼‰ï¼Œåˆ™é»˜è®¤ä¸ä¼šå›æ»šï¼Œä½†å¯ä»¥é€šè¿‡ "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£çš„ "),a("code",[t._v("rollbackFor")]),t._v(" å±æ€§æ¥ä¿®æ”¹è¿™ä¸€è¡Œä¸ºã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rollbackFor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå¦‚æœæŠ›å‡º Exception ç±»å‹çš„å¼‚å¸¸ï¼Œäº‹åŠ¡ä¼šå›æ»š")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[a("strong",[t._v("ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†")])]),t._v(" "),a("p",[t._v("é™¤äº†å£°æ˜å¼äº‹åŠ¡ï¼ˆé€šè¿‡ "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£ï¼‰ï¼ŒSpring è¿˜æ”¯æŒç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ã€‚ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†é€šå¸¸ç”¨äºå¯¹äº‹åŠ¡è¿›è¡Œæ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶ã€‚Spring æä¾›äº† "),a("code",[t._v("PlatformTransactionManager")]),t._v(" æ¥å£æ¥è¿›è¡Œç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œæœ€å¸¸ç”¨çš„å®ç°æ˜¯ "),a("code",[t._v("DataSourceTransactionManager")]),t._v(" å’Œ "),a("code",[t._v("JpaTransactionManager")]),t._v("ã€‚")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlatformTransactionManager")]),t._v(" transactionManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionDefinition")]),t._v(" definition "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultTransactionDefinition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionStatus")]),t._v(" status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" transactionManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTransaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("definition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰§è¡Œä¸šåŠ¡é€»è¾‘")]),t._v("\n        transactionManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        transactionManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rollback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("äº‹åŠ¡ç®¡ç†çš„ä¼˜ç‚¹å’Œç‰¹ç‚¹")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("ç®€åŒ–äº†é…ç½®")]),t._v("ï¼šSpring Boot è‡ªåŠ¨æ ¹æ®ä½¿ç”¨çš„æŒä¹…åŒ–æ¡†æ¶é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼Œå‡å°‘äº†æ‰‹åŠ¨é…ç½®çš„å·¥ä½œé‡ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("åŸºäº AOP")]),t._v("ï¼šå£°æ˜å¼äº‹åŠ¡ç®¡ç†ä½¿ç”¨ AOP æŠ€æœ¯åŠ¨æ€ä»£ç†ï¼Œæ‹¦æˆªæ–¹æ³•è°ƒç”¨ï¼Œå®ç°äº‹åŠ¡çš„è‡ªåŠ¨æ§åˆ¶ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("çµæ´»çš„ä¼ æ’­è¡Œä¸ºå’Œéš”ç¦»çº§åˆ«")]),t._v("ï¼šSpring æä¾›äº†å¤šç§ä¼ æ’­è¡Œä¸ºå’Œéš”ç¦»çº§åˆ«ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€æ±‚çµæ´»é…ç½®ã€‚")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("äº‹åŠ¡å›æ»š")]),t._v("ï¼šé€šè¿‡ "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£ï¼ŒSpring å¯ä»¥è‡ªåŠ¨æ ¹æ®å¼‚å¸¸ç±»å‹å†³å®šæ˜¯å¦å›æ»šäº‹åŠ¡ï¼Œæ”¯æŒè‡ªå®šä¹‰å›æ»šè§„åˆ™ã€‚")])])])])]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("Spring Boot çš„äº‹åŠ¡ç®¡ç†æ˜¯åŸºäº Spring æ¡†æ¶çš„äº‹åŠ¡æŠ½è±¡å®ç°çš„")]),t._v("ã€‚Spring Boot è‡ªåŠ¨é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼Œå…·ä½“äº‹åŠ¡ç®¡ç†å™¨ï¼ˆå¦‚ "),a("code",[t._v("JpaTransactionManager")]),t._v(" æˆ– "),a("code",[t._v("DataSourceTransactionManager")]),t._v("ï¼‰ä¼šæ ¹æ®é¡¹ç›®ä¸­ä½¿ç”¨çš„æŒä¹…åŒ–æ¡†æ¶è‡ªåŠ¨é€‰æ‹©ã€‚äº‹åŠ¡ç®¡ç†ä¸»è¦é€šè¿‡ "),a("strong",[t._v("å£°æ˜å¼äº‹åŠ¡")]),t._v(" å’Œ "),a("strong",[t._v("ç¼–ç¨‹å¼äº‹åŠ¡")]),t._v(" æ¥å®ç°ã€‚")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å£°æ˜å¼äº‹åŠ¡")]),t._v("ï¼šé€šè¿‡ "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£æ¥ç®¡ç†äº‹åŠ¡ï¼ŒSpring ä¼šé€šè¿‡ AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æŠ€æœ¯ï¼Œæ‹¦æˆªæ ‡æ³¨äº† "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£çš„æ–¹æ³•ï¼Œè‡ªåŠ¨å¤„ç†äº‹åŠ¡çš„å¼€å§‹ã€æäº¤å’Œå›æ»šã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ç¼–ç¨‹å¼äº‹åŠ¡")]),t._v("ï¼šé€šè¿‡ "),a("code",[t._v("PlatformTransactionManager")]),t._v(" å’Œ "),a("code",[t._v("TransactionStatus")]),t._v(" æ¥æ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡çš„æäº¤å’Œå›æ»šï¼Œé€‚ç”¨äºæ›´åŠ çµæ´»çš„åœºæ™¯ã€‚")])]),t._v(" "),a("p",[t._v("Spring Boot é»˜è®¤æ”¯æŒå¸¸è§çš„ä¼ æ’­è¡Œä¸ºï¼ˆå¦‚ "),a("code",[t._v("REQUIRED")]),t._v("ã€"),a("code",[t._v("REQUIRES_NEW")]),t._v("ï¼‰å’Œéš”ç¦»çº§åˆ«ï¼ˆå¦‚ "),a("code",[t._v("READ_COMMITTED")]),t._v("ã€"),a("code",[t._v("SERIALIZABLE")]),t._v("ï¼‰ï¼Œå¹¶å…è®¸è‡ªå®šä¹‰äº‹åŠ¡å›æ»šè§„åˆ™ï¼ˆé»˜è®¤å›æ»š "),a("code",[t._v("RuntimeException")]),t._v(" å’Œ "),a("code",[t._v("Error")]),t._v("ï¼‰ã€‚è¿™äº›ç‰¹æ€§ä½¿å¾— Spring Boot çš„äº‹åŠ¡ç®¡ç†æ—¢çµæ´»åˆé«˜æ•ˆã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-springäº‹åŠ¡ä¼ æ’­è¡Œä¸ºæœ‰å“ªäº›"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springäº‹åŠ¡ä¼ æ’­è¡Œä¸ºæœ‰å“ªäº›"}},[t._v("#")]),t._v(" ğŸ¯ Springäº‹åŠ¡ä¼ æ’­è¡Œä¸ºæœ‰å“ªäº›ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Springå®šä¹‰äº†7ç§äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼Œæ§åˆ¶äº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶çš„äº‹åŠ¡è¾¹ç•Œï¼š')]),t._v(" "),a("p",[a("strong",[t._v("æ”¯æŒå½“å‰äº‹åŠ¡")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("REQUIREDï¼ˆé»˜è®¤ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡æœ‰å°±æ–°å»º")]),t._v(" "),a("li",[t._v("æœ€å¸¸ç”¨çš„ä¼ æ’­è¡Œä¸º")])]),t._v(" "),a("p",[a("strong",[t._v("SUPPORTS")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡æœ‰å°±ä»¥éäº‹åŠ¡æ‰§è¡Œ")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºæŸ¥è¯¢æ–¹æ³•")])]),t._v(" "),a("p",[a("strong",[t._v("MANDATORY")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å¿…é¡»åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œå¦åˆ™æŠ›å¼‚å¸¸")]),t._v(" "),a("li",[t._v("å¼ºåˆ¶è¦æ±‚è°ƒç”¨æ–¹æä¾›äº‹åŠ¡")])]),t._v(" "),a("p",[a("strong",[t._v("ä¸æ”¯æŒå½“å‰äº‹åŠ¡")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("REQUIRES_NEW")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ€»æ˜¯åˆ›å»ºæ–°äº‹åŠ¡ï¼ŒæŒ‚èµ·å½“å‰äº‹åŠ¡")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºç‹¬ç«‹çš„å­äº‹åŠ¡")])]),t._v(" "),a("p",[a("strong",[t._v("NOT_SUPPORTED")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼ŒæŒ‚èµ·å½“å‰äº‹åŠ¡")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºä¸éœ€è¦äº‹åŠ¡çš„æ“ä½œ")])]),t._v(" "),a("p",[a("strong",[t._v("NEVER")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œæœ‰äº‹åŠ¡å°±æŠ›å¼‚å¸¸")]),t._v(" "),a("li",[t._v("å¼ºåˆ¶éäº‹åŠ¡æ‰§è¡Œ")])]),t._v(" "),a("p",[a("strong",[t._v("åµŒå¥—äº‹åŠ¡")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("NESTED")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åµŒå¥—äº‹åŠ¡ï¼ŒåŸºäºä¿å­˜ç‚¹å®ç°")]),t._v(" "),a("li",[t._v('å†…å±‚äº‹åŠ¡å›æ»šä¸å½±å“å¤–å±‚äº‹åŠ¡"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PaymentService")]),t._v(" paymentService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LogService")]),t._v(" logService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("processOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸»äº‹åŠ¡")]),t._v("\n        orderRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// REQUIRES_NEWï¼šç‹¬ç«‹äº‹åŠ¡ï¼Œä¸å—ä¸»äº‹åŠ¡å½±å“")]),t._v("\n        paymentService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("processPayment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// NESTEDï¼šåµŒå¥—äº‹åŠ¡ï¼Œå¯ä»¥ç‹¬ç«‹å›æ»š")]),t._v("\n        logService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PaymentService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("propagation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Propagation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REQUIRES_NEW")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("processPayment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–°çš„ç‹¬ç«‹äº‹åŠ¡")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Payment")]),t._v(" payment "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Payment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        paymentRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("payment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å³ä½¿ä¸»äº‹åŠ¡å›æ»šï¼Œæ”¯ä»˜è®°å½•ä¹Ÿä¼šä¿å­˜")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("  \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LogService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("propagation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Propagation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NESTED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åµŒå¥—äº‹åŠ¡")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderLog")]),t._v(" log "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        logRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœæ—¥å¿—å¤±è´¥ï¼Œåªå›æ»šæ—¥å¿—æ“ä½œ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-springäº‹åŠ¡å¤±æ•ˆçš„å¸¸è§åŸå› æœ‰å“ªäº›"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springäº‹åŠ¡å¤±æ•ˆçš„å¸¸è§åŸå› æœ‰å“ªäº›"}},[t._v("#")]),t._v(" ğŸ¯ Springäº‹åŠ¡å¤±æ•ˆçš„å¸¸è§åŸå› æœ‰å“ªäº›ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Springäº‹åŠ¡å¤±æ•ˆæ˜¯å¸¸è§é—®é¢˜ï¼Œä¸»è¦åŸå› åŒ…æ‹¬ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("AOPä»£ç†å¤±æ•ˆåœºæ™¯")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. æ–¹æ³•ä¸æ˜¯public")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@Transactionalåªèƒ½ä½œç”¨äºpublicæ–¹æ³•")]),t._v(" "),a("li",[t._v("private/protected/é»˜è®¤æ–¹æ³•äº‹åŠ¡ä¸ç”Ÿæ•ˆ")])]),t._v(" "),a("p",[a("strong",[t._v("2. å†…éƒ¨æ–¹æ³•è°ƒç”¨")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŒä¸€ä¸ªç±»å†…éƒ¨æ–¹æ³•è°ƒç”¨ï¼Œä¸ç»è¿‡ä»£ç†")]),t._v(" "),a("li",[t._v("è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡ApplicationContextè·å–ä»£ç†å¯¹è±¡")])]),t._v(" "),a("p",[a("strong",[t._v("3. æ–¹æ³•è¢«finalä¿®é¥°")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("finalæ–¹æ³•æ— æ³•è¢«ä»£ç†é‡å†™")]),t._v(" "),a("li",[t._v("staticæ–¹æ³•åŒæ ·æ— æ³•è¢«ä»£ç†")])]),t._v(" "),a("p",[a("strong",[t._v("å¼‚å¸¸å¤„ç†é—®é¢˜")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("4. å¼‚å¸¸è¢«æ•è·")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("try-catchæ•è·å¼‚å¸¸ä½†ä¸é‡æ–°æŠ›å‡º")]),t._v(" "),a("li",[t._v("äº‹åŠ¡ç®¡ç†å™¨æ„ŸçŸ¥ä¸åˆ°å¼‚å¸¸")])]),t._v(" "),a("p",[a("strong",[t._v("5. å¼‚å¸¸ç±»å‹ä¸åŒ¹é…")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é»˜è®¤åªå›æ»šRuntimeException")]),t._v(" "),a("li",[t._v("æ£€æŸ¥å¼‚å¸¸éœ€è¦æ˜¾å¼é…ç½®rollbackFor")])]),t._v(" "),a("p",[a("strong",[t._v("é…ç½®å’Œç¯å¢ƒé—®é¢˜")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("6. äº‹åŠ¡ç®¡ç†å™¨æœªæ­£ç¡®é…ç½®")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ•°æ®æºä¸äº‹åŠ¡ç®¡ç†å™¨ä¸åŒ¹é…")]),t._v(" "),a("li",[t._v("å¤šæ•°æ®æºé…ç½®é”™è¯¯")])]),t._v(" "),a("p",[a("strong",[t._v("7. ä¼ æ’­è¡Œä¸ºé…ç½®é”™è¯¯")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("NOT_SUPPORTEDã€NEVERç­‰ä¼ æ’­è¡Œä¸º")]),t._v(" "),a("li",[t._v('å¯¼è‡´æ–¹æ³•ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œ"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âŒ é”™è¯¯ï¼šépublicæ–¹æ³•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateUserInternal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âŒ é”™è¯¯ï¼šå†…éƒ¨è°ƒç”¨ä¸ç»è¿‡ä»£ç†")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateUserInternal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// äº‹åŠ¡å¤±æ•ˆ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âŒ é”™è¯¯ï¼šå¼‚å¸¸è¢«æ•è·")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveUserWithCatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æµ‹è¯•å¼‚å¸¸"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼‚å¸¸è¢«æ•è·ï¼Œäº‹åŠ¡ä¸å›æ»š")]),t._v("\n            log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä¿å­˜å¤±è´¥"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âœ… æ­£ç¡®ï¼šé‡æ–°æŠ›å‡ºå¼‚å¸¸")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveUserCorrect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä¿å­˜å¤±è´¥"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é‡æ–°æŠ›å‡ºå¼‚å¸¸")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// âœ… æ­£ç¡®ï¼šæŒ‡å®šå›æ»šå¼‚å¸¸ç±»å‹")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rollbackFor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveUserWithCheckedException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-data-jpaå’Œmybatisçš„åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-data-jpaå’Œmybatisçš„åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ Spring Data JPAå’ŒMyBatisçš„åŒºåˆ«ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring Data JPAå’ŒMyBatisæ˜¯ä¸¤ç§ä¸åŒçš„æ•°æ®è®¿é—®æŠ€æœ¯ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("Spring Data JPA")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŸºäºJPAæ ‡å‡†çš„ORMæ¡†æ¶")]),t._v(" "),a("li",[t._v("çº¦å®šå¤§äºé…ç½®ï¼Œè‡ªåŠ¨ç”ŸæˆSQL")]),t._v(" "),a("li",[t._v("Repositoryæ¥å£è‡ªåŠ¨å®ç°CRUD")]),t._v(" "),a("li",[t._v("é€‚åˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼Œå¯¹è±¡å…³ç³»æ˜ å°„")]),t._v(" "),a("li",[t._v("å­¦ä¹ æˆæœ¬ä½ï¼Œå¼€å‘æ•ˆç‡é«˜")])]),t._v(" "),a("p",[a("strong",[t._v("MyBatis")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŠè‡ªåŠ¨ORMæ¡†æ¶ï¼ŒSQLä¸Javaåˆ†ç¦»")]),t._v(" "),a("li",[t._v("éœ€è¦æ‰‹å†™SQLï¼Œæ§åˆ¶ç²¾ç¡®")]),t._v(" "),a("li",[t._v("æ”¯æŒåŠ¨æ€SQLï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢")]),t._v(" "),a("li",[t._v("é€‚åˆæ•°æ®åº“ä¼˜å…ˆè®¾è®¡")]),t._v(" "),a("li",[t._v("æ€§èƒ½å¯æ§ï¼Œä½†å¼€å‘å·¥ä½œé‡å¤§")])]),t._v(" "),a("p",[a("strong",[t._v("é€‰æ‹©å»ºè®®")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç®€å•CRUDï¼Œå¿«é€Ÿå¼€å‘ï¼šSpring Data JPA")]),t._v(" "),a("li",[t._v("å¤æ‚æŸ¥è¯¢ï¼Œæ€§èƒ½è¦æ±‚é«˜ï¼šMyBatis")]),t._v(" "),a("li",[t._v("å›¢é˜Ÿç†Ÿæ‚‰SQLï¼šMyBatis")]),t._v(" "),a("li",[t._v('å›¢é˜Ÿåå‘å¯¹è±¡æ¨¡å‹ï¼šSpring Data JPA"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Spring Data JPAæ–¹å¼")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Repository")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserRepository")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JpaRepository")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–¹æ³•åè‡ªåŠ¨ç”ŸæˆSQL")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByNameAndAge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰æŸ¥è¯¢")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Query")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SELECT u FROM User u WHERE u.email = ?1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ†é¡µæŸ¥è¯¢")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Page")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByNameContaining")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pageable")]),t._v(" pageable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// MyBatisæ–¹å¼")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Mapper")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserMapper")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SELECT * FROM user WHERE name = #{name} AND age = #{age}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByNameAndAge")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Param")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Param")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"age"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INSERT INTO user(name, email, age) VALUES(#{name}, #{email}, #{age})"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("useGeneratedKeys "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" keyProperty "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// XMLé…ç½®å¤æ‚æŸ¥è¯¢")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findUsersWithConditions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserQueryCondition")]),t._v(" condition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-transactional-ä¸ºä»€ä¹ˆä¸èƒ½ç”¨åœ¨ç§æœ‰æ–¹æ³•ä¸Š"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-transactional-ä¸ºä»€ä¹ˆä¸èƒ½ç”¨åœ¨ç§æœ‰æ–¹æ³•ä¸Š"}},[t._v("#")]),t._v(" ğŸ¯ @Transactional ä¸ºä»€ä¹ˆä¸èƒ½ç”¨åœ¨ç§æœ‰æ–¹æ³•ä¸Šï¼Ÿ")]),t._v(" "),a("p",[a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£æ˜¯ Spring æä¾›çš„ä¸€ç§å£°æ˜å¼äº‹åŠ¡ç®¡ç†æ–¹å¼ï¼Œå®ƒç”¨äºæŒ‡å®šæŸä¸ªæ–¹æ³•åœ¨æ‰§è¡Œæ—¶éœ€è¦è¿›è¡Œäº‹åŠ¡ç®¡ç†ã€‚é€šå¸¸ï¼Œè¿™ä¸ªæ³¨è§£è¢«ç”¨åœ¨å…¬æœ‰ï¼ˆpublicï¼‰æ–¹æ³•ä¸Šï¼ŒåŸå› åŒ…æ‹¬ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ä»£ç†æœºåˆ¶")]),t._v("ï¼šSpring çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†æ˜¯åŸºäº AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰å®ç°çš„ã€‚å½“ä½¿ç”¨ "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£æ—¶ï¼ŒSpring ä¼šä¸ºè¢«æ³¨è§£çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚å¯¹äºéå…¬æœ‰æ–¹æ³•ï¼ŒSpring æ— æ³•åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°åˆ›å»ºä»£ç†ï¼Œå› ä¸ºè¿™äº›æ–¹æ³•ä¸èƒ½è¢«ä»£ç†å¯¹è±¡æ‰€è°ƒç”¨ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("äº‹åŠ¡ä¼ æ’­")]),t._v("ï¼šäº‹åŠ¡çš„ä¼ æ’­ä¾èµ–äºæ–¹æ³•è°ƒç”¨é“¾ã€‚"),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£é€šå¸¸ç”¨äºæœåŠ¡å±‚æˆ–å¯¹å¤–çš„ API æ–¹æ³•ä¸Šï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿åœ¨ä¸šåŠ¡é€»è¾‘çš„å¼€å§‹å¤„å°±å¼€å¯äº‹åŠ¡ï¼Œå¹¶åœ¨ä¸šåŠ¡é€»è¾‘ç»“æŸæ—¶æäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚å¦‚æœå°† "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£ç”¨åœ¨ç§æœ‰æ–¹æ³•ä¸Šï¼Œé‚£ä¹ˆäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼ˆå¦‚ä¼ æ’­çº§åˆ«ã€äº‹åŠ¡çš„ä¿å­˜ç‚¹ç­‰ï¼‰å¯èƒ½ä¸ä¼šæŒ‰é¢„æœŸå·¥ä½œã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ä»£ç è®¾è®¡")]),t._v("ï¼šä»è®¾è®¡çš„è§’åº¦æ¥çœ‹ï¼Œå°† "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£ç”¨åœ¨å…¬æœ‰æ–¹æ³•ä¸Šæ›´ç¬¦åˆä¸šåŠ¡é€»è¾‘çš„å°è£…å’Œåˆ†å±‚ã€‚ç§æœ‰æ–¹æ³•é€šå¸¸è¢«è®¾è®¡ä¸ºè¾…åŠ©æ–¹æ³•ï¼Œä¸åº”è¯¥ç‹¬ç«‹æ‰¿æ‹…äº‹åŠ¡ç®¡ç†çš„è´£ä»»ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("äº‹åŠ¡çš„å¯è§æ€§")]),t._v("ï¼šå°† "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£ç”¨åœ¨å…¬æœ‰æ–¹æ³•ä¸Šå¯ä»¥æ¸…æ™°åœ°è¡¨æ˜äº‹åŠ¡çš„è¾¹ç•Œï¼Œè¿™å¯¹äºç†è§£å’Œç»´æŠ¤ä»£ç éƒ½æ˜¯æœ‰ç›Šçš„ã€‚å¦‚æœç”¨åœ¨ç§æœ‰æ–¹æ³•ä¸Šï¼Œå¯èƒ½ä¼šéšè—äº‹åŠ¡çš„è¾¹ç•Œï¼Œä½¿å¾—å…¶ä»–å¼€å‘è€…éš¾ä»¥ç†è§£äº‹åŠ¡çš„èŒƒå›´ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("äº‹åŠ¡çš„ç²’åº¦")]),t._v("ï¼šäº‹åŠ¡åº”è¯¥åœ¨ä¸šåŠ¡é€»è¾‘çš„é€‚å½“ç²’åº¦ä¸Šè¿›è¡Œç®¡ç†ã€‚é€šå¸¸ï¼Œä¸€ä¸ªä¸šåŠ¡æ“ä½œä¼šè·¨è¶Šå¤šä¸ªæ–¹æ³•è°ƒç”¨ï¼Œå°† "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£ç”¨åœ¨ç§æœ‰æ–¹æ³•ä¸Šå¯èƒ½ä¼šå¯¼è‡´è¿‡ç»†çš„äº‹åŠ¡ç²’åº¦ï¼Œè¿™ä¸åˆ©äºäº‹åŠ¡ç®¡ç†ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("Spring ç‰ˆæœ¬é™åˆ¶")]),t._v("ï¼šåœ¨ Spring 5 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œ"),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£ç¡®å®ä¸èƒ½ç”¨äºéå…¬æœ‰æ–¹æ³•ã€‚ä» Spring 5 å¼€å§‹ï¼Œå¼•å…¥äº†å¯¹éå…¬æœ‰æ–¹æ³•çš„æ”¯æŒï¼Œä½†æ˜¯ä»ç„¶æ¨èå°† "),a("code",[t._v("@Transactional")]),t._v(" æ³¨è§£ç”¨åœ¨å…¬æœ‰æ–¹æ³•ä¸Šã€‚")])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-äº‹åŠ¡ä¼ æ’­å±æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-äº‹åŠ¡ä¼ æ’­å±æ€§"}},[t._v("#")]),t._v(" ğŸ¯ äº‹åŠ¡ä¼ æ’­å±æ€§")]),t._v(" "),a("ul",[a("li",[t._v("å½“äº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œ å¿…é¡»æŒ‡å®šäº‹åŠ¡åº”è¯¥å¦‚ä½•ä¼ æ’­ã€‚ä¾‹å¦‚ï¼šæ–¹æ³•å¯èƒ½ç»§ç»­åœ¨ç°æœ‰äº‹åŠ¡ä¸­è¿è¡Œï¼Œä¹Ÿå¯èƒ½å¼€å¯ä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¹¶åœ¨è‡ªå·±çš„äº‹åŠ¡ä¸­è¿è¡Œ")]),t._v(" "),a("li",[t._v("äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºå¯ä»¥ç”±ä¼ æ’­å±æ€§æŒ‡å®šï¼ŒSpring å®šä¹‰äº† 7  ç§ç±»ä¼ æ’­è¡Œä¸ºï¼š")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("ä¼ æ’­è¡Œä¸º")]),t._v(" "),a("th",[t._v("æ„ä¹‰")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("PROPAGATION_MANDATORY")]),t._v(" "),a("td",[t._v("è¡¨ç¤ºè¯¥æ–¹æ³•å¿…é¡»è¿è¡Œåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡æ­£åœ¨å‘ç”Ÿï¼Œå°†æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸")])]),t._v(" "),a("tr",[a("td",[t._v("PROPAGATION_NESTED")]),t._v(" "),a("td",[t._v("è¡¨ç¤ºå¦‚æœå½“å‰æ­£æœ‰ä¸€ä¸ªäº‹åŠ¡åœ¨è¿›è¡Œä¸­ï¼Œåˆ™è¯¥æ–¹æ³•åº”å½“è¿è¡Œåœ¨ä¸€ä¸ªåµŒå¥—å¼äº‹åŠ¡ä¸­ã€‚è¢«åµŒå¥—çš„äº‹åŠ¡å¯ä»¥ç‹¬ç«‹äºå°è£…äº‹åŠ¡è¿›è¡Œæäº¤æˆ–å›æ»šã€‚å¦‚æœå°è£…äº‹åŠ¡ä¸å­˜åœ¨ï¼Œè¡Œä¸ºå°±åƒPROPAGATION_REQUIRESä¸€æ ·ã€‚")])]),t._v(" "),a("tr",[a("td",[t._v("PROPAGATION_NEVER")]),t._v(" "),a("td",[t._v("è¡¨ç¤ºå½“å‰çš„æ–¹æ³•ä¸åº”è¯¥åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¿è¡Œã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡æ­£åœ¨è¿›è¡Œï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚")])]),t._v(" "),a("tr",[a("td",[t._v("PROPAGATION_NOT_SUPPORTED")]),t._v(" "),a("td",[t._v("è¡¨ç¤ºè¯¥æ–¹æ³•ä¸åº”è¯¥åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¿è¡Œã€‚å¦‚æœä¸€ä¸ªç°æœ‰äº‹åŠ¡æ­£åœ¨è¿›è¡Œä¸­ï¼Œå®ƒå°†åœ¨è¯¥æ–¹æ³•çš„è¿è¡ŒæœŸé—´è¢«æŒ‚èµ·ã€‚")])]),t._v(" "),a("tr",[a("td",[t._v("PROPAGATION_SUPPORTS")]),t._v(" "),a("td",[t._v("è¡¨ç¤ºå½“å‰æ–¹æ³•ä¸éœ€è¦äº‹åŠ¡æ€§ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸€ä¸ªäº‹åŠ¡å·²ç»åœ¨è¿è¡Œçš„è¯ï¼Œå®ƒä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªäº‹åŠ¡é‡Œè¿è¡Œã€‚")])]),t._v(" "),a("tr",[a("td",[t._v("PROPAGATION_REQUIRES_NEW")]),t._v(" "),a("td",[t._v("è¡¨ç¤ºå½“å‰æ–¹æ³•å¿…é¡»åœ¨å®ƒè‡ªå·±çš„äº‹åŠ¡é‡Œè¿è¡Œã€‚ä¸€ä¸ªæ–°çš„äº‹åŠ¡å°†è¢«å¯åŠ¨ï¼Œè€Œä¸”å¦‚æœæœ‰ä¸€ä¸ªç°æœ‰äº‹åŠ¡åœ¨è¿è¡Œçš„è¯ï¼Œåˆ™å°†åœ¨è¿™ä¸ªæ–¹æ³•è¿è¡ŒæœŸé—´è¢«æŒ‚èµ·ã€‚")])]),t._v(" "),a("tr",[a("td",[t._v("PROPAGATION_REQUIRES")]),t._v(" "),a("td",[t._v("è¡¨ç¤ºå½“å‰æ–¹æ³•å¿…é¡»åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¿è¡Œã€‚å¦‚æœä¸€ä¸ªç°æœ‰äº‹åŠ¡æ­£åœ¨è¿›è¡Œä¸­ï¼Œè¯¥æ–¹æ³•å°†åœ¨é‚£ä¸ªäº‹åŠ¡ä¸­è¿è¡Œï¼Œå¦åˆ™å°±è¦å¼€å§‹ä¸€ä¸ªæ–°äº‹åŠ¡ã€‚")])])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-æ”¯æŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-æ”¯æŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«"}},[t._v("#")]),t._v(" ğŸ¯ Spring æ”¯æŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("éš”ç¦»çº§åˆ«")]),t._v(" "),a("th",[t._v("å«ä¹‰")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("ISOLATION_DEFAULT")]),t._v(" "),a("td",[t._v("ä½¿ç”¨åç«¯æ•°æ®åº“é»˜è®¤çš„éš”ç¦»çº§åˆ«ã€‚")])]),t._v(" "),a("tr",[a("td",[t._v("ISOLATION_READ_UNCOMMITTED")]),t._v(" "),a("td",[t._v("å…è®¸è¯»å–å°šæœªæäº¤çš„æ›´æ”¹ã€‚å¯èƒ½å¯¼è‡´è„è¯»ã€å¹»å½±è¯»æˆ–ä¸å¯é‡å¤è¯»ã€‚")])]),t._v(" "),a("tr",[a("td",[t._v("ISOLATION_READ_COMMITTED")]),t._v(" "),a("td",[t._v("å…è®¸ä»å·²ç»æäº¤çš„å¹¶å‘äº‹åŠ¡è¯»å–ã€‚å¯é˜²æ­¢è„è¯»ï¼Œä½†å¹»å½±è¯»å’Œä¸å¯é‡å¤è¯»ä»å¯èƒ½ä¼šå‘ç”Ÿã€‚")])]),t._v(" "),a("tr",[a("td",[t._v("ISOLATION_REPEATABLE_READ")]),t._v(" "),a("td",[t._v("å¯¹ç›¸åŒå­—æ®µçš„å¤šæ¬¡è¯»å–çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œé™¤éæ•°æ®è¢«å½“å‰äº‹åŠ¡æœ¬èº«æ”¹å˜ã€‚å¯é˜²æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»å½±è¯»ä»å¯èƒ½å‘ç”Ÿã€‚")])]),t._v(" "),a("tr",[a("td",[t._v("ISOLATION_SERIALIZABLE")]),t._v(" "),a("td",[t._v("å®Œå…¨æœä»ACIDçš„éš”ç¦»çº§åˆ«ï¼Œç¡®ä¿ä¸å‘ç”Ÿè„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»å½±è¯»ã€‚è¿™åœ¨æ‰€æœ‰éš”ç¦»çº§åˆ«ä¸­ä¹Ÿæ˜¯æœ€æ…¢çš„ï¼Œå› ä¸ºå®ƒé€šå¸¸æ˜¯é€šè¿‡å®Œå…¨é”å®šå½“å‰äº‹åŠ¡æ‰€æ¶‰åŠçš„æ•°æ®è¡¨æ¥å®Œæˆçš„ã€‚")])])])]),t._v(" "),a("p",[t._v("äº‹åŠ¡çš„éš”ç¦»çº§åˆ«è¦å¾—åˆ°åº•å±‚æ•°æ®åº“å¼•æ“çš„æ”¯æŒï¼Œè€Œä¸æ˜¯åº”ç”¨ç¨‹åºæˆ–è€…æ¡†æ¶çš„æ”¯æŒï¼›")]),t._v(" "),a("p",[t._v("Oracle æ”¯æŒçš„ 2 ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŒMysqlæ”¯æŒ 4 ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-è®¾ç½®éš”ç¦»äº‹åŠ¡å±æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è®¾ç½®éš”ç¦»äº‹åŠ¡å±æ€§"}},[t._v("#")]),t._v(" ğŸ¯ è®¾ç½®éš”ç¦»äº‹åŠ¡å±æ€§")]),t._v(" "),a("p",[t._v("ç”¨ @Transactional æ³¨è§£å£°æ˜å¼åœ°ç®¡ç†äº‹åŠ¡æ—¶å¯ä»¥åœ¨ @Transactional çš„ isolation å±æ€§ä¸­è®¾ç½®éš”ç¦»çº§åˆ«")]),t._v(" "),a("p",[t._v("åœ¨ Spring äº‹åŠ¡é€šçŸ¥ä¸­, å¯ä»¥åœ¨ "),a("code",[t._v("<tx:method>")]),t._v(" å…ƒç´ ä¸­æŒ‡å®šéš”ç¦»çº§åˆ«")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-è®¾ç½®å›æ»šäº‹åŠ¡å±æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è®¾ç½®å›æ»šäº‹åŠ¡å±æ€§"}},[t._v("#")]),t._v(" ğŸ¯ è®¾ç½®å›æ»šäº‹åŠ¡å±æ€§")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("é»˜è®¤æƒ…å†µä¸‹åªæœ‰æœªæ£€æŸ¥å¼‚å¸¸(RuntimeExceptionå’ŒErrorç±»å‹çš„å¼‚å¸¸)ä¼šå¯¼è‡´äº‹åŠ¡å›æ»šï¼Œè€Œå—æ£€æŸ¥å¼‚å¸¸ä¸ä¼šã€‚")])]),t._v(" "),a("li",[a("p",[t._v("äº‹åŠ¡çš„å›æ»šè§„åˆ™å¯ä»¥é€šè¿‡ @Transactional æ³¨è§£çš„ rollbackForå’Œ noRollbackForå±æ€§æ¥å®šä¹‰ï¼Œè¿™ä¸¤ä¸ªå±æ€§è¢«å£°æ˜ä¸º Class[] ç±»å‹çš„ï¼Œå› æ­¤å¯ä»¥ä¸ºè¿™ä¸¤ä¸ªå±æ€§æŒ‡å®šå¤šä¸ªå¼‚å¸¸ç±»ã€‚")]),t._v(" "),a("ul",[a("li",[t._v("rollbackForï¼šé‡åˆ°æ—¶å¿…é¡»è¿›è¡Œå›æ»š")]),t._v(" "),a("li",[t._v("noRollbackForï¼š ä¸€ç»„å¼‚å¸¸ç±»ï¼Œé‡åˆ°æ—¶å¿…é¡»ä¸å›æ»š")])])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-è¶…æ—¶å’Œåªè¯»å±æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è¶…æ—¶å’Œåªè¯»å±æ€§"}},[t._v("#")]),t._v(" ğŸ¯ è¶…æ—¶å’Œåªè¯»å±æ€§")]),t._v(" "),a("ul",[a("li",[t._v("ç”±äºäº‹åŠ¡å¯ä»¥åœ¨è¡Œå’Œè¡¨ä¸Šè·å¾—é”ï¼Œ å› æ­¤é•¿äº‹åŠ¡ä¼šå ç”¨èµ„æºï¼Œå¹¶å¯¹æ•´ä½“æ€§èƒ½äº§ç”Ÿå½±å“")]),t._v(" "),a("li",[t._v("å¦‚æœä¸€ä¸ªäº‹ç‰©åªè¯»å–æ•°æ®ä½†ä¸åšä¿®æ”¹ï¼Œæ•°æ®åº“å¼•æ“å¯ä»¥å¯¹è¿™ä¸ªäº‹åŠ¡è¿›è¡Œä¼˜åŒ–")]),t._v(" "),a("li",[t._v("è¶…æ—¶äº‹åŠ¡å±æ€§ï¼šäº‹åŠ¡åœ¨å¼ºåˆ¶å›æ»šä¹‹å‰å¯ä»¥ä¿æŒå¤šä¹…ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢é•¿æœŸè¿è¡Œçš„äº‹åŠ¡å ç”¨èµ„æº")]),t._v(" "),a("li",[t._v("åªè¯»äº‹åŠ¡å±æ€§ï¼šè¡¨ç¤ºè¿™ä¸ªäº‹åŠ¡åªè¯»å–æ•°æ®ä½†ä¸æ›´æ–°æ•°æ®ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©æ•°æ®åº“å¼•æ“ä¼˜åŒ–äº‹åŠ¡")])]),t._v(" "),a("p",[a("strong",[t._v("è®¾ç½®è¶…æ—¶å’Œåªè¯»äº‹åŠ¡å±æ€§")])]),t._v(" "),a("ul",[a("li",[t._v("è¶…æ—¶å’Œåªè¯»å±æ€§å¯ä»¥åœ¨ @Transactional æ³¨è§£ä¸­å®šä¹‰ï¼Œè¶…æ—¶å±æ€§ä»¥ç§’ä¸ºå•ä½æ¥è®¡ç®—")])]),t._v(" "),a("p",[t._v("åˆ—å‡ºä¸¤ç§æ–¹å¼çš„ç¤ºä¾‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("propagation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Propagation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NESTED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isolation "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Isolation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("READ_COMMITTED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" rollbackFor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("advice")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("txAdvice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("transaction-manager")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("txManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- the transactional semantics... --\x3e")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("attributes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- all methods starting with 'get' are read-only --\x3e")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("method")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("get*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("read-only")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("propagation")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("REQUIRES_NEW"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("isolation")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("READ_COMMITTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("timeout")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("30"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("no-rollback-for")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("java.lang.ArithmeticException"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- other methods use the default transaction settings (see below) --\x3e")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("method")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("attributes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("advice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- ensure that the above transactional advice runs for any execution\n        of an operation defined by the FooService interface --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("aop:")]),t._v("config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("aop:")]),t._v("pointcut")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fooServiceOperation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("expression")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("execution(* x.y.service.FooService.*(..))"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("aop:")]),t._v("advisor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("advice-ref")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("txAdvice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("pointcut-ref")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fooServiceOperation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("aop:")]),t._v("config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ”’-å…­ã€spring-securityå®‰å…¨æ¡†æ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”’-å…­ã€spring-securityå®‰å…¨æ¡†æ¶"}},[t._v("#")]),t._v(" ğŸ”’ å…­ã€Spring Securityå®‰å…¨æ¡†æ¶")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç†å¿µ")]),t._v("ï¼šSpring Securityæä¾›å…¨é¢çš„å®‰å…¨è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬è®¤è¯ã€æˆæƒã€æ”»å‡»é˜²æŠ¤ç­‰ä¼ä¸šçº§å®‰å…¨åŠŸèƒ½ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-securityçš„æ ¸å¿ƒæ¦‚å¿µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-securityçš„æ ¸å¿ƒæ¦‚å¿µ"}},[t._v("#")]),t._v(" ğŸ¯ Spring Securityçš„æ ¸å¿ƒæ¦‚å¿µï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring Securityæ˜¯åŸºäºè¿‡æ»¤å™¨é“¾çš„å®‰å…¨æ¡†æ¶ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒæ¦‚å¿µ")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("Authenticationï¼ˆè®¤è¯ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("éªŒè¯ç”¨æˆ·èº«ä»½çš„è¿‡ç¨‹")]),t._v(" "),a("li",[t._v("åŒ…å«ç”¨æˆ·å‡­è¯å’Œæƒé™ä¿¡æ¯")]),t._v(" "),a("li",[t._v("å­˜å‚¨åœ¨SecurityContextä¸­")])]),t._v(" "),a("p",[a("strong",[t._v("Authorizationï¼ˆæˆæƒï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ§åˆ¶ç”¨æˆ·å¯¹èµ„æºçš„è®¿é—®æƒé™")]),t._v(" "),a("li",[t._v("åŸºäºè§’è‰²æˆ–æƒé™è¿›è¡Œè®¿é—®æ§åˆ¶")]),t._v(" "),a("li",[t._v("æ”¯æŒæ–¹æ³•çº§å’ŒURLçº§æˆæƒ")])]),t._v(" "),a("p",[a("strong",[t._v("SecurityContext")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å®‰å…¨ä¸Šä¸‹æ–‡ï¼Œå­˜å‚¨å½“å‰ç”¨æˆ·çš„å®‰å…¨ä¿¡æ¯")]),t._v(" "),a("li",[t._v("é€šè¿‡ThreadLocalå®ç°çº¿ç¨‹éš”ç¦»")]),t._v(" "),a("li",[t._v("SecurityContextHolderæä¾›è®¿é—®æ¥å£")])]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç»„ä»¶")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("AuthenticationManager")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("è®¤è¯ç®¡ç†å™¨ï¼Œå¤„ç†è®¤è¯è¯·æ±‚")]),t._v(" "),a("li",[t._v("é€šå¸¸ä½¿ç”¨ProviderManagerå®ç°")])]),t._v(" "),a("p",[a("strong",[t._v("UserDetailsService")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç”¨æˆ·è¯¦æƒ…æœåŠ¡ï¼ŒåŠ è½½ç”¨æˆ·ä¿¡æ¯")]),t._v(" "),a("li",[t._v("è‡ªå®šä¹‰ç”¨æˆ·æ•°æ®æºçš„å…³é”®æ¥å£")])]),t._v(" "),a("p",[a("strong",[t._v("PasswordEncoder")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å¯†ç ç¼–ç å™¨ï¼Œå¤„ç†å¯†ç åŠ å¯†")]),t._v(" "),a("li",[t._v("æ¨èä½¿ç”¨BCryptPasswordEncoder")])]),t._v(" "),a("p",[a("strong",[t._v("è¿‡æ»¤å™¨é“¾")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("SecurityFilterChainå¤„ç†HTTPè¯·æ±‚")]),t._v(" "),a("li",[t._v('åŒ…å«è®¤è¯ã€æˆæƒã€CSRFé˜²æŠ¤ç­‰è¿‡æ»¤å™¨"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableWebSecurity")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityFilterChain")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filterChain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpSecurity")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authorizeHttpRequests")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("auth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" auth\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestMatchers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/public/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("permitAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestMatchers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/admin/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasRole")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ADMIN"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("anyRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("formLogin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("form "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" form\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loginPage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("defaultSuccessUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dashboard"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("logout "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" logout\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logoutSuccessUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login?logout"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PasswordEncoder")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwordEncoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BCryptPasswordEncoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserDetailsService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("userDetailsService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PasswordEncoder")]),t._v(" encoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserDetails")]),t._v(" admin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("encoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin123"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("roles")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ADMIN"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InMemoryUserDetailsManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-securityå¦‚ä½•å®ç°jwtè®¤è¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-securityå¦‚ä½•å®ç°jwtè®¤è¯"}},[t._v("#")]),t._v(" ğŸ¯ Spring Securityå¦‚ä½•å®ç°JWTè®¤è¯ï¼Ÿ")]),t._v(" "),a("p",[t._v('"JWTè®¤è¯æ˜¯æ— çŠ¶æ€çš„è®¤è¯æ–¹å¼ï¼ŒSpring Securityå¯ä»¥å¾ˆå¥½åœ°é›†æˆï¼š')]),t._v(" "),a("p",[a("strong",[t._v("JWTè®¤è¯æµç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("ç”¨æˆ·ç™»å½•ï¼ŒéªŒè¯ç”¨æˆ·åå¯†ç ")]),t._v(" "),a("li",[t._v("ç”ŸæˆJWT Tokenè¿”å›ç»™å®¢æˆ·ç«¯")]),t._v(" "),a("li",[t._v("å®¢æˆ·ç«¯åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦Token")]),t._v(" "),a("li",[t._v("æœåŠ¡å™¨éªŒè¯Tokenå¹¶æå–ç”¨æˆ·ä¿¡æ¯")]),t._v(" "),a("li",[t._v("åŸºäºç”¨æˆ·ä¿¡æ¯è¿›è¡Œæˆæƒå†³ç­–")])]),t._v(" "),a("p",[a("strong",[t._v("å®ç°è¦ç‚¹")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("JWTå·¥å…·ç±»")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç”ŸæˆTokenï¼šåŒ…å«ç”¨æˆ·ä¿¡æ¯å’Œè¿‡æœŸæ—¶é—´")]),t._v(" "),a("li",[t._v("éªŒè¯Tokenï¼šæ£€æŸ¥ç­¾åå’Œè¿‡æœŸçŠ¶æ€")]),t._v(" "),a("li",[t._v("è§£æTokenï¼šæå–ç”¨æˆ·èº«ä»½ä¿¡æ¯")])]),t._v(" "),a("p",[a("strong",[t._v("JWTè¿‡æ»¤å™¨")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç»§æ‰¿OncePerRequestFilter")]),t._v(" "),a("li",[t._v("ä»è¯·æ±‚å¤´æå–Token")]),t._v(" "),a("li",[t._v("éªŒè¯Tokenå¹¶è®¾ç½®SecurityContext")])]),t._v(" "),a("p",[a("strong",[t._v("è®¤è¯ç«¯ç‚¹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å¤„ç†ç™»å½•è¯·æ±‚")]),t._v(" "),a("li",[t._v("éªŒè¯ç”¨æˆ·å‡­è¯")]),t._v(" "),a("li",[t._v("ç”Ÿæˆå¹¶è¿”å›JWT Token")])]),t._v(" "),a("p",[a("strong",[t._v("ä¼˜åŠ¿")]),t._v("ï¼šæ— çŠ¶æ€ã€è·¨åŸŸå‹å¥½ã€æ˜“äºæ‰©å±•\n"),a("strong",[t._v("æ³¨æ„")]),t._v('ï¼šTokenå®‰å…¨å­˜å‚¨ã€åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´"')]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticationManager")]),t._v(" authManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtUtil")]),t._v(" jwtUtil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoginRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Authentication")]),t._v(" auth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" authManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UsernamePasswordAuthenticationToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserDetails")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserDetails")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPrincipal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jwtUtil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtAuthenticationFilter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OncePerRequestFilter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilterInternal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                   "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterChain")]),t._v(" chain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("extractToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" jwtUtil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jwtUtil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsernameFromToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserDetails")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userDetailsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadUserByUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            \n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Authentication")]),t._v(" auth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UsernamePasswordAuthenticationToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAuthorities")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityContextHolder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAuthentication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        \n        chain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-securityæ–¹æ³•çº§å®‰å…¨æ€ä¹ˆä½¿ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-securityæ–¹æ³•çº§å®‰å…¨æ€ä¹ˆä½¿ç”¨"}},[t._v("#")]),t._v(" ğŸ¯ Spring Securityæ–¹æ³•çº§å®‰å…¨æ€ä¹ˆä½¿ç”¨ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring Securityæä¾›äº†æ–¹æ³•çº§çš„å®‰å…¨æ§åˆ¶ï¼Œå¯ä»¥åœ¨æ–¹æ³•ä¸Šç›´æ¥é…ç½®æƒé™ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("å¯ç”¨æ–¹æ³•å®‰å…¨")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@EnableGlobalMethodSecurityæ³¨è§£")]),t._v(" "),a("li",[t._v("@EnableMethodSecurityï¼ˆSpring Security 6+ï¼‰")]),t._v(" "),a("li",[t._v("æ”¯æŒå¤šç§æ³¨è§£æ–¹å¼")])]),t._v(" "),a("p",[a("strong",[t._v("å®‰å…¨æ³¨è§£ç±»å‹")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("@PreAuthorize")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ–¹æ³•æ‰§è¡Œå‰è¿›è¡Œæƒé™æ£€æŸ¥")]),t._v(" "),a("li",[t._v("æ”¯æŒSpELè¡¨è¾¾å¼")]),t._v(" "),a("li",[t._v("æœ€å¸¸ç”¨çš„æ–¹æ³•çº§å®‰å…¨æ³¨è§£")])]),t._v(" "),a("p",[a("strong",[t._v("@PostAuthorize")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ–¹æ³•æ‰§è¡Œåè¿›è¡Œæƒé™æ£€æŸ¥")]),t._v(" "),a("li",[t._v("å¯ä»¥åŸºäºè¿”å›å€¼è¿›è¡Œæƒé™æ§åˆ¶")])]),t._v(" "),a("p",[a("strong",[t._v("@Secured")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç®€å•çš„è§’è‰²æ£€æŸ¥")]),t._v(" "),a("li",[t._v("åªæ”¯æŒè§’è‰²åç§°ï¼Œä¸æ”¯æŒå¤æ‚è¡¨è¾¾å¼")])]),t._v(" "),a("p",[a("strong",[t._v("@RolesAllowed")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("JSR-250æ ‡å‡†æ³¨è§£")]),t._v(" "),a("li",[t._v("åŠŸèƒ½ç±»ä¼¼@Secured")])]),t._v(" "),a("p",[a("strong",[t._v("SpELè¡¨è¾¾å¼")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("hasRole('ROLE_USER')ï¼šæ£€æŸ¥è§’è‰²")]),t._v(" "),a("li",[t._v("hasAuthority('READ_USER')ï¼šæ£€æŸ¥æƒé™")]),t._v(" "),a("li",[t._v('authentication.name == #usernameï¼šå¤æ‚æƒé™é€»è¾‘"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableMethodSecurity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prePostEnabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodSecurityConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åªæœ‰ADMINè§’è‰²å¯ä»¥è®¿é—®")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PreAuthorize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"hasRole('ADMIN')\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„ä¿¡æ¯")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PreAuthorize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"hasRole('ADMIN') or authentication.name == #username\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŸºäºè¿”å›å€¼çš„æƒé™æ£€æŸ¥")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostAuthorize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"hasRole('ADMIN') or returnObject.username == authentication.name\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findUserById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orElse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤šä¸ªæƒé™æ£€æŸ¥")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PreAuthorize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"hasAnyRole('ADMIN', 'MANAGER') and hasAuthority('USER_READ')\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-æ¯”è¾ƒä¸€ä¸‹-spring-security-å’Œ-shiro-å„è‡ªçš„ä¼˜ç¼ºç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æ¯”è¾ƒä¸€ä¸‹-spring-security-å’Œ-shiro-å„è‡ªçš„ä¼˜ç¼ºç‚¹"}},[t._v("#")]),t._v(" ğŸ¯ æ¯”è¾ƒä¸€ä¸‹ Spring Security å’Œ Shiro å„è‡ªçš„ä¼˜ç¼ºç‚¹ ?")]),t._v(" "),a("p",[t._v("ç”±äº Spring Boot å®˜æ–¹æä¾›äº†å¤§é‡çš„éå¸¸æ–¹ä¾¿çš„å¼€ç®±å³ç”¨çš„ Starter ï¼ŒåŒ…æ‹¬ Spring Security çš„ Starter ï¼Œä½¿å¾—åœ¨ Spring Boot ä¸­ä½¿ç”¨ Spring Security å˜å¾—æ›´åŠ å®¹æ˜“ï¼Œç”šè‡³åªéœ€è¦æ·»åŠ ä¸€ä¸ªä¾èµ–å°±å¯ä»¥ä¿æŠ¤æ‰€æœ‰çš„æ¥å£ï¼Œæ‰€ä»¥ï¼Œå¦‚æœæ˜¯ Spring Boot é¡¹ç›®ï¼Œä¸€èˆ¬é€‰æ‹© Spring Security ã€‚å½“ç„¶è¿™åªæ˜¯ä¸€ä¸ªå»ºè®®çš„ç»„åˆï¼Œå•çº¯ä»æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œæ— è®ºæ€ä¹ˆç»„åˆï¼Œéƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚Shiro å’Œ Spring Security ç›¸æ¯”ï¼Œä¸»è¦æœ‰å¦‚ä¸‹ä¸€äº›ç‰¹ç‚¹ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("Spring Security æ˜¯ä¸€ä¸ªé‡é‡çº§çš„å®‰å…¨ç®¡ç†æ¡†æ¶ï¼›Shiro åˆ™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®‰å…¨ç®¡ç†æ¡†æ¶")]),t._v(" "),a("li",[t._v("Spring Security æ¦‚å¿µå¤æ‚ï¼Œé…ç½®ç¹çï¼›Shiro æ¦‚å¿µç®€å•ã€é…ç½®ç®€å•")]),t._v(" "),a("li",[t._v("Spring Security åŠŸèƒ½å¼ºå¤§ï¼›Shiro åŠŸèƒ½ç®€å•")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"â˜ï¸-ä¸ƒã€spring-cloudå¾®æœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#â˜ï¸-ä¸ƒã€spring-cloudå¾®æœåŠ¡"}},[t._v("#")]),t._v(" â˜ï¸ ä¸ƒã€Spring Cloudå¾®æœåŠ¡")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç†å¿µ")]),t._v("ï¼šSpring Cloudä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘æä¾›å·¥å…·é›†ï¼Œç®€åŒ–å¾®æœåŠ¡æ¶æ„çš„å®ç°å’Œè¿ç»´ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-cloud-æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›-å„è‡ªä½œç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-cloud-æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›-å„è‡ªä½œç”¨"}},[t._v("#")]),t._v(" ğŸ¯ Spring Cloud æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿå„è‡ªä½œç”¨ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("æœåŠ¡æ³¨å†Œä¸å‘ç°")]),t._v("ï¼šEureka/Nacosï¼ˆæœåŠ¡å®ä¾‹è‡ªåŠ¨æ³¨å†Œä¸å‘ç°ï¼‰ï¼›")]),t._v(" "),a("li",[a("strong",[t._v("æœåŠ¡è°ƒç”¨")]),t._v("ï¼šFeignï¼ˆåŸºäºæ¥å£çš„å£°æ˜å¼ REST è°ƒç”¨ï¼‰ï¼›")]),t._v(" "),a("li",[a("strong",[t._v("è´Ÿè½½å‡è¡¡")]),t._v("ï¼šRibbonï¼ˆå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼‰ï¼›")]),t._v(" "),a("li",[a("strong",[t._v("ç†”æ–­é™çº§")]),t._v("ï¼šHystrix/Sentinelï¼ˆé˜²æ­¢çº§è”æ•…éšœï¼‰ï¼›")]),t._v(" "),a("li",[a("strong",[t._v("ç½‘å…³")]),t._v("ï¼šGatewayï¼ˆç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±ã€é™æµã€è®¤è¯ï¼‰ã€‚")])]),t._v(" "),a("p",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœåŠ¡æä¾›è€…")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableEurekaClient")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœåŠ¡æ¶ˆè´¹è€… - Feignå®¢æˆ·ç«¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FeignClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user-service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fallback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceFallback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceClient")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–­è·¯å™¨é™çº§")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceFallback")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceClient")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"é»˜è®¤ç”¨æˆ·"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡é™çº§"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Gatewayç½‘å…³é…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GatewayConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouteLocator")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("customRoutes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouteLocatorBuilder")]),t._v(" builder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" builder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("routes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("route")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user-service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" r "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lb://user-service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("route")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"order-service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" r "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/orders/**"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lb://order-service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-å¾®æœåŠ¡ä¹‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¾®æœåŠ¡ä¹‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡"}},[t._v("#")]),t._v(" ğŸ¯ å¾®æœåŠ¡ä¹‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Ÿ")]),t._v(" "),a("p",[t._v('"å¾®æœåŠ¡é—´é€šä¿¡æœ‰å¤šç§æ–¹å¼ï¼Œå„æœ‰é€‚ç”¨åœºæ™¯ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("åŒæ­¥é€šä¿¡")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("HTTP/REST")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æœ€å¸¸ç”¨çš„é€šä¿¡æ–¹å¼")]),t._v(" "),a("li",[t._v("åŸºäºHTTPåè®®ï¼Œç®€å•æ˜“ç†è§£")]),t._v(" "),a("li",[t._v("ä½¿ç”¨JSONæ ¼å¼ä¼ è¾“æ•°æ®")]),t._v(" "),a("li",[t._v("å·¥å…·ï¼šRestTemplateã€OpenFeign")])]),t._v(" "),a("p",[a("strong",[t._v("RPCè°ƒç”¨")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œæ€§èƒ½è¾ƒå¥½")]),t._v(" "),a("li",[t._v("æ”¯æŒå¤šç§åè®®ï¼šgRPCã€Dubbo")]),t._v(" "),a("li",[t._v("å¼ºç±»å‹æ¥å£ï¼Œå¼€å‘æ•ˆç‡é«˜")])]),t._v(" "),a("p",[a("strong",[t._v("å¼‚æ­¥é€šä¿¡")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("æ¶ˆæ¯é˜Ÿåˆ—")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŸºäºæ¶ˆæ¯ä¸­é—´ä»¶ï¼šRabbitMQã€Kafka")]),t._v(" "),a("li",[t._v("è§£è€¦æœåŠ¡é—´ä¾èµ–å…³ç³»")]),t._v(" "),a("li",[t._v("æ”¯æŒå‰Šå³°å¡«è°·ã€äº‹ä»¶é©±åŠ¨")])]),t._v(" "),a("p",[a("strong",[t._v("äº‹ä»¶é©±åŠ¨")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŸºäºäº‹ä»¶çš„å¼‚æ­¥é€šä¿¡")]),t._v(" "),a("li",[t._v("æœåŠ¡å‘å¸ƒå’Œè®¢é˜…äº‹ä»¶")]),t._v(" "),a("li",[t._v("å®ç°æœ€ç»ˆä¸€è‡´æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("é€‰æ‹©åŸåˆ™")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å®æ—¶æ€§è¦æ±‚é«˜ï¼šåŒæ­¥é€šä¿¡")]),t._v(" "),a("li",[t._v("è§£è€¦è¦æ±‚é«˜ï¼šå¼‚æ­¥é€šä¿¡")]),t._v(" "),a("li",[t._v("æ€§èƒ½è¦æ±‚é«˜ï¼šRPCè°ƒç”¨")]),t._v(" "),a("li",[t._v('ç®€å•åœºæ™¯ï¼šHTTP/REST"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// HTTPé€šä¿¡ - RestTemplate")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestTemplate")]),t._v(" restTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://user-service/users/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" restTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getForObject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// HTTPé€šä¿¡ - OpenFeign")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FeignClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user-service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserClient")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¶ˆæ¯é˜Ÿåˆ—é€šä¿¡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderEventPublisher")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RabbitTemplate")]),t._v(" rabbitTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("publishOrderCreated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),t._v(" event "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        rabbitTemplate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("convertAndSend")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"order.exchange"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                     "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"order.created"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RabbitListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queues "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inventory.queue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleOrderCreated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†è®¢å•åˆ›å»ºäº‹ä»¶ï¼Œæ›´æ–°åº“å­˜")]),t._v("\n    inventoryService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateInventory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-å¾®æœåŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡æ€ä¹ˆå¤„ç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¾®æœåŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡æ€ä¹ˆå¤„ç†"}},[t._v("#")]),t._v(" ğŸ¯ å¾®æœåŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡æ€ä¹ˆå¤„ç†ï¼Ÿ")]),t._v(" "),a("p",[t._v('"åˆ†å¸ƒå¼äº‹åŠ¡æ˜¯å¾®æœåŠ¡æ¶æ„çš„æ ¸å¿ƒæŒ‘æˆ˜ï¼Œæœ‰å¤šç§è§£å†³æ–¹æ¡ˆï¼š')]),t._v(" "),a("p",[a("strong",[t._v("ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä¼ ç»Ÿçš„å¼ºä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("li",[t._v("åè°ƒè€…å’Œå‚ä¸è€…æ¨¡å¼")]),t._v(" "),a("li",[t._v("å­˜åœ¨æ€§èƒ½å’Œå¯ç”¨æ€§é—®é¢˜ï¼Œä¸é€‚åˆå¾®æœåŠ¡")])]),t._v(" "),a("p",[a("strong",[t._v("TCCæ¨¡å¼")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Try-Confirm-Cancelä¸‰ä¸ªé˜¶æ®µ")]),t._v(" "),a("li",[t._v("ä¸šåŠ¡å±‚é¢çš„è¡¥å¿æœºåˆ¶")]),t._v(" "),a("li",[t._v("å®ç°å¤æ‚ä½†æ§åˆ¶ç²¾ç¡®")])]),t._v(" "),a("p",[a("strong",[t._v("Sagaæ¨¡å¼")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é•¿äº‹åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªçŸ­äº‹åŠ¡")]),t._v(" "),a("li",[t._v("æ¯ä¸ªäº‹åŠ¡æœ‰å¯¹åº”çš„è¡¥å¿æ“ä½œ")]),t._v(" "),a("li",[t._v("é€‚åˆä¸šåŠ¡æµç¨‹å¤æ‚çš„åœºæ™¯")])]),t._v(" "),a("p",[a("strong",[t._v("æœ€ç»ˆä¸€è‡´æ€§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„å¼‚æ­¥å¤„ç†")]),t._v(" "),a("li",[t._v("é€šè¿‡é‡è¯•å’Œè¡¥å¿è¾¾åˆ°æœ€ç»ˆä¸€è‡´")]),t._v(" "),a("li",[t._v("æ€§èƒ½å¥½ï¼Œä½†éœ€è¦å¤„ç†ä¸­é—´çŠ¶æ€")])]),t._v(" "),a("p",[a("strong",[t._v("åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Seataï¼šé˜¿é‡Œå¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆ")]),t._v(" "),a("li",[t._v("æ”¯æŒATã€TCCã€Sagaç­‰æ¨¡å¼")]),t._v(" "),a("li",[t._v("å¯¹ä¸šåŠ¡ä»£ç ä¾µå…¥æ€§å°")])]),t._v(" "),a("p",[a("strong",[t._v("æœ€ä½³å®è·µ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é¿å…åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œé€šè¿‡è®¾è®¡è§„é¿")]),t._v(" "),a("li",[t._v("ä¼˜å…ˆè€ƒè™‘æœ€ç»ˆä¸€è‡´æ€§")]),t._v(" "),a("li",[t._v('é‡è¦ä¸šåŠ¡åœºæ™¯ä½¿ç”¨TCCæˆ–Saga"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Sagaæ¨¡å¼ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SagaOrchestrationStart")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderSagaService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("processOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. åˆ›å»ºè®¢å•")]),t._v("\n        orderService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. æ‰£å‡åº“å­˜")]),t._v("\n        inventoryService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("decreaseStock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItems")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. æ‰£å‡ç§¯åˆ†")]),t._v("\n        pointService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("decreasePoints")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPoints")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. å‘é€é€šçŸ¥")]),t._v("\n        notificationService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendOrderNotification")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¡¥å¿æ–¹æ³•")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SagaOrchestrationCancel")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        notificationService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelNotification")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        pointService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compensatePoints")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPoints")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        inventoryService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compensateStock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItems")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        orderService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŸºäºæ¶ˆæ¯çš„æœ€ç»ˆä¸€è‡´æ€§")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. ä¿å­˜è®¢å•")]),t._v("\n        orderRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. å‘é€äº‹ä»¶æ¶ˆæ¯")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),t._v(" event "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        messageProducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"order.created"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EventListener")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InventoryEventHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RabbitListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queues "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inventory.order.queue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleOrderCreated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            inventoryService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("decreaseStock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItems")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€åº“å­˜æ‰£å‡æˆåŠŸäº‹ä»¶")]),t._v("\n            messageProducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inventory.decreased"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InventoryDecreasedEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€åº“å­˜æ‰£å‡å¤±è´¥äº‹ä»¶")]),t._v("\n            messageProducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inventory.decrease.failed"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InventoryDecreaseFailedEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ“-å…«ã€æ³¨è§£ä¸é…ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“-å…«ã€æ³¨è§£ä¸é…ç½®"}},[t._v("#")]),t._v(" ğŸ“ å…«ã€æ³¨è§£ä¸é…ç½®")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç†å¿µ")]),t._v("ï¼šSpringæ³¨è§£ç®€åŒ–é…ç½®ï¼Œæä¾›å£°æ˜å¼ç¼–ç¨‹æ¨¡å‹ï¼Œå®ç°çº¦å®šå¤§äºé…ç½®çš„è®¾è®¡ç†å¿µã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-springå¸¸ç”¨æ³¨è§£æœ‰å“ªäº›"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springå¸¸ç”¨æ³¨è§£æœ‰å“ªäº›"}},[t._v("#")]),t._v(" ğŸ¯ Springå¸¸ç”¨æ³¨è§£æœ‰å“ªäº›ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Springæä¾›äº†ä¸°å¯Œçš„æ³¨è§£ç®€åŒ–å¼€å‘é…ç½®ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒæ³¨è§£")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("@ComponentåŠå…¶æ´¾ç”Ÿ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@Componentï¼šé€šç”¨ç»„ä»¶æ³¨è§£")]),t._v(" "),a("li",[t._v("@Serviceï¼šæœåŠ¡å±‚ç»„ä»¶")]),t._v(" "),a("li",[t._v("@Repositoryï¼šæ•°æ®è®¿é—®å±‚ç»„ä»¶")]),t._v(" "),a("li",[t._v("@Controllerï¼šæ§åˆ¶å™¨ç»„ä»¶")]),t._v(" "),a("li",[t._v("@RestControllerï¼šRESTæ§åˆ¶å™¨ï¼ˆ@Controller + @ResponseBodyï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("ä¾èµ–æ³¨å…¥æ³¨è§£")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@Autowiredï¼šè‡ªåŠ¨è£…é…ï¼ŒæŒ‰ç±»å‹æ³¨å…¥")]),t._v(" "),a("li",[t._v("@Qualifierï¼šæŒ‡å®šå…·ä½“å®ç°ç±»")]),t._v(" "),a("li",[t._v("@Resourceï¼šæŒ‰åç§°æ³¨å…¥ï¼ˆJSR-250ï¼‰")]),t._v(" "),a("li",[t._v("@Valueï¼šæ³¨å…¥é…ç½®å€¼")])]),t._v(" "),a("p",[a("strong",[t._v("é…ç½®ç›¸å…³æ³¨è§£")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@Configurationï¼šé…ç½®ç±»")]),t._v(" "),a("li",[t._v("@Beanï¼šå®šä¹‰Bean")]),t._v(" "),a("li",[t._v("@Importï¼šå¯¼å…¥å…¶ä»–é…ç½®")]),t._v(" "),a("li",[t._v("@ComponentScanï¼šç»„ä»¶æ‰«æ")]),t._v(" "),a("li",[t._v("@Profileï¼šç¯å¢ƒé…ç½®")])]),t._v(" "),a("p",[a("strong",[t._v("Webç›¸å…³æ³¨è§£")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@RequestMappingï¼šè¯·æ±‚æ˜ å°„")]),t._v(" "),a("li",[t._v("@GetMapping/@PostMappingï¼šHTTPæ–¹æ³•æ˜ å°„")]),t._v(" "),a("li",[t._v("@RequestParamï¼šè¯·æ±‚å‚æ•°")]),t._v(" "),a("li",[t._v("@PathVariableï¼šè·¯å¾„å˜é‡")]),t._v(" "),a("li",[t._v("@RequestBody/@ResponseBodyï¼šè¯·æ±‚/å“åº”ä½“")])]),t._v(" "),a("p",[a("strong",[t._v("AOPæ³¨è§£")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@Aspectï¼šåˆ‡é¢")]),t._v(" "),a("li",[t._v("@Pointcutï¼šåˆ‡ç‚¹")]),t._v(" "),a("li",[t._v("@Before/@After/@Aroundï¼šé€šçŸ¥ç±»å‹")])]),t._v(" "),a("p",[a("strong",[t._v("äº‹åŠ¡æ³¨è§£")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@Transactionalï¼šå£°æ˜å¼äº‹åŠ¡")]),t._v(" "),a("li",[t._v('@EnableTransactionManagementï¼šå¯ç”¨äº‹åŠ¡ç®¡ç†"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„ä»¶æ³¨è§£")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserRepository")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${app.default.page-size:10}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" defaultPageSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Page")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pageable")]),t._v(" pageable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pageable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Webæ³¨è§£")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Valid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" saved "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CREATED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("saved"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®æ³¨è§£")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableWebMvc")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.example"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebMvcConfigurer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("devDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("H2DataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Profile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prod"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataSource")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prodDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MySQLDataSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-autowiredå’Œ-resourceçš„åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-autowiredå’Œ-resourceçš„åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ @Autowiredå’Œ@Resourceçš„åŒºåˆ«ï¼Ÿ")]),t._v(" "),a("p",[t._v('"@Autowiredå’Œ@Resourceéƒ½ç”¨äºä¾èµ–æ³¨å…¥ï¼Œä½†æœ‰é‡è¦åŒºåˆ«ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("@Autowiredï¼ˆSpringæ³¨è§£ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æŒ‰ç±»å‹ï¼ˆbyTypeï¼‰è‡ªåŠ¨è£…é…")]),t._v(" "),a("li",[t._v("å¯ä»¥é…åˆ@QualifieræŒ‰åç§°è£…é…")]),t._v(" "),a("li",[t._v("å¯ä»¥æ ‡æ³¨åœ¨æ„é€ å™¨ã€å­—æ®µã€æ–¹æ³•ä¸Š")]),t._v(" "),a("li",[t._v("requiredå±æ€§æ§åˆ¶æ˜¯å¦å¿…é¡»æ³¨å…¥")]),t._v(" "),a("li",[t._v("Springæ¡†æ¶ä¸“æœ‰æ³¨è§£")])]),t._v(" "),a("p",[a("strong",[t._v("@Resourceï¼ˆJSR-250æ ‡å‡†ï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æŒ‰åç§°ï¼ˆbyNameï¼‰è‡ªåŠ¨è£…é…")]),t._v(" "),a("li",[t._v("nameå±æ€§æŒ‡å®šBeanåç§°")]),t._v(" "),a("li",[t._v("typeå±æ€§æŒ‡å®šBeanç±»å‹")]),t._v(" "),a("li",[t._v("åªèƒ½æ ‡æ³¨åœ¨å­—æ®µå’Œsetteræ–¹æ³•ä¸Š")]),t._v(" "),a("li",[t._v("Javaæ ‡å‡†æ³¨è§£ï¼Œè·¨æ¡†æ¶")])]),t._v(" "),a("p",[a("strong",[t._v("è£…é…é¡ºåº")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("@Resourceï¼šå…ˆæŒ‰åç§°ï¼Œå†æŒ‰ç±»å‹")]),t._v(" "),a("li",[t._v("@Autowiredï¼šå…ˆæŒ‰ç±»å‹ï¼Œå†æŒ‰åç§°ï¼ˆé…åˆ@Qualifierï¼‰")])]),t._v(" "),a("p",[a("strong",[t._v("ä½¿ç”¨å»ºè®®")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ¨èä½¿ç”¨@Autowired + æ„é€ å™¨æ³¨å…¥")]),t._v(" "),a("li",[t._v("éœ€è¦æŒ‰åç§°æ³¨å…¥æ—¶ä½¿ç”¨@Qualifier")]),t._v(" "),a("li",[t._v('è·¨æ¡†æ¶å…¼å®¹æ—¶è€ƒè™‘@Resource"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @AutowiredæŒ‰ç±»å‹æ³¨å…¥")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserRepository")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @Autowired + @QualifieræŒ‰åç§°æ³¨å…¥")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Qualifier")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cacheUserRepository"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserRepository")]),t._v(" cacheRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @ResourceæŒ‰åç§°æ³¨å…¥")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Resource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jdbcUserRepository"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserRepository")]),t._v(" jdbcRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ„é€ å™¨æ³¨å…¥ï¼ˆæ¨èï¼‰")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EmailService")]),t._v(" emailService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EmailService")]),t._v(" emailService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("emailService "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" emailService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯é€‰ä¾èµ–æ³¨å…¥")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("required "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SmsService")]),t._v(" smsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("notifyUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        emailService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("smsService "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            smsService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPhone")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-springä¸­å¦‚ä½•è‡ªå®šä¹‰æ³¨è§£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springä¸­å¦‚ä½•è‡ªå®šä¹‰æ³¨è§£"}},[t._v("#")]),t._v(" ğŸ¯ Springä¸­å¦‚ä½•è‡ªå®šä¹‰æ³¨è§£ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Springæ”¯æŒè‡ªå®šä¹‰æ³¨è§£æ¥ç®€åŒ–é‡å¤é…ç½®ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("è‡ªå®šä¹‰æ³¨è§£æ­¥éª¤")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("1. å®šä¹‰æ³¨è§£")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä½¿ç”¨@interfaceå…³é”®å­—")]),t._v(" "),a("li",[t._v("æ·»åŠ @TargetæŒ‡å®šä½œç”¨èŒƒå›´")]),t._v(" "),a("li",[t._v("æ·»åŠ @RetentionæŒ‡å®šç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),a("li",[t._v("å®šä¹‰æ³¨è§£å±æ€§")])]),t._v(" "),a("p",[a("strong",[t._v("2. æ³¨è§£å¤„ç†")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("AOPæ–¹å¼ï¼šé€šè¿‡åˆ‡é¢å¤„ç†")]),t._v(" "),a("li",[t._v("BeanPostProcessorï¼šBeanåå¤„ç†å™¨")]),t._v(" "),a("li",[t._v("åå°„æœºåˆ¶ï¼šè¿è¡Œæ—¶å¤„ç†")])]),t._v(" "),a("p",[a("strong",[t._v("3. ä¸Springé›†æˆ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç»“åˆSpring AOPå®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹")]),t._v(" "),a("li",[t._v("åˆ©ç”¨Springçš„ä¾èµ–æ³¨å…¥èƒ½åŠ›")]),t._v(" "),a("li",[t._v("é…åˆäº‹ä»¶æœºåˆ¶å®ç°è§£è€¦")])]),t._v(" "),a("p",[a("strong",[t._v("å¸¸è§åº”ç”¨åœºæ™¯")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ—¥å¿—è®°å½•ï¼š@Log")]),t._v(" "),a("li",[t._v("ç¼“å­˜æ§åˆ¶ï¼š@Cache")]),t._v(" "),a("li",[t._v("æƒé™æ£€æŸ¥ï¼š@RequireRole")]),t._v(" "),a("li",[t._v("é‡è¯•æœºåˆ¶ï¼š@Retry")]),t._v(" "),a("li",[t._v("é™æµæ§åˆ¶ï¼š@RateLimit")])]),t._v(" "),a("p",[a("strong",[t._v("æœ€ä½³å®è·µ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ³¨è§£è¯­ä¹‰æ¸…æ™°ï¼Œé¿å…è¿‡åº¦è®¾è®¡")]),t._v(" "),a("li",[t._v("æä¾›åˆç†çš„é»˜è®¤å€¼")]),t._v(" "),a("li",[t._v("è€ƒè™‘æ³¨è§£çš„ç»„åˆä½¿ç”¨")]),t._v(" "),a("li",[t._v('å®Œå–„çš„æ–‡æ¡£å’Œç¤ºä¾‹"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰æ—¥å¿—æ³¨è§£")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Target")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ElementType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("METHOD")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Retention")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RetentionPolicy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUNTIME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Documented")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Log")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LogLevel")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("level")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LogLevel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INFO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logParams")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logResult")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ—¥å¿—å¤„ç†åˆ‡é¢")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Aspect")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LogAspect")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" logger "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LogAspect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Around")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@annotation(log)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doLog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProceedingJoinPoint")]),t._v(" point"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Log")]),t._v(" log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" methodName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" point"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSignature")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" point"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getArgs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å½•æ–¹æ³•è°ƒç”¨")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logParams")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è°ƒç”¨æ–¹æ³•: {}, å‚æ•°: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" methodName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" startTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" point"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("proceed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" endTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®°å½•æ–¹æ³•ç»“æœ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logResult")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            logger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ–¹æ³•: {} æ‰§è¡Œå®Œæˆ, è€—æ—¶: {}ms, ç»“æœ: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                       methodName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" endTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" startTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰ç¼“å­˜æ³¨è§£")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Target")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ElementType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("METHOD")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Retention")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RetentionPolicy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUNTIME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cache")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("expire")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5åˆ†é’Ÿ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeUnit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SECONDS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¼“å­˜å¤„ç†å™¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheAnnotationProcessor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeanPostProcessor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postProcessAfterInitialization")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" beanName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Class")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" clazz "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Method")]),t._v(" method "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" clazz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDeclaredMethods")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAnnotationPresent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºç¼“å­˜ä»£ç†")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createCacheProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createCacheProxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Method")]),t._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Proxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("newProxyInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClassLoader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInterfaces")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheInvocationHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user:#{args[0]}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" expire "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orElse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åˆ›å»ºç”¨æˆ·"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" logResult "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-boot-æ³¨è§£-åŸç†"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-boot-æ³¨è§£-åŸç†"}},[t._v("#")]),t._v(" ğŸ¯ Spring Boot æ³¨è§£ åŸç†?")]),t._v(" "),a("p",[a("strong",[t._v("Spring Boot")]),t._v(" æ˜¯åŸºäº Spring æ¡†æ¶çš„ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œæ—¨åœ¨ç®€åŒ– Spring åº”ç”¨ç¨‹åºçš„é…ç½®å’Œéƒ¨ç½²ã€‚Spring Boot åˆ©ç”¨äº†å¤§é‡çš„è‡ªåŠ¨é…ç½®å’Œå¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œå…¶ä¸­è®¸å¤šåŠŸèƒ½éƒ½é€šè¿‡æ³¨è§£æ¥å®ç°ã€‚ç†è§£ Spring Boot çš„æ³¨è§£åŸç†ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£å…¶è‡ªåŠ¨åŒ–é…ç½®çš„è¿‡ç¨‹ï¼Œä»¥åŠå¦‚ä½•æ‰©å±•å’Œè‡ªå®šä¹‰ Spring Boot åº”ç”¨ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("å¸¸è§çš„ Spring Boot æ³¨è§£åŠå…¶åŸç†")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("`@SpringBootApplicationï¼šå¤åˆæ³¨è§£ï¼Œé€šå¸¸ç”¨åœ¨ä¸»ç±»ä¸Šï¼Œå¯åŠ¨ Spring Boot åº”ç”¨ç¨‹åºã€‚å®ƒå®é™…ä¸ŠåŒ…å«äº†ä¸‰ä¸ªæ³¨è§£ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("@SpringBootConfiguration")]),t._v("ï¼šæ ‡è¯†å½“å‰ç±»ä¸ºé…ç½®ç±»ï¼Œç±»ä¼¼äº "),a("code",[t._v("@Configuration")]),t._v("ï¼Œè¡¨ç¤ºè¯¥ç±»æ˜¯ Spring é…ç½®ç±»ï¼Œä¼šè¢« Spring å®¹å™¨åŠ è½½ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("@EnableAutoConfiguration")]),t._v("ï¼šå¯ç”¨ Spring Boot çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œè®© Spring Boot æ ¹æ®é¡¹ç›®çš„ä¾èµ–å’Œé…ç½®è‡ªåŠ¨åšå‡ºé…ç½®é€‰æ‹©ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("@ComponentScan")]),t._v("ï¼šå¯ç”¨ç»„ä»¶æ‰«æï¼Œé»˜è®¤ä¼šæ‰«æå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ Spring ç»„ä»¶ï¼ˆåŒ…æ‹¬ "),a("code",[t._v("@Component")]),t._v("ã€"),a("code",[t._v("@Service")]),t._v("ã€"),a("code",[t._v("@Repository")]),t._v("ã€"),a("code",[t._v("@Controller")]),t._v(" ç­‰æ³¨è§£ï¼‰ã€‚")])])]),t._v(" "),a("p",[a("strong",[t._v("åŸç†")]),t._v("ï¼š"),a("code",[t._v("@SpringBootApplication")]),t._v(" é€šè¿‡ç»„åˆè¿™äº›æ³¨è§£ï¼Œå®ç°äº†è‡ªåŠ¨é…ç½®ã€ç»„ä»¶æ‰«æå’Œ Spring é…ç½®çš„åŠŸèƒ½ï¼Œç®€åŒ–äº†å¼€å‘äººå‘˜çš„é…ç½®å·¥ä½œã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("@EnableAutoConfiguration")]),t._v("ï¼šå¼€å¯äº†è‡ªåŠ¨é…ç½®åŠŸèƒ½ã€‚å®ƒå‘Šè¯‰ Spring Boot è‡ªåŠ¨ä¸ºåº”ç”¨ç¨‹åºé…ç½®æ‰€éœ€è¦çš„ç»„ä»¶ï¼Œé¿å…äº†æ‰‹åŠ¨é…ç½®å¤§é‡çš„ Beanã€‚")]),t._v(" "),a("p",[a("strong",[t._v("åŸç†")]),t._v("ï¼š"),a("code",[t._v("@EnableAutoConfiguration")]),t._v(" æ˜¯é€šè¿‡ "),a("strong",[t._v("æ¡ä»¶åŒ–æ³¨è§£")]),t._v(" ("),a("code",[t._v("@Conditional")]),t._v(" ç³»åˆ—æ³¨è§£) æ¥å®ç°çš„ï¼ŒSpring Boot ä¼šæ ¹æ®é¡¹ç›®çš„ä¾èµ–ï¼ˆå¦‚ç±»è·¯å¾„ä¸­çš„ jar åŒ…ï¼‰æ¥åˆ¤æ–­æ˜¯å¦å¯ç”¨ç›¸åº”çš„è‡ªåŠ¨é…ç½®ç±»ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰ "),a("code",[t._v("spring-boot-starter-web")]),t._v(" ä¾èµ–ï¼ŒSpring Boot ä¼šè‡ªåŠ¨é…ç½® Tomcatã€DispatcherServlet ç­‰ Web ç›¸å…³ç»„ä»¶ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("@Configuration")]),t._v("ï¼šæ ‡è®°è¯¥ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç±»ä¼¼äºä¼ ç»Ÿçš„ XML é…ç½®æ–‡ä»¶ï¼Œç”¨äºå£°æ˜å’Œå®šä¹‰ Spring Beanã€‚")]),t._v(" "),a("p",[a("strong",[t._v("åŸç†")]),t._v("ï¼šSpring åœ¨ç±»ä¸Šä½¿ç”¨ "),a("code",[t._v("@Configuration")]),t._v(" æ—¶ï¼Œä¼šå°†è¯¥ç±»ä½œä¸ºä¸€ä¸ªé…ç½®ç±»å¤„ç†ã€‚é€šè¿‡è§£æè¯¥ç±»ä¸­çš„ "),a("code",[t._v("@Bean")]),t._v(" æ³¨è§£æ¥ç”Ÿæˆ Spring Beanã€‚"),a("code",[t._v("@Configuration")]),t._v(" å®é™…ä¸Šæ˜¯ "),a("code",[t._v("@Component")]),t._v(" æ³¨è§£çš„æ‰©å±•ï¼Œæ„å‘³ç€é…ç½®ç±»ä¹Ÿä¼šè¢« Spring å®¹å™¨ç®¡ç†ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("@ComponentScan")]),t._v("ï¼šç”¨äºå‘Šè¯‰ Spring æ¡†æ¶å»æ‰«ææŒ‡å®šåŒ…ï¼ˆåŠå…¶å­åŒ…ï¼‰ä¸­çš„ç±»ï¼Œå¹¶å°†å…¶ä½œä¸º Spring Bean è¿›è¡Œæ³¨å†Œã€‚é€šå¸¸è¯¥æ³¨è§£ä¸ "),a("code",[t._v("@Configuration")]),t._v(" ä¸€èµ·ä½¿ç”¨ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("åŸç†")]),t._v("ï¼šSpring Boot å¯åŠ¨ç±»ä½¿ç”¨ "),a("code",[t._v("@ComponentScan")]),t._v(" é»˜è®¤æ‰«æå½“å‰åŒ…åŠå…¶å­åŒ…ï¼ŒæŸ¥æ‰¾ "),a("code",[t._v("@Component")]),t._v("ã€"),a("code",[t._v("@Service")]),t._v("ã€"),a("code",[t._v("@Repository")]),t._v(" ç­‰æ³¨è§£æ ‡æ³¨çš„ç±»ï¼Œå°†å®ƒä»¬åŠ å…¥åˆ° Spring å®¹å™¨ä¸­ã€‚å¦‚æœéœ€è¦æ›´æ”¹æ‰«æè·¯å¾„ï¼Œå¯ä»¥åœ¨æ³¨è§£ä¸­æŒ‡å®š "),a("code",[t._v("basePackages")]),t._v(" å±æ€§ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("@Conditional")]),t._v(" ï¼šæ˜¯ä¸€ç§æ ¹æ®æŸäº›æ¡ä»¶å†³å®šæ˜¯å¦åŠ è½½ Bean çš„æœºåˆ¶ã€‚åœ¨ Spring Boot ä¸­ï¼Œè‡ªåŠ¨é…ç½®å¤§é‡ä½¿ç”¨äº† "),a("code",[t._v("@Conditional")]),t._v(" æ³¨è§£ï¼Œä»¥å®ç°åŸºäºç¯å¢ƒæˆ–é…ç½®çš„æ¡ä»¶åŠ è½½ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("åŸç†")]),t._v("ï¼šSpring Boot ä½¿ç”¨ "),a("code",[t._v("@Conditional")]),t._v(" æ³¨è§£å’Œå¤šä¸ªå…·ä½“çš„æ¡ä»¶ç±»ï¼ˆå¦‚ "),a("code",[t._v("@ConditionalOnProperty")]),t._v("ã€"),a("code",[t._v("@ConditionalOnClass")]),t._v("ã€"),a("code",[t._v("@ConditionalOnMissingBean")]),t._v(" ç­‰ï¼‰æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ›å»ºæŸäº› Beanã€‚ä¾‹å¦‚ï¼Œ"),a("code",[t._v("@ConditionalOnClass")]),t._v(" ä¼šæ£€æŸ¥ç±»è·¯å¾„ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªç±»ï¼Œä»è€Œå†³å®šæ˜¯å¦å¯ç”¨æŸä¸ªé…ç½®ã€‚")])])]),t._v(" "),a("p",[a("strong",[t._v("Spring Boot æ³¨è§£çš„å·¥ä½œåŸç†æ€»ç»“")])]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("è‡ªåŠ¨é…ç½®ï¼ˆ"),a("code",[t._v("@EnableAutoConfiguration")]),t._v("ï¼‰")]),t._v("ï¼šé€šè¿‡æ¡ä»¶åŒ–æ³¨è§£ï¼ŒSpring Boot æ ¹æ®é¡¹ç›®çš„ä¾èµ–å’Œé…ç½®ï¼Œè‡ªåŠ¨é€‰æ‹©å¹¶åŠ è½½åˆé€‚çš„é…ç½®ç±»ã€‚æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»é€šå¸¸éƒ½æœ‰ä¸€ä¸ª "),a("code",[t._v("@Conditional")]),t._v(" æ³¨è§£ï¼Œç¡®ä¿ä»…åœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶æ‰ä¼šåŠ è½½ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ç»„ä»¶æ‰«æï¼ˆ"),a("code",[t._v("@ComponentScan")]),t._v("ï¼‰")]),t._v("ï¼šSpring Boot é»˜è®¤æ‰«æä¸»åº”ç”¨ç±»æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ï¼Œè‡ªåŠ¨å°†ç¬¦åˆæ¡ä»¶çš„ç±»ï¼ˆå¦‚ "),a("code",[t._v("@Component")]),t._v(" æ³¨è§£çš„ç±»ï¼‰æ³¨å†Œä¸º Spring Beanã€‚")]),t._v(" "),a("li",[a("strong",[t._v("é…ç½®ç»‘å®šï¼ˆ"),a("code",[t._v("@Value")]),t._v(" å’Œ "),a("code",[t._v("@ConfigurationProperties")]),t._v("ï¼‰")]),t._v("ï¼šSpring Boot æä¾›çš„æ³¨è§£å…è®¸å°†é…ç½®æ–‡ä»¶ä¸­çš„å€¼è‡ªåŠ¨æ³¨å…¥åˆ° Java ç±»ä¸­ï¼Œä½¿å¾—é…ç½®ç®¡ç†æ›´åŠ æ–¹ä¾¿ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("Web æ§åˆ¶ï¼ˆ"),a("code",[t._v("@RestController")]),t._v("ï¼‰")]),t._v("ï¼š"),a("code",[t._v("@RestController")]),t._v(" æ³¨è§£ç»“åˆäº† "),a("code",[t._v("@Controller")]),t._v(" å’Œ "),a("code",[t._v("@ResponseBody")]),t._v("ï¼Œä½¿å¾—å¼€å‘ RESTful API æ›´åŠ ç®€æ´ã€‚")])]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("Spring Boot æ³¨è§£")]),t._v(" åœ¨ Spring Boot ä¸­å‘æŒ¥äº†é‡è¦ä½œç”¨ï¼Œç®€åŒ–äº†å¼€å‘æµç¨‹ã€‚æœ€æ ¸å¿ƒçš„æ³¨è§£åŒ…æ‹¬ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("@SpringBootApplication")]),t._v("ï¼šå¤åˆæ³¨è§£ï¼ŒåŒ…å«äº† "),a("code",[t._v("@Configuration")]),t._v("ã€"),a("code",[t._v("@EnableAutoConfiguration")]),t._v(" å’Œ "),a("code",[t._v("@ComponentScan")]),t._v("ï¼Œè´Ÿè´£é…ç½®ç±»çš„å®šä¹‰ã€è‡ªåŠ¨é…ç½®çš„å¯ç”¨å’Œç»„ä»¶æ‰«æçš„å¼€å¯ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("@EnableAutoConfiguration")]),t._v("ï¼šå¯ç”¨ Spring Boot è‡ªåŠ¨é…ç½®ï¼Œæ ¹æ®ç±»è·¯å¾„ã€ç¯å¢ƒç­‰ä¿¡æ¯è‡ªåŠ¨é…ç½®åº”ç”¨æ‰€éœ€çš„ç»„ä»¶ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("@ConfigurationProperties")]),t._v(" å’Œ "),a("strong",[t._v("@Value")]),t._v("ï¼šç”¨äºå°†å¤–éƒ¨é…ç½®ï¼ˆå¦‚ "),a("code",[t._v("application.properties")]),t._v("ï¼‰æ³¨å…¥åˆ° Java ç±»ä¸­ï¼Œ"),a("code",[t._v("@ConfigurationProperties")]),t._v(" é€‚åˆæ‰¹é‡æ³¨å…¥å¤æ‚é…ç½®ï¼Œè€Œ "),a("code",[t._v("@Value")]),t._v(" æ›´é€‚ç”¨äºç®€å•çš„å•ä¸ªå€¼æ³¨å…¥ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("@RestController")]),t._v("ï¼šç®€åŒ– REST API å¼€å‘ï¼Œç»“åˆäº† "),a("code",[t._v("@Controller")]),t._v(" å’Œ "),a("code",[t._v("@ResponseBody")]),t._v(" æ³¨è§£ï¼Œä½¿å¾—æ–¹æ³•è¿”å›çš„å¯¹è±¡ç›´æ¥ä½œä¸º HTTP å“åº”çš„å†…å®¹ã€‚")])]),t._v(" "),a("p",[t._v("è¿™äº›æ³¨è§£å…±åŒä½œç”¨ï¼Œé€šè¿‡è‡ªåŠ¨é…ç½®å’Œæ¡ä»¶åŒ–åŠ è½½ï¼Œä¸ºå¼€å‘è€…æä¾›äº†é«˜æ•ˆã€ç®€ä¾¿çš„é…ç½®å’Œå¼€å‘ä½“éªŒã€‚")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ”§-ä¹ã€é«˜çº§ç‰¹æ€§ä¸å®è·µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”§-ä¹ã€é«˜çº§ç‰¹æ€§ä¸å®è·µ"}},[t._v("#")]),t._v(" ğŸ”§ ä¹ã€é«˜çº§ç‰¹æ€§ä¸å®è·µ")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç†å¿µ")]),t._v("ï¼šSpringæä¾›äº†ä¸°å¯Œçš„é«˜çº§ç‰¹æ€§ï¼ŒåŒ…æ‹¬äº‹ä»¶æœºåˆ¶ã€ç¼“å­˜æŠ½è±¡ã€å›½é™…åŒ–æ”¯æŒç­‰ï¼ŒåŠ©åŠ›ä¼ä¸šçº§åº”ç”¨å¼€å‘ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-springçš„äº‹ä»¶æœºåˆ¶æ€ä¹ˆä½¿ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springçš„äº‹ä»¶æœºåˆ¶æ€ä¹ˆä½¿ç”¨"}},[t._v("#")]),t._v(" ğŸ¯ Springçš„äº‹ä»¶æœºåˆ¶æ€ä¹ˆä½¿ç”¨ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Springäº‹ä»¶æœºåˆ¶åŸºäºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œå®ç°ç»„ä»¶é—´çš„è§£è€¦é€šä¿¡ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç»„ä»¶")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("ApplicationEvent")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("äº‹ä»¶åŸºç±»ï¼Œæ‰€æœ‰è‡ªå®šä¹‰äº‹ä»¶éœ€ç»§æ‰¿")]),t._v(" "),a("li",[t._v("åŒ…å«äº‹ä»¶æºå’Œæ—¶é—´æˆ³ä¿¡æ¯")]),t._v(" "),a("li",[t._v("å¯ä»¥æºå¸¦è‡ªå®šä¹‰æ•°æ®")])]),t._v(" "),a("p",[a("strong",[t._v("ApplicationEventPublisher")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("äº‹ä»¶å‘å¸ƒå™¨æ¥å£")]),t._v(" "),a("li",[t._v("ApplicationContextå®ç°äº†æ­¤æ¥å£")]),t._v(" "),a("li",[t._v("é€šè¿‡publishEventæ–¹æ³•å‘å¸ƒäº‹ä»¶")])]),t._v(" "),a("p",[a("strong",[t._v("ApplicationListener")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("äº‹ä»¶ç›‘å¬å™¨æ¥å£")]),t._v(" "),a("li",[t._v("æ³›å‹æŒ‡å®šç›‘å¬çš„äº‹ä»¶ç±»å‹")]),t._v(" "),a("li",[t._v("å¯ä»¥ä½¿ç”¨@EventListeneræ³¨è§£ç®€åŒ–")])]),t._v(" "),a("p",[a("strong",[t._v("äº‹ä»¶å¤„ç†ç‰¹ç‚¹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é»˜è®¤åŒæ­¥æ‰§è¡Œï¼Œå¯é…ç½®å¼‚æ­¥")]),t._v(" "),a("li",[t._v("æ”¯æŒäº‹ä»¶è¿‡æ»¤å’Œæ¡ä»¶ç›‘å¬")]),t._v(" "),a("li",[t._v("è‡ªåŠ¨ç±»å‹åŒ¹é…ï¼Œæ”¯æŒç»§æ‰¿å…³ç³»")]),t._v(" "),a("li",[t._v("å¯ä»¥è®¾ç½®ç›‘å¬å™¨ä¼˜å…ˆçº§")])]),t._v(" "),a("p",[a("strong",[t._v("åº”ç”¨åœºæ™¯")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä¸šåŠ¡è§£è€¦ï¼šè®¢å•åˆ›å»ºåé€šçŸ¥åº“å­˜ã€ç§¯åˆ†ç­‰")]),t._v(" "),a("li",[t._v("ç³»ç»Ÿç›‘æ§ï¼šæ€§èƒ½æŒ‡æ ‡æ”¶é›†")]),t._v(" "),a("li",[t._v("ç¼“å­˜æ›´æ–°ï¼šæ•°æ®å˜æ›´åç¼“å­˜å¤±æ•ˆ")]),t._v(" "),a("li",[t._v('æ—¥å¿—å®¡è®¡ï¼šæ“ä½œè®°å½•å’Œå®¡è®¡æ—¥å¿—"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è‡ªå®šä¹‰äº‹ä»¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationEvent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("order "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// äº‹ä»¶å‘å¸ƒ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationEventPublisher")]),t._v(" eventPublisher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" savedOrder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" orderRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘å¸ƒäº‹ä»¶")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),t._v(" event "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" savedOrder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        eventPublisher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("publishEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" savedOrder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// äº‹ä»¶ç›‘å¬")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderEventListener")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åº“å­˜å¤„ç†")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EventListener")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Async")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleOrderCreated")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        inventoryService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reserveStock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItems")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç§¯åˆ†å¤„ç†")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EventListener")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Order")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è®¾ç½®ä¼˜å…ˆçº§")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handlePointsCalculation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),t._v(" order "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        pointService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("calculatePoints")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("order"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¡ä»¶ç›‘å¬")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("condition "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#event.order.amount > 1000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleVipOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderCreatedEvent")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†VIPè®¢å•é€»è¾‘")]),t._v("\n        vipService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("processVipOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼‚æ­¥äº‹ä»¶é…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableAsync")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AsyncEventConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TaskExecutor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("taskExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolTaskExecutor")]),t._v(" executor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ThreadPoolTaskExecutor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCorePoolSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMaxPoolSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQueueCapacity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setThreadNamePrefix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Event-"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initialize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" executor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-cacheç¼“å­˜æŠ½è±¡æ€ä¹ˆä½¿ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-cacheç¼“å­˜æŠ½è±¡æ€ä¹ˆä½¿ç”¨"}},[t._v("#")]),t._v(" ğŸ¯ Spring Cacheç¼“å­˜æŠ½è±¡æ€ä¹ˆä½¿ç”¨ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring Cacheæä¾›äº†å£°æ˜å¼ç¼“å­˜æŠ½è±¡ï¼Œæ”¯æŒå¤šç§ç¼“å­˜å®ç°ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒæ³¨è§£")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("@Cacheable")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ–¹æ³•ç»“æœç¼“å­˜ï¼Œå¦‚æœç¼“å­˜å­˜åœ¨ç›´æ¥è¿”å›")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºæŸ¥è¯¢æ–¹æ³•")]),t._v(" "),a("li",[t._v("æ”¯æŒæ¡ä»¶ç¼“å­˜å’ŒSpELè¡¨è¾¾å¼")])]),t._v(" "),a("p",[a("strong",[t._v("@CacheEvict")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç¼“å­˜æ¸…é™¤ï¼Œåˆ é™¤æŒ‡å®šç¼“å­˜")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºæ›´æ–°ã€åˆ é™¤æ“ä½œ")]),t._v(" "),a("li",[t._v("æ”¯æŒæ‰¹é‡æ¸…é™¤å’Œæ¡ä»¶æ¸…é™¤")])]),t._v(" "),a("p",[a("strong",[t._v("@CachePut")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç¼“å­˜æ›´æ–°ï¼Œæ€»æ˜¯æ‰§è¡Œæ–¹æ³•å¹¶æ›´æ–°ç¼“å­˜")]),t._v(" "),a("li",[t._v("é€‚ç”¨äºæ›´æ–°æ“ä½œ")])]),t._v(" "),a("p",[a("strong",[t._v("@Caching")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç»„åˆç¼“å­˜æ“ä½œ")]),t._v(" "),a("li",[t._v("æ”¯æŒåŒæ—¶ä½¿ç”¨å¤šä¸ªç¼“å­˜æ³¨è§£")])]),t._v(" "),a("p",[a("strong",[t._v("ç¼“å­˜å®ç°")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ConcurrentHashMapï¼šç®€å•å†…å­˜ç¼“å­˜")]),t._v(" "),a("li",[t._v("Redisï¼šåˆ†å¸ƒå¼ç¼“å­˜")]),t._v(" "),a("li",[t._v("Ehcacheï¼šæœ¬åœ°ç¼“å­˜")]),t._v(" "),a("li",[t._v("Caffeineï¼šé«˜æ€§èƒ½æœ¬åœ°ç¼“å­˜")])]),t._v(" "),a("p",[a("strong",[t._v("é«˜çº§ç‰¹æ€§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç¼“å­˜ç©¿é€ä¿æŠ¤")]),t._v(" "),a("li",[t._v("ç¼“å­˜é›ªå´©ä¿æŠ¤")]),t._v(" "),a("li",[t._v("è‡ªå®šä¹‰ç¼“å­˜é”®ç”Ÿæˆç­–ç•¥")]),t._v(" "),a("li",[t._v('ç¼“å­˜ç»Ÿè®¡å’Œç›‘æ§"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ç”¨ç¼“å­˜")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableCaching")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheManager")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cacheManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisCacheManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Builder")]),t._v(" builder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisCacheManager\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RedisCacheManagerBuilder")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fromConnectionFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jedisConnectionFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cacheDefaults")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cacheConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" builder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisCacheConfiguration")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cacheConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RedisCacheConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("defaultCacheConfig")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("entryTtl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofMinutes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("disableCachingNullValues")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¼“å­˜æŸ¥è¯¢ç»“æœ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cacheable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("orElse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¡ä»¶ç¼“å­˜")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Cacheable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#username"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" condition "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#username.length() > 3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findByUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¼“å­˜æ›´æ–°")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@CachePut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#user.id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¼“å­˜æ¸…é™¤")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@CacheEvict")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¸…é™¤æ‰€æœ‰ç¼“å­˜")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@CacheEvict")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" allEntries "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearAllUserCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¸…ç©ºæ‰€æœ‰ç”¨æˆ·ç¼“å­˜")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»„åˆç¼“å­˜æ“ä½œ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Caching")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        put "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@CachePut")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#user.id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        evict "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@CacheEvict")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userStats"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" allEntries "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-springå¦‚ä½•å®ç°å›½é™…åŒ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springå¦‚ä½•å®ç°å›½é™…åŒ–"}},[t._v("#")]),t._v(" ğŸ¯ Springå¦‚ä½•å®ç°å›½é™…åŒ–ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Springæä¾›äº†å®Œæ•´çš„å›½é™…åŒ–ï¼ˆi18nï¼‰æ”¯æŒï¼š')]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç»„ä»¶")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("MessageSource")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ¶ˆæ¯èµ„æºæ¥å£ï¼Œç®¡ç†å›½é™…åŒ–æ¶ˆæ¯")]),t._v(" "),a("li",[t._v("ResourceBundleMessageSourceï¼šåŸºäºpropertiesæ–‡ä»¶")]),t._v(" "),a("li",[t._v("ReloadableResourceBundleMessageSourceï¼šæ”¯æŒçƒ­åŠ è½½")])]),t._v(" "),a("p",[a("strong",[t._v("LocaleResolver")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("è¯­è¨€ç¯å¢ƒè§£æå™¨ï¼Œç¡®å®šç”¨æˆ·çš„Locale")]),t._v(" "),a("li",[t._v("AcceptHeaderLocaleResolverï¼šåŸºäºHTTPå¤´")]),t._v(" "),a("li",[t._v("SessionLocaleResolverï¼šåŸºäºSession")]),t._v(" "),a("li",[t._v("CookieLocaleResolverï¼šåŸºäºCookie")])]),t._v(" "),a("p",[a("strong",[t._v("LocaleChangeInterceptor")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("è¯­è¨€åˆ‡æ¢æ‹¦æˆªå™¨")]),t._v(" "),a("li",[t._v("ç›‘å¬è¯­è¨€åˆ‡æ¢è¯·æ±‚å‚æ•°")])]),t._v(" "),a("p",[a("strong",[t._v("å®ç°æ­¥éª¤")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("é…ç½®MessageSourceå’ŒLocaleResolver")]),t._v(" "),a("li",[t._v("åˆ›å»ºä¸åŒè¯­è¨€çš„èµ„æºæ–‡ä»¶")]),t._v(" "),a("li",[t._v("æ·»åŠ è¯­è¨€åˆ‡æ¢æ‹¦æˆªå™¨")]),t._v(" "),a("li",[t._v("åœ¨ä»£ç ä¸­ä½¿ç”¨MessageSourceè·å–æ¶ˆæ¯")]),t._v(" "),a("li",[t._v("åœ¨JSP/Thymeleafæ¨¡æ¿ä¸­ä½¿ç”¨å›½é™…åŒ–æ ‡ç­¾")])]),t._v(" "),a("p",[a("strong",[t._v("æœ€ä½³å®è·µ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ç»Ÿä¸€çš„èµ„æºæ–‡ä»¶å‘½åè§„èŒƒ")]),t._v(" "),a("li",[t._v("ä½¿ç”¨é”®å€¼å¯¹ç®¡ç†æ¶ˆæ¯")]),t._v(" "),a("li",[t._v("æ”¯æŒå‚æ•°åŒ–æ¶ˆæ¯")]),t._v(" "),a("li",[t._v('æä¾›å‹å¥½çš„è¯­è¨€åˆ‡æ¢ç•Œé¢"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å›½é™…åŒ–é…ç½®")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("I18nConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebMvcConfigurer")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageSource")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("messageSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceBundleMessageSource")]),t._v(" messageSource "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceBundleMessageSource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        messageSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setBasename")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"messages"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        messageSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDefaultEncoding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" messageSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocaleResolver")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("localeResolver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SessionLocaleResolver")]),t._v(" resolver "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SessionLocaleResolver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        resolver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDefaultLocale")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Locale")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CHINA")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" resolver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocaleChangeInterceptor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("localeChangeInterceptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocaleChangeInterceptor")]),t._v(" interceptor "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocaleChangeInterceptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        interceptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setParamName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lang"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" interceptor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addInterceptors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterceptorRegistry")]),t._v(" registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addInterceptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("localeChangeInterceptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èµ„æºæ–‡ä»¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// messages_zh_CN.properties")]),t._v("\nuser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ç”¨æˆ·å\nuser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("å¹´é¾„\nwelcome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("æ¬¢è¿ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// messages_en_US.properties")]),t._v("\nuser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Username")]),t._v("\nuser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Age")]),t._v("\nwelcome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Welcome")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ§åˆ¶å™¨ä½¿ç”¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HomeController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageSource")]),t._v(" messageSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/welcome"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("welcome")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestParam")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                         "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Locale")]),t._v(" locale "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RequestContextUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocale")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" messageSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"welcome.message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                                                 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" locale"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"welcome"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å·¥å…·ç±»")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("I18nUtil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessageSource")]),t._v(" messageSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Locale")]),t._v(" locale "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LocaleContextHolder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocale")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" messageSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" locale"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-spring-webfluxå“åº”å¼ç¼–ç¨‹æ€ä¹ˆä½¿ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-webfluxå“åº”å¼ç¼–ç¨‹æ€ä¹ˆä½¿ç”¨"}},[t._v("#")]),t._v(" ğŸ¯ Spring WebFluxå“åº”å¼ç¼–ç¨‹æ€ä¹ˆä½¿ç”¨ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring WebFluxæ˜¯Spring 5å¼•å…¥çš„å“åº”å¼Webæ¡†æ¶ï¼ŒåŸºäºReactorå®ç°ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒæ¦‚å¿µ")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("å“åº”å¼ç¼–ç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŸºäºå¼‚æ­¥æ•°æ®æµçš„ç¼–ç¨‹æ¨¡å¼")]),t._v(" "),a("li",[t._v("é‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ•°æ®æµé©±åŠ¨")]),t._v(" "),a("li",[t._v("éé˜»å¡I/Oï¼Œæé«˜ç³»ç»Ÿååé‡")]),t._v(" "),a("li",[t._v("æ”¯æŒèƒŒå‹ï¼ˆBackpressureï¼‰å¤„ç†")])]),t._v(" "),a("p",[a("strong",[t._v("Reactoræ ¸å¿ƒç±»å‹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Monoï¼šè¡¨ç¤º0åˆ°1ä¸ªå…ƒç´ çš„å¼‚æ­¥åºåˆ—")]),t._v(" "),a("li",[t._v("Fluxï¼šè¡¨ç¤º0åˆ°Nä¸ªå…ƒç´ çš„å¼‚æ­¥åºåˆ—")]),t._v(" "),a("li",[t._v("æ”¯æŒé“¾å¼æ“ä½œå’Œå‡½æ•°å¼ç¼–ç¨‹")])]),t._v(" "),a("p",[a("strong",[t._v("WebFlux vs Spring MVC")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("Spring MVC")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŸºäºServlet APIï¼ŒåŒæ­¥é˜»å¡æ¨¡å‹")]),t._v(" "),a("li",[t._v("æ¯ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªçº¿ç¨‹")]),t._v(" "),a("li",[t._v("é€‚åˆä¼ ç»Ÿçš„CRUDåº”ç”¨")]),t._v(" "),a("li",[t._v("æˆç†Ÿç¨³å®šï¼Œç”Ÿæ€å®Œå–„")])]),t._v(" "),a("p",[a("strong",[t._v("Spring WebFlux")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŸºäºReactive Streamsï¼Œå¼‚æ­¥éé˜»å¡")]),t._v(" "),a("li",[t._v("å°‘é‡çº¿ç¨‹å¤„ç†å¤§é‡è¯·æ±‚")]),t._v(" "),a("li",[t._v("é€‚åˆé«˜å¹¶å‘ã€I/Oå¯†é›†å‹åº”ç”¨")]),t._v(" "),a("li",[t._v("æ”¯æŒå‡½æ•°å¼å’Œæ³¨è§£å¼ç¼–ç¨‹")])]),t._v(" "),a("p",[a("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("é«˜å¹¶å‘çš„å¾®æœåŠ¡åº”ç”¨")]),t._v(" "),a("li",[t._v("å®æ—¶æ•°æ®æµå¤„ç†")]),t._v(" "),a("li",[t._v("æœåŠ¡é—´å¼‚æ­¥é€šä¿¡")]),t._v(" "),a("li",[t._v("SSEï¼ˆServer-Sent Eventsï¼‰å’ŒWebSocket")])]),t._v(" "),a("p",[a("strong",[t._v("æŠ€æœ¯æ ˆæ”¯æŒ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Nettyã€Undertowç­‰éé˜»å¡æœåŠ¡å™¨")]),t._v(" "),a("li",[t._v("R2DBCå“åº”å¼æ•°æ®åº“è®¿é—®")]),t._v(" "),a("li",[t._v("Spring Cloud Gatewayå“åº”å¼ç½‘å…³")]),t._v(" "),a("li",[t._v('Redis Reactiveã€MongoDB Reactiveç­‰"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// WebFluxæ§åˆ¶å™¨")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactiveUserController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactiveUserService")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›å•ä¸ªç”¨æˆ·")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("switchIfEmpty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserNotFoundException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç”¨æˆ·ä¸å­˜åœ¨"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›ç”¨æˆ·åˆ—è¡¨")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flux")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delayElements")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¨¡æ‹Ÿå»¶è¿Ÿ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºç”¨æˆ·")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" userMono"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userMono\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flatMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userService"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doOnSuccess")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç”¨æˆ·åˆ›å»ºæˆåŠŸ: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æµå¼å¤„ç†")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/stream"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" produces "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MediaType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TEXT_EVENT_STREAM_VALUE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flux")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("streamUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("delayElements")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofSeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("repeat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å“åº”å¼Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactiveUserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactiveUserRepository")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doOnNext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ‰¾åˆ°ç”¨æˆ·: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doOnError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æŸ¥è¯¢ç”¨æˆ·å¤±è´¥: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flux")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isActive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" u2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" u1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compareTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("just")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasText")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("switchIfEmpty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IllegalArgumentException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flatMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userRepository"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰¹é‡å¤„ç†")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flux")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("saveAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flux")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" users\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasText")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flatMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onErrorContinue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" \n                    log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ä¿å­˜ç”¨æˆ·å¤±è´¥: {}, é”™è¯¯: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‡½æ•°å¼ç¼–ç¨‹é£æ ¼")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouterConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouterFunction")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("userRoutes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserHandler")]),t._v(" userHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RouterFunctions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("route")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userHandler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userHandler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("POST")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userHandler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("PUT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userHandler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("DELETE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userHandler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ReactiveUserService")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("contentType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MediaType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("APPLICATION_JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pathVariable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flatMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bodyValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("switchIfEmpty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("notFound")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bodyToMono")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flatMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userService"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flatMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CREATED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bodyValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onErrorResume")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServerResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("badRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bodyValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// WebClientå“åº”å¼HTTPå®¢æˆ·ç«¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExternalApiService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebClient")]),t._v(" webClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExternalApiService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webClient "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("baseUrl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://api.example.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("defaultHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpHeaders")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CONTENT_TYPE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MediaType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("APPLICATION_JSON_VALUE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("codecs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("configurer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" configurer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("defaultCodecs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("maxInMemorySize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" webClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("retrieve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("is4xxClientError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n                    response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å®¢æˆ·ç«¯é”™è¯¯"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("is5xxServerError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mono")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æœåŠ¡å™¨é”™è¯¯"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bodyToMono")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ofSeconds")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("retry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Flux")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" webClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("retrieve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bodyToFlux")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onErrorReturn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collections")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("emptyList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("flatMapIterable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"ğŸ¯-springmvc-å’Œ-spring-webflux-åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springmvc-å’Œ-spring-webflux-åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ springMVC  å’Œ spring WebFlux åŒºåˆ«ï¼Ÿ")]),t._v(" "),a("p",[a("code",[t._v("Spring MVC")]),t._v(" å’Œ "),a("code",[t._v("Spring WebFlux")]),t._v(" éƒ½æ˜¯ Spring æ¡†æ¶ä¸­ç”¨äºæ„å»º Web åº”ç”¨ç¨‹åºçš„æ¨¡å—ï¼Œä½†å®ƒä»¬æœ‰ä¸€äº›æ ¹æœ¬æ€§çš„åŒºåˆ«ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†è¯·æ±‚çš„æ–¹å¼å’Œæ”¯æŒçš„ç¼–ç¨‹æ¨¡å‹ä¸Šã€‚ä»¥ä¸‹æ˜¯ä¸¤è€…çš„ä¸»è¦åŒºåˆ«å’Œå·¥ä½œåŸç†çš„è¯¦ç»†è¯´æ˜ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ç¼–ç¨‹æ¨¡å‹å’Œæ¶æ„")])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Spring MVCï¼ˆåŒæ­¥é˜»å¡å¼ï¼‰")]),t._v(" "),a("p",[t._v("Spring MVC æ˜¯ä¸€ä¸ªåŸºäº Servlet çš„ Web æ¡†æ¶ï¼Œéµå¾ªç»å…¸çš„è¯·æ±‚-å“åº”æ¨¡å‹ã€‚å®ƒæ˜¯ä¸€ä¸ª "),a("strong",[t._v("åŒæ­¥é˜»å¡")]),t._v(" çš„æ¡†æ¶ï¼Œå³æ¯ä¸ªè¯·æ±‚éƒ½ç”±ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹å¤„ç†ï¼Œç›´åˆ°è¯·æ±‚å®Œæˆï¼Œçº¿ç¨‹æ‰ä¼šè¢«é‡Šæ”¾ã€‚å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("è¯·æ±‚åˆ°è¾¾")]),t._v("ï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒTomcat æ¥æ”¶è¯·æ±‚å¹¶äº¤ç»™ Spring MVC å¤„ç†ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("è¯·æ±‚åˆ†å‘")]),t._v("ï¼šDispatcherServlet å°†è¯·æ±‚ä¼ é€’ç»™åˆé€‚çš„æ§åˆ¶å™¨ï¼ˆControllerï¼‰ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å¤„ç†è¯·æ±‚")]),t._v("ï¼šæ§åˆ¶å™¨å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè°ƒç”¨æœåŠ¡å±‚ã€æ•°æ®è®¿é—®å±‚ç­‰ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("è§†å›¾è§£æ")]),t._v("ï¼šè¿”å›æ¨¡å‹å’Œè§†å›¾ï¼ˆModelAndViewï¼‰ï¼Œç„¶åäº¤ç”±è§†å›¾è§£æå™¨ï¼ˆå¦‚ JSPï¼‰æ¸²æŸ“æˆæœ€ç»ˆçš„ HTMLã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å“åº”è¿”å›")]),t._v("ï¼šæœ€ç»ˆçš„å“åº”é€šè¿‡ Tomcat è¿”å›åˆ°å®¢æˆ·ç«¯ã€‚")])])])]),t._v(" "),a("p",[t._v("â€‹\tSpring MVC é€‚ç”¨äºä¼ ç»Ÿçš„åŸºäº Servlet çš„ Web åº”ç”¨ï¼Œé€šå¸¸ç”¨äºåŒæ­¥åœºæ™¯ï¼Œåƒè¡¨å•æäº¤ã€å¤„ç†é‡å®šå‘ç­‰ã€‚")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[a("strong",[t._v("Spring WebFluxï¼ˆå¼‚æ­¥éé˜»å¡å¼ï¼‰")])]),t._v(" "),a("p",[t._v("Spring WebFlux æ˜¯ä¸€ä¸ª "),a("strong",[t._v("å¼‚æ­¥éé˜»å¡")]),t._v(" çš„ Web æ¡†æ¶ï¼Œå¯ä»¥æ›´å¥½åœ°å¤„ç†é«˜å¹¶å‘åœºæ™¯å’Œ I/O å¯†é›†å‹æ“ä½œã€‚Spring WebFlux é€‚ç”¨äºå“åº”å¼ç¼–ç¨‹æ¨¡å‹ï¼Œé€šè¿‡ä½¿ç”¨ "),a("strong",[t._v("Reactor")]),t._v("ï¼ˆä¸€ä¸ªå“åº”å¼ç¼–ç¨‹åº“ï¼‰æä¾›çš„æ”¯æŒï¼Œèƒ½å¤Ÿä»¥å¼‚æ­¥å’Œéé˜»å¡çš„æ–¹å¼å¤„ç†è¯·æ±‚ã€‚")]),t._v(" "),a("p",[t._v("Spring WebFlux å¯ä»¥è¿è¡Œåœ¨å¤šç§å®¹å™¨ä¸Šï¼Œé™¤äº†ä¼ ç»Ÿçš„ Servlet å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰ï¼Œå®ƒè¿˜æ”¯æŒåŸºäº Netty ç­‰é Servlet å®¹å™¨çš„è¿è¡Œæ¨¡å¼ã€‚å®ƒçš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("è¯·æ±‚åˆ°è¾¾")]),t._v("ï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒTomcat æˆ– Netty æ¥æ”¶è¯·æ±‚ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("è¯·æ±‚åˆ†å‘")]),t._v("ï¼šDispatcherHandler å°†è¯·æ±‚ä¼ é€’ç»™åˆé€‚çš„æ§åˆ¶å™¨ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å¼‚æ­¥å¤„ç†")]),t._v("ï¼šæ§åˆ¶å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶ï¼Œé€šå¸¸ä¼šè¿”å›ä¸€ä¸ª "),a("code",[t._v("Mono")]),t._v(" æˆ– "),a("code",[t._v("Flux")]),t._v("ï¼ˆReactor åº“çš„å¼‚æ­¥æ•°æ®æµç±»å‹ï¼‰ï¼Œè¿™äº›ç±»å‹ä»£è¡¨äº†ä¸€ä¸ªå•ä¸€å…ƒç´ ï¼ˆMonoï¼‰æˆ–è€…å¤šä¸ªå…ƒç´ ï¼ˆFluxï¼‰çš„å¼‚æ­¥å“åº”ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å“åº”è¿”å›")]),t._v("ï¼šé€šè¿‡äº‹ä»¶é©±åŠ¨çš„æ–¹å¼ï¼Œæœ€ç»ˆå“åº”å¼‚æ­¥è¿”å›ç»™å®¢æˆ·ç«¯ã€‚")])])])]),t._v(" "),a("p",[t._v("â€‹\tSpring WebFlux é€‚åˆé«˜å¹¶å‘ã€I/O å¯†é›†å‹å’Œå®æ—¶æ•°æ®æµåœºæ™¯ï¼ŒåƒèŠå¤©ç³»ç»Ÿã€å®æ—¶é€šçŸ¥ã€æ•°æ®æµå¤„ç†ç­‰ã€‚")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("ç‰¹æ€§")]),t._v(" "),a("th",[t._v("Spring MVC")]),t._v(" "),a("th",[t._v("Spring WebFlux")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("ç¼–ç¨‹æ¨¡å‹")])]),t._v(" "),a("td",[t._v("åŒæ­¥é˜»å¡æ¨¡å‹ï¼ˆä¼ ç»Ÿçš„è¯·æ±‚-å“åº”æ¨¡å‹ï¼‰")]),t._v(" "),a("td",[t._v("å¼‚æ­¥éé˜»å¡æ¨¡å‹ï¼ˆå“åº”å¼ç¼–ç¨‹ï¼‰")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("çº¿ç¨‹æ¨¡å‹")])]),t._v(" "),a("td",[t._v("æ¯ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œé˜»å¡ç­‰å¾…å“åº”")]),t._v(" "),a("td",[t._v("è¯·æ±‚é€šè¿‡äº‹ä»¶å¾ªç¯å¤„ç†ï¼Œå¼‚æ­¥è¿”å›ç»“æœ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("è¯·æ±‚å¤„ç†æ–¹å¼")])]),t._v(" "),a("td",[t._v("é˜»å¡ï¼Œå¤„ç†è¯·æ±‚æ—¶ï¼Œçº¿ç¨‹ä¼šè¢«å ç”¨")]),t._v(" "),a("td",[t._v("éé˜»å¡ï¼Œçº¿ç¨‹å¯ä»¥ç”¨äºå…¶ä»–ä»»åŠ¡ï¼Œç›´åˆ°ç»“æœè¿”å›")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("I/O æ¨¡å‹")])]),t._v(" "),a("td",[t._v("é˜»å¡å¼ I/O")]),t._v(" "),a("td",[t._v("éé˜»å¡å¼ I/O")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("é€‚ç”¨åœºæ™¯")])]),t._v(" "),a("td",[t._v("å¯¹åŒæ­¥è¯·æ±‚è¾ƒä¸ºé€‚åˆï¼Œä¾‹å¦‚è¡¨å•æäº¤ï¼Œä¼ ç»Ÿ Web åº”ç”¨")]),t._v(" "),a("td",[t._v("é«˜å¹¶å‘ã€å®æ—¶æ•°æ®æµå¤„ç†ï¼ŒI/O å¯†é›†å‹åœºæ™¯ï¼Œå¾®æœåŠ¡")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ”¯æŒçš„å®¹å™¨")])]),t._v(" "),a("td",[t._v("Servlet å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰")]),t._v(" "),a("td",[t._v("Servlet å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰åŠé Servlet å®¹å™¨ï¼ˆå¦‚ Nettyï¼‰")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å“åº”ä½“ç±»å‹")])]),t._v(" "),a("td",[a("code",[t._v("ModelAndView")]),t._v("ï¼ˆåŒæ­¥è¿”å›ï¼‰")]),t._v(" "),a("td",[a("code",[t._v("Mono")]),t._v(" å’Œ "),a("code",[t._v("Flux")]),t._v("ï¼ˆå¼‚æ­¥è¿”å›ï¼‰")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ‰©å±•æ€§ä¸æ€§èƒ½")])]),t._v(" "),a("td",[t._v("é«˜å¹¶å‘æ—¶æ€§èƒ½è¾ƒå·®ï¼Œå®¹æ˜“å‡ºç°çº¿ç¨‹é¥±å’Œ")]),t._v(" "),a("td",[t._v("é«˜å¹¶å‘æ—¶æ€§èƒ½æ›´ä¼˜ï¼Œçº¿ç¨‹åˆ©ç”¨ç‡æ›´é«˜")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("å­¦ä¹ æ›²çº¿")])]),t._v(" "),a("td",[t._v("æ›´æ˜“ä¸Šæ‰‹ï¼Œç†Ÿæ‚‰çš„ç¼–ç¨‹æ¨¡å‹")]),t._v(" "),a("td",[t._v("å­¦ä¹ æ›²çº¿è¾ƒé™¡ï¼Œéœ€è¦ç†è§£å¼‚æ­¥ç¼–ç¨‹å’Œå“åº”å¼æµ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("æ”¯æŒçš„ API ç±»å‹")])]),t._v(" "),a("td",[t._v("REST APIã€Web åº”ç”¨")]),t._v(" "),a("td",[t._v("æ”¯æŒ REST APIï¼Œä¸”æ›´é€‚åˆé•¿è¿æ¥å’Œå®æ—¶é€šä¿¡")])])])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-æ¡†æ¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-æ¡†æ¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼"}},[t._v("#")]),t._v(" ğŸ¯ Spring æ¡†æ¶ä¸­ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å·¥å‚è®¾è®¡æ¨¡å¼")]),t._v(" : Springä½¿ç”¨å·¥å‚æ¨¡å¼é€šè¿‡ "),a("code",[t._v("BeanFactory")]),t._v("ã€"),a("code",[t._v("ApplicationContext")]),t._v(" åˆ›å»º bean å¯¹è±¡ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ä»£ç†è®¾è®¡æ¨¡å¼")]),t._v(" : Spring AOP åŠŸèƒ½çš„å®ç°ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å•ä¾‹è®¾è®¡æ¨¡å¼")]),t._v(" : Spring ä¸­çš„ Bean é»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æ¨¡æ¿æ–¹æ³•æ¨¡å¼")]),t._v(" : Spring ä¸­ "),a("code",[t._v("jdbcTemplate")]),t._v("ã€"),a("code",[t._v("hibernateTemplate")]),t._v(" ç­‰ä»¥ Template ç»“å°¾çš„å¯¹æ•°æ®åº“æ“ä½œçš„ç±»ï¼Œå®ƒä»¬å°±ä½¿ç”¨åˆ°äº†æ¨¡æ¿æ¨¡å¼ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("åŒ…è£…å™¨è®¾è®¡æ¨¡å¼")]),t._v(" : æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦è¿æ¥å¤šä¸ªæ•°æ®åº“ï¼Œè€Œä¸”ä¸åŒçš„å®¢æˆ·åœ¨æ¯æ¬¡è®¿é—®ä¸­æ ¹æ®éœ€è¦ä¼šå»è®¿é—®ä¸åŒçš„æ•°æ®åº“ã€‚è¿™ç§æ¨¡å¼è®©æˆ‘ä»¬å¯ä»¥æ ¹æ®å®¢æˆ·çš„éœ€æ±‚èƒ½å¤ŸåŠ¨æ€åˆ‡æ¢ä¸åŒçš„æ•°æ®æºã€‚")]),t._v(" "),a("li",[a("strong",[t._v("è§‚å¯Ÿè€…æ¨¡å¼:")]),t._v(" Spring äº‹ä»¶é©±åŠ¨æ¨¡å‹å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼å¾ˆç»å…¸çš„ä¸€ä¸ªåº”ç”¨ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("é€‚é…å™¨æ¨¡å¼")]),t._v(" :Spring AOP çš„å¢å¼ºæˆ–é€šçŸ¥(Advice)ä½¿ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼ã€spring MVC ä¸­ä¹Ÿæ˜¯ç”¨åˆ°äº†é€‚é…å™¨æ¨¡å¼é€‚é…"),a("code",[t._v("Controller")]),t._v("ã€‚")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ¯-åã€é¢è¯•é‡ç‚¹ä¸å®è·µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-åã€é¢è¯•é‡ç‚¹ä¸å®è·µ"}},[t._v("#")]),t._v(" ğŸ¯ åã€é¢è¯•é‡ç‚¹ä¸å®è·µ")]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒç†å¿µ")]),t._v("ï¼šæŒæ¡Springé¢è¯•çš„å…³é”®æŠ€å·§å’Œå¸¸è§é™·é˜±ï¼Œç»“åˆå®é™…é¡¹ç›®ç»éªŒå±•ç°æŠ€æœ¯æ·±åº¦ã€‚")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-springé¢è¯•å¸¸è§é™·é˜±å’Œæ³¨æ„äº‹é¡¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springé¢è¯•å¸¸è§é™·é˜±å’Œæ³¨æ„äº‹é¡¹"}},[t._v("#")]),t._v(" ğŸ¯ Springé¢è¯•å¸¸è§é™·é˜±å’Œæ³¨æ„äº‹é¡¹ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Springé¢è¯•ä¸­æœ‰ä¸€äº›å¸¸è§çš„é™·é˜±å’Œéœ€è¦æ³¨æ„çš„ç‚¹ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("æ¦‚å¿µæ··æ·†é™·é˜±")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("BeanFactory vs ApplicationContextï¼šåŠŸèƒ½å’Œä½¿ç”¨åœºæ™¯åŒºåˆ«")]),t._v(" "),a("li",[t._v("@Component vs @Beanï¼šæ³¨è§£é©±åŠ¨ vs Javaé…ç½®")]),t._v(" "),a("li",[t._v("AOP vs è¿‡æ»¤å™¨ï¼šå®ç°æœºåˆ¶å’Œé€‚ç”¨åœºæ™¯ä¸åŒ")])]),t._v(" "),a("p",[a("strong",[t._v("ç”Ÿå‘½å‘¨æœŸç†è§£é™·é˜±")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Beanç”Ÿå‘½å‘¨æœŸçš„å®Œæ•´æµç¨‹è¦å‡†ç¡®")]),t._v(" "),a("li",[t._v("å¾ªç¯ä¾èµ–çš„è§£å†³æœºåˆ¶è¦æ¸…æ¥š")]),t._v(" "),a("li",[t._v("äº‹åŠ¡å¤±æ•ˆçš„å¸¸è§åœºæ™¯è¦ç†Ÿæ‚‰")])]),t._v(" "),a("p",[a("strong",[t._v("æ€§èƒ½ç›¸å…³é™·é˜±")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å•ä¾‹Beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜")]),t._v(" "),a("li",[t._v("@Transactionalçš„æ€§èƒ½å½±å“")]),t._v(" "),a("li",[t._v("AOPä»£ç†çš„åˆ›å»ºå¼€é”€")])]),t._v(" "),a("p",[a("strong",[t._v("é…ç½®ç›¸å…³é™·é˜±")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("æ³¨è§£æ‰«æèŒƒå›´è¦åˆç†")]),t._v(" "),a("li",[t._v("é…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§é¡ºåº")]),t._v(" "),a("li",[t._v("Profileç¯å¢ƒé…ç½®çš„ä½¿ç”¨")])]),t._v(" "),a("p",[a("strong",[t._v("å®è·µç»éªŒé™·é˜±")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä¸è¦åªåœç•™åœ¨ç†è®ºå±‚é¢")]),t._v(" "),a("li",[t._v("è¦èƒ½ç»“åˆå…·ä½“é¡¹ç›®åœºæ™¯")]),t._v(" "),a("li",[t._v("è¦äº†è§£Springåœ¨å¾®æœåŠ¡ä¸­çš„åº”ç”¨")])]),t._v(" "),a("p",[a("strong",[t._v("å›ç­”æŠ€å·§")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("å…ˆå›ç­”æ ¸å¿ƒæ¦‚å¿µï¼Œå†å±•å¼€ç»†èŠ‚")]),t._v(" "),a("li",[t._v("ç»“åˆä»£ç ç¤ºä¾‹è¯´æ˜")]),t._v(" "),a("li",[t._v("æåŠæ€§èƒ½å’Œæœ€ä½³å®è·µ")]),t._v(" "),a("li",[t._v('å±•ç°è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›"')])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-spring-boot-vs-spring-frameworkçš„åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-spring-boot-vs-spring-frameworkçš„åŒºåˆ«"}},[t._v("#")]),t._v(" ğŸ¯ Spring Boot vs Spring Frameworkçš„åŒºåˆ«ï¼Ÿ")]),t._v(" "),a("p",[t._v('"Spring Bootå’ŒSpring Frameworkæ˜¯åŒ…å«å…³ç³»ï¼Œä¸æ˜¯æ›¿ä»£å…³ç³»ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("Spring Framework")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Springç”Ÿæ€çš„æ ¸å¿ƒåŸºç¡€æ¡†æ¶")]),t._v(" "),a("li",[t._v("æä¾›IoCã€AOPã€äº‹åŠ¡ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½")]),t._v(" "),a("li",[t._v("éœ€è¦å¤§é‡XMLæˆ–Javaé…ç½®")]),t._v(" "),a("li",[t._v("å­¦ä¹ æ›²çº¿è¾ƒé™¡å³­ï¼Œé…ç½®å¤æ‚")])]),t._v(" "),a("p",[a("strong",[t._v("Spring Boot")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("åŸºäºSpring Frameworkçš„å¿«é€Ÿå¼€å‘æ¡†æ¶")]),t._v(" "),a("li",[t._v("æä¾›è‡ªåŠ¨é…ç½®å’Œèµ·æ­¥ä¾èµ–")]),t._v(" "),a("li",[t._v("çº¦å®šå¤§äºé…ç½®ï¼Œé›¶é…ç½®å¯åŠ¨")]),t._v(" "),a("li",[t._v("å†…åµŒWebæœåŠ¡å™¨ï¼Œç®€åŒ–éƒ¨ç½²")])]),t._v(" "),a("p",[a("strong",[t._v("æ ¸å¿ƒåŒºåˆ«")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("é…ç½®æ–¹å¼")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring Frameworkï¼šéœ€è¦æ˜¾å¼é…ç½®Bean")]),t._v(" "),a("li",[t._v("Spring Bootï¼šè‡ªåŠ¨é…ç½®ï¼ŒæŒ‰éœ€è¦†ç›–")])]),t._v(" "),a("p",[a("strong",[t._v("ä¾èµ–ç®¡ç†")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring Frameworkï¼šæ‰‹åŠ¨ç®¡ç†ç‰ˆæœ¬å…¼å®¹")]),t._v(" "),a("li",[t._v("Spring Bootï¼šStarterä¾èµ–ï¼Œç‰ˆæœ¬ä»²è£")])]),t._v(" "),a("p",[a("strong",[t._v("éƒ¨ç½²æ–¹å¼")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring Frameworkï¼šéœ€è¦å¤–éƒ¨Webå®¹å™¨")]),t._v(" "),a("li",[t._v("Spring Bootï¼šå†…åµŒå®¹å™¨ï¼ŒjaråŒ…ç›´æ¥è¿è¡Œ")])]),t._v(" "),a("p",[a("strong",[t._v("å¼€å‘æ•ˆç‡")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring Frameworkï¼šé…ç½®ç¹çï¼Œå¼€å‘æ…¢")]),t._v(" "),a("li",[t._v("Spring Bootï¼šå¿«é€Ÿå¯åŠ¨ï¼Œå¼€å‘æ•ˆç‡é«˜")])]),t._v(" "),a("p",[a("strong",[t._v("é€‚ç”¨åœºæ™¯")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring Frameworkï¼šéœ€è¦ç²¾ç¡®æ§åˆ¶é…ç½®çš„åœºæ™¯")]),t._v(" "),a("li",[t._v('Spring Bootï¼šå¿«é€Ÿå¼€å‘ï¼Œå¾®æœåŠ¡æ¶æ„"')])]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-å¦‚ä½•è®¾è®¡ä¸€ä¸ªspringåº”ç”¨çš„æ•´ä½“æ¶æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å¦‚ä½•è®¾è®¡ä¸€ä¸ªspringåº”ç”¨çš„æ•´ä½“æ¶æ„"}},[t._v("#")]),t._v(" ğŸ¯ å¦‚ä½•è®¾è®¡ä¸€ä¸ªSpringåº”ç”¨çš„æ•´ä½“æ¶æ„ï¼Ÿ")]),t._v(" "),a("p",[t._v('"è®¾è®¡Springåº”ç”¨æ¶æ„éœ€è¦è€ƒè™‘å¤šä¸ªæ–¹é¢ï¼š')]),t._v(" "),a("p",[a("strong",[t._v("åˆ†å±‚æ¶æ„è®¾è®¡")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("è¡¨ç°å±‚ï¼ˆPresentation Layerï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("ä½¿ç”¨Spring MVCå¤„ç†HTTPè¯·æ±‚")]),t._v(" "),a("li",[t._v("RestControlleræä¾›RESTful API")]),t._v(" "),a("li",[t._v("å‚æ•°æ ¡éªŒå’Œå¼‚å¸¸ç»Ÿä¸€å¤„ç†")])]),t._v(" "),a("p",[a("strong",[t._v("ä¸šåŠ¡å±‚ï¼ˆBusiness Layerï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Serviceå±‚å°è£…ä¸šåŠ¡é€»è¾‘")]),t._v(" "),a("li",[t._v("ä½¿ç”¨@Transactionalç®¡ç†äº‹åŠ¡")]),t._v(" "),a("li",[t._v("ä¸šåŠ¡è§„åˆ™éªŒè¯å’Œæµç¨‹æ§åˆ¶")])]),t._v(" "),a("p",[a("strong",[t._v("æ•°æ®è®¿é—®å±‚ï¼ˆData Access Layerï¼‰")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Repositoryæ¨¡å¼å°è£…æ•°æ®è®¿é—®")]),t._v(" "),a("li",[t._v("Spring Data JPAç®€åŒ–CRUDæ“ä½œ")]),t._v(" "),a("li",[t._v("å¤šæ•°æ®æºé…ç½®å’Œè¯»å†™åˆ†ç¦»")])]),t._v(" "),a("p",[a("strong",[t._v("æŠ€æœ¯æ¶æ„é€‰å‹")]),t._v("ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("é…ç½®ç®¡ç†")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring Bootçš„å¤–éƒ¨åŒ–é…ç½®")]),t._v(" "),a("li",[t._v("Config Serveré›†ä¸­é…ç½®ç®¡ç†")]),t._v(" "),a("li",[t._v("Profileç¯å¢ƒåŒºåˆ†")])]),t._v(" "),a("p",[a("strong",[t._v("å®‰å…¨æ¡†æ¶")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring Securityç»Ÿä¸€å®‰å…¨ç®¡ç†")]),t._v(" "),a("li",[t._v("JWTæ— çŠ¶æ€è®¤è¯")]),t._v(" "),a("li",[t._v("æ–¹æ³•çº§æƒé™æ§åˆ¶")])]),t._v(" "),a("p",[a("strong",[t._v("ç¼“å­˜ç­–ç•¥")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring CacheæŠ½è±¡å±‚")]),t._v(" "),a("li",[t._v("Redisåˆ†å¸ƒå¼ç¼“å­˜")]),t._v(" "),a("li",[t._v("å¤šçº§ç¼“å­˜è®¾è®¡")])]),t._v(" "),a("p",[a("strong",[t._v("ç›‘æ§è¿ç»´")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring Boot Actuatorå¥åº·æ£€æŸ¥")]),t._v(" "),a("li",[t._v("MicrometeræŒ‡æ ‡æ”¶é›†")]),t._v(" "),a("li",[t._v("åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª")])]),t._v(" "),a("p",[a("strong",[t._v("å¾®æœåŠ¡æ¶æ„")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring CloudæœåŠ¡æ²»ç†")]),t._v(" "),a("li",[t._v("APIç½‘å…³ç»Ÿä¸€å…¥å£")]),t._v(" "),a("li",[t._v("æœåŠ¡é—´é€šä¿¡å’Œå®¹é”™")])]),t._v(" "),a("p",[a("strong",[t._v("æœ€ä½³å®è·µ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("éµå¾ªSOLIDè®¾è®¡åŸåˆ™")]),t._v(" "),a("li",[t._v("åˆç†çš„åŒ…ç»“æ„ç»„ç»‡")]),t._v(" "),a("li",[t._v("ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶")]),t._v(" "),a("li",[t._v('å®Œå–„çš„å•å…ƒæµ‹è¯•è¦†ç›–"')])]),t._v(" "),a("p",[a("strong",[t._v("ğŸ’» ä»£ç ç¤ºä¾‹")]),t._v("ï¼š")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ†å±‚æ¶æ„ç¤ºä¾‹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api/users"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/{id}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserDTO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserDTO")]),t._v(" dto "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserMapper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toDTO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserDTO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Valid")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateUserRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserDTO")]),t._v(" dto "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserMapper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toDTO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CREATED")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserRepository")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EmailService")]),t._v(" emailService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ApplicationEventPublisher")]),t._v(" eventPublisher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateUserRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸šåŠ¡é€»è¾‘éªŒè¯")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateUserRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºç”¨æˆ·")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("email")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" savedUser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘é€æ¬¢è¿é‚®ä»¶")]),t._v("\n        emailService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendWelcomeEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘å¸ƒç”¨æˆ·åˆ›å»ºäº‹ä»¶")]),t._v("\n        eventPublisher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("publishEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserCreatedEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("savedUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" savedUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateUserRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CreateUserRequest")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("existsByUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BusinessException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç”¨æˆ·åå·²å­˜åœ¨"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("existsByEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BusinessException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"é‚®ç®±å·²å­˜åœ¨"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Repository")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserRepository")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JpaRepository")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("existsByUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("existsByEmail")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Query")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"SELECT u FROM User u WHERE u.status = 'ACTIVE'\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findActiveUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…¨å±€å¼‚å¸¸å¤„ç†")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ControllerAdvice")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GlobalExceptionHandler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ExceptionHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BusinessException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BAD_REQUEST")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ErrorResponse")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleBusinessException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BusinessException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ErrorResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"BUSINESS_ERROR"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ExceptionHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodArgumentNotValidException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ResponseStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("BAD_REQUEST")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ErrorResponse")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleValidationException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MethodArgumentNotValidException")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" errors "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBindingResult")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFieldErrors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" \n            errors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getField")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDefaultMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ErrorResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"VALIDATION_ERROR"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å‚æ•°æ ¡éªŒå¤±è´¥"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("errors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("errors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("hr"),t._v(" "),a("h2",{attrs:{id:"ğŸ“š-æ€»ç»“ä¸è¿›é˜¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“š-æ€»ç»“ä¸è¿›é˜¶"}},[t._v("#")]),t._v(" ğŸ“š æ€»ç»“ä¸è¿›é˜¶")]),t._v(" "),a("h3",{attrs:{id:"ğŸ¯-springå­¦ä¹ è·¯å¾„å»ºè®®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-springå­¦ä¹ è·¯å¾„å»ºè®®"}},[t._v("#")]),t._v(" ğŸ¯ Springå­¦ä¹ è·¯å¾„å»ºè®®")]),t._v(" "),a("p",[a("strong",[t._v("åŸºç¡€é˜¶æ®µ")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("Spring Frameworkæ ¸å¿ƒ")]),t._v("ï¼šIoCã€DIã€AOPåŸºç¡€æ¦‚å¿µ")]),t._v(" "),a("li",[a("strong",[t._v("Spring MVC")]),t._v("ï¼šWebå¼€å‘åŸºç¡€ï¼Œè¯·æ±‚å¤„ç†æµç¨‹")]),t._v(" "),a("li",[a("strong",[t._v("Spring Data")]),t._v("ï¼šæ•°æ®è®¿é—®å’Œäº‹åŠ¡ç®¡ç†")]),t._v(" "),a("li",[a("strong",[t._v("Spring Security")]),t._v("ï¼šå®‰å…¨æ¡†æ¶åŸºç¡€")])]),t._v(" "),a("p",[a("strong",[t._v("è¿›é˜¶é˜¶æ®µ")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("Spring Boot")]),t._v("ï¼šè‡ªåŠ¨é…ç½®ã€Starteræœºåˆ¶ã€ç›‘æ§")]),t._v(" "),a("li",[a("strong",[t._v("Spring Cloud")]),t._v("ï¼šå¾®æœåŠ¡æ¶æ„ã€æœåŠ¡æ²»ç†")]),t._v(" "),a("li",[a("strong",[t._v("å“åº”å¼ç¼–ç¨‹")]),t._v("ï¼šWebFluxã€Reactive Streams")]),t._v(" "),a("li",[a("strong",[t._v("Nativeç¼–è¯‘")]),t._v("ï¼šGraalVM Native Image")])]),t._v(" "),a("p",[a("strong",[t._v("å®æˆ˜é˜¶æ®µ")]),t._v("ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ä¼ä¸šçº§é¡¹ç›®")]),t._v("ï¼šå®Œæ•´çš„ä¸šåŠ¡ç³»ç»Ÿå¼€å‘")]),t._v(" "),a("li",[a("strong",[t._v("æ€§èƒ½ä¼˜åŒ–")]),t._v("ï¼šJVMè°ƒä¼˜ã€ç¼“å­˜ç­–ç•¥ã€æ•°æ®åº“ä¼˜åŒ–")]),t._v(" "),a("li",[a("strong",[t._v("æ¶æ„è®¾è®¡")]),t._v("ï¼šå¾®æœåŠ¡æ‹†åˆ†ã€åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡")]),t._v(" "),a("li",[a("strong",[t._v("DevOpså®è·µ")]),t._v("ï¼šCI/CDã€å®¹å™¨åŒ–ã€äº‘åŸç”Ÿéƒ¨ç½²")])]),t._v(" "),a("h3",{attrs:{id:"âš¡-é¢è¯•å‡†å¤‡æ¸…å•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#âš¡-é¢è¯•å‡†å¤‡æ¸…å•"}},[t._v("#")]),t._v(" âš¡ é¢è¯•å‡†å¤‡æ¸…å•")]),t._v(" "),a("ul",[a("li",[t._v("[ ] Spring Frameworkæ ¸å¿ƒåŸç†ï¼ˆIoCã€AOPã€Beanç”Ÿå‘½å‘¨æœŸï¼‰")]),t._v(" "),a("li",[t._v("[ ] Spring Bootè‡ªåŠ¨é…ç½®å’ŒStarteræœºåˆ¶")]),t._v(" "),a("li",[t._v("[ ] Spring MVCè¯·æ±‚å¤„ç†æµç¨‹å’Œæ ¸å¿ƒç»„ä»¶")]),t._v(" "),a("li",[t._v("[ ] Springäº‹åŠ¡ç®¡ç†å’Œä¼ æ’­æœºåˆ¶")]),t._v(" "),a("li",[t._v("[ ] Spring Securityè®¤è¯æˆæƒæµç¨‹")]),t._v(" "),a("li",[t._v("[ ] Spring Cloudå¾®æœåŠ¡ç»„ä»¶")]),t._v(" "),a("li",[t._v("[ ] å¸¸ç”¨æ³¨è§£çš„ä½œç”¨å’ŒåŸç†")]),t._v(" "),a("li",[t._v("[ ] å®é™…é¡¹ç›®ä¸­Springçš„åº”ç”¨ç»éªŒ")]),t._v(" "),a("li",[t._v("[ ] Springç›¸å…³çš„æ€§èƒ½ä¼˜åŒ–å®è·µ")]),t._v(" "),a("li",[t._v("[ ] Springç”Ÿæ€çš„å‘å±•è¶‹åŠ¿")])]),t._v(" "),a("h3",{attrs:{id:"ğŸš€-æŠ€æœ¯å‘å±•è¶‹åŠ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš€-æŠ€æœ¯å‘å±•è¶‹åŠ¿"}},[t._v("#")]),t._v(" ğŸš€ æŠ€æœ¯å‘å±•è¶‹åŠ¿")]),t._v(" "),a("p",[a("strong",[t._v("äº‘åŸç”Ÿæ—¶ä»£")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring Boot 3.xå’ŒSpring Framework 6.x")]),t._v(" "),a("li",[t._v("åŸºäºGraalVMçš„Nativeç¼–è¯‘")]),t._v(" "),a("li",[t._v("KubernetesåŸç”Ÿæ”¯æŒ")]),t._v(" "),a("li",[t._v("Serverlessæ¶æ„é€‚é…")])]),t._v(" "),a("p",[a("strong",[t._v("å“åº”å¼ç¼–ç¨‹")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring WebFluxå¼‚æ­¥éé˜»å¡")]),t._v(" "),a("li",[t._v("R2DBCå“åº”å¼æ•°æ®åº“è®¿é—®")]),t._v(" "),a("li",[t._v("äº‹ä»¶é©±åŠ¨æ¶æ„è®¾è®¡")])]),t._v(" "),a("p",[a("strong",[t._v("äººå·¥æ™ºèƒ½é›†æˆ")]),t._v("ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("Spring AIé¡¹ç›®")]),t._v(" "),a("li",[t._v("å‘é‡æ•°æ®åº“é›†æˆ")]),t._v(" "),a("li",[t._v("æœºå™¨å­¦ä¹ æ¨¡å‹æœåŠ¡åŒ–")])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("ğŸ¯ é¢è¯•æˆåŠŸç§˜è¯€")]),t._v("ï¼šä¸ä»…è¦æŒæ¡Springçš„ç†è®ºçŸ¥è¯†ï¼Œæ›´è¦ç»“åˆå®é™…é¡¹ç›®ç»éªŒï¼Œå±•ç°è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ã€‚å‡†å¤‡å¥½è¯¦ç»†çš„é¡¹ç›®æ¡ˆä¾‹ï¼Œèƒ½å¤Ÿæ·±å…¥è®²è§£Springåœ¨é¡¹ç›®ä¸­çš„åº”ç”¨å’Œé‡åˆ°çš„æŒ‘æˆ˜åŠè§£å†³æ–¹æ¡ˆã€‚è®°ä½ï¼š"),a("strong",[t._v("æŠ€æœ¯æ·±åº¦ + å®æˆ˜ç»éªŒ + æ¸…æ™°è¡¨è¾¾ = é¢è¯•æˆåŠŸ")]),t._v("ï¼")]),t._v(" "),a("p",[a("strong",[t._v("ğŸ”¥ æœ€åæé†’")]),t._v("ï¼šSpringç”Ÿæ€åºå¤§ä¸”å‘å±•è¿…é€Ÿï¼Œä¿æŒæŒç»­å­¦ä¹ çš„å¿ƒæ€ï¼Œå…³æ³¨å®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºåŠ¨æ€ï¼Œåœ¨å®è·µä¸­ä¸æ–­æå‡æŠ€æœ¯æ·±åº¦å’Œå¹¿åº¦ã€‚ç¥ä½ é¢è¯•é¡ºåˆ©ï¼Œofferæ»¡æ»¡ï¼ ğŸ‰")])])}),[],!1,null,null,null);s.default=e.exports}}]);