(window.webpackJsonp=window.webpackJsonp||[]).push([[240],{734:function(e,v,_){"use strict";_.r(v);var r=_(2),t=Object(r.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("p",[_("img",{attrs:{src:"https://img.starfish.ink/common/faq-banner.png",alt:""}})]),e._v(" "),_("blockquote",[_("p",[e._v("ZooKeeperæ˜¯Apacheçš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡æ¡†æ¶ï¼Œä¹Ÿæ˜¯é¢è¯•å®˜è€ƒå¯Ÿ"),_("strong",[e._v("åˆ†å¸ƒå¼ç³»ç»Ÿç†è§£")]),e._v("çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚ä»åŸºç¡€æ¦‚å¿µåˆ°ä¸€è‡´æ€§åè®®ï¼Œä»é›†ç¾¤ç®¡ç†åˆ°å…¸å‹åº”ç”¨ï¼Œæ¯ä¸€ä¸ªçŸ¥è¯†ç‚¹éƒ½ä½“ç°ç€å¯¹åˆ†å¸ƒå¼æ¶æ„çš„æ·±åº¦ç†è§£ã€‚æœ¬æ–‡æ¡£å°†"),_("strong",[e._v("æœ€å¸¸è€ƒçš„ZKçŸ¥è¯†ç‚¹")]),e._v("æ•´ç†æˆ"),_("strong",[e._v("æ ‡å‡†è¯æœ¯")]),e._v("ï¼ŒåŠ©ä½ åœ¨é¢è¯•ä¸­å±•ç°åˆ†å¸ƒå¼æŠ€æœ¯åŠŸåº•ï¼")])]),e._v(" "),_("h3",{attrs:{id:"ğŸ”¥-ä¸ºä»€ä¹ˆzkå¦‚æ­¤é‡è¦"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥-ä¸ºä»€ä¹ˆzkå¦‚æ­¤é‡è¦"}},[e._v("#")]),e._v(" ğŸ”¥ ä¸ºä»€ä¹ˆZKå¦‚æ­¤é‡è¦ï¼Ÿ")]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("ğŸ“ˆ åˆ†å¸ƒå¼å¿…å¤‡")]),e._v("ï¼š90%çš„åˆ†å¸ƒå¼ç³»ç»Ÿéƒ½ä¼šæ¶‰åŠZKç›¸å…³æŠ€æœ¯")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ§  æ¶æ„ä½“ç°")]),e._v("ï¼šä½“ç°ä½ å¯¹åˆ†å¸ƒå¼ä¸€è‡´æ€§ã€é€‰ä¸¾ã€åè°ƒçš„æ·±åº¦ç†è§£")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ’¼ å·¥ä½œåŸºç¡€")]),e._v("ï¼šé…ç½®ä¸­å¿ƒã€æœåŠ¡å‘ç°ã€åˆ†å¸ƒå¼é”ç­‰åœºæ™¯æ— å¤„ä¸åœ¨")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ“ æŠ€æœ¯è¿›é˜¶")]),e._v("ï¼šç†è§£ZKæ˜¯æŒæ¡åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡çš„å…³é”®ä¸€æ­¥")])]),e._v(" "),_("hr"),e._v(" "),_("h2",{attrs:{id:"ğŸ—ºï¸-çŸ¥è¯†å¯¼èˆª"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ—ºï¸-çŸ¥è¯†å¯¼èˆª"}},[e._v("#")]),e._v(" ğŸ—ºï¸ çŸ¥è¯†å¯¼èˆª")]),e._v(" "),_("h3",{attrs:{id:"ğŸ·ï¸-æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ·ï¸-æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»"}},[e._v("#")]),e._v(" ğŸ·ï¸ æ ¸å¿ƒçŸ¥è¯†åˆ†ç±»")]),e._v(" "),_("ol",[_("li",[_("strong",[e._v("ğŸ”¥ åŸºç¡€æ¦‚å¿µç±»")]),e._v("ï¼šZKå®šä¹‰ã€æ ¸å¿ƒåŠŸèƒ½ã€æ•°æ®æ¨¡å‹ã€èŠ‚ç‚¹ç±»å‹")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ“Š ä¸€è‡´æ€§åè®®")]),e._v("ï¼š2PC/3PCã€Paxosç®—æ³•ã€ZABåè®®åŸç†")]),e._v(" "),_("li",[_("strong",[e._v("ğŸŒ é›†ç¾¤ä¸é€‰ä¸¾")]),e._v("ï¼šé€‰ä¸¾æœºåˆ¶ã€èŠ‚ç‚¹è§’è‰²ã€æ•…éšœå¤„ç†ã€æ•°æ®åŒæ­¥")]),e._v(" "),_("li",[_("strong",[e._v("âš¡ æ ¸å¿ƒç‰¹æ€§")]),e._v("ï¼šWatcheræœºåˆ¶ã€ACLæƒé™ã€ä¼šè¯ç®¡ç†ã€æ•°æ®ä¸€è‡´æ€§")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ”§ å…¸å‹åº”ç”¨")]),e._v("ï¼šåˆ†å¸ƒå¼é”ã€é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡")]),e._v(" "),_("li",[_("strong",[e._v("ğŸš¨ è¿ç»´å®è·µ")]),e._v("ï¼šé›†ç¾¤éƒ¨ç½²ã€æ€§èƒ½ç›‘æ§ã€æ•…éšœæ’æŸ¥ã€æœ€ä½³å®è·µ")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ’¼ å¯¹æ¯”åˆ†æ")]),e._v("ï¼šZK vs å…¶ä»–ä¸­é—´ä»¶ã€åº”ç”¨åœºæ™¯é€‰æ‹©")])]),e._v(" "),_("h3",{attrs:{id:"ğŸ”‘-é¢è¯•è¯æœ¯æ¨¡æ¿"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”‘-é¢è¯•è¯æœ¯æ¨¡æ¿"}},[e._v("#")]),e._v(" ğŸ”‘ é¢è¯•è¯æœ¯æ¨¡æ¿")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[_("strong",[e._v("é—®é¢˜ç±»å‹")])]),e._v(" "),_("th",[_("strong",[e._v("å›ç­”æ¡†æ¶")])]),e._v(" "),_("th",[_("strong",[e._v("å…³é”®è¦ç‚¹")])]),e._v(" "),_("th",[_("strong",[e._v("æ·±å…¥æ‰©å±•")])])])]),e._v(" "),_("tbody",[_("tr",[_("td",[_("strong",[e._v("æ¦‚å¿µè§£é‡Š")])]),e._v(" "),_("td",[e._v("å®šä¹‰â†’ç‰¹ç‚¹â†’åº”ç”¨åœºæ™¯â†’ç¤ºä¾‹")]),e._v(" "),_("td",[e._v("å‡†ç¡®å®šä¹‰ï¼Œçªå‡ºç‰¹ç‚¹")]),e._v(" "),_("td",[e._v("åº•å±‚åŸç†ï¼Œåè®®åˆ†æ")])]),e._v(" "),_("tr",[_("td",[_("strong",[e._v("å¯¹æ¯”åˆ†æ")])]),e._v(" "),_("td",[e._v("ç›¸åŒç‚¹â†’ä¸åŒç‚¹â†’ä½¿ç”¨åœºæ™¯â†’é€‰æ‹©å»ºè®®")]),e._v(" "),_("td",[e._v("å¤šç»´åº¦å¯¹æ¯”")]),e._v(" "),_("td",[e._v("æ€§èƒ½å·®å¼‚ï¼Œå®é™…åº”ç”¨")])]),e._v(" "),_("tr",[_("td",[_("strong",[e._v("åŸç†è§£æ")])]),e._v(" "),_("td",[e._v("èƒŒæ™¯â†’å®ç°æœºåˆ¶â†’æ‰§è¡Œæµç¨‹â†’æ³¨æ„äº‹é¡¹")]),e._v(" "),_("td",[e._v("å›¾è§£æµç¨‹")]),e._v(" "),_("td",[e._v("åè®®å±‚é¢ï¼Œç®—æ³•ç»†èŠ‚")])]),e._v(" "),_("tr",[_("td",[_("strong",[e._v("å®è·µåº”ç”¨")])]),e._v(" "),_("td",[e._v("é—®é¢˜ç°è±¡â†’åˆ†ææ€è·¯â†’è§£å†³æ–¹æ¡ˆâ†’ç›‘æ§éªŒè¯")]),e._v(" "),_("td",[e._v("å®é™…æ¡ˆä¾‹")]),e._v(" "),_("td",[e._v("æœ€ä½³å®è·µï¼Œè¸©å‘ç»éªŒ")])])])]),e._v(" "),_("hr"),e._v(" "),_("h2",{attrs:{id:"ğŸ”¥-ä¸€ã€åŸºç¡€æ¦‚å¿µç±»-zkæ ¸å¿ƒ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥-ä¸€ã€åŸºç¡€æ¦‚å¿µç±»-zkæ ¸å¿ƒ"}},[e._v("#")]),e._v(" ğŸ”¥ ä¸€ã€åŸºç¡€æ¦‚å¿µç±»ï¼ˆZKæ ¸å¿ƒï¼‰")]),e._v(" "),_("blockquote",[_("p",[_("strong",[e._v("æ ¸å¿ƒæ€æƒ³")]),e._v("ï¼šZooKeeperæ˜¯åˆ†å¸ƒå¼åè°ƒæœåŠ¡çš„ç»å…¸å®ç°ï¼Œæä¾›ç»Ÿä¸€çš„å‘½åç©ºé—´ã€æ•°æ®å‘å¸ƒ/è®¢é˜…ã€åˆ†å¸ƒå¼åŒæ­¥ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚")])]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("ZKåŸºç¡€å®šä¹‰")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E8%B0%88%E4%B8%8B%E4%BD%A0%E5%AF%B9-zookeeper-%E7%9A%84%E8%AE%A4%E8%AF%86"}},[e._v("ZooKeeperæ˜¯ä»€ä¹ˆ")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8A%9F%E8%83%BD"}},[e._v("ZKæ ¸å¿ƒåŠŸèƒ½")])]),e._v(" "),_("li",[_("strong",[e._v("æ•°æ®æ¨¡å‹")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"}},[e._v("æ–‡ä»¶ç³»ç»Ÿ")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E8%AF%B4%E4%B8%8B%E5%9B%9B%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9-znode"}},[e._v("èŠ‚ç‚¹ç±»å‹")])]),e._v(" "),_("li",[_("strong",[e._v("æ ¸å¿ƒç‰¹æ€§")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7"}},[e._v("æ•°æ®ä¸€è‡´æ€§")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86"}},[e._v("ä¼šè¯ç®¡ç†")])])]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-è°ˆä¸‹ä½ å¯¹-zookeeper-çš„è®¤è¯†"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è°ˆä¸‹ä½ å¯¹-zookeeper-çš„è®¤è¯†"}},[e._v("#")]),e._v(" ğŸ¯ è°ˆä¸‹ä½ å¯¹ Zookeeper çš„è®¤è¯†ï¼Ÿ")]),e._v(" "),_("p",[e._v("ZooKeeper æ˜¯ä¸€ä¸ª"),_("strong",[e._v("åˆ†å¸ƒå¼åè°ƒæœåŠ¡æ¡†æ¶")]),e._v("ï¼Œä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›ä¸€è‡´æ€§æœåŠ¡ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼š")]),e._v(" "),_("p",[_("strong",[e._v("å®šä¹‰")]),e._v("ï¼šZooKeeper æ˜¯ Apache çš„å¼€æºåˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼ŒåŸºäºè§‚å¯Ÿè€…æ¨¡å¼è®¾è®¡çš„åˆ†å¸ƒå¼æœåŠ¡ç®¡ç†æ¡†æ¶ã€‚")]),e._v(" "),_("p",[_("strong",[e._v("æ ¸å¿ƒç‰¹ç‚¹")]),e._v("ï¼š")]),e._v(" "),_("ol",[_("li",[_("strong",[e._v("é¡ºåºä¸€è‡´æ€§")]),e._v(" - æŒ‰ç…§å®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„é¡ºåºæ‰§è¡Œ")]),e._v(" "),_("li",[_("strong",[e._v("åŸå­æ€§")]),e._v(" - äº‹åŠ¡è¦ä¹ˆæˆåŠŸè¦ä¹ˆå¤±è´¥ï¼Œä¸å­˜åœ¨ä¸­é—´çŠ¶æ€")]),e._v(" "),_("li",[_("strong",[e._v("å•ä¸€è§†å›¾")]),e._v(" - å®¢æˆ·ç«¯çœ‹åˆ°çš„æœåŠ¡ç«¯æ•°æ®æ¨¡å‹éƒ½æ˜¯ä¸€è‡´çš„")]),e._v(" "),_("li",[_("strong",[e._v("å¯é æ€§")]),e._v(" - ä¸€æ—¦äº‹åŠ¡è¢«ç¡®è®¤ï¼Œå°†è¢«æŒä¹…åŒ–ä¿å­˜ç›´åˆ°å®¢æˆ·ç«¯è¦†ç›–æ›´æ–°")]),e._v(" "),_("li",[_("strong",[e._v("å®æ—¶æ€§")]),e._v(" - ä¿è¯å®¢æˆ·ç«¯å°†åœ¨ä¸€ä¸ªæ—¶é—´é—´éš”èŒƒå›´å†…è·å¾—æœåŠ¡å™¨çš„æ›´æ–°ä¿¡æ¯")])]),e._v(" "),_("p",[_("strong",[e._v("åº”ç”¨åœºæ™¯")]),e._v("ï¼šé…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€åˆ†å¸ƒå¼é”ã€é›†ç¾¤ç®¡ç†ã€è´Ÿè½½å‡è¡¡ç­‰ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-éƒ½æœ‰å“ªäº›åŠŸèƒ½"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-éƒ½æœ‰å“ªäº›åŠŸèƒ½"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper éƒ½æœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ")]),e._v(" "),_("ol",[_("li",[_("strong",[e._v("é›†ç¾¤ç®¡ç†")]),e._v("ï¼šç›‘æ§èŠ‚ç‚¹å­˜æ´»çŠ¶æ€ã€è¿è¡Œè¯·æ±‚ç­‰")]),e._v(" "),_("li",[_("strong",[e._v("ä¸»èŠ‚ç‚¹é€‰ä¸¾")]),e._v("ï¼šååŠ©å®Œæˆåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„Leaderé€‰ä¸¾è¿‡ç¨‹")]),e._v(" "),_("li",[_("strong",[e._v("åˆ†å¸ƒå¼é”")]),e._v("ï¼šæä¾›ç‹¬å é”å’Œå…±äº«é”ï¼Œå®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„èµ„æºæ§åˆ¶")]),e._v(" "),_("li",[_("strong",[e._v("å‘½åæœåŠ¡")]),e._v("ï¼šæä¾›ç»Ÿä¸€çš„å‘½åç©ºé—´ï¼Œé€šè¿‡åç§°è·å–èµ„æºæˆ–æœåŠ¡åœ°å€")]),e._v(" "),_("li",[_("strong",[e._v("ç»Ÿä¸€é…ç½®ç®¡ç†")]),e._v("ï¼šé›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„é…ç½®ä¿¡æ¯ä¿æŒä¸€è‡´ï¼Œæ”¯æŒåŠ¨æ€é…ç½®æ›´æ–°")]),e._v(" "),_("li",[_("strong",[e._v("è´Ÿè½½å‡è¡¡")]),e._v("ï¼šé…åˆå®¢æˆ·ç«¯å®ç°æœåŠ¡çš„è´Ÿè½½å‡è¡¡")]),e._v(" "),_("li",[_("strong",[e._v("æ•°æ®å‘å¸ƒ/è®¢é˜…")]),e._v("ï¼šæ”¯æŒæ•°æ®çš„å‘å¸ƒå’Œè®¢é˜…æ¨¡å¼")])]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-æ–‡ä»¶ç³»ç»Ÿ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-æ–‡ä»¶ç³»ç»Ÿ"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper æ–‡ä»¶ç³»ç»Ÿ")]),e._v(" "),_("p",[e._v("ZooKeeper æä¾›ä¸€ä¸ª"),_("strong",[e._v("å¤šå±‚çº§çš„èŠ‚ç‚¹å‘½åç©ºé—´")]),e._v("ï¼ˆèŠ‚ç‚¹ç§°ä¸º znodeï¼‰ï¼Œç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿçš„æ ‘çŠ¶ç»“æ„ã€‚")]),e._v(" "),_("p",[_("strong",[e._v("å…³é”®ç‰¹ç‚¹")]),e._v("ï¼š")]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("å†…å­˜å­˜å‚¨")]),e._v("ï¼šä¸ºä¿è¯é«˜ååå’Œä½å»¶è¿Ÿï¼ŒZKåœ¨å†…å­˜ä¸­ç»´æŠ¤æ ‘çŠ¶ç›®å½•ç»“æ„")]),e._v(" "),_("li",[_("strong",[e._v("æ•°æ®é™åˆ¶")]),e._v("ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå­˜å‚¨ "),_("strong",[e._v("1MB")]),e._v(" æ•°æ®ï¼Œé€‚åˆå­˜å‚¨é…ç½®ä¿¡æ¯è€Œéå¤§æ•°æ®")]),e._v(" "),_("li",[_("strong",[e._v("è·¯å¾„å”¯ä¸€")]),e._v("ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å”¯ä¸€çš„è·¯å¾„æ ‡è¯†")]),e._v(" "),_("li",[_("strong",[e._v("æ•°æ®+å­èŠ‚ç‚¹")]),e._v("ï¼šä¸ä¼ ç»Ÿæ–‡ä»¶ç³»ç»Ÿä¸åŒï¼ŒZKçš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥å­˜å‚¨æ•°æ®å’Œæ‹¥æœ‰å­èŠ‚ç‚¹")])]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-è¯´ä¸‹å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹-znode"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è¯´ä¸‹å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹-znode"}},[e._v("#")]),e._v(" ğŸ¯ è¯´ä¸‹å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹ Znodeï¼Ÿ")]),e._v(" "),_("ol",[_("li",[_("p",[_("strong",[e._v("PERSISTENTï¼ˆæŒä¹…èŠ‚ç‚¹ï¼‰")]),e._v("ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("é™¤éæ‰‹åŠ¨åˆ é™¤ï¼Œå¦åˆ™èŠ‚ç‚¹ä¸€ç›´å­˜åœ¨äº Zookeeper ä¸Š")]),e._v(" "),_("li",[e._v("é€‚åˆå­˜å‚¨éœ€è¦æŒä¹…åŒ–çš„é…ç½®ä¿¡æ¯")])])]),e._v(" "),_("li",[_("p",[_("strong",[e._v("EPHEMERALï¼ˆä¸´æ—¶èŠ‚ç‚¹ï¼‰")]),e._v("ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("ç”Ÿå‘½å‘¨æœŸä¸å®¢æˆ·ç«¯ä¼šè¯ç»‘å®š")]),e._v(" "),_("li",[e._v("å®¢æˆ·ç«¯ä¼šè¯å¤±æ•ˆæ—¶ï¼Œä¸´æ—¶èŠ‚ç‚¹è‡ªåŠ¨è¢«åˆ é™¤")]),e._v(" "),_("li",[e._v("é€‚åˆå®ç°æœåŠ¡æ³¨å†Œã€å¿ƒè·³æ£€æµ‹ç­‰åœºæ™¯")])])]),e._v(" "),_("li",[_("p",[_("strong",[e._v("PERSISTENT_SEQUENTIALï¼ˆæŒä¹…é¡ºåºèŠ‚ç‚¹ï¼‰")]),e._v("ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("åŸºæœ¬ç‰¹æ€§åŒæŒä¹…èŠ‚ç‚¹ï¼Œå¢åŠ é¡ºåºå±æ€§")]),e._v(" "),_("li",[e._v("èŠ‚ç‚¹ååè¿½åŠ ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•´å‹æ•°å­—")]),e._v(" "),_("li",[e._v("é€‚åˆå®ç°åˆ†å¸ƒå¼é˜Ÿåˆ—ç­‰éœ€è¦é¡ºåºçš„åœºæ™¯")])])]),e._v(" "),_("li",[_("p",[_("strong",[e._v("EPHEMERAL_SEQUENTIALï¼ˆä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼‰")]),e._v("ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("åŸºæœ¬ç‰¹æ€§åŒä¸´æ—¶èŠ‚ç‚¹ï¼Œå¢åŠ é¡ºåºå±æ€§")]),e._v(" "),_("li",[e._v("é€‚åˆå®ç°åˆ†å¸ƒå¼é”ã€é€‰ä¸¾ç­‰åœºæ™¯")])])])]),e._v(" "),_("hr"),e._v(" "),_("h2",{attrs:{id:"ğŸ“Š-äºŒã€ä¸€è‡´æ€§åè®®-æ ¸å¿ƒåŸç†"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“Š-äºŒã€ä¸€è‡´æ€§åè®®-æ ¸å¿ƒåŸç†"}},[e._v("#")]),e._v(" ğŸ“Š äºŒã€ä¸€è‡´æ€§åè®®ï¼ˆæ ¸å¿ƒåŸç†ï¼‰")]),e._v(" "),_("blockquote",[_("p",[_("strong",[e._v("æ ¸å¿ƒæ€æƒ³")]),e._v("ï¼šç†è§£åˆ†å¸ƒå¼ä¸€è‡´æ€§åè®®æ˜¯æŒæ¡ZooKeeperçš„å…³é”®ï¼ŒåŒ…æ‹¬2PC/3PCçš„æ¼”è¿›ã€Paxosç®—æ³•çš„ç²¾é«“ï¼Œä»¥åŠZABåè®®çš„å®ç°ç»†èŠ‚ã€‚")])]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("ç»å…¸åè®®")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E4%B8%80%E8%87%B4%E6%80%A7%E5%8D%8F%E8%AE%AE2pc3pc"}},[e._v("2PCåè®®")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E4%B8%80%E8%87%B4%E6%80%A7%E5%8D%8F%E8%AE%AE2pc3pc"}},[e._v("3PCåè®®")])]),e._v(" "),_("li",[_("strong",[e._v("Paxosç®—æ³•")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E8%AE%B2%E4%B8%80%E8%AE%B2-paxos-%E7%AE%97%E6%B3%95"}},[e._v("PaxosåŸç†")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-paxos-%E6%AD%BB%E5%BE%AA%E7%8E%AF%E9%97%AE%E9%A2%98"}},[e._v("æ­»å¾ªç¯é—®é¢˜")])]),e._v(" "),_("li",[_("strong",[e._v("ZABåè®®")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E8%B0%88%E4%B8%8B%E4%BD%A0%E5%AF%B9-zab-%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%BA%86%E8%A7%A3"}},[e._v("ZABåè®®åŸç†")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-zab-%E5%92%8C-paxos-%E7%AE%97%E6%B3%95%E7%9A%84%E8%81%94%E7%B3%BB%E4%B8%8E%E5%8C%BA%E5%88%AB"}},[e._v("ZAB vs Paxoså¯¹æ¯”")])])]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-ä¸€è‡´æ€§åè®®2pcã€3pc"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä¸€è‡´æ€§åè®®2pcã€3pc"}},[e._v("#")]),e._v(" ğŸ¯ ä¸€è‡´æ€§åè®®2PCã€3PCï¼Ÿ")]),e._v(" "),_("h4",{attrs:{id:"_2pc-two-phase-commit"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2pc-two-phase-commit"}},[e._v("#")]),e._v(" 2PCï¼ˆTwo-Phase Commitï¼‰")]),e._v(" "),_("p",[_("strong",[e._v("é˜¶æ®µä¸€ï¼šæäº¤äº‹åŠ¡è¯·æ±‚ï¼ˆâ€æŠ•ç¥¨é˜¶æ®µâ€œï¼‰")])]),e._v(" "),_("p",[e._v("å½“è¦æ‰§è¡Œä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„æ—¶å€™ï¼Œäº‹åŠ¡å‘èµ·è€…é¦–å…ˆå‘åè°ƒè€…å‘èµ·äº‹åŠ¡è¯·æ±‚ï¼Œç„¶ååè°ƒè€…ä¼šç»™æ‰€æœ‰å‚ä¸è€…å‘é€ "),_("code",[e._v("prepare")]),e._v(" è¯·æ±‚ï¼ˆå…¶ä¸­åŒ…æ‹¬äº‹åŠ¡å†…å®¹ï¼‰å‘Šè¯‰å‚ä¸è€…ä½ ä»¬éœ€è¦æ‰§è¡Œäº‹åŠ¡äº†ï¼Œå¦‚æœèƒ½æ‰§è¡Œæˆ‘å‘çš„äº‹åŠ¡å†…å®¹é‚£ä¹ˆå°±å…ˆæ‰§è¡Œä½†ä¸æäº¤ï¼Œæ‰§è¡Œåè¯·ç»™æˆ‘å›å¤ã€‚ç„¶åå‚ä¸è€…æ”¶åˆ° "),_("code",[e._v("prepare")]),e._v(" æ¶ˆæ¯åï¼Œä»–ä»¬ä¼šå¼€å§‹æ‰§è¡Œäº‹åŠ¡ï¼ˆä½†ä¸æäº¤ï¼‰ï¼Œå¹¶å°† "),_("code",[e._v("Undo")]),e._v(" å’Œ "),_("code",[e._v("Redo")]),e._v(" ä¿¡æ¯è®°å…¥äº‹åŠ¡æ—¥å¿—ä¸­ï¼Œä¹‹åå‚ä¸è€…å°±å‘åè°ƒè€…åé¦ˆæ˜¯å¦å‡†å¤‡å¥½äº†")]),e._v(" "),_("p",[_("strong",[e._v("é˜¶æ®µäºŒï¼šæ‰§è¡Œäº‹åŠ¡æäº¤")])]),e._v(" "),_("p",[e._v("åè°ƒè€…æ ¹æ®å„å‚ä¸è€…çš„åé¦ˆæƒ…å†µå†³å®šæœ€ç»ˆæ˜¯å¦å¯ä»¥æäº¤äº‹åŠ¡ï¼Œå¦‚æœåé¦ˆéƒ½æ˜¯Yesï¼Œå‘é€æäº¤"),_("code",[e._v("commit")]),e._v("è¯·æ±‚ï¼Œå‚ä¸è€…æäº¤æˆåŠŸåè¿”å› "),_("code",[e._v("Ack")]),e._v(" æ¶ˆæ¯ï¼Œåè°ƒè€…æ¥æ”¶åå°±å®Œæˆäº†ã€‚å¦‚æœåé¦ˆæ˜¯No æˆ–è€…è¶…æ—¶æœªåé¦ˆï¼Œå‘é€ "),_("code",[e._v("Rollback")]),e._v(" è¯·æ±‚ï¼Œåˆ©ç”¨é˜¶æ®µä¸€è®°å½•è¡¨çš„ "),_("code",[e._v("Undo")]),e._v(" ä¿¡æ¯æ‰§è¡Œå›æ»šï¼Œå¹¶åé¦ˆç»™åè°ƒè€…"),_("code",[e._v("Ack")]),e._v(" ï¼Œä¸­æ–­æ¶ˆæ¯")]),e._v(" "),_("p",[_("img",{attrs:{src:"https://tva1.sinaimg.cn/large/00831rSTly1gclosfvncqj30hs09j0td.jpg",alt:""}})]),e._v(" "),_("p",[e._v("ä¼˜ç‚¹ï¼šåŸç†ç®€å•ã€å®ç°æ–¹ä¾¿ã€‚")]),e._v(" "),_("p",[e._v("ç¼ºç‚¹ï¼š")]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("å•ç‚¹æ•…éšœé—®é¢˜")]),e._v("ï¼Œå¦‚æœåè°ƒè€…æŒ‚äº†é‚£ä¹ˆæ•´ä¸ªç³»ç»Ÿéƒ½å¤„äºä¸å¯ç”¨çš„çŠ¶æ€äº†")]),e._v(" "),_("li",[_("strong",[e._v("é˜»å¡é—®é¢˜")]),e._v("ï¼Œå³å½“åè°ƒè€…å‘é€ "),_("code",[e._v("prepare")]),e._v(" è¯·æ±‚ï¼Œå‚ä¸è€…æ”¶åˆ°ä¹‹åå¦‚æœèƒ½å¤„ç†é‚£ä¹ˆå®ƒå°†ä¼šè¿›è¡Œäº‹åŠ¡çš„å¤„ç†ä½†å¹¶ä¸æäº¤ï¼Œè¿™ä¸ªæ—¶å€™ä¼šä¸€ç›´å ç”¨ç€èµ„æºä¸é‡Šæ”¾ï¼Œå¦‚æœæ­¤æ—¶åè°ƒè€…æŒ‚äº†ï¼Œé‚£ä¹ˆè¿™äº›èµ„æºéƒ½ä¸ä¼šå†é‡Šæ”¾äº†ï¼Œè¿™ä¼šæå¤§å½±å“æ€§èƒ½")]),e._v(" "),_("li",[_("strong",[e._v("æ•°æ®ä¸ä¸€è‡´é—®é¢˜")]),e._v("ï¼Œæ¯”å¦‚å½“ç¬¬äºŒé˜¶æ®µï¼Œåè°ƒè€…åªå‘é€äº†ä¸€éƒ¨åˆ†çš„ "),_("code",[e._v("commit")]),e._v(" è¯·æ±‚å°±æŒ‚äº†ï¼Œé‚£ä¹ˆä¹Ÿå°±æ„å‘³ç€ï¼Œæ”¶åˆ°æ¶ˆæ¯çš„å‚ä¸è€…ä¼šè¿›è¡Œäº‹åŠ¡çš„æäº¤ï¼Œè€Œåé¢æ²¡æ”¶åˆ°çš„åˆ™ä¸ä¼šè¿›è¡Œäº‹åŠ¡æäº¤ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±ä¼šäº§ç”Ÿæ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜")])]),e._v(" "),_("h4",{attrs:{id:"_3pc-three-phase-commit"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3pc-three-phase-commit"}},[e._v("#")]),e._v(" 3PCï¼ˆThree-Phase Commitï¼‰")]),e._v(" "),_("p",[e._v("3PCï¼Œæ˜¯ Three-Phase-Comimit çš„ç¼©å†™ï¼Œå³ã€Œ"),_("strong",[e._v("ä¸‰é˜¶æ®µæäº¤")]),e._v("ã€ï¼Œæ˜¯äºŒé˜¶æ®µçš„æ”¹è¿›ç‰ˆï¼Œå°†äºŒé˜¶æ®µæäº¤åè®®çš„â€œæäº¤äº‹åŠ¡è¯·æ±‚â€è¿‡ç¨‹ä¸€åˆ†ä¸ºäºŒã€‚")]),e._v(" "),_("p",[_("strong",[e._v("é˜¶æ®µä¸€ï¼šCanCommit")])]),e._v(" "),_("p",[e._v("åè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€ "),_("code",[e._v("CanCommit")]),e._v(" è¯·æ±‚ï¼Œå‚ä¸è€…æ”¶åˆ°è¯·æ±‚åä¼šæ ¹æ®è‡ªèº«æƒ…å†µæŸ¥çœ‹æ˜¯å¦èƒ½æ‰§è¡Œäº‹åŠ¡ï¼Œå¦‚æœå¯ä»¥åˆ™è¿”å› YES å“åº”å¹¶è¿›å…¥é¢„å¤‡çŠ¶æ€ï¼Œå¦åˆ™è¿”å› NO")]),e._v(" "),_("p",[_("strong",[e._v("é˜¶æ®µäºŒï¼šPreCommit")])]),e._v(" "),_("p",[e._v("åè°ƒè€…æ ¹æ®å‚ä¸è€…è¿”å›çš„å“åº”æ¥å†³å®šæ˜¯å¦å¯ä»¥è¿›è¡Œä¸‹é¢çš„ "),_("code",[e._v("PreCommit")]),e._v(" æ“ä½œã€‚å¦‚æœä¸Šé¢å‚ä¸è€…è¿”å›çš„éƒ½æ˜¯ YESï¼Œé‚£ä¹ˆåè°ƒè€…å°†å‘æ‰€æœ‰å‚ä¸è€…å‘é€ "),_("code",[e._v("PreCommit")]),e._v(" é¢„æäº¤è¯·æ±‚ï¼Œ"),_("strong",[e._v("å‚ä¸è€…æ”¶åˆ°é¢„æäº¤è¯·æ±‚åï¼Œä¼šè¿›è¡Œäº‹åŠ¡çš„æ‰§è¡Œæ“ä½œï¼Œå¹¶å°† Undo å’Œ Redo ä¿¡æ¯å†™å…¥äº‹åŠ¡æ—¥å¿—ä¸­")]),e._v(" ï¼Œæœ€åå¦‚æœå‚ä¸è€…é¡ºåˆ©æ‰§è¡Œäº†äº‹åŠ¡åˆ™ç»™åè°ƒè€…è¿”å›æˆåŠŸçš„ "),_("code",[e._v("Ack")]),e._v(" å“åº”ã€‚å¦‚æœåœ¨ç¬¬ä¸€é˜¶æ®µåè°ƒè€…æ”¶åˆ°äº† "),_("strong",[e._v("ä»»ä½•ä¸€ä¸ª NO")]),e._v(" çš„ä¿¡æ¯ï¼Œæˆ–è€… "),_("strong",[e._v("åœ¨ä¸€å®šæ—¶é—´å†…")]),e._v(" å¹¶æ²¡æœ‰æ”¶åˆ°å…¨éƒ¨çš„å‚ä¸è€…çš„å“åº”ï¼Œé‚£ä¹ˆå°±ä¼šä¸­æ–­äº‹åŠ¡ï¼Œå®ƒä¼šå‘æ‰€æœ‰å‚ä¸è€…å‘é€ä¸­æ–­è¯·æ±‚ "),_("code",[e._v("abort")]),e._v("ï¼Œå‚ä¸è€…æ”¶åˆ°ä¸­æ–­è¯·æ±‚ä¹‹åä¼šç«‹å³ä¸­æ–­äº‹åŠ¡ï¼Œæˆ–è€…åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°åè°ƒè€…çš„è¯·æ±‚ï¼Œå®ƒä¹Ÿä¼šä¸­æ–­äº‹åŠ¡")]),e._v(" "),_("p",[_("strong",[e._v("é˜¶æ®µä¸‰ï¼šDoCommit")])]),e._v(" "),_("p",[e._v("è¿™ä¸ªé˜¶æ®µå…¶å®å’Œ "),_("code",[e._v("2PC")]),e._v(" çš„ç¬¬äºŒé˜¶æ®µå·®ä¸å¤šï¼Œå¦‚æœåè°ƒè€…æ”¶åˆ°äº†æ‰€æœ‰å‚ä¸è€…åœ¨ "),_("code",[e._v("PreCommit")]),e._v(" é˜¶æ®µçš„ YES å“åº”ï¼Œé‚£ä¹ˆåè°ƒè€…å°†ä¼šç»™æ‰€æœ‰å‚ä¸è€…å‘é€ "),_("code",[e._v("DoCommit")]),e._v(" è¯·æ±‚ï¼Œ"),_("strong",[e._v("å‚ä¸è€…æ”¶åˆ° DoCommit è¯·æ±‚ååˆ™ä¼šè¿›è¡Œäº‹åŠ¡çš„æäº¤å·¥ä½œ")]),e._v("ï¼Œå®Œæˆååˆ™ä¼šç»™åè°ƒè€…è¿”å›å“åº”ï¼Œåè°ƒè€…æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…è¿”å›çš„äº‹åŠ¡æäº¤æˆåŠŸçš„å“åº”ä¹‹ååˆ™å®Œæˆäº‹åŠ¡ã€‚è‹¥åè°ƒè€…åœ¨ "),_("code",[e._v("PreCommit")]),e._v(" é˜¶æ®µ "),_("strong",[e._v("æ”¶åˆ°äº†ä»»ä½•ä¸€ä¸ª NO æˆ–è€…åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…çš„å“åº”")]),e._v(" ï¼Œé‚£ä¹ˆå°±ä¼šè¿›è¡Œä¸­æ–­è¯·æ±‚çš„å‘é€ï¼Œå‚ä¸è€…æ”¶åˆ°ä¸­æ–­è¯·æ±‚ååˆ™ä¼š "),_("strong",[e._v("é€šè¿‡ä¸Šé¢è®°å½•çš„å›æ»šæ—¥å¿—")]),e._v(" æ¥è¿›è¡Œäº‹åŠ¡çš„å›æ»šæ“ä½œï¼Œå¹¶å‘åè°ƒè€…åé¦ˆå›æ»šçŠ¶å†µï¼Œåè°ƒè€…æ”¶åˆ°å‚ä¸è€…è¿”å›çš„æ¶ˆæ¯åï¼Œä¸­æ–­äº‹åŠ¡ã€‚")]),e._v(" "),_("p",[_("img",{attrs:{src:"https://tva1.sinaimg.cn/large/00831rSTly1gclot2rul3j30j60cpgmo.jpg",alt:""}})]),e._v(" "),_("p",[e._v("é™ä½äº†å‚ä¸è€…çš„é˜»å¡èŒƒå›´ï¼Œä¸”èƒ½åœ¨å•ç‚¹æ•…éšœåç»§ç»­è¾¾æˆä¸€è‡´ã€‚")]),e._v(" "),_("p",[e._v("ä½†æ˜¯æœ€é‡è¦çš„ä¸€è‡´æ€§å¹¶æ²¡æœ‰å¾—åˆ°æ ¹æœ¬çš„è§£å†³ï¼Œæ¯”å¦‚åœ¨ "),_("code",[e._v("PreCommit")]),e._v(" é˜¶æ®µï¼Œå½“ä¸€ä¸ªå‚ä¸è€…æ”¶åˆ°äº†è¯·æ±‚ä¹‹åå…¶ä»–å‚ä¸è€…å’Œåè°ƒè€…æŒ‚äº†æˆ–è€…å‡ºç°äº†ç½‘ç»œåˆ†åŒºï¼Œè¿™ä¸ªæ—¶å€™æ”¶åˆ°æ¶ˆæ¯çš„å‚ä¸è€…éƒ½ä¼šè¿›è¡Œäº‹åŠ¡æäº¤ï¼Œè¿™å°±ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚")]),e._v(" "),_("hr"),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-è®²ä¸€è®²-paxos-ç®—æ³•"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è®²ä¸€è®²-paxos-ç®—æ³•"}},[e._v("#")]),e._v(" ğŸ¯ è®²ä¸€è®² Paxos ç®—æ³•ï¼Ÿ")]),e._v(" "),_("p",[_("code",[e._v("Paxos")]),e._v(" ç®—æ³•æ˜¯åŸºäº"),_("strong",[e._v("æ¶ˆæ¯ä¼ é€’ä¸”å…·æœ‰é«˜åº¦å®¹é”™ç‰¹æ€§çš„ä¸€è‡´æ€§ç®—æ³•")]),e._v("ï¼Œæ˜¯ç›®å‰å…¬è®¤çš„è§£å†³åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜æœ€æœ‰æ•ˆçš„ç®—æ³•ä¹‹ä¸€ï¼Œ"),_("strong",[e._v("å…¶è§£å†³çš„é—®é¢˜å°±æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¦‚ä½•å°±æŸä¸ªå€¼ï¼ˆå†³è®®ï¼‰è¾¾æˆä¸€è‡´")]),e._v(" ã€‚")]),e._v(" "),_("p",[e._v("åœ¨ "),_("code",[e._v("Paxos")]),e._v(" ä¸­ä¸»è¦æœ‰ä¸‰ä¸ªè§’è‰²ï¼Œåˆ†åˆ«ä¸º "),_("code",[e._v("Proposerææ¡ˆè€…")]),e._v("ã€"),_("code",[e._v("Acceptorè¡¨å†³è€…")]),e._v("ã€"),_("code",[e._v("Learnerå­¦ä¹ è€…")]),e._v("ã€‚"),_("code",[e._v("Paxos")]),e._v(" ç®—æ³•å’Œ "),_("code",[e._v("2PC")]),e._v(" ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸¤ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«ä¸º "),_("code",[e._v("Prepare")]),e._v(" å’Œ "),_("code",[e._v("accept")]),e._v(" é˜¶æ®µã€‚")]),e._v(" "),_("p",[e._v("åœ¨å…·ä½“çš„å®ç°ä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹å¯èƒ½åŒæ—¶å……å½“å¤šç§è§’è‰²ã€‚æ¯”å¦‚ä¸€ä¸ªè¿›ç¨‹å¯èƒ½æ—¢æ˜¯ Proposer åˆæ˜¯ Acceptor åˆæ˜¯Learnerã€‚Proposer è´Ÿè´£æå‡ºææ¡ˆï¼ŒAcceptor è´Ÿè´£å¯¹ææ¡ˆä½œå‡ºè£å†³ï¼ˆacceptä¸å¦ï¼‰ï¼Œlearner è´Ÿè´£å­¦ä¹ ææ¡ˆç»“æœã€‚")]),e._v(" "),_("p",[e._v("è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µå«ã€Œ"),_("strong",[e._v("ææ¡ˆ")]),e._v("ã€ï¼ˆProposalï¼‰ã€‚æœ€ç»ˆè¦è¾¾æˆä¸€è‡´çš„ value å°±åœ¨ææ¡ˆé‡Œã€‚åªè¦ Proposer å‘çš„ææ¡ˆè¢«åŠæ•°ä»¥ä¸Šçš„ Acceptor æ¥å—ï¼ŒProposer å°±è®¤ä¸ºè¯¥ææ¡ˆé‡Œçš„ value è¢«é€‰å®šäº†ã€‚Acceptor å‘Šè¯‰ Learner å“ªä¸ª value è¢«é€‰å®šï¼ŒLearner å°±è®¤ä¸ºé‚£ä¸ª value è¢«é€‰å®šã€‚")]),e._v(" "),_("p",[_("strong",[e._v("é˜¶æ®µä¸€ï¼šprepare é˜¶æ®µ")])]),e._v(" "),_("ol",[_("li",[_("p",[_("code",[e._v("Proposer")]),e._v(" è´Ÿè´£æå‡º "),_("code",[e._v("proposal")]),e._v("ï¼Œæ¯ä¸ªææ¡ˆè€…åœ¨æå‡ºææ¡ˆæ—¶éƒ½ä¼šé¦–å…ˆè·å–åˆ°ä¸€ä¸ª "),_("strong",[e._v("å…·æœ‰å…¨å±€å”¯ä¸€æ€§çš„ã€é€’å¢çš„ææ¡ˆç¼–å·N")]),e._v("ï¼Œå³åœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ˜¯å”¯ä¸€çš„ç¼–å· Nï¼Œç„¶åå°†è¯¥ç¼–å·èµ‹äºˆå…¶è¦æå‡ºçš„ææ¡ˆï¼Œåœ¨"),_("strong",[e._v("ç¬¬ä¸€é˜¶æ®µæ˜¯åªå°†ææ¡ˆç¼–å·å‘é€ç»™æ‰€æœ‰çš„è¡¨å†³è€…")]),e._v("ã€‚")])]),e._v(" "),_("li",[_("p",[e._v("å¦‚æœä¸€ä¸ª Acceptor æ”¶åˆ°ä¸€ä¸ªç¼–å·ä¸º N çš„ Prepare è¯·æ±‚ï¼Œå¦‚æœå°äºå®ƒå·²ç»å“åº”è¿‡çš„è¯·æ±‚ï¼Œåˆ™æ‹’ç»ï¼Œä¸å›åº”æˆ–å›å¤errorã€‚è‹¥ N å¤§äºè¯¥ Acceptor å·²ç»å“åº”è¿‡çš„æ‰€æœ‰ Prepare è¯·æ±‚çš„ç¼–å·ï¼ˆmaxNï¼‰ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå°†å®ƒ"),_("strong",[e._v("å·²ç»æ‰¹å‡†è¿‡çš„ç¼–å·æœ€å¤§çš„ææ¡ˆ")]),e._v("ï¼ˆå¦‚æœæœ‰çš„è¯ï¼Œå¦‚æœè¿˜æ²¡æœ‰çš„acceptææ¡ˆçš„è¯è¿”å›{pokï¼Œnullï¼Œnull}ï¼‰ä½œä¸ºå“åº”åé¦ˆç»™ Proposerï¼ŒåŒæ—¶è¯¥ Acceptor æ‰¿è¯ºä¸å†æ¥å—ä»»ä½•ç¼–å·å°äº N çš„ææ¡ˆ")]),e._v(" "),_("p",[e._v("egï¼šå‡å®šä¸€ä¸ª Acceptor å·²ç»å“åº”è¿‡çš„æ‰€æœ‰ Prepare è¯·æ±‚å¯¹åº”çš„ææ¡ˆç¼–å·åˆ†åˆ«æ˜¯1ã€2ã€...5å’Œ7ï¼Œé‚£ä¹ˆè¯¥ Acceptor åœ¨æ¥æ”¶åˆ°ä¸€ä¸ªç¼–å·ä¸º8çš„ Prepare è¯·æ±‚åï¼Œå°±ä¼šå°† 7 çš„ææ¡ˆä½œä¸ºå“åº”åé¦ˆç»™ Proposerã€‚")])])]),e._v(" "),_("p",[_("strong",[e._v("é˜¶æ®µäºŒï¼šaccept é˜¶æ®µ")])]),e._v(" "),_("ol",[_("li",[e._v("å¦‚æœä¸€ä¸ª Proposer æ”¶åˆ°åŠæ•°ä»¥ä¸Š Acceptor å¯¹å…¶å‘å‡ºçš„ç¼–å·ä¸º N çš„ Prepare è¯·æ±‚çš„å“åº”ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå‘é€ä¸€ä¸ªé’ˆå¯¹ [N,V] ææ¡ˆçš„ Accept è¯·æ±‚åŠæ•°ä»¥ä¸Šçš„ Acceptorã€‚æ³¨æ„ï¼šV å°±æ˜¯æ”¶åˆ°çš„å“åº”ä¸­ç¼–å·æœ€å¤§çš„ææ¡ˆçš„ valueï¼Œå¦‚æœå“åº”ä¸­ä¸åŒ…å«ä»»ä½•ææ¡ˆï¼Œé‚£ä¹ˆ V å°±ç”± Proposer è‡ªå·±å†³å®š")]),e._v(" "),_("li",[e._v("å¦‚æœ Acceptor æ”¶åˆ°ä¸€ä¸ªé’ˆå¯¹ç¼–å·ä¸ºNçš„ææ¡ˆçš„Acceptè¯·æ±‚ï¼Œåªè¦è¯¥ Acceptor æ²¡æœ‰å¯¹ç¼–å·å¤§äº N çš„ Prepare è¯·æ±‚åšå‡ºè¿‡å“åº”ï¼Œå®ƒå°±é€šè¿‡è¯¥ææ¡ˆã€‚å¦‚æœNå°äº Acceptor ä»¥åŠå“åº”çš„ prepare è¯·æ±‚ï¼Œåˆ™æ‹’ç»ï¼Œä¸å›åº”æˆ–å›å¤errorï¼ˆå½“proposeræ²¡æœ‰æ”¶åˆ°è¿‡åŠçš„å›åº”ï¼Œé‚£ä¹ˆä»–ä¼šé‡æ–°è¿›å…¥ç¬¬ä¸€é˜¶æ®µï¼Œé€’å¢ææ¡ˆå·ï¼Œé‡æ–°æå‡ºprepareè¯·æ±‚ï¼‰")]),e._v(" "),_("li",[e._v("æœ€åæ˜¯ Learner è·å–é€šè¿‡çš„ææ¡ˆï¼ˆæœ‰å¤šç§æ–¹å¼ï¼‰")])]),e._v(" "),_("p",[_("img",{attrs:{src:"https://tva1.sinaimg.cn/large/00831rSTly1gcloyv70qsj30sg0lc0ve.jpg",alt:""}})]),e._v(" "),_("p",[_("strong",[_("code",[e._v("paxos")]),e._v(" ç®—æ³•çš„æ­»å¾ªç¯é—®é¢˜")])]),e._v(" "),_("p",[e._v("å…¶å®å°±æœ‰ç‚¹ç±»ä¼¼äºä¸¤ä¸ªäººåµæ¶ï¼Œå°æ˜è¯´æˆ‘æ˜¯å¯¹çš„ï¼Œå°çº¢è¯´æˆ‘æ‰æ˜¯å¯¹çš„ï¼Œä¸¤ä¸ªäººæ®ç†åŠ›äº‰çš„è°ä¹Ÿä¸è®©è°ğŸ¤¬ğŸ¤¬ã€‚")]),e._v(" "),_("p",[e._v("æ¯”å¦‚è¯´ï¼Œæ­¤æ—¶ææ¡ˆè€… P1 æå‡ºä¸€ä¸ªæ–¹æ¡ˆ M1ï¼Œå®Œæˆäº† "),_("code",[e._v("Prepare")]),e._v(" é˜¶æ®µçš„å·¥ä½œï¼Œè¿™ä¸ªæ—¶å€™ "),_("code",[e._v("acceptor")]),e._v(" åˆ™æ‰¹å‡†äº† M1ï¼Œä½†æ˜¯æ­¤æ—¶ææ¡ˆè€… P2 åŒæ—¶ä¹Ÿæå‡ºäº†ä¸€ä¸ªæ–¹æ¡ˆ M2ï¼Œå®ƒä¹Ÿå®Œæˆäº† "),_("code",[e._v("Prepare")]),e._v(" é˜¶æ®µçš„å·¥ä½œã€‚ç„¶å P1 çš„æ–¹æ¡ˆå·²ç»ä¸èƒ½åœ¨ç¬¬äºŒé˜¶æ®µè¢«æ‰¹å‡†äº†ï¼ˆå› ä¸º "),_("code",[e._v("acceptor")]),e._v(" å·²ç»æ‰¹å‡†äº†æ¯” M1 æ›´å¤§çš„ M2ï¼‰ï¼Œæ‰€ä»¥ P1 è‡ªå¢æ–¹æ¡ˆå˜ä¸º M3 é‡æ–°è¿›å…¥ "),_("code",[e._v("Prepare")]),e._v(" é˜¶æ®µï¼Œç„¶å "),_("code",[e._v("acceptor")]),e._v(" ï¼Œåˆæ‰¹å‡†äº†æ–°çš„ M3 æ–¹æ¡ˆï¼Œå®ƒåˆä¸èƒ½æ‰¹å‡† M2 äº†ï¼Œè¿™ä¸ªæ—¶å€™ M2 åˆè‡ªå¢è¿›å…¥ "),_("code",[e._v("Prepare")]),e._v(" é˜¶æ®µã€‚ã€‚ã€‚")]),e._v(" "),_("p",[e._v("å°±è¿™æ ·æ— ä¼‘æ— æ­¢çš„æ°¸è¿œææ¡ˆä¸‹å»ï¼Œè¿™å°±æ˜¯ "),_("code",[e._v("paxos")]),e._v(" ç®—æ³•çš„æ­»å¾ªç¯é—®é¢˜ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-è°ˆä¸‹ä½ å¯¹-zab-åè®®çš„äº†è§£"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è°ˆä¸‹ä½ å¯¹-zab-åè®®çš„äº†è§£"}},[e._v("#")]),e._v(" ğŸ¯ è°ˆä¸‹ä½ å¯¹ ZAB åè®®çš„äº†è§£ï¼Ÿ")]),e._v(" "),_("p",[e._v("ZABï¼ˆZookeeper Atomic Broadcastï¼‰ åè®®æ˜¯ä¸ºåˆ†å¸ƒå¼åè°ƒæœåŠ¡ Zookeeper ä¸“é—¨è®¾è®¡çš„ä¸€ç§æ”¯æŒ"),_("strong",[e._v("å´©æºƒæ¢å¤çš„åŸå­å¹¿æ’­åè®®")]),e._v("ã€‚")]),e._v(" "),_("p",[e._v("åœ¨ Zookeeper ä¸­ï¼Œä¸»è¦ä¾èµ– ZAB åè®®æ¥å®ç°åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§ï¼ŒåŸºäºè¯¥åè®®ï¼ŒZooKeeper å®ç°äº†ä¸€ç§ä¸»å¤‡æ¨¡å¼çš„ç³»ç»Ÿæ¶æ„æ¥ä¿æŒé›†ç¾¤ä¸­å„å‰¯æœ¬ä¹‹é—´æ•°æ®çš„ä¸€è‡´æ€§ã€‚")]),e._v(" "),_("p",[e._v("å°½ç®¡ ZAB ä¸æ˜¯ Paxos çš„å®ç°ï¼Œä½†æ˜¯ ZAB ä¹Ÿå‚è€ƒäº†ä¸€äº› Paxos çš„ä¸€äº›è®¾è®¡æ€æƒ³ï¼Œæ¯”å¦‚ï¼š")]),e._v(" "),_("ul",[_("li",[e._v("leader å‘ follows æå‡ºææ¡ˆ(proposal)")]),e._v(" "),_("li",[e._v("leader éœ€è¦åœ¨è¾¾åˆ°æ³•å®šæ•°é‡(åŠæ•°ä»¥ä¸Š)çš„ follows ç¡®è®¤ä¹‹åæ‰ä¼šè¿›è¡Œ commit")]),e._v(" "),_("li",[e._v("æ¯ä¸€ä¸ª proposal éƒ½æœ‰ä¸€ä¸ªçºªå…ƒ(epoch)å·ï¼Œç±»ä¼¼äº Paxos ä¸­çš„é€‰ç¥¨(ballot)")])]),e._v(" "),_("p",[_("code",[e._v("ZAB")]),e._v(" ä¸­æœ‰ä¸‰ä¸ªä¸»è¦çš„è§’è‰²ï¼Œ"),_("code",[e._v("Leader é¢†å¯¼è€…")]),e._v("ã€"),_("code",[e._v("Followerè·Ÿéšè€…")]),e._v("ã€"),_("code",[e._v("Observerè§‚å¯Ÿè€…")]),e._v(" ã€‚")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("Leader")]),e._v(" ï¼šé›†ç¾¤ä¸­ "),_("strong",[e._v("å”¯ä¸€çš„å†™è¯·æ±‚å¤„ç†è€…")]),e._v(" ï¼Œèƒ½å¤Ÿå‘èµ·æŠ•ç¥¨ï¼ˆæŠ•ç¥¨ä¹Ÿæ˜¯ä¸ºäº†è¿›è¡Œå†™è¯·æ±‚ï¼‰ã€‚")]),e._v(" "),_("li",[_("code",[e._v("Follower")]),e._v("ï¼šèƒ½å¤Ÿæ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¦‚æœæ˜¯è¯»è¯·æ±‚åˆ™å¯ä»¥è‡ªå·±å¤„ç†ï¼Œ"),_("strong",[e._v("å¦‚æœæ˜¯å†™è¯·æ±‚åˆ™è¦è½¬å‘ç»™ Leader ã€‚åœ¨é€‰ä¸¾è¿‡ç¨‹ä¸­ä¼šå‚ä¸æŠ•ç¥¨ï¼Œæœ‰é€‰ä¸¾æƒå’Œè¢«é€‰ä¸¾æƒ ã€‚")])]),e._v(" "),_("li",[_("strong",[e._v("Observer ï¼šå°±æ˜¯æ²¡æœ‰é€‰ä¸¾æƒå’Œè¢«é€‰ä¸¾æƒçš„ Follower ã€‚")])])]),e._v(" "),_("p",[e._v("åœ¨ ZAB åè®®ä¸­å¯¹ zkServer(å³ä¸Šé¢æˆ‘ä»¬è¯´çš„ä¸‰ä¸ªè§’è‰²çš„æ€»ç§°) è¿˜æœ‰ä¸¤ç§æ¨¡å¼çš„å®šä¹‰ï¼Œåˆ†åˆ«æ˜¯æ¶ˆæ¯å¹¿æ’­å’Œå´©æºƒæ¢å¤")]),e._v(" "),_("p",[_("strong",[e._v("æ¶ˆæ¯å¹¿æ’­æ¨¡å¼")])]),e._v(" "),_("p",[_("img",{attrs:{src:"http://file.sunwaiting.com/zab_broadcast.png",alt:"ZABå¹¿æ’­"}})]),e._v(" "),_("ol",[_("li",[e._v("Leaderä»å®¢æˆ·ç«¯æ”¶åˆ°ä¸€ä¸ªäº‹åŠ¡è¯·æ±‚ï¼ˆå¦‚æœæ˜¯é›†ç¾¤ä¸­å…¶ä»–æœºå™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„äº‹åŠ¡è¯·æ±‚ï¼Œä¼šç›´æ¥è½¬å‘ç»™ Leader æœåŠ¡å™¨ï¼‰")]),e._v(" "),_("li",[e._v("Leader æœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„äº‹åŠ¡ Proposalï¼Œå¹¶ä¸ºè¿™ä¸ªäº‹åŠ¡ç”Ÿæˆä¸€ä¸ªå…¨å±€é€’å¢çš„å”¯ä¸€çš„ZXIDï¼ˆé€šè¿‡å…¶ ZXID æ¥è¿›è¡Œæ’åºä¿è¯é¡ºåºæ€§ï¼‰")]),e._v(" "),_("li",[e._v("Leader å°†è¿™ä¸ªäº‹åŠ¡å‘é€ç»™æ‰€æœ‰çš„ Follows èŠ‚ç‚¹")]),e._v(" "),_("li",[e._v("Follower èŠ‚ç‚¹å°†æ”¶åˆ°çš„äº‹åŠ¡è¯·æ±‚åŠ å…¥åˆ°å†å²é˜Ÿåˆ—(Leader ä¼šä¸ºæ¯ä¸ª Follower åˆ†é…ä¸€ä¸ªå•ç‹¬çš„é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºï¼Œé¡ºåºä¿è¯æ¶ˆæ¯çš„å› æœå…³ç³»)ä¸­ï¼Œå¹¶å‘é€ ack ç»™ Leader")]),e._v(" "),_("li",[e._v("å½“ Leader æ”¶åˆ°è¶…è¿‡åŠæ•° Follower çš„ ack æ¶ˆæ¯ï¼ŒLeaderä¼šå¹¿æ’­ä¸€ä¸ª commit æ¶ˆæ¯")]),e._v(" "),_("li",[e._v("å½“ Follower æ”¶åˆ° commit è¯·æ±‚æ—¶ï¼Œä¼šåˆ¤æ–­è¯¥äº‹åŠ¡çš„ ZXID æ˜¯ä¸æ˜¯æ¯”å†å²é˜Ÿåˆ—ä¸­çš„ä»»ä½•äº‹åŠ¡çš„ ZXID éƒ½å°ï¼Œå¦‚æœæ˜¯åˆ™æäº¤ï¼Œå¦‚æœä¸æ˜¯åˆ™ç­‰å¾…æ¯”å®ƒæ›´å°çš„äº‹åŠ¡çš„ commit")])]),e._v(" "),_("p",[_("img",{attrs:{src:"http://file.sunwaiting.com/zab_commit_1.png",alt:"zab \bcommitæµç¨‹"}})]),e._v(" "),_("p",[_("strong",[e._v("å´©æºƒæ¢å¤æ¨¡å¼")])]),e._v(" "),_("p",[e._v("ZAB çš„åŸå­å¹¿æ’­åè®®åœ¨æ­£å¸¸æƒ…å†µä¸‹è¿è¡Œè‰¯å¥½ï¼Œä½†å¤©æœ‰ä¸æµ‹é£äº‘ï¼Œä¸€æ—¦ Leader æœåŠ¡å™¨æŒ‚æ‰æˆ–è€…ç”±äºç½‘ç»œåŸå› å¯¼è‡´ä¸åŠæ•°çš„ Follower çš„æœåŠ¡å™¨å¤±å»è”ç³»ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥å´©æºƒæ¢å¤æ¨¡å¼ã€‚æ•´ä¸ªæ¢å¤è¿‡ç¨‹ç»“æŸåéœ€è¦é€‰ä¸¾å‡ºä¸€ä¸ªæ–°çš„ Leader æœåŠ¡å™¨ã€‚")]),e._v(" "),_("p",[e._v("æ¢å¤æ¨¡å¼å¤§è‡´å¯ä»¥åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š"),_("strong",[e._v("é€‰ä¸¾ã€å‘ç°ã€åŒæ­¥ã€å¹¿æ’­")])]),e._v(" "),_("ol",[_("li",[e._v("å½“ leader å´©æºƒåï¼Œé›†ç¾¤è¿›å…¥é€‰ä¸¾é˜¶æ®µï¼Œå¼€å§‹é€‰ä¸¾å‡ºæ½œåœ¨çš„æ–° leader(ä¸€èˆ¬ä¸ºé›†ç¾¤ä¸­æ‹¥æœ‰æœ€å¤§ ZXID çš„èŠ‚ç‚¹)")]),e._v(" "),_("li",[e._v("è¿›å…¥å‘ç°é˜¶æ®µï¼Œfollower ä¸æ½œåœ¨çš„æ–° leader è¿›è¡Œæ²Ÿé€šï¼Œå¦‚æœå‘ç°è¶…è¿‡æ³•å®šäººæ•°çš„ follower åŒæ„ï¼Œåˆ™æ½œåœ¨çš„æ–°leader å°† epoc håŠ 1ï¼Œè¿›å…¥æ–°çš„çºªå…ƒã€‚æ–°çš„ leader äº§ç”Ÿ")]),e._v(" "),_("li",[e._v("é›†ç¾¤é—´è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œä¿è¯é›†ç¾¤ä¸­å„ä¸ªèŠ‚ç‚¹çš„äº‹åŠ¡ä¸€è‡´")]),e._v(" "),_("li",[e._v("é›†ç¾¤æ¢å¤åˆ°å¹¿æ’­æ¨¡å¼ï¼Œå¼€å§‹æ¥å—å®¢æˆ·ç«¯çš„å†™è¯·æ±‚")])]),e._v(" "),_("hr"),e._v(" "),_("h2",{attrs:{id:"ğŸŒ-ä¸‰ã€é›†ç¾¤ä¸é€‰ä¸¾-é«˜å¯ç”¨"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒ-ä¸‰ã€é›†ç¾¤ä¸é€‰ä¸¾-é«˜å¯ç”¨"}},[e._v("#")]),e._v(" ğŸŒ ä¸‰ã€é›†ç¾¤ä¸é€‰ä¸¾ï¼ˆé«˜å¯ç”¨ï¼‰")]),e._v(" "),_("blockquote",[_("p",[_("strong",[e._v("æ ¸å¿ƒæ€æƒ³")]),e._v("ï¼šZKé€šè¿‡é€‰ä¸¾æœºåˆ¶ã€èŠ‚ç‚¹è§’è‰²åˆ†å·¥ã€æ•°æ®åŒæ­¥ç­‰ä¿è¯é›†ç¾¤çš„é«˜å¯ç”¨æ€§å’Œæ•°æ®ä¸€è‡´æ€§ï¼Œç†è§£è¿™äº›æœºåˆ¶å¯¹äºæŒæ¡åˆ†å¸ƒå¼ç³»ç»Ÿè‡³å…³é‡è¦ã€‚")])]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("é€‰ä¸¾æœºåˆ¶")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper%E9%80%89%E4%B8%BE%E6%9C%BA%E5%88%B6"}},[e._v("é€‰ä¸¾æœºåˆ¶")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E9%9B%86%E7%BE%A4%E9%80%89%E4%B8%BB%E7%9A%84%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88"}},[e._v("é›†ç¾¤é€‰ä¸»åŸç†")])]),e._v(" "),_("li",[_("strong",[e._v("èŠ‚ç‚¹è§’è‰²")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%A7%92%E8%89%B2"}},[e._v("èŠ‚ç‚¹è§’è‰²åˆ†å·¥")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E4%B8%8B-server-%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81"}},[e._v("èŠ‚ç‚¹çŠ¶æ€")])]),e._v(" "),_("li",[_("strong",[e._v("æ•…éšœå¤„ç†")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E5%AE%95%E6%9C%BA%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86"}},[e._v("èŠ‚ç‚¹å®•æœºå¤„ç†")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6"}},[e._v("æ•°æ®åŒæ­¥")])]),e._v(" "),_("li",[_("strong",[e._v("çŠ¶æ€åŒæ­¥")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81%E4%B8%BB%E4%BB%8E%E8%8A%82%E7%82%B9%E7%9A%84%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5"}},[e._v("ä¸»ä»åŒæ­¥")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E6%98%AF%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%A1%BA%E5%BA%8F%E4%B8%80%E8%87%B4%E6%80%A7%E7%9A%84"}},[e._v("äº‹åŠ¡é¡ºåº")])])]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-æ€ä¹ˆä¿è¯ä¸»ä»èŠ‚ç‚¹çš„çŠ¶æ€åŒæ­¥-æˆ–è€…è¯´åŒæ­¥æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-æ€ä¹ˆä¿è¯ä¸»ä»èŠ‚ç‚¹çš„çŠ¶æ€åŒæ­¥-æˆ–è€…è¯´åŒæ­¥æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper æ€ä¹ˆä¿è¯ä¸»ä»èŠ‚ç‚¹çš„çŠ¶æ€åŒæ­¥ï¼Ÿæˆ–è€…è¯´åŒæ­¥æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„")]),e._v(" "),_("p",[e._v("Zookeeper çš„æ ¸å¿ƒæ˜¯åŸå­å¹¿æ’­æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶ä¿è¯äº†å„ä¸ª server ä¹‹é—´çš„åŒæ­¥ã€‚å®ç°è¿™ä¸ªæœºåˆ¶çš„åè®®å«åš Zab åè®®ã€‚Zab åè®®æœ‰ä¸¤ç§æ¨¡å¼ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯æ¢å¤æ¨¡å¼å’Œå¹¿æ’­æ¨¡å¼ã€‚åŒä¸Š")]),e._v(" "),_("hr"),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆè¦æœ‰ä¸»èŠ‚ç‚¹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆè¦æœ‰ä¸»èŠ‚ç‚¹"}},[e._v("#")]),e._v(" ğŸ¯ é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆè¦æœ‰ä¸»èŠ‚ç‚¹ï¼Ÿ")]),e._v(" "),_("p",[e._v("åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œæœ‰äº›ä¸šåŠ¡é€»è¾‘åªéœ€è¦é›†ç¾¤ä¸­çš„æŸä¸€å°æœºå™¨è¿›è¡Œæ‰§è¡Œï¼Œå…¶ä»–çš„æœºå™¨å¯ä»¥å…±äº«è¿™ä¸ªç»“æœï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘é‡å¤è®¡ç®—ï¼Œæé«˜æ€§èƒ½ï¼Œäºæ˜¯å°±éœ€è¦è¿›è¡Œ leader é€‰ä¸¾ã€‚")]),e._v(" "),_("hr"),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-é›†ç¾¤ä¸­æœ‰-3-å°æœåŠ¡å™¨-å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœº-è¿™ä¸ªæ—¶å€™-zookeeper-è¿˜å¯ä»¥ä½¿ç”¨å—"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-é›†ç¾¤ä¸­æœ‰-3-å°æœåŠ¡å™¨-å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœº-è¿™ä¸ªæ—¶å€™-zookeeper-è¿˜å¯ä»¥ä½¿ç”¨å—"}},[e._v("#")]),e._v(" ğŸ¯ é›†ç¾¤ä¸­æœ‰ 3 å°æœåŠ¡å™¨ï¼Œå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœºï¼Œè¿™ä¸ªæ—¶å€™ Zookeeper è¿˜å¯ä»¥ä½¿ç”¨å—ï¼Ÿ")]),e._v(" "),_("p",[e._v("å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œå•æ•°æœåŠ¡å™¨åªè¦æ²¡è¶…è¿‡ä¸€åŠçš„æœåŠ¡å™¨å®•æœºå°±å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚")]),e._v(" "),_("p",[e._v("é›†ç¾¤è§„åˆ™ä¸º 2N+1 å°ï¼ŒN >0ï¼Œå³æœ€å°‘éœ€è¦ 3 å°ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-å®•æœºå¦‚ä½•å¤„ç†"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-å®•æœºå¦‚ä½•å¤„ç†"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper å®•æœºå¦‚ä½•å¤„ç†ï¼Ÿ")]),e._v(" "),_("p",[e._v("Zookeeper æœ¬èº«ä¹Ÿæ˜¯é›†ç¾¤ï¼Œæ¨èé…ç½®ä¸å°‘äº 3 ä¸ªæœåŠ¡å™¨ã€‚Zookeeper è‡ªèº«ä¹Ÿè¦ä¿è¯å½“ä¸€ä¸ªèŠ‚ç‚¹å®•æœºæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹ä¼šç»§ç»­æä¾›æœåŠ¡ã€‚å¦‚æœæ˜¯ä¸€ä¸ª Follower å®•æœºï¼Œè¿˜æœ‰ 2 å°æœåŠ¡å™¨æä¾›è®¿é—®ï¼Œå› ä¸º Zookeeper ä¸Šçš„æ•°æ®æ˜¯æœ‰å¤šä¸ªå‰¯æœ¬çš„ï¼Œæ•°æ®å¹¶ä¸ä¼šä¸¢å¤±ï¼›å¦‚æœæ˜¯ä¸€ä¸ª Leader å®•æœºï¼ŒZookeeper ä¼šé€‰ä¸¾å‡ºæ–°çš„ Leaderã€‚")]),e._v(" "),_("p",[e._v("Zookeeper é›†ç¾¤çš„æœºåˆ¶æ˜¯åªè¦è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹æ­£å¸¸ï¼Œé›†ç¾¤å°±èƒ½æ­£å¸¸æä¾›æœåŠ¡ã€‚åªæœ‰åœ¨ Zookeeper èŠ‚ç‚¹æŒ‚å¾—å¤ªå¤šï¼Œåªå‰©ä¸€åŠæˆ–ä¸åˆ°ä¸€åŠèŠ‚ç‚¹èƒ½å·¥ä½œï¼Œé›†ç¾¤æ‰å¤±æ•ˆã€‚æ‰€ä»¥ï¼š")]),e._v(" "),_("p",[e._v("3 ä¸ªèŠ‚ç‚¹çš„ cluster å¯ä»¥æŒ‚æ‰ 1 ä¸ªèŠ‚ç‚¹(leader å¯ä»¥å¾—åˆ° 2 ç¥¨ > 1.5)")]),e._v(" "),_("p",[e._v("2 ä¸ªèŠ‚ç‚¹çš„ cluster å°±ä¸èƒ½æŒ‚æ‰ä»»ä½•1ä¸ªèŠ‚ç‚¹äº†(leader å¯ä»¥å¾—åˆ° 1 ç¥¨ <= 1)")]),e._v(" "),_("hr"),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-è¯´ä¸‹å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹-znode-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è¯´ä¸‹å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹-znode-2"}},[e._v("#")]),e._v(" ğŸ¯ è¯´ä¸‹å››ç§ç±»å‹çš„æ•°æ®èŠ‚ç‚¹ Znodeï¼Ÿ")]),e._v(" "),_("ol",[_("li",[_("p",[e._v("PERSISTENTï¼šæŒä¹…èŠ‚ç‚¹ï¼Œé™¤éæ‰‹åŠ¨åˆ é™¤ï¼Œå¦åˆ™èŠ‚ç‚¹ä¸€ç›´å­˜åœ¨äº Zookeeper ä¸Šã€‚")])]),e._v(" "),_("li",[_("p",[e._v("EPHEMERALï¼šä¸´æ—¶èŠ‚ç‚¹ï¼Œä¸´æ—¶èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸä¸å®¢æˆ·ç«¯ä¼šè¯ç»‘å®šï¼Œä¸€æ—¦å®¢æˆ·ç«¯ä¼šè¯å¤±æ•ˆï¼ˆå®¢æˆ·ç«¯ä¸ Zookeeperè¿æ¥æ–­å¼€ä¸ä¸€å®šä¼šè¯å¤±æ•ˆï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¢æˆ·ç«¯åˆ›å»ºçš„æ‰€æœ‰ä¸´æ—¶èŠ‚ç‚¹éƒ½ä¼šè¢«ç§»é™¤ã€‚")])]),e._v(" "),_("li",[_("p",[e._v("PERSISTENT_SEQUENTIALï¼šæŒä¹…é¡ºåºèŠ‚ç‚¹ï¼ŒåŸºæœ¬ç‰¹æ€§åŒæŒä¹…èŠ‚ç‚¹ï¼Œåªæ˜¯å¢åŠ äº†é¡ºåºå±æ€§ï¼ŒèŠ‚ç‚¹ååè¾¹ä¼šè¿½åŠ ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•´å‹æ•°å­—ã€‚")])]),e._v(" "),_("li",[_("p",[e._v("EPHEMERAL_SEQUENTIALï¼šä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼ŒåŸºæœ¬ç‰¹æ€§åŒä¸´æ—¶èŠ‚ç‚¹ï¼Œå¢åŠ äº†é¡ºåºå±æ€§ï¼ŒèŠ‚ç‚¹ååè¾¹ä¼šè¿½åŠ ä¸€ä¸ªç”±çˆ¶èŠ‚ç‚¹ç»´æŠ¤çš„è‡ªå¢æ•´å‹æ•°å­—ã€‚")])])]),e._v(" "),_("hr"),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeperé€‰ä¸¾æœºåˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeperé€‰ä¸¾æœºåˆ¶"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeperé€‰ä¸¾æœºåˆ¶")]),e._v(" "),_("ol",[_("li",[e._v("é¦–å…ˆå¯¹æ¯”zxidã€‚zxidå¤§çš„æœåŠ¡å™¨ä¼˜å…ˆä½œä¸ºLeader")]),e._v(" "),_("li",[e._v("è‹¥zxidç›¸åŒï¼Œæ¯”å¦‚åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ¯ä¸ªServerçš„zxidéƒ½ä¸º0ï¼Œå°±ä¼šæ¯”è¾ƒmyidï¼Œmyidå¤§çš„é€‰å‡ºæ¥åšLeaderã€‚")])]),e._v(" "),_("p",[_("strong",[e._v("æœåŠ¡å™¨åˆå§‹åŒ–æ—¶é€‰ä¸¾")])]),e._v(" "),_("blockquote",[_("p",[e._v("ç›®å‰æœ‰3å°æœåŠ¡å™¨ï¼Œæ¯å°æœåŠ¡å™¨å‡æ²¡æœ‰æ•°æ®ï¼Œå®ƒä»¬çš„ç¼–å·åˆ†åˆ«æ˜¯1,2,3æŒ‰ç¼–å·ä¾æ¬¡å¯åŠ¨ï¼Œå®ƒä»¬çš„é€‰æ‹©ä¸¾è¿‡ç¨‹å¦‚ä¸‹ï¼š")])]),e._v(" "),_("ol",[_("li",[e._v("Server1å¯åŠ¨ï¼Œç»™è‡ªå·±æŠ•ç¥¨ï¼ˆ1,0ï¼‰ï¼Œç„¶åå‘æŠ•ç¥¨ä¿¡æ¯ï¼Œç”±äºå…¶å®ƒæœºå™¨è¿˜æ²¡æœ‰å¯åŠ¨æ‰€ä»¥å®ƒæ”¶ä¸åˆ°åé¦ˆä¿¡æ¯ï¼ŒServer1çš„çŠ¶æ€ä¸€ç›´å±äºLookingã€‚")]),e._v(" "),_("li",[e._v("Server2å¯åŠ¨ï¼Œç»™è‡ªå·±æŠ•ç¥¨ï¼ˆ2,0ï¼‰ï¼ŒåŒæ—¶ä¸ä¹‹å‰å¯åŠ¨çš„Server1äº¤æ¢ç»“æœï¼Œç”±äºServer2çš„ç¼–å·å¤§æ‰€ä»¥Server2èƒœå‡ºï¼Œ"),_("strong",[e._v("ä½†æ­¤æ—¶æŠ•ç¥¨æ•°æ­£å¥½å¤§äºåŠæ•°")]),e._v("ï¼Œæ‰€ä»¥Server2æˆä¸ºé¢†å¯¼è€…ï¼ŒServer1æˆä¸ºå°å¼Ÿã€‚")]),e._v(" "),_("li",[e._v("Server3å¯åŠ¨ï¼Œç»™è‡ªå·±æŠ•ç¥¨ï¼ˆ3,0ï¼‰ï¼ŒåŒæ—¶ä¸ä¹‹å‰å¯åŠ¨çš„Server1,Server2æ¢ä¿¡æ¯ï¼Œå°½ç®¡Server3çš„ç¼–å·å¤§ï¼Œä½†ä¹‹å‰Server2å·²ç»èƒœå‡ºï¼Œæ‰€ä»¥Server3åªèƒ½æˆä¸ºå°å¼Ÿã€‚")]),e._v(" "),_("li",[e._v("å½“ç¡®å®šäº†Leaderä¹‹åï¼Œæ¯ä¸ªServeræ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼ŒLeaderå°†çŠ¶æ€æ›´æ–°ä¸ºLeadingï¼ŒFollowerå°†çŠ¶æ€æ›´æ–°ä¸ºFollowingã€‚")])]),e._v(" "),_("p",[_("strong",[e._v("æœåŠ¡å™¨è¿è¡ŒæœŸé—´çš„é€‰ä¸¾")])]),e._v(" "),_("blockquote",[_("p",[e._v("zookeeperè¿è¡ŒæœŸé—´ï¼Œå¦‚æœæœ‰æ–°çš„ServeråŠ å…¥ï¼Œæˆ–è€…éLeaderçš„Serverå®•æœºï¼Œé‚£ä¹ˆLeaderå°†ä¼šåŒæ­¥æ•°æ®åˆ°æ–°Serveræˆ–è€…å¯»æ‰¾å…¶ä»–å¤‡ç”¨Serveræ›¿ä»£å®•æœºçš„Serverã€‚è‹¥Leaderå®•æœºï¼Œæ­¤æ—¶é›†ç¾¤æš‚åœå¯¹å¤–æœåŠ¡ï¼Œå¼€å§‹åœ¨å†…éƒ¨é€‰ä¸¾æ–°çš„Leaderã€‚å‡è®¾å½“å‰é›†ç¾¤ä¸­æœ‰Server1ã€Server2ã€Server3ä¸‰å°æœåŠ¡å™¨ï¼ŒServer2ä¸ºå½“å‰é›†ç¾¤çš„Leaderï¼Œç”±äºæ„å¤–æƒ…å†µï¼ŒServer2å®•æœºäº†ï¼Œä¾¿å¼€å§‹è¿›å…¥é€‰ä¸¾çŠ¶æ€ã€‚è¿‡ç¨‹å¦‚ä¸‹")])]),e._v(" "),_("ol",[_("li",[e._v("å˜æ›´çŠ¶æ€ã€‚å…¶ä»–çš„éObserveræœåŠ¡å™¨å°†è‡ªå·±çš„çŠ¶æ€æ”¹å˜ä¸ºLookingï¼Œå¼€å§‹è¿›å…¥Leaderé€‰ä¸¾ã€‚")]),e._v(" "),_("li",[e._v("æ¯ä¸ªServerå‘å‡ºä¸€ä¸ªæŠ•ç¥¨ï¼ˆmyidï¼Œzxidï¼‰ï¼Œç”±äºæ­¤é›†ç¾¤å·²ç»è¿è¡Œè¿‡ï¼Œæ‰€ä»¥æ¯ä¸ªServerä¸Šçš„zxidå¯èƒ½ä¸åŒã€‚å‡è®¾Server1çš„zxidä¸º100ï¼ŒServer3çš„ä¸º99ï¼Œç¬¬ä¸€è½®æŠ•ç¥¨ä¸­ï¼ŒServer1å’ŒServer3éƒ½æŠ•è‡ªå·±ï¼Œç¥¨åˆ†åˆ«ä¸ºï¼ˆ1ï¼Œ100ï¼‰,ï¼ˆ3,99ï¼‰,å°†è‡ªå·±çš„ç¥¨å‘é€ç»™é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ã€‚")]),e._v(" "),_("li",[e._v("æ¯ä¸ªServeræ¥æ”¶æ¥æ”¶æ¥è‡ªå…¶ä»–Serverçš„æŠ•ç¥¨ï¼Œæ¥ä¸‹æ¥çš„æ­¥éª¤ä¸å¯åŠ¨æ—¶æ­¥éª¤ç›¸åŒã€‚")])]),e._v(" "),_("hr"),e._v(" "),_("h2",{attrs:{id:"âš¡-å››ã€æ ¸å¿ƒç‰¹æ€§-watcheræœºåˆ¶ä¸æƒé™æ§åˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#âš¡-å››ã€æ ¸å¿ƒç‰¹æ€§-watcheræœºåˆ¶ä¸æƒé™æ§åˆ¶"}},[e._v("#")]),e._v(" âš¡ å››ã€æ ¸å¿ƒç‰¹æ€§ï¼ˆWatcheræœºåˆ¶ä¸æƒé™æ§åˆ¶ï¼‰")]),e._v(" "),_("blockquote",[_("p",[_("strong",[e._v("æ ¸å¿ƒæ€æƒ³")]),e._v("ï¼šZooKeeperçš„æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬Watcheräº‹ä»¶é€šçŸ¥æœºåˆ¶ã€ACLæƒé™æ§åˆ¶ã€ä¼šè¯ç®¡ç†ç­‰ï¼Œè¿™äº›ç‰¹æ€§æ˜¯ZKå®ç°åˆ†å¸ƒå¼åè°ƒçš„å…³é”®æŠ€æœ¯ã€‚")])]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("äº‹ä»¶é€šçŸ¥")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-watcher-%E6%9C%BA%E5%88%B6--%E6%95%B0%E6%8D%AE%E5%8F%98%E6%9B%B4%E9%80%9A%E7%9F%A5"}},[e._v("Watcheræœºåˆ¶")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B3%A8%E5%86%8C-watcher-%E5%AE%9E%E7%8E%B0"}},[e._v("å®¢æˆ·ç«¯æ³¨å†Œ")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%A4%84%E7%90%86-watcher-%E5%AE%9E%E7%8E%B0"}},[e._v("æœåŠ¡ç«¯å¤„ç†")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%9B%9E%E8%B0%83-watcher"}},[e._v("å®¢æˆ·ç«¯å›è°ƒ")])]),e._v(" "),_("li",[_("strong",[e._v("æƒé™æ§åˆ¶")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-acl-%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E6%9C%BA%E5%88%B6"}},[e._v("ACLæœºåˆ¶")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-chroot-%E7%89%B9%E6%80%A7"}},[e._v("Chrootç‰¹æ€§")])]),e._v(" "),_("li",[_("strong",[e._v("ä¼šè¯ç®¡ç†")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86"}},[e._v("ä¼šè¯æœºåˆ¶")]),e._v(" | "),_("a",{attrs:{href:"#%E5%88%86%E6%A1%B6%E7%AD%96%E7%95%A5"}},[e._v("åˆ†æ¡¶ç­–ç•¥")])])]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-watcher-æœºåˆ¶-æ•°æ®å˜æ›´é€šçŸ¥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-watcher-æœºåˆ¶-æ•°æ®å˜æ›´é€šçŸ¥"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper Watcher æœºåˆ¶ â€“ æ•°æ®å˜æ›´é€šçŸ¥")]),e._v(" "),_("p",[e._v("Zookeeper å…è®¸å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯çš„æŸä¸ª Znode æ³¨å†Œä¸€ä¸ª Watcher ç›‘å¬ï¼Œå½“æœåŠ¡ç«¯çš„ä¸€äº›æŒ‡å®šäº‹ä»¶è§¦å‘äº†è¿™ä¸ª Watcherï¼ŒæœåŠ¡ç«¯ä¼šå‘æŒ‡å®šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªäº‹ä»¶é€šçŸ¥æ¥å®ç°åˆ†å¸ƒå¼çš„é€šçŸ¥åŠŸèƒ½ï¼Œç„¶åå®¢æˆ·ç«¯æ ¹æ® Watcher é€šçŸ¥çŠ¶æ€å’Œäº‹ä»¶ç±»å‹åšå‡ºä¸šåŠ¡ä¸Šçš„æ”¹å˜ã€‚")]),e._v(" "),_("p",[e._v("å·¥ä½œæœºåˆ¶ï¼š")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰å®¢æˆ·ç«¯æ³¨å†Œ watcher")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰æœåŠ¡ç«¯å¤„ç† watcher")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰å®¢æˆ·ç«¯å›è°ƒ watcher")]),e._v(" "),_("p",[e._v("Watcher ç‰¹æ€§æ€»ç»“ï¼š")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰ä¸€æ¬¡æ€§")]),e._v(" "),_("p",[e._v("æ— è®ºæ˜¯æœåŠ¡ç«¯è¿˜æ˜¯å®¢æˆ·ç«¯ï¼Œä¸€æ—¦ä¸€ä¸ª Watcher è¢« è§¦ å‘ ï¼ŒZookeeper éƒ½ä¼šå°†å…¶ä»ç›¸åº”çš„å­˜å‚¨ä¸­ç§»é™¤ã€‚è¿™æ ·çš„è®¾è®¡æœ‰æ•ˆçš„å‡è½»äº†æœåŠ¡ç«¯çš„å‹åŠ›ï¼Œä¸ç„¶å¯¹äºæ›´æ–°éå¸¸é¢‘ç¹çš„èŠ‚ç‚¹ï¼ŒæœåŠ¡ç«¯ä¼šä¸æ–­çš„å‘å®¢æˆ·ç«¯å‘é€äº‹ä»¶é€šçŸ¥ï¼Œæ— è®ºå¯¹äºç½‘ç»œè¿˜æ˜¯æœåŠ¡ç«¯çš„å‹åŠ›éƒ½éå¸¸å¤§ã€‚")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰å®¢æˆ·ç«¯ä¸²è¡Œæ‰§è¡Œ")]),e._v(" "),_("p",[e._v("å®¢æˆ·ç«¯ Watcher å›è°ƒçš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªä¸²è¡ŒåŒæ­¥çš„è¿‡ç¨‹ã€‚")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰è½»é‡")]),e._v(" "),_("p",[e._v("3.1ã€Watcher é€šçŸ¥éå¸¸ç®€å•ï¼Œåªä¼šå‘Šè¯‰å®¢æˆ·ç«¯å‘ç”Ÿäº†äº‹ä»¶ï¼Œè€Œä¸ä¼šè¯´æ˜äº‹ä»¶çš„å…·ä½“å†…å®¹ã€‚")]),e._v(" "),_("p",[e._v("3.2ã€å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯æ³¨å†Œ Watcher çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæŠŠå®¢æˆ·ç«¯çœŸå®çš„ Watcher å¯¹è±¡å®ä½“ä¼ é€’åˆ°æœåŠ¡ç«¯ï¼Œä»…ä»…æ˜¯åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¸­ä½¿ç”¨ boolean ç±»å‹å±æ€§è¿›è¡Œäº†æ ‡è®°ã€‚")]),e._v(" "),_("p",[e._v("ï¼ˆ4ï¼‰watcher event å¼‚æ­¥å‘é€ watcher çš„é€šçŸ¥äº‹ä»¶ä» server å‘é€åˆ° client æ˜¯å¼‚æ­¥çš„ï¼Œè¿™å°±å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œä¸åŒçš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ socket è¿›è¡Œé€šä¿¡ï¼Œç”±äºç½‘ç»œå»¶è¿Ÿæˆ–å…¶ä»–å› ç´ å¯¼è‡´å®¢æˆ·ç«¯åœ¨ä¸é€šçš„æ—¶åˆ»ç›‘å¬åˆ°äº‹ä»¶ï¼Œç”±äº Zookeeper æœ¬èº«æä¾›äº† ordering guaranteeï¼Œå³å®¢æˆ·ç«¯ç›‘å¬äº‹ä»¶åï¼Œæ‰ä¼šæ„ŸçŸ¥å®ƒæ‰€ç›‘è§† znodeå‘ç”Ÿäº†å˜åŒ–ã€‚æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ Zookeeper ä¸èƒ½æœŸæœ›èƒ½å¤Ÿç›‘æ§åˆ°èŠ‚ç‚¹æ¯æ¬¡çš„å˜åŒ–ã€‚Zookeeper åªèƒ½ä¿è¯æœ€ç»ˆçš„ä¸€è‡´æ€§ï¼Œè€Œæ— æ³•ä¿è¯å¼ºä¸€è‡´æ€§ã€‚")]),e._v(" "),_("p",[e._v("ï¼ˆ5ï¼‰æ³¨å†Œ watcher getDataã€existsã€getChildren")]),e._v(" "),_("p",[e._v("ï¼ˆ6ï¼‰è§¦å‘ watcher createã€deleteã€setData")]),e._v(" "),_("p",[e._v("ï¼ˆ7ï¼‰å½“ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥åˆ°ä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ä¸Šæ—¶ï¼Œwatch å°†ä¼šè¢«ä»¥ä»»æ„ä¼šè¯äº‹ä»¶è§¦å‘ã€‚å½“ä¸ä¸€ä¸ªæœåŠ¡å™¨å¤±å»è¿æ¥çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•æ¥æ”¶åˆ° watch çš„ã€‚è€Œå½“ client é‡æ–°è¿æ¥æ—¶ï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œæ‰€æœ‰å…ˆå‰æ³¨å†Œè¿‡çš„ watchï¼Œéƒ½ä¼šè¢«é‡æ–°æ³¨å†Œã€‚é€šå¸¸è¿™æ˜¯å®Œå…¨é€æ˜çš„ã€‚åªæœ‰åœ¨ä¸€ä¸ªç‰¹æ®Šæƒ…å†µä¸‹ï¼Œwatch å¯èƒ½ä¼šä¸¢å¤±ï¼šå¯¹äºä¸€ä¸ªæœªåˆ›å»ºçš„ znodeçš„ exist watchï¼Œå¦‚æœåœ¨å®¢æˆ·ç«¯æ–­å¼€è¿æ¥æœŸé—´è¢«åˆ›å»ºäº†ï¼Œå¹¶ä¸”éšååœ¨å®¢æˆ·ç«¯è¿æ¥ä¸Šä¹‹å‰åˆåˆ é™¤äº†ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ª watch äº‹ä»¶å¯èƒ½ä¼šè¢«ä¸¢å¤±ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-å®¢æˆ·ç«¯æ³¨å†Œ-watcher-å®ç°"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å®¢æˆ·ç«¯æ³¨å†Œ-watcher-å®ç°"}},[e._v("#")]),e._v(" ğŸ¯ å®¢æˆ·ç«¯æ³¨å†Œ Watcher å®ç°")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰è°ƒç”¨ getData()/getChildren()/exist()ä¸‰ä¸ª APIï¼Œä¼ å…¥ Watcher å¯¹è±¡")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰æ ‡è®°è¯·æ±‚ requestï¼Œå°è£… Watcher åˆ° WatchRegistration")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰å°è£…æˆ Packet å¯¹è±¡ï¼Œå‘æœåŠ¡ç«¯å‘é€ request")]),e._v(" "),_("p",[e._v("ï¼ˆ4ï¼‰æ”¶åˆ°æœåŠ¡ç«¯å“åº”åï¼Œå°† Watcher æ³¨å†Œåˆ° ZKWatcherManager ä¸­è¿›è¡Œç®¡ç†")]),e._v(" "),_("p",[e._v("ï¼ˆ5ï¼‰è¯·æ±‚è¿”å›ï¼Œå®Œæˆæ³¨å†Œã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-æœåŠ¡ç«¯å¤„ç†-watcher-å®ç°"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æœåŠ¡ç«¯å¤„ç†-watcher-å®ç°"}},[e._v("#")]),e._v(" ğŸ¯ æœåŠ¡ç«¯å¤„ç† Watcher å®ç°")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰æœåŠ¡ç«¯æ¥æ”¶ Watcher å¹¶å­˜å‚¨")]),e._v(" "),_("p",[e._v("æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚åˆ¤æ–­æ˜¯å¦éœ€è¦æ³¨å†Œ Watcherï¼Œéœ€è¦çš„è¯å°†æ•°æ®èŠ‚ç‚¹çš„èŠ‚ç‚¹è·¯å¾„å’Œ ServerCnxnï¼ˆServerCnxn ä»£è¡¨ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥ï¼Œå®ç°äº† Watcher çš„ process æ¥å£ï¼Œæ­¤æ—¶å¯ä»¥çœ‹æˆä¸€ä¸ª Watcher å¯¹è±¡ï¼‰å­˜å‚¨åœ¨WatcherManager çš„ WatchTable å’Œ watch2Paths ä¸­å»ã€‚")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰Watcher è§¦å‘")]),e._v(" "),_("p",[e._v("ä»¥æœåŠ¡ç«¯æ¥æ”¶åˆ° setData() äº‹åŠ¡è¯·æ±‚è§¦å‘ NodeDataChanged äº‹ä»¶ä¸ºä¾‹ï¼š")]),e._v(" "),_("p",[e._v("2.1 å°è£… WatchedEvent")]),e._v(" "),_("p",[e._v("å°†é€šçŸ¥çŠ¶æ€ï¼ˆSyncConnectedï¼‰ã€äº‹ä»¶ç±»å‹ï¼ˆNodeDataChangedï¼‰ä»¥åŠèŠ‚ç‚¹è·¯å¾„å°è£…æˆä¸€ä¸ª WatchedEvent å¯¹è±¡")]),e._v(" "),_("p",[e._v("2.2 æŸ¥è¯¢ Watcher")]),e._v(" "),_("p",[e._v("ä» WatchTable ä¸­æ ¹æ®èŠ‚ç‚¹è·¯å¾„æŸ¥æ‰¾ Watcher")]),e._v(" "),_("p",[e._v("2.3 æ²¡æ‰¾åˆ°ï¼›è¯´æ˜æ²¡æœ‰å®¢æˆ·ç«¯åœ¨è¯¥æ•°æ®èŠ‚ç‚¹ä¸Šæ³¨å†Œè¿‡ Watcher")]),e._v(" "),_("p",[e._v("2.4 æ‰¾åˆ°ï¼›æå–å¹¶ä» WatchTable å’Œ Watch2Paths ä¸­åˆ é™¤å¯¹åº” Watcherï¼ˆä»è¿™é‡Œå¯ä»¥çœ‹å‡º Watcher åœ¨æœåŠ¡ç«¯æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œè§¦å‘ä¸€æ¬¡å°±å¤±æ•ˆäº†ï¼‰")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰è°ƒç”¨ process æ–¹æ³•æ¥è§¦å‘ Watcher")]),e._v(" "),_("p",[e._v("è¿™é‡Œ process ä¸»è¦å°±æ˜¯é€šè¿‡ ServerCnxn å¯¹åº”çš„ TCP è¿æ¥å‘é€ Watcher äº‹ä»¶é€šçŸ¥ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-å®¢æˆ·ç«¯å›è°ƒ-watcher"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-å®¢æˆ·ç«¯å›è°ƒ-watcher"}},[e._v("#")]),e._v(" ğŸ¯ å®¢æˆ·ç«¯å›è°ƒ Watcher")]),e._v(" "),_("p",[e._v("å®¢æˆ·ç«¯ SendThread çº¿ç¨‹æ¥æ”¶äº‹ä»¶é€šçŸ¥ï¼Œäº¤ç”± EventThread çº¿ç¨‹å›è°ƒ Watcherã€‚")]),e._v(" "),_("p",[e._v("å®¢æˆ·ç«¯çš„ Watcher æœºåˆ¶åŒæ ·æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸€æ—¦è¢«è§¦å‘åï¼Œè¯¥ Watcher å°±å¤±æ•ˆäº†ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-acl-æƒé™æ§åˆ¶æœºåˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-acl-æƒé™æ§åˆ¶æœºåˆ¶"}},[e._v("#")]),e._v(" ğŸ¯ ACL æƒé™æ§åˆ¶æœºåˆ¶")]),e._v(" "),_("p",[e._v("UGOï¼ˆUser/Group/Othersï¼‰")]),e._v(" "),_("p",[e._v("ç›®å‰åœ¨ Linux/Unix æ–‡ä»¶ç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œä¹Ÿæ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„æƒé™æ§åˆ¶æ–¹å¼ã€‚æ˜¯ä¸€ç§ç²—ç²’åº¦çš„æ–‡ä»¶ç³»ç»Ÿæƒé™æ§åˆ¶æ¨¡å¼ã€‚")]),e._v(" "),_("p",[e._v("ACLï¼ˆAccess Control Listï¼‰è®¿é—®æ§åˆ¶åˆ—è¡¨")]),e._v(" "),_("p",[e._v("åŒ…æ‹¬ä¸‰ä¸ªæ–¹é¢ï¼š")]),e._v(" "),_("p",[e._v("æƒé™æ¨¡å¼ï¼ˆSchemeï¼‰")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰IPï¼šä» IP åœ°å€ç²’åº¦è¿›è¡Œæƒé™æ§åˆ¶")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰Digestï¼šæœ€å¸¸ç”¨ï¼Œç”¨ç±»ä¼¼äº username:password çš„æƒé™æ ‡è¯†æ¥è¿›è¡Œæƒé™é…ç½®ï¼Œä¾¿äºåŒºåˆ†ä¸åŒåº”ç”¨æ¥è¿›è¡Œæƒé™æ§åˆ¶")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰Worldï¼šæœ€å¼€æ”¾çš„æƒé™æ§åˆ¶æ–¹å¼ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ digest æ¨¡å¼ï¼Œåªæœ‰ä¸€ä¸ªæƒé™æ ‡è¯†â€œworld:anyoneâ€")]),e._v(" "),_("p",[e._v("ï¼ˆ4ï¼‰Superï¼šè¶…çº§ç”¨æˆ·")]),e._v(" "),_("p",[e._v("æˆæƒå¯¹è±¡")]),e._v(" "),_("p",[e._v("æˆæƒå¯¹è±¡æŒ‡çš„æ˜¯æƒé™èµ‹äºˆçš„ç”¨æˆ·æˆ–ä¸€ä¸ªæŒ‡å®šå®ä½“ï¼Œä¾‹å¦‚ IP åœ°å€æˆ–æ˜¯æœºå™¨ç¯ã€‚")]),e._v(" "),_("p",[e._v("æƒé™ Permission")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰CREATEï¼šæ•°æ®èŠ‚ç‚¹åˆ›å»ºæƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡åœ¨è¯¥ Znode ä¸‹åˆ›å»ºå­èŠ‚ç‚¹")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰DELETEï¼šå­èŠ‚ç‚¹åˆ é™¤æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡åˆ é™¤è¯¥æ•°æ®èŠ‚ç‚¹çš„å­èŠ‚ç‚¹")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰READï¼šæ•°æ®èŠ‚ç‚¹çš„è¯»å–æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡è®¿é—®è¯¥æ•°æ®èŠ‚ç‚¹å¹¶è¯»å–å…¶æ•°æ®å†…å®¹æˆ–å­èŠ‚ç‚¹åˆ—è¡¨ç­‰")]),e._v(" "),_("p",[e._v("ï¼ˆ4ï¼‰WRITEï¼šæ•°æ®èŠ‚ç‚¹æ›´æ–°æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡å¯¹è¯¥æ•°æ®èŠ‚ç‚¹è¿›è¡Œæ›´æ–°æ“ä½œ")]),e._v(" "),_("p",[e._v("ï¼ˆ5ï¼‰ADMINï¼šæ•°æ®èŠ‚ç‚¹ç®¡ç†æƒé™ï¼Œå…è®¸æˆæƒå¯¹è±¡å¯¹è¯¥æ•°æ®èŠ‚ç‚¹è¿›è¡Œ ACL ç›¸å…³è®¾ç½®æ“ä½œ")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-chroot-ç‰¹æ€§"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-chroot-ç‰¹æ€§"}},[e._v("#")]),e._v(" ğŸ¯ Chroot ç‰¹æ€§")]),e._v(" "),_("p",[e._v("3.2.0 ç‰ˆæœ¬åï¼Œæ·»åŠ äº† Chroot ç‰¹æ€§ï¼Œè¯¥ç‰¹æ€§å…è®¸æ¯ä¸ªå®¢æˆ·ç«¯ä¸ºè‡ªå·±è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´ã€‚å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯è®¾ç½®äº† Chrootï¼Œé‚£ä¹ˆè¯¥å®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨çš„ä»»ä½•æ“ä½œï¼Œéƒ½å°†ä¼šè¢«é™åˆ¶åœ¨å…¶è‡ªå·±çš„å‘½åç©ºé—´ä¸‹ã€‚")]),e._v(" "),_("p",[e._v("é€šè¿‡è®¾ç½® Chrootï¼Œèƒ½å¤Ÿå°†ä¸€ä¸ªå®¢æˆ·ç«¯åº”ç”¨äº Zookeeper æœåŠ¡ç«¯çš„ä¸€é¢—å­æ ‘ç›¸å¯¹åº”ï¼Œåœ¨é‚£äº›å¤šä¸ªåº”ç”¨å…¬ç”¨ä¸€ä¸ª Zookeeper è¿›ç¾¤çš„åœºæ™¯ä¸‹ï¼Œå¯¹å®ç°ä¸åŒåº”ç”¨é—´çš„ç›¸äº’éš”ç¦»éå¸¸æœ‰å¸®åŠ©ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-ä¼šè¯ç®¡ç†"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-ä¼šè¯ç®¡ç†"}},[e._v("#")]),e._v(" ğŸ¯ ä¼šè¯ç®¡ç†")]),e._v(" "),_("p",[e._v("åˆ†æ¡¶ç­–ç•¥ï¼šå°†ç±»ä¼¼çš„ä¼šè¯æ”¾åœ¨åŒä¸€åŒºå—ä¸­è¿›è¡Œç®¡ç†ï¼Œä»¥ä¾¿äº Zookeeper å¯¹ä¼šè¯è¿›è¡Œä¸åŒåŒºå—çš„éš”ç¦»å¤„ç†ä»¥åŠåŒä¸€åŒºå—çš„ç»Ÿä¸€å¤„ç†ã€‚")]),e._v(" "),_("p",[e._v("åˆ†é…åŸåˆ™ï¼šæ¯ä¸ªä¼šè¯çš„â€œä¸‹æ¬¡è¶…æ—¶æ—¶é—´ç‚¹â€ï¼ˆExpirationTimeï¼‰")]),e._v(" "),_("p",[e._v("è®¡ç®—å…¬å¼ï¼š")]),e._v(" "),_("p",[e._v("ExpirationTime_ = currentTime + sessionTimeout")]),e._v(" "),_("p",[e._v("ExpirationTime = (ExpirationTime_ / ExpirationInrerval + 1) *")]),e._v(" "),_("p",[e._v("ExpirationInterval , ExpirationInterval æ˜¯æŒ‡ Zookeeper ä¼šè¯è¶…æ—¶æ£€æŸ¥æ—¶é—´é—´éš”ï¼Œé»˜è®¤ tickTime")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-æœåŠ¡å™¨è§’è‰²"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æœåŠ¡å™¨è§’è‰²"}},[e._v("#")]),e._v(" ğŸ¯ æœåŠ¡å™¨è§’è‰²")]),e._v(" "),_("p",[e._v("Leader")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰äº‹åŠ¡è¯·æ±‚çš„å”¯ä¸€è°ƒåº¦å’Œå¤„ç†è€…ï¼Œä¿è¯é›†ç¾¤äº‹åŠ¡å¤„ç†çš„é¡ºåºæ€§")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰é›†ç¾¤å†…éƒ¨å„æœåŠ¡çš„è°ƒåº¦è€…")]),e._v(" "),_("p",[e._v("Follower")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰å¤„ç†å®¢æˆ·ç«¯çš„éäº‹åŠ¡è¯·æ±‚ï¼Œè½¬å‘äº‹åŠ¡è¯·æ±‚ç»™ Leader æœåŠ¡å™¨")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰å‚ä¸äº‹åŠ¡è¯·æ±‚ Proposal çš„æŠ•ç¥¨")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰å‚ä¸ Leader é€‰ä¸¾æŠ•ç¥¨")]),e._v(" "),_("p",[e._v("Observer")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰3.0 ç‰ˆæœ¬ä»¥åå¼•å…¥çš„ä¸€ä¸ªæœåŠ¡å™¨è§’è‰²ï¼Œåœ¨ä¸å½±å“é›†ç¾¤äº‹åŠ¡å¤„ç†èƒ½åŠ›çš„åŸºç¡€ä¸Šæå‡é›†ç¾¤çš„éäº‹åŠ¡å¤„ç†èƒ½åŠ›")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰å¤„ç†å®¢æˆ·ç«¯çš„éäº‹åŠ¡è¯·æ±‚ï¼Œè½¬å‘äº‹åŠ¡è¯·æ±‚ç»™ Leader æœåŠ¡å™¨")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰ä¸å‚ä¸ä»»ä½•å½¢å¼çš„æŠ•ç¥¨")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-ä¸‹-server-å·¥ä½œçŠ¶æ€"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-ä¸‹-server-å·¥ä½œçŠ¶æ€"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper ä¸‹ Server å·¥ä½œçŠ¶æ€")]),e._v(" "),_("p",[e._v("æœåŠ¡å™¨å…·æœ‰å››ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ LOOKINGã€FOLLOWINGã€LEADINGã€OBSERVINGã€‚")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰LOOKINGï¼šå¯» æ‰¾ Leader çŠ¶æ€ã€‚å½“æœåŠ¡å™¨å¤„äºè¯¥çŠ¶æ€æ—¶ï¼Œå®ƒä¼šè®¤ä¸ºå½“å‰é›†ç¾¤ä¸­æ²¡æœ‰ Leaderï¼Œå› æ­¤éœ€è¦è¿›å…¥ Leader é€‰ä¸¾çŠ¶æ€ã€‚")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰FOLLOWINGï¼šè·Ÿéšè€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Followerã€‚")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰LEADINGï¼šé¢†å¯¼è€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Leaderã€‚")]),e._v(" "),_("p",[e._v("ï¼ˆ4ï¼‰OBSERVINGï¼šè§‚å¯Ÿè€…çŠ¶æ€ã€‚è¡¨æ˜å½“å‰æœåŠ¡å™¨è§’è‰²æ˜¯ Observerã€‚")]),e._v(" "),_("hr"),e._v(" "),_("h2",{attrs:{id:"ğŸ”§-äº”ã€å…¸å‹åº”ç”¨åœºæ™¯-åˆ†å¸ƒå¼åè°ƒå®è·µ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”§-äº”ã€å…¸å‹åº”ç”¨åœºæ™¯-åˆ†å¸ƒå¼åè°ƒå®è·µ"}},[e._v("#")]),e._v(" ğŸ”§ äº”ã€å…¸å‹åº”ç”¨åœºæ™¯ï¼ˆåˆ†å¸ƒå¼åè°ƒå®è·µï¼‰")]),e._v(" "),_("blockquote",[_("p",[_("strong",[e._v("æ ¸å¿ƒæ€æƒ³")]),e._v("ï¼šZooKeeperçš„å…¸å‹åº”ç”¨åœºæ™¯åŒ…æ‹¬åˆ†å¸ƒå¼é”ã€é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ç­‰ï¼Œè¿™äº›åœºæ™¯ä½“ç°äº†ZKåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å®é™…ä»·å€¼ã€‚")])]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("é…ç½®ç®¡ç†")]),e._v("ï¼š"),_("a",{attrs:{href:"#%E6%95%B0%E6%8D%AE%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85"}},[e._v("æ•°æ®å‘å¸ƒ/è®¢é˜…")]),e._v(" | "),_("a",{attrs:{href:"#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"}},[e._v("è´Ÿè½½å‡è¡¡")]),e._v(" | "),_("a",{attrs:{href:"#zk-%E7%9A%84%E5%91%BD%E5%90%8D%E6%9C%8D%E5%8A%A1%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"}},[e._v("å‘½åæœåŠ¡")])]),e._v(" "),_("li",[_("strong",[e._v("åˆ†å¸ƒå¼åè°ƒ")]),e._v("ï¼š"),_("a",{attrs:{href:"#%E5%88%86%E5%B8%83%E5%BC%8F%E9%80%9A%E7%9F%A5%E5%92%8C%E5%8D%8F%E8%B0%83"}},[e._v("åˆ†å¸ƒå¼é€šçŸ¥")]),e._v(" | "),_("a",{attrs:{href:"#zookeeper-%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86"}},[e._v("é›†ç¾¤ç®¡ç†")]),e._v(" | "),_("a",{attrs:{href:"#master-%E9%80%89%E4%B8%BE"}},[e._v("Masteré€‰ä¸¾")])]),e._v(" "),_("li",[_("strong",[e._v("åŒæ­¥åŸè¯­")]),e._v("ï¼š"),_("a",{attrs:{href:"#zookeeper-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"}},[e._v("åˆ†å¸ƒå¼é”")]),e._v(" | "),_("a",{attrs:{href:"#zookeeper-%E9%98%9F%E5%88%97%E7%AE%A1%E7%90%86"}},[e._v("é˜Ÿåˆ—ç®¡ç†")])])]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-æ•°æ®åŒæ­¥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-æ•°æ®åŒæ­¥"}},[e._v("#")]),e._v(" ğŸ¯ æ•°æ®åŒæ­¥")]),e._v(" "),_("p",[e._v("æ•´ä¸ªé›†ç¾¤å®Œæˆ Leader é€‰ä¸¾ä¹‹åï¼ŒLearnerï¼ˆFollower å’Œ Observer çš„ç»Ÿç§°ï¼‰å›å‘Leader æœåŠ¡å™¨è¿›è¡Œæ³¨å†Œã€‚å½“ Learner æœåŠ¡å™¨æƒ³ Leader æœåŠ¡å™¨å®Œæˆæ³¨å†Œåï¼Œè¿›å…¥æ•°æ®åŒæ­¥ç¯èŠ‚ã€‚")]),e._v(" "),_("p",[e._v("æ•°æ®åŒæ­¥æµç¨‹ï¼šï¼ˆå‡ä»¥æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼è¿›è¡Œï¼‰")]),e._v(" "),_("p",[e._v("Learner å‘ Leader æ³¨å†Œ")]),e._v(" "),_("p",[e._v("æ•°æ®åŒæ­¥")]),e._v(" "),_("p",[e._v("åŒæ­¥ç¡®è®¤")]),e._v(" "),_("p",[e._v("Zookeeper çš„æ•°æ®åŒæ­¥é€šå¸¸åˆ†ä¸ºå››ç±»ï¼š")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰ç›´æ¥å·®å¼‚åŒ–åŒæ­¥ï¼ˆDIFF åŒæ­¥ï¼‰")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰å…ˆå›æ»šå†å·®å¼‚åŒ–åŒæ­¥ï¼ˆTRUNC+DIFF åŒæ­¥ï¼‰")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰ä»…å›æ»šåŒæ­¥ï¼ˆTRUNC åŒæ­¥ï¼‰")]),e._v(" "),_("p",[e._v("ï¼ˆ4ï¼‰å…¨é‡åŒæ­¥ï¼ˆSNAP åŒæ­¥ï¼‰")]),e._v(" "),_("p",[e._v("åœ¨è¿›è¡Œæ•°æ®åŒæ­¥å‰ï¼ŒLeader æœåŠ¡å™¨ä¼šå®Œæˆæ•°æ®åŒæ­¥åˆå§‹åŒ–ï¼š")]),e._v(" "),_("p",[e._v("peerLastZxidï¼š")]),e._v(" "),_("p",[e._v("Â· ä» learner æœåŠ¡å™¨æ³¨å†Œæ—¶å‘é€çš„ ACKEPOCH æ¶ˆæ¯ä¸­æå– lastZxidï¼ˆè¯¥Learner æœåŠ¡å™¨æœ€åå¤„ç†çš„ ZXIDï¼‰")]),e._v(" "),_("p",[e._v("minCommittedLogï¼š")]),e._v(" "),_("p",[e._v("Â· Leader æœåŠ¡å™¨ Proposal ç¼“å­˜é˜Ÿåˆ— committedLog ä¸­æœ€å° ZXIDmaxCommittedLogï¼š")]),e._v(" "),_("p",[e._v("Â· Leader æœåŠ¡å™¨ Proposal ç¼“å­˜é˜Ÿåˆ— committedLog ä¸­æœ€å¤§ ZXIDç›´æ¥å·®å¼‚åŒ–åŒæ­¥ï¼ˆDIFF åŒæ­¥ï¼‰")]),e._v(" "),_("p",[e._v("Â· åœºæ™¯ï¼špeerLastZxid ä»‹äº minCommittedLog å’Œ maxCommittedLogä¹‹é—´å…ˆå›æ»šå†å·®å¼‚åŒ–åŒæ­¥ï¼ˆTRUNC+DIFF åŒæ­¥ï¼‰")]),e._v(" "),_("p",[e._v("Â· åœºæ™¯ï¼šå½“æ–°çš„ Leader æœåŠ¡å™¨å‘ç°æŸä¸ª Learner æœåŠ¡å™¨åŒ…å«äº†ä¸€æ¡è‡ªå·±æ²¡æœ‰çš„äº‹åŠ¡è®°å½•ï¼Œé‚£ä¹ˆå°±éœ€è¦è®©è¯¥ Learner æœåŠ¡å™¨è¿›è¡Œäº‹åŠ¡å›æ»šâ€“å›æ»šåˆ° LeaderæœåŠ¡å™¨ä¸Šå­˜åœ¨çš„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€æ¥è¿‘äº peerLastZxid çš„ ZXIDä»…å›æ»šåŒæ­¥ï¼ˆTRUNC åŒæ­¥ï¼‰")]),e._v(" "),_("p",[e._v("Â· åœºæ™¯ï¼špeerLastZxid å¤§äº maxCommittedLog")]),e._v(" "),_("p",[e._v("å…¨é‡åŒæ­¥ï¼ˆSNAP åŒæ­¥ï¼‰")]),e._v(" "),_("p",[e._v("Â· åœºæ™¯ä¸€ï¼špeerLastZxid å°äº minCommittedLog")]),e._v(" "),_("p",[e._v("Â· åœºæ™¯äºŒï¼šLeader æœåŠ¡å™¨ä¸Šæ²¡æœ‰ Proposal ç¼“å­˜é˜Ÿåˆ—ä¸” peerLastZxid ä¸ç­‰äº lastProcessZxid")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-æ˜¯å¦‚ä½•ä¿è¯äº‹åŠ¡çš„é¡ºåºä¸€è‡´æ€§çš„"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-æ˜¯å¦‚ä½•ä¿è¯äº‹åŠ¡çš„é¡ºåºä¸€è‡´æ€§çš„"}},[e._v("#")]),e._v(" ğŸ¯ zookeeper æ˜¯å¦‚ä½•ä¿è¯äº‹åŠ¡çš„é¡ºåºä¸€è‡´æ€§çš„ï¼Ÿ")]),e._v(" "),_("p",[e._v("zookeeper é‡‡ç”¨äº†å…¨å±€é€’å¢çš„äº‹åŠ¡ Id æ¥æ ‡è¯†ï¼Œæ‰€æœ‰çš„ proposalï¼ˆæè®®ï¼‰éƒ½åœ¨è¢«æå‡ºçš„æ—¶å€™åŠ ä¸Šäº† zxidï¼Œzxid å®é™…ä¸Šæ˜¯ä¸€ä¸ª 64 ä½çš„æ•°å­—ï¼Œé«˜ 32 ä½æ˜¯ epochï¼ˆ æ—¶æœŸ; çºªå…ƒ; ä¸–; æ–°æ—¶ä»£ï¼‰ç”¨æ¥æ ‡è¯† leader å‘¨æœŸï¼Œå¦‚æœæœ‰æ–°çš„ leader äº§ç”Ÿå‡ºæ¥ï¼Œepochä¼šè‡ªå¢ï¼Œä½ 32 ä½ç”¨æ¥é€’å¢è®¡æ•°ã€‚å½“æ–°äº§ç”Ÿ proposal çš„æ—¶å€™ï¼Œä¼šä¾æ®æ•°æ®åº“çš„ä¸¤é˜¶æ®µè¿‡ç¨‹ï¼Œé¦–å…ˆä¼šå‘å…¶ä»–çš„ server å‘å‡ºäº‹åŠ¡æ‰§è¡Œè¯·æ±‚ï¼Œå¦‚æœè¶…è¿‡åŠæ•°çš„æœºå™¨éƒ½èƒ½æ‰§è¡Œå¹¶ä¸”èƒ½å¤ŸæˆåŠŸï¼Œé‚£ä¹ˆå°±ä¼šå¼€å§‹æ‰§è¡Œã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-åˆ†å¸ƒå¼é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆä¼šæœ‰-masterä¸»èŠ‚ç‚¹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-åˆ†å¸ƒå¼é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆä¼šæœ‰-masterä¸»èŠ‚ç‚¹"}},[e._v("#")]),e._v(" ğŸ¯ åˆ†å¸ƒå¼é›†ç¾¤ä¸­ä¸ºä»€ä¹ˆä¼šæœ‰ Masterä¸»èŠ‚ç‚¹ï¼Ÿ")]),e._v(" "),_("p",[e._v("åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œæœ‰äº›ä¸šåŠ¡é€»è¾‘åªéœ€è¦é›†ç¾¤ä¸­çš„æŸä¸€å°æœºå™¨è¿›è¡Œæ‰§è¡Œï¼Œå…¶ä»–çš„æœºå™¨å¯ä»¥å…±äº«è¿™ä¸ªç»“æœï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘é‡å¤è®¡ç®—ï¼Œæé«˜æ€§èƒ½ï¼Œäºæ˜¯å°±éœ€è¦è¿›è¡Œ leader é€‰ä¸¾ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zk-èŠ‚ç‚¹å®•æœºå¦‚ä½•å¤„ç†"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zk-èŠ‚ç‚¹å®•æœºå¦‚ä½•å¤„ç†"}},[e._v("#")]),e._v(" ğŸ¯ zk èŠ‚ç‚¹å®•æœºå¦‚ä½•å¤„ç†ï¼Ÿ")]),e._v(" "),_("p",[e._v("Zookeeper æœ¬èº«ä¹Ÿæ˜¯é›†ç¾¤ï¼Œæ¨èé…ç½®ä¸å°‘äº 3 ä¸ªæœåŠ¡å™¨ã€‚Zookeeper è‡ªèº«ä¹Ÿè¦ä¿è¯å½“ä¸€ä¸ªèŠ‚ç‚¹å®•æœºæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹ä¼šç»§ç»­æä¾›æœåŠ¡ã€‚")]),e._v(" "),_("p",[e._v("å¦‚æœæ˜¯ä¸€ä¸ª Follower å®•æœºï¼Œè¿˜æœ‰ 2 å°æœåŠ¡å™¨æä¾›è®¿é—®ï¼Œå› ä¸º Zookeeper ä¸Šçš„æ•°æ®æ˜¯æœ‰å¤šä¸ªå‰¯æœ¬çš„ï¼Œæ•°æ®å¹¶ä¸ä¼šä¸¢å¤±ï¼›")]),e._v(" "),_("p",[e._v("å¦‚æœæ˜¯ä¸€ä¸ª Leader å®•æœºï¼ŒZookeeper ä¼šé€‰ä¸¾å‡ºæ–°çš„ Leaderã€‚")]),e._v(" "),_("p",[e._v("ZK é›†ç¾¤çš„æœºåˆ¶æ˜¯åªè¦è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹æ­£å¸¸ï¼Œé›†ç¾¤å°±èƒ½æ­£å¸¸æä¾›æœåŠ¡ã€‚åªæœ‰åœ¨ ZKèŠ‚ç‚¹æŒ‚å¾—å¤ªå¤šï¼Œåªå‰©ä¸€åŠæˆ–ä¸åˆ°ä¸€åŠèŠ‚ç‚¹èƒ½å·¥ä½œï¼Œé›†ç¾¤æ‰å¤±æ•ˆã€‚")]),e._v(" "),_("p",[e._v("æ‰€ä»¥")]),e._v(" "),_("p",[e._v("3 ä¸ªèŠ‚ç‚¹çš„ cluster å¯ä»¥æŒ‚æ‰ 1 ä¸ªèŠ‚ç‚¹(leader å¯ä»¥å¾—åˆ° 2 ç¥¨>1.5)")]),e._v(" "),_("p",[e._v("2 ä¸ªèŠ‚ç‚¹çš„ cluster å°±ä¸èƒ½æŒ‚æ‰ä»»ä½• 1 ä¸ªèŠ‚ç‚¹äº†(leader å¯ä»¥å¾—åˆ° 1 ç¥¨<=1)")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-è´Ÿè½½å‡è¡¡å’Œ-nginx-è´Ÿè½½å‡è¡¡åŒºåˆ«"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-è´Ÿè½½å‡è¡¡å’Œ-nginx-è´Ÿè½½å‡è¡¡åŒºåˆ«"}},[e._v("#")]),e._v(" ğŸ¯ zookeeper è´Ÿè½½å‡è¡¡å’Œ nginx è´Ÿè½½å‡è¡¡åŒºåˆ«")]),e._v(" "),_("p",[e._v("zk çš„è´Ÿè½½å‡è¡¡æ˜¯å¯ä»¥è°ƒæ§ï¼Œnginx åªæ˜¯èƒ½è°ƒæƒé‡ï¼Œå…¶ä»–éœ€è¦å¯æ§çš„éƒ½éœ€è¦è‡ªå·±å†™æ’ä»¶ï¼›ä½†æ˜¯ nginx çš„ååé‡æ¯” zk å¤§å¾ˆå¤šï¼Œåº”è¯¥è¯´æŒ‰ä¸šåŠ¡é€‰æ‹©ç”¨å“ªç§æ–¹å¼ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-æœ‰å“ªå‡ ç§å‡ ç§éƒ¨ç½²æ¨¡å¼"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-æœ‰å“ªå‡ ç§å‡ ç§éƒ¨ç½²æ¨¡å¼"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper æœ‰å“ªå‡ ç§å‡ ç§éƒ¨ç½²æ¨¡å¼ï¼Ÿ")]),e._v(" "),_("p",[e._v("Zookeeper æœ‰ä¸‰ç§éƒ¨ç½²æ¨¡å¼ï¼š")]),e._v(" "),_("ol",[_("li",[e._v("å•æœºéƒ¨ç½²ï¼šä¸€å°é›†ç¾¤ä¸Šè¿è¡Œï¼›")]),e._v(" "),_("li",[e._v("é›†ç¾¤éƒ¨ç½²ï¼šå¤šå°é›†ç¾¤è¿è¡Œï¼›")]),e._v(" "),_("li",[e._v("ä¼ªé›†ç¾¤éƒ¨ç½²ï¼šä¸€å°é›†ç¾¤å¯åŠ¨å¤šä¸ª Zookeeper å®ä¾‹è¿è¡Œã€‚")])]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-é›†ç¾¤æœ€å°‘è¦å‡ å°æœºå™¨-é›†ç¾¤è§„åˆ™æ˜¯æ€æ ·çš„-é›†ç¾¤ä¸­æœ‰-3-å°æœåŠ¡å™¨-å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœº-è¿™ä¸ªæ—¶å€™-zookeeper-è¿˜å¯ä»¥ä½¿ç”¨å—"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-é›†ç¾¤æœ€å°‘è¦å‡ å°æœºå™¨-é›†ç¾¤è§„åˆ™æ˜¯æ€æ ·çš„-é›†ç¾¤ä¸­æœ‰-3-å°æœåŠ¡å™¨-å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœº-è¿™ä¸ªæ—¶å€™-zookeeper-è¿˜å¯ä»¥ä½¿ç”¨å—"}},[e._v("#")]),e._v(" ğŸ¯ é›†ç¾¤æœ€å°‘è¦å‡ å°æœºå™¨ï¼Œé›†ç¾¤è§„åˆ™æ˜¯æ€æ ·çš„ï¼Ÿé›†ç¾¤ä¸­æœ‰ 3 å°æœåŠ¡å™¨ï¼Œå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹å®•æœºï¼Œè¿™ä¸ªæ—¶å€™ Zookeeper è¿˜å¯ä»¥ä½¿ç”¨å—ï¼Ÿ")]),e._v(" "),_("p",[e._v("é›†ç¾¤è§„åˆ™ä¸º 2N+1 å°ï¼ŒN>0ï¼Œå³ 3 å°ã€‚å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œå•æ•°æœåŠ¡å™¨åªè¦æ²¡è¶…è¿‡ä¸€åŠçš„æœåŠ¡å™¨å®•æœºå°±å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-é›†ç¾¤æ”¯æŒåŠ¨æ€æ·»åŠ æœºå™¨å—"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-é›†ç¾¤æ”¯æŒåŠ¨æ€æ·»åŠ æœºå™¨å—"}},[e._v("#")]),e._v(" ğŸ¯ é›†ç¾¤æ”¯æŒåŠ¨æ€æ·»åŠ æœºå™¨å—ï¼Ÿ")]),e._v(" "),_("p",[e._v("å…¶å®å°±æ˜¯æ°´å¹³æ‰©å®¹äº†ï¼ŒZookeeper åœ¨è¿™æ–¹é¢ä¸å¤ªå¥½ã€‚ä¸¤ç§æ–¹å¼ï¼š")]),e._v(" "),_("p",[e._v("å…¨éƒ¨é‡å¯ï¼šå…³é—­æ‰€æœ‰ Zookeeper æœåŠ¡ï¼Œä¿®æ”¹é…ç½®ä¹‹åå¯åŠ¨ã€‚ä¸å½±å“ä¹‹å‰å®¢æˆ·ç«¯çš„ä¼šè¯ã€‚")]),e._v(" "),_("p",[e._v("é€ä¸ªé‡å¯ï¼šåœ¨è¿‡åŠå­˜æ´»å³å¯ç”¨çš„åŸåˆ™ä¸‹ï¼Œä¸€å°æœºå™¨é‡å¯ä¸å½±å“æ•´ä¸ªé›†ç¾¤å¯¹å¤–æä¾›æœåŠ¡ã€‚è¿™æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹å¼ã€‚")]),e._v(" "),_("p",[e._v("3.5 ç‰ˆæœ¬å¼€å§‹æ”¯æŒåŠ¨æ€æ‰©å®¹ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-å¯¹èŠ‚ç‚¹çš„-watch-ç›‘å¬é€šçŸ¥æ˜¯æ°¸ä¹…çš„å—-ä¸ºä»€ä¹ˆä¸æ˜¯æ°¸ä¹…çš„"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-å¯¹èŠ‚ç‚¹çš„-watch-ç›‘å¬é€šçŸ¥æ˜¯æ°¸ä¹…çš„å—-ä¸ºä»€ä¹ˆä¸æ˜¯æ°¸ä¹…çš„"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper å¯¹èŠ‚ç‚¹çš„ watch ç›‘å¬é€šçŸ¥æ˜¯æ°¸ä¹…çš„å—ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯æ°¸ä¹…çš„?")]),e._v(" "),_("p",[e._v("ä¸æ˜¯ã€‚å®˜æ–¹å£°æ˜ï¼šä¸€ä¸ª Watch äº‹ä»¶æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§çš„è§¦å‘å™¨ï¼Œå½“è¢«è®¾ç½®äº† Watchçš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜çš„æ—¶å€™ï¼Œåˆ™æœåŠ¡å™¨å°†è¿™ä¸ªæ”¹å˜å‘é€ç»™è®¾ç½®äº† Watch çš„å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿é€šçŸ¥å®ƒä»¬ã€‚")]),e._v(" "),_("p",[e._v("ä¸ºä»€ä¹ˆä¸æ˜¯æ°¸ä¹…çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæœåŠ¡ç«¯å˜åŠ¨é¢‘ç¹ï¼Œè€Œç›‘å¬çš„å®¢æˆ·ç«¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ¯æ¬¡å˜åŠ¨éƒ½è¦é€šçŸ¥åˆ°æ‰€æœ‰çš„å®¢æˆ·ç«¯ï¼Œç»™ç½‘ç»œå’ŒæœåŠ¡å™¨é€ æˆå¾ˆå¤§å‹åŠ›ã€‚")]),e._v(" "),_("p",[e._v("ä¸€èˆ¬æ˜¯å®¢æˆ·ç«¯æ‰§è¡Œ getData(â€œ/èŠ‚ç‚¹ Aâ€,true)ï¼Œå¦‚æœèŠ‚ç‚¹ A å‘ç”Ÿäº†å˜æ›´æˆ–åˆ é™¤ï¼Œå®¢æˆ·ç«¯ä¼šå¾—åˆ°å®ƒçš„ watch äº‹ä»¶ï¼Œä½†æ˜¯åœ¨ä¹‹åèŠ‚ç‚¹ A åˆå‘ç”Ÿäº†å˜æ›´ï¼Œè€Œå®¢æˆ·ç«¯åˆæ²¡æœ‰è®¾ç½® watch äº‹ä»¶ï¼Œå°±ä¸å†ç»™å®¢æˆ·ç«¯å‘é€ã€‚")]),e._v(" "),_("p",[e._v("åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“æœåŠ¡ç«¯çš„æ¯ä¸€æ¬¡å˜åŠ¨ï¼Œæˆ‘åªè¦æœ€æ–°çš„æ•°æ®å³å¯ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-çš„-java-å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-çš„-java-å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper çš„ java å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ï¼Ÿ")]),e._v(" "),_("p",[e._v("java å®¢æˆ·ç«¯ï¼šzk è‡ªå¸¦çš„ zkclient åŠ Apache å¼€æºçš„ Curatorã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-chubby-æ˜¯ä»€ä¹ˆ-å’Œ-zookeeper-æ¯”ä½ æ€ä¹ˆçœ‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-chubby-æ˜¯ä»€ä¹ˆ-å’Œ-zookeeper-æ¯”ä½ æ€ä¹ˆçœ‹"}},[e._v("#")]),e._v(" ğŸ¯ chubby æ˜¯ä»€ä¹ˆï¼Œå’Œ zookeeper æ¯”ä½ æ€ä¹ˆçœ‹ï¼Ÿ")]),e._v(" "),_("p",[e._v("chubby æ˜¯ google çš„ï¼Œå®Œå…¨å®ç° paxos ç®—æ³•ï¼Œä¸å¼€æºã€‚zookeeper æ˜¯ chubbyçš„å¼€æºå®ç°ï¼Œä½¿ç”¨ zab åè®®ï¼Œpaxos ç®—æ³•çš„å˜ç§ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-è¯´å‡ ä¸ª-zookeeper-å¸¸ç”¨çš„å‘½ä»¤ã€‚"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è¯´å‡ ä¸ª-zookeeper-å¸¸ç”¨çš„å‘½ä»¤ã€‚"}},[e._v("#")]),e._v(" ğŸ¯ è¯´å‡ ä¸ª zookeeper å¸¸ç”¨çš„å‘½ä»¤ã€‚")]),e._v(" "),_("p",[e._v("å¸¸ç”¨å‘½ä»¤ï¼šls get set create delete ç­‰ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zab-å’Œ-paxos-ç®—æ³•çš„è”ç³»ä¸åŒºåˆ«"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zab-å’Œ-paxos-ç®—æ³•çš„è”ç³»ä¸åŒºåˆ«"}},[e._v("#")]),e._v(" ğŸ¯ ZAB å’Œ Paxos ç®—æ³•çš„è”ç³»ä¸åŒºåˆ«ï¼Ÿ")]),e._v(" "),_("p",[e._v("ç›¸åŒç‚¹ï¼š")]),e._v(" "),_("p",[e._v("ï¼ˆ1ï¼‰ä¸¤è€…éƒ½å­˜åœ¨ä¸€ä¸ªç±»ä¼¼äº Leader è¿›ç¨‹çš„è§’è‰²ï¼Œç”±å…¶è´Ÿè´£åè°ƒå¤šä¸ª Follower è¿›ç¨‹çš„è¿è¡Œ")]),e._v(" "),_("p",[e._v("ï¼ˆ2ï¼‰Leader è¿›ç¨‹éƒ½ä¼šç­‰å¾…è¶…è¿‡åŠæ•°çš„ Follower åšå‡ºæ­£ç¡®çš„åé¦ˆåï¼Œæ‰ä¼šå°†ä¸€ä¸ªææ¡ˆè¿›è¡Œæäº¤")]),e._v(" "),_("p",[e._v("ï¼ˆ3ï¼‰ZAB åè®®ä¸­ï¼Œæ¯ä¸ª Proposal ä¸­éƒ½åŒ…å«ä¸€ä¸ª epoch å€¼æ¥ä»£è¡¨å½“å‰çš„ Leaderå‘¨æœŸï¼ŒPaxos ä¸­åå­—ä¸º Ballot")]),e._v(" "),_("p",[e._v("ä¸åŒç‚¹ï¼š")]),e._v(" "),_("p",[e._v("ZAB ç”¨æ¥æ„å»ºé«˜å¯ç”¨çš„åˆ†å¸ƒå¼æ•°æ®ä¸»å¤‡ç³»ç»Ÿï¼ˆZookeeperï¼‰ï¼ŒPaxos æ˜¯ç”¨æ¥æ„å»ºåˆ†å¸ƒå¼ä¸€è‡´æ€§çŠ¶æ€æœºç³»ç»Ÿã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-éƒ½æœ‰å“ªäº›åŠŸèƒ½-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-éƒ½æœ‰å“ªäº›åŠŸèƒ½-2"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper éƒ½æœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ")]),e._v(" "),_("ol",[_("li",[e._v("é›†ç¾¤ç®¡ç†ï¼šç›‘æ§èŠ‚ç‚¹å­˜æ´»çŠ¶æ€ã€è¿è¡Œè¯·æ±‚ç­‰ï¼›")]),e._v(" "),_("li",[e._v("ä¸»èŠ‚ç‚¹é€‰ä¸¾ï¼šä¸»èŠ‚ç‚¹æŒ‚æ‰äº†ä¹‹åå¯ä»¥ä»å¤‡ç”¨çš„èŠ‚ç‚¹å¼€å§‹æ–°ä¸€è½®é€‰ä¸»ï¼Œä¸»èŠ‚ç‚¹é€‰ä¸¾è¯´çš„å°±æ˜¯è¿™ä¸ªé€‰ä¸¾çš„è¿‡ç¨‹ï¼Œä½¿ç”¨ Zookeeper å¯ä»¥ååŠ©å®Œæˆè¿™ä¸ªè¿‡ç¨‹ï¼›")]),e._v(" "),_("li",[e._v("åˆ†å¸ƒå¼é”ï¼šZookeeper æä¾›ä¸¤ç§é”ï¼šç‹¬å é”ã€å…±äº«é”ã€‚ç‹¬å é”å³ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨èµ„æºï¼Œå…±äº«é”æ˜¯è¯»é”å…±äº«ï¼Œè¯»å†™äº’æ–¥ï¼Œå³å¯ä»¥æœ‰å¤šçº¿çº¿ç¨‹åŒæ—¶è¯»åŒä¸€ä¸ªèµ„æºï¼Œå¦‚æœè¦ä½¿ç”¨å†™é”ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ã€‚Zookeeper å¯ä»¥å¯¹åˆ†å¸ƒå¼é”è¿›è¡Œæ§åˆ¶ã€‚")]),e._v(" "),_("li",[e._v("å‘½åæœåŠ¡ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œé€šè¿‡ä½¿ç”¨å‘½åæœåŠ¡ï¼Œå®¢æˆ·ç«¯åº”ç”¨èƒ½å¤Ÿæ ¹æ®æŒ‡å®šåå­—æ¥è·å–èµ„æºæˆ–æœåŠ¡çš„åœ°å€ï¼Œæä¾›è€…ç­‰ä¿¡æ¯ã€‚")])]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-è¯´ä¸€ä¸‹-zookeeper-çš„é€šçŸ¥æœºåˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-è¯´ä¸€ä¸‹-zookeeper-çš„é€šçŸ¥æœºåˆ¶"}},[e._v("#")]),e._v(" ğŸ¯ è¯´ä¸€ä¸‹ Zookeeper çš„é€šçŸ¥æœºåˆ¶ï¼Ÿ")]),e._v(" "),_("p",[e._v("client ç«¯ä¼šå¯¹æŸä¸ª znode å»ºç«‹ä¸€ä¸ª watcher äº‹ä»¶ï¼Œå½“è¯¥ znode å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿™äº› client ä¼šæ”¶åˆ° zk çš„é€šçŸ¥ï¼Œç„¶å client å¯ä»¥æ ¹æ® znode å˜åŒ–æ¥åšå‡ºä¸šåŠ¡ä¸Šçš„æ”¹å˜ç­‰ã€‚")]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zookeeper-å’Œ-dubbo-çš„å…³ç³»"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeper-å’Œ-dubbo-çš„å…³ç³»"}},[e._v("#")]),e._v(" ğŸ¯ Zookeeper å’Œ Dubbo çš„å…³ç³»ï¼Ÿ")]),e._v(" "),_("p",[e._v("Zookeeperçš„ä½œç”¨ï¼š")]),e._v(" "),_("p",[e._v("zookeeperç”¨æ¥æ³¨å†ŒæœåŠ¡å’Œè¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œå“ªä¸€ä¸ªæœåŠ¡ç”±å“ªä¸€ä¸ªæœºå™¨æ¥æä¾›å¿…éœ€è®©è°ƒç”¨è€…çŸ¥é“ï¼Œç®€å•æ¥è¯´å°±æ˜¯ipåœ°å€å’ŒæœåŠ¡åç§°çš„å¯¹åº”å…³ç³»ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç¡¬ç¼–ç çš„æ–¹å¼æŠŠè¿™ç§å¯¹åº”å…³ç³»åœ¨è°ƒç”¨æ–¹ä¸šåŠ¡ä»£ç ä¸­å®ç°ï¼Œä½†æ˜¯å¦‚æœæä¾›æœåŠ¡çš„æœºå™¨æŒ‚æ‰è°ƒç”¨è€…æ— æ³•çŸ¥æ™“ï¼Œå¦‚æœä¸æ›´æ”¹ä»£ç ä¼šç»§ç»­è¯·æ±‚æŒ‚æ‰çš„æœºå™¨æä¾›æœåŠ¡ã€‚zookeeperé€šè¿‡å¿ƒè·³æœºåˆ¶å¯ä»¥æ£€æµ‹æŒ‚æ‰çš„æœºå™¨å¹¶å°†æŒ‚æ‰æœºå™¨çš„ipå’ŒæœåŠ¡å¯¹åº”å…³ç³»ä»åˆ—è¡¨ä¸­åˆ é™¤ã€‚è‡³äºæ”¯æŒé«˜å¹¶å‘ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ¨ªå‘æ‰©å±•ï¼Œåœ¨ä¸æ›´æ”¹ä»£ç çš„æƒ…å†µé€šè¿‡æ·»åŠ æœºå™¨æ¥æé«˜è¿ç®—èƒ½åŠ›ã€‚é€šè¿‡æ·»åŠ æ–°çš„æœºå™¨å‘zookeeperæ³¨å†ŒæœåŠ¡ï¼ŒæœåŠ¡çš„æä¾›è€…å¤šäº†èƒ½æœåŠ¡çš„å®¢æˆ·å°±å¤šäº†ã€‚")]),e._v(" "),_("p",[e._v("dubboï¼š")]),e._v(" "),_("p",[e._v("æ˜¯ç®¡ç†ä¸­é—´å±‚çš„å·¥å…·ï¼Œåœ¨ä¸šåŠ¡å±‚åˆ°æ•°æ®ä»“åº“é—´æœ‰éå¸¸å¤šæœåŠ¡çš„æ¥å…¥å’ŒæœåŠ¡æä¾›è€…éœ€è¦è°ƒåº¦ï¼Œdubboæä¾›ä¸€ä¸ªæ¡†æ¶è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\næ³¨æ„è¿™é‡Œçš„dubboåªæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè‡³äºä½ æ¶å­ä¸Šæ”¾ä»€ä¹ˆæ˜¯å®Œå…¨å–å†³äºä½ çš„ï¼Œå°±åƒä¸€ä¸ªæ±½è½¦éª¨æ¶ï¼Œä½ éœ€è¦é…ä½ çš„è½®å­å¼•æ“ã€‚è¿™ä¸ªæ¡†æ¶ä¸­è¦å®Œæˆè°ƒåº¦å¿…é¡»è¦æœ‰ä¸€ä¸ªåˆ†å¸ƒå¼çš„æ³¨å†Œä¸­å¿ƒï¼Œå‚¨å­˜æ‰€æœ‰æœåŠ¡çš„å…ƒæ•°æ®ï¼Œä½ å¯ä»¥ç”¨zkï¼Œä¹Ÿå¯ä»¥ç”¨åˆ«çš„ï¼Œåªæ˜¯å¤§å®¶éƒ½ç”¨zkã€‚")]),e._v(" "),_("p",[e._v("zookeeperå’Œdubboçš„å…³ç³»ï¼š")]),e._v(" "),_("p",[e._v("Dubbo çš„å°†æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæŠ½è±¡ï¼Œå®ƒå¯ä»¥å¤–æ¥ä¸åŒçš„å­˜å‚¨åª’ä»‹ç»™æ³¨å†Œä¸­å¿ƒæä¾›æœåŠ¡ï¼Œæœ‰ ZooKeeperï¼ŒMemcachedï¼ŒRedis ç­‰ã€‚")]),e._v(" "),_("p",[e._v("å¼•å…¥äº† ZooKeeper ä½œä¸ºå­˜å‚¨åª’ä»‹ï¼Œä¹Ÿå°±æŠŠ ZooKeeper çš„ç‰¹æ€§å¼•è¿›æ¥ã€‚é¦–å…ˆæ˜¯è´Ÿè½½å‡è¡¡ï¼Œå•æ³¨å†Œä¸­å¿ƒçš„æ‰¿è½½èƒ½åŠ›æ˜¯æœ‰é™çš„ï¼Œåœ¨æµé‡è¾¾åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶ å€™å°±éœ€è¦åˆ†æµï¼Œè´Ÿè½½å‡è¡¡å°±æ˜¯ä¸ºäº†åˆ†æµè€Œå­˜åœ¨çš„ï¼Œä¸€ä¸ª ZooKeeper ç¾¤é…åˆç›¸åº”çš„ Web åº”ç”¨å°±å¯ä»¥å¾ˆå®¹æ˜“è¾¾åˆ°è´Ÿè½½å‡è¡¡ï¼›èµ„æºåŒæ­¥ï¼Œå•å•æœ‰è´Ÿè½½å‡è¡¡è¿˜ä¸ å¤Ÿï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®å’Œèµ„æºéœ€è¦åŒæ­¥ï¼ŒZooKeeper é›†ç¾¤å°±å¤©ç„¶å…·å¤‡æœ‰è¿™æ ·çš„åŠŸèƒ½ï¼›å‘½åæœåŠ¡ï¼Œå°†æ ‘çŠ¶ç»“æ„ç”¨äºç»´æŠ¤å…¨å±€çš„æœåŠ¡åœ°å€åˆ—è¡¨ï¼ŒæœåŠ¡æä¾›è€…åœ¨å¯åŠ¨ çš„æ—¶å€™ï¼Œå‘ ZooKeeper ä¸Šçš„æŒ‡å®šèŠ‚ç‚¹ /dubbo/${serviceName}/providers ç›®å½•ä¸‹å†™å…¥è‡ªå·±çš„ URL åœ°å€ï¼Œè¿™ä¸ªæ“ä½œå°±å®Œæˆäº†æœåŠ¡çš„å‘å¸ƒã€‚ å…¶ä»–ç‰¹æ€§è¿˜æœ‰ Mast é€‰ä¸¾ï¼Œåˆ†å¸ƒå¼é”ç­‰ã€‚")]),e._v(" "),_("p",[_("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xMC8zMS8xNmUyMTliYzc3MDA5OGRm?x-oss-process=image/format,png",alt:"img"}})]),e._v(" "),_("hr"),e._v(" "),_("h2",{attrs:{id:"ğŸš¨-å…­ã€è¿ç»´å®è·µä¸æ•…éšœå¤„ç†-ç”Ÿäº§ç»éªŒ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš¨-å…­ã€è¿ç»´å®è·µä¸æ•…éšœå¤„ç†-ç”Ÿäº§ç»éªŒ"}},[e._v("#")]),e._v(" ğŸš¨ å…­ã€è¿ç»´å®è·µä¸æ•…éšœå¤„ç†ï¼ˆç”Ÿäº§ç»éªŒï¼‰")]),e._v(" "),_("blockquote",[_("p",[_("strong",[e._v("æ ¸å¿ƒæ€æƒ³")]),e._v("ï¼šZooKeeperåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„è¿ç»´å®è·µï¼ŒåŒ…æ‹¬éƒ¨ç½²é…ç½®ã€æ€§èƒ½ç›‘æ§ã€æ•…éšœæ’æŸ¥ç­‰ï¼Œè¿™äº›ç»éªŒæ˜¯é«˜çº§å·¥ç¨‹å¸ˆå¿…å¤‡çš„æŠ€èƒ½ã€‚")])]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("éƒ¨ç½²é…ç½®")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E6%9C%89%E5%93%AA%E5%87%A0%E7%A7%8D%E5%87%A0%E7%A7%8D%E9%83%A8%E7%BD%B2%E6%A8%A1%E5%BC%8F"}},[e._v("éƒ¨ç½²æ¨¡å¼")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E9%9B%86%E7%BE%A4%E6%9C%80%E5%B0%91%E8%A6%81%E5%87%A0%E5%8F%B0%E6%9C%BA%E5%99%A8%E9%9B%86%E7%BE%A4%E8%A7%84%E5%88%99%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%9C%89-3-%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%B6%E4%B8%AD%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E5%AE%95%E6%9C%BA%E8%BF%99%E4%B8%AA%E6%97%B6%E5%80%99-zookeeper-%E8%BF%98%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%90%97"}},[e._v("é›†ç¾¤è§„åˆ’")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E9%9B%86%E7%BE%A4%E6%94%AF%E6%8C%81%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0%E6%9C%BA%E5%99%A8%E5%90%97"}},[e._v("åŠ¨æ€æ‰©å®¹")])]),e._v(" "),_("li",[_("strong",[e._v("ç›‘æ§è¿ç»´")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E7%9A%84-java-%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B"}},[e._v("å®¢æˆ·ç«¯å·¥å…·")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E8%AF%B4%E5%87%A0%E4%B8%AA-zookeeper-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4"}},[e._v("å¸¸ç”¨å‘½ä»¤")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-%E8%AF%B4%E4%B8%80%E4%B8%8B-zookeeper-%E7%9A%84%E9%80%9A%E7%9F%A5%E6%9C%BA%E5%88%B6"}},[e._v("é€šçŸ¥æœºåˆ¶")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E5%AF%B9%E8%8A%82%E7%82%B9%E7%9A%84-watch-%E7%9B%91%E5%90%AC%E9%80%9A%E7%9F%A5%E6%98%AF%E6%B0%B8%E4%B9%85%E7%9A%84%E5%90%97%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E6%98%AF%E6%B0%B8%E4%B9%85%E7%9A%84"}},[e._v("Watchç›‘å¬")])])]),e._v(" "),_("hr"),e._v(" "),_("h2",{attrs:{id:"ğŸ’¼-ä¸ƒã€å¯¹æ¯”åˆ†æä¸æŠ€æœ¯é€‰å‹-æ¶æ„å†³ç­–"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’¼-ä¸ƒã€å¯¹æ¯”åˆ†æä¸æŠ€æœ¯é€‰å‹-æ¶æ„å†³ç­–"}},[e._v("#")]),e._v(" ğŸ’¼ ä¸ƒã€å¯¹æ¯”åˆ†æä¸æŠ€æœ¯é€‰å‹ï¼ˆæ¶æ„å†³ç­–ï¼‰")]),e._v(" "),_("blockquote",[_("p",[_("strong",[e._v("æ ¸å¿ƒæ€æƒ³")]),e._v("ï¼šç†è§£ZooKeeperä¸å…¶ä»–åˆ†å¸ƒå¼åè°ƒç³»ç»Ÿçš„å·®å¼‚ï¼ŒæŒæ¡åœ¨ä¸åŒåœºæ™¯ä¸‹çš„æŠ€æœ¯é€‰å‹åŸåˆ™ã€‚")])]),e._v(" "),_("h3",{attrs:{id:"ğŸ“‹-æœ¬ç« çŸ¥è¯†ç‚¹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“‹-æœ¬ç« çŸ¥è¯†ç‚¹"}},[e._v("#")]),e._v(" ğŸ“‹ æœ¬ç« çŸ¥è¯†ç‚¹")]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("æŠ€æœ¯å¯¹æ¯”")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-chubby-%E6%98%AF%E4%BB%80%E4%B9%88%E5%92%8C-zookeeper-%E6%AF%94%E4%BD%A0%E6%80%8E%E4%B9%88%E7%9C%8B"}},[e._v("ZK vs å…¶ä»–ç³»ç»Ÿ")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-zab-%E5%92%8C-paxos-%E7%AE%97%E6%B3%95%E7%9A%84%E8%81%94%E7%B3%BB%E4%B8%8E%E5%8C%BA%E5%88%AB"}},[e._v("ZAB vs Paxos")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-zk-%E6%98%AF-cp-%E8%BF%98%E6%98%AF-ap"}},[e._v("CAPé€‰æ‹©")])]),e._v(" "),_("li",[_("strong",[e._v("åº”ç”¨é›†æˆ")]),e._v("ï¼š"),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E5%92%8C-dubbo-%E7%9A%84%E5%85%B3%E7%B3%BB"}},[e._v("ä¸Dubboå…³ç³»")]),e._v(" | "),_("a",{attrs:{href:"#%F0%9F%8E%AF-zookeeper-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%92%8C-nginx-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%8C%BA%E5%88%AB"}},[e._v("è´Ÿè½½å‡è¡¡å¯¹æ¯”")])])]),e._v(" "),_("h3",{attrs:{id:"ğŸ¯-zk-æ˜¯-cp-è¿˜æ˜¯-ap"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zk-æ˜¯-cp-è¿˜æ˜¯-ap"}},[e._v("#")]),e._v(" ğŸ¯ zk æ˜¯ CP è¿˜æ˜¯ AP")]),e._v(" "),_("p",[e._v("zkçš„apå’Œcpæ˜¯ä»ä¸åŒçš„è§’åº¦åˆ†æçš„ã€‚")]),e._v(" "),_("p",[e._v("ä»ä¸€ä¸ªè¯»å†™è¯·æ±‚åˆ†æï¼Œä¿è¯äº†å¯ç”¨æ€§ï¼ˆä¸ç”¨é˜»å¡ç­‰å¾…å…¨éƒ¨follweråŒæ­¥å®Œæˆï¼‰ï¼Œä¿è¯ä¸äº†æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ‰€ä»¥æ˜¯apã€‚")]),e._v(" "),_("p",[e._v("ä½†æ˜¯ä»zkæ¶æ„åˆ†æï¼Œzkåœ¨leaderé€‰ä¸¾æœŸé—´ï¼Œä¼šæš‚åœå¯¹å¤–æä¾›æœåŠ¡ï¼ˆä¸ºå•¥ä¼šæš‚åœï¼Œå› ä¸ºzkä¾èµ–leaderæ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§)ï¼Œæ‰€ä»¥ä¸¢å¤±äº†å¯ç”¨æ€§ï¼Œä¿è¯äº†ä¸€è‡´æ€§ï¼Œå³cpã€‚")]),e._v(" "),_("p",[e._v("å†ç»†ç‚¹è¯ï¼Œè¿™ä¸ªcä¸æ˜¯å¼ºä¸€è‡´æ€§ï¼Œè€Œæ˜¯æœ€ç»ˆä¸€è‡´æ€§ã€‚å³ä¸Šé¢çš„å†™æ¡ˆä¾‹ï¼Œæ•°æ®æœ€ç»ˆä¼šåŒæ­¥åˆ°ä¸€è‡´ï¼Œåªæ˜¯æ—¶é—´é—®é¢˜ã€‚")]),e._v(" "),_("p",[e._v("ç»¼ä¸Šï¼Œzkå¹¿ä¹‰ä¸Šæ¥è¯´æ˜¯cpï¼Œç‹­ä¹‰ä¸Šæ˜¯apã€‚")]),e._v(" "),_("hr"),e._v(" "),_("h2",{attrs:{id:"ğŸ¯-zookeeperé¢è¯•å¤‡æˆ˜æŒ‡å—"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¯-zookeeperé¢è¯•å¤‡æˆ˜æŒ‡å—"}},[e._v("#")]),e._v(" ğŸ¯ ZooKeeperé¢è¯•å¤‡æˆ˜æŒ‡å—")]),e._v(" "),_("h3",{attrs:{id:"ğŸ’¡-é«˜é¢‘è€ƒç‚¹top10"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’¡-é«˜é¢‘è€ƒç‚¹top10"}},[e._v("#")]),e._v(" ğŸ’¡ é«˜é¢‘è€ƒç‚¹Top10")]),e._v(" "),_("ol",[_("li",[_("strong",[e._v("ğŸ”¥ ZABåè®®åŸç†")]),e._v(" - ZKä¸€è‡´æ€§ç®—æ³•çš„æ ¸å¿ƒï¼Œå¿…è€ƒæ¦‚å¿µ")]),e._v(" "),_("li",[_("strong",[e._v("âš¡ Leaderé€‰ä¸¾æœºåˆ¶")]),e._v(" - åˆ†å¸ƒå¼ä¸€è‡´æ€§çš„å…³é”®æŠ€æœ¯")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ“Š æ•°æ®ä¸€è‡´æ€§ä¿è¯")]),e._v(" - é¡ºåºä¸€è‡´æ€§ã€åŸå­æ€§ç­‰ç‰¹æ€§")]),e._v(" "),_("li",[_("strong",[e._v("ğŸš¨ è„‘è£‚é—®é¢˜")]),e._v(" - åˆ†å¸ƒå¼ç³»ç»Ÿç»å…¸é—®é¢˜ï¼Œè§£å†³æ€è·¯è¦æ¸…æ™°")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ” Watcheræœºåˆ¶")]),e._v(" - äº‹ä»¶é€šçŸ¥çš„å®ç°åŸç†")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ’¾ åˆ†ç‰‡ä¸å‰¯æœ¬")]),e._v(" - æ•°æ®åˆ†å¸ƒå’Œé«˜å¯ç”¨ä¿è¯")]),e._v(" "),_("li",[_("strong",[e._v("âš™ï¸ èŠ‚ç‚¹ç±»å‹ä¸ç‰¹æ€§")]),e._v(" - æŒä¹…ã€ä¸´æ—¶ã€é¡ºåºèŠ‚ç‚¹çš„åº”ç”¨")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ”§ åˆ†å¸ƒå¼é”å®ç°")]),e._v(" - ZKçš„å…¸å‹åº”ç”¨åœºæ™¯")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ“ˆ é›†ç¾¤æ¶æ„è®¾è®¡")]),e._v(" - ç”Ÿäº§ç¯å¢ƒçš„éƒ¨ç½²å’Œè¿ç»´")]),e._v(" "),_("li",[_("strong",[e._v("ğŸ’¼ å®é™…é¡¹ç›®ç»éªŒ")]),e._v(" - èƒ½ç»“åˆå…·ä½“åœºæ™¯è°ˆæŠ€æœ¯åº”ç”¨")])]),e._v(" "),_("h3",{attrs:{id:"ğŸ­-é¢è¯•ç­”é¢˜æŠ€å·§"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ­-é¢è¯•ç­”é¢˜æŠ€å·§"}},[e._v("#")]),e._v(" ğŸ­ é¢è¯•ç­”é¢˜æŠ€å·§")]),e._v(" "),_("p",[_("strong",[e._v("ğŸ“ æ ‡å‡†å›ç­”ç»“æ„")])]),e._v(" "),_("ol",[_("li",[_("strong",[e._v("æ¦‚å¿µå®šä¹‰")]),e._v("ï¼ˆ30ç§’ï¼‰ - ç”¨ä¸€å¥è¯è¯´æ¸…æ¥šæ˜¯ä»€ä¹ˆ")]),e._v(" "),_("li",[_("strong",[e._v("å·¥ä½œåŸç†")]),e._v("ï¼ˆ1åˆ†é’Ÿï¼‰ - é˜è¿°æ ¸å¿ƒæœºåˆ¶å’Œæµç¨‹")]),e._v(" "),_("li",[_("strong",[e._v("åº”ç”¨åœºæ™¯")]),e._v("ï¼ˆ30ç§’ï¼‰ - ä»€ä¹ˆæ—¶å€™ç”¨ï¼Œè§£å†³ä»€ä¹ˆé—®é¢˜")]),e._v(" "),_("li",[_("strong",[e._v("å…·ä½“ç¤ºä¾‹")]),e._v("ï¼ˆ1åˆ†é’Ÿï¼‰ - æœ€å¥½æ˜¯è‡ªå·±é¡¹ç›®çš„çœŸå®æ¡ˆä¾‹")]),e._v(" "),_("li",[_("strong",[e._v("æ³¨æ„äº‹é¡¹")]),e._v("ï¼ˆ30ç§’ï¼‰ - ä½“ç°æ·±åº¦æ€è€ƒå’Œå®æˆ˜ç»éªŒ")])]),e._v(" "),_("p",[_("strong",[e._v("ğŸ—£ï¸ è¡¨è¾¾è¯æœ¯æ¨¡æ¿")])]),e._v(" "),_("ul",[_("li",[e._v('"ä»æˆ‘çš„é¡¹ç›®ç»éªŒæ¥çœ‹..."')]),e._v(" "),_("li",[e._v('"åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼š..."')]),e._v(" "),_("li",[e._v('"è¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯..."')]),e._v(" "),_("li",[e._v('"ç›¸æ¯”äºå…¶ä»–åˆ†å¸ƒå¼åè°ƒç³»ç»Ÿï¼ŒZKçš„ä¼˜åŠ¿åœ¨äº..."')]),e._v(" "),_("li",[e._v('"åœ¨å¤§è§„æ¨¡é›†ç¾¤åœºæ™¯ä¸‹ï¼Œæ¨èçš„åšæ³•æ˜¯..."')])]),e._v(" "),_("h3",{attrs:{id:"ğŸš€-è¿›é˜¶åŠ åˆ†ç‚¹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš€-è¿›é˜¶åŠ åˆ†ç‚¹"}},[e._v("#")]),e._v(" ğŸš€ è¿›é˜¶åŠ åˆ†ç‚¹")]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("åº•å±‚åŸç†")]),e._v("ï¼šèƒ½ä»ZABåè®®å±‚é¢è§£é‡ŠZKçš„ä¸€è‡´æ€§ä¿è¯")]),e._v(" "),_("li",[_("strong",[e._v("æ€§èƒ½è°ƒä¼˜")]),e._v("ï¼šæœ‰å…·ä½“çš„é›†ç¾¤ä¼˜åŒ–ç»éªŒå’Œæ•°æ®å¯¹æ¯”")]),e._v(" "),_("li",[_("strong",[e._v("æ¶æ„è®¾è®¡")]),e._v("ï¼šèƒ½è®¾è®¡é€‚åˆä¸šåŠ¡åœºæ™¯çš„ZKé›†ç¾¤æ–¹æ¡ˆ")]),e._v(" "),_("li",[_("strong",[e._v("æ•…éšœå¤„ç†")]),e._v("ï¼šæœ‰æ’æŸ¥å’Œè§£å†³ZKé›†ç¾¤é—®é¢˜çš„ç»éªŒ")]),e._v(" "),_("li",[_("strong",[e._v("æŠ€æœ¯é€‰å‹")]),e._v("ï¼šèƒ½å‡†ç¡®åˆ†æZKä¸å…¶ä»–æŠ€æœ¯çš„é€‚ç”¨åœºæ™¯")])]),e._v(" "),_("h3",{attrs:{id:"ğŸ“š-å»¶ä¼¸å­¦ä¹ å»ºè®®"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“š-å»¶ä¼¸å­¦ä¹ å»ºè®®"}},[e._v("#")]),e._v(" ğŸ“š å»¶ä¼¸å­¦ä¹ å»ºè®®")]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("å®˜æ–¹æ–‡æ¡£")]),e._v("ï¼šZooKeeperå®˜æ–¹æ–‡æ¡£æ˜¯æœ€æƒå¨çš„å­¦ä¹ èµ„æ–™")]),e._v(" "),_("li",[_("strong",[e._v("æºç ç ”è¯»")]),e._v("ï¼šæ·±å…¥ç†è§£ZABåè®®ã€Watcheræœºåˆ¶çš„å®ç°")]),e._v(" "),_("li",[_("strong",[e._v("å®æˆ˜ç»ƒä¹ ")]),e._v("ï¼šæ­å»ºZKé›†ç¾¤ï¼ŒåŠ¨æ‰‹éªŒè¯å„ç§ç‰¹æ€§")]),e._v(" "),_("li",[_("strong",[e._v("æ¡ˆä¾‹åˆ†æ")]),e._v("ï¼šç ”ç©¶å¤§å‚çš„ZKåº”ç”¨æ¡ˆä¾‹å’Œæœ€ä½³å®è·µ")]),e._v(" "),_("li",[_("strong",[e._v("ç¤¾åŒºäº¤æµ")]),e._v("ï¼šå…³æ³¨ZKç›¸å…³çš„æŠ€æœ¯åšå®¢å’Œå¼€æºé¡¹ç›®")])]),e._v(" "),_("hr"),e._v(" "),_("h2",{attrs:{id:"ğŸ‰-æ€»ç»“"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ‰-æ€»ç»“"}},[e._v("#")]),e._v(" ğŸ‰ æ€»ç»“")]),e._v(" "),_("p",[_("strong",[e._v("ZooKeeperä½œä¸ºåˆ†å¸ƒå¼åè°ƒæœåŠ¡çš„ç»å…¸å®ç°")]),e._v("ï¼Œæ˜¯æ„å»ºå¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºçŸ³ã€‚ä»é…ç½®ç®¡ç†åˆ°æœåŠ¡å‘ç°ï¼Œä»åˆ†å¸ƒå¼é”åˆ°Leaderé€‰ä¸¾ï¼ŒZKåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å‘æŒ¥ç€ä¸å¯æ›¿ä»£çš„ä½œç”¨ã€‚")]),e._v(" "),_("p",[_("strong",[e._v("æŒæ¡ZKçš„æ ¸å¿ƒåœ¨äºç†è§£å…¶ä¸€è‡´æ€§ä¿è¯æœºåˆ¶")]),e._v("ï¼šé€šè¿‡ZABåè®®å®ç°åˆ†å¸ƒå¼ä¸€è‡´æ€§ï¼Œé€šè¿‡Leaderé€‰ä¸¾ä¿è¯é›†ç¾¤ç¨³å®šï¼Œé€šè¿‡Watcheræœºåˆ¶å®ç°äº‹ä»¶é€šçŸ¥ï¼Œé€šè¿‡èŠ‚ç‚¹ç±»å‹æ”¯æŒå„ç§åˆ†å¸ƒå¼åº”ç”¨åœºæ™¯ã€‚")]),e._v(" "),_("p",[_("strong",[e._v("è®°ä½ï¼šé¢è¯•å®˜è€ƒå¯Ÿçš„ä¸æ˜¯ä½ èƒŒäº†å¤šå°‘æ¦‚å¿µï¼Œè€Œæ˜¯ä½ èƒ½å¦åœ¨å®é™…é¡¹ç›®ä¸­çµæ´»è¿ç”¨ZKè§£å†³åˆ†å¸ƒå¼åè°ƒé—®é¢˜ã€‚")])]),e._v(" "),_("p",[_("strong",[e._v("æœ€åä¸€å¥è¯")]),e._v("ï¼š"),_("em",[e._v('"åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§åœ¨äºä¸€è‡´æ€§ï¼Œè€ŒZooKeeperæ­£æ˜¯è§£å†³è¿™ä¸€å¤æ‚æ€§çš„ä¼˜é›…æ–¹æ¡ˆï¼"')])]),e._v(" "),_("hr"),e._v(" "),_("blockquote",[_("p",[e._v("ğŸ’Œ "),_("strong",[e._v("åšæŒå­¦ä¹ ï¼ŒæŒç»­æˆé•¿ï¼")]),_("br"),e._v("\nå¦‚æœè¿™ä»½ææ–™å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè®°å¾—åœ¨å®é™…é¢è¯•ä¸­ç»“åˆè‡ªå·±çš„ç†è§£å’Œç»éªŒæ¥å›ç­”ï¼Œè®©æŠ€æœ¯çŸ¥è¯†çœŸæ­£ä¸ºä½ æ‰€ç”¨ï¼")])])])}),[],!1,null,null,null);v.default=t.exports}}]);